(function(Ec,ab){typeof exports=="object"&&typeof module<"u"?ab(exports):typeof define=="function"&&define.amd?define(["exports"],ab):(Ec=typeof globalThis<"u"?globalThis:Ec||self,ab(Ec.HumanVerify={}))})(this,function(Ec){"use strict";function ab(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rL(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function GG(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var i$={exports:{}},Fi={},o$={exports:{}},In={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sL;function qG(){if(sL)return In;sL=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function y(K){return K===null||typeof K!="object"?null:(K=g&&K[g]||K["@@iterator"],typeof K=="function"?K:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function C(K,Z,De){this.props=K,this.context=Z,this.refs=k,this.updater=De||x}C.prototype.isReactComponent={},C.prototype.setState=function(K,Z){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,Z,"setState")},C.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function N(){}N.prototype=C.prototype;function $(K,Z,De){this.props=K,this.context=Z,this.refs=k,this.updater=De||x}var A=$.prototype=new N;A.constructor=$,S(A,C.prototype),A.isPureReactComponent=!0;var D=Array.isArray,L=Object.prototype.hasOwnProperty,P={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function B(K,Z,De){var Ae,Fe={},Pe=null,He=null;if(Z!=null)for(Ae in Z.ref!==void 0&&(He=Z.ref),Z.key!==void 0&&(Pe=""+Z.key),Z)L.call(Z,Ae)&&!W.hasOwnProperty(Ae)&&(Fe[Ae]=Z[Ae]);var Ke=arguments.length-2;if(Ke===1)Fe.children=De;else if(1<Ke){for(var Xe=Array(Ke),ct=0;ct<Ke;ct++)Xe[ct]=arguments[ct+2];Fe.children=Xe}if(K&&K.defaultProps)for(Ae in Ke=K.defaultProps,Ke)Fe[Ae]===void 0&&(Fe[Ae]=Ke[Ae]);return{$$typeof:n,type:K,key:Pe,ref:He,props:Fe,_owner:P.current}}function G(K,Z){return{$$typeof:n,type:K.type,key:Z,ref:K.ref,props:K.props,_owner:K._owner}}function X(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function re(K){var Z={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(De){return Z[De]})}var ue=/\/+/g;function ne(K,Z){return typeof K=="object"&&K!==null&&K.key!=null?re(""+K.key):Z.toString(36)}function me(K,Z,De,Ae,Fe){var Pe=typeof K;(Pe==="undefined"||Pe==="boolean")&&(K=null);var He=!1;if(K===null)He=!0;else switch(Pe){case"string":case"number":He=!0;break;case"object":switch(K.$$typeof){case n:case e:He=!0}}if(He)return He=K,Fe=Fe(He),K=Ae===""?"."+ne(He,0):Ae,D(Fe)?(De="",K!=null&&(De=K.replace(ue,"$&/")+"/"),me(Fe,Z,De,"",function(ct){return ct})):Fe!=null&&(X(Fe)&&(Fe=G(Fe,De+(!Fe.key||He&&He.key===Fe.key?"":(""+Fe.key).replace(ue,"$&/")+"/")+K)),Z.push(Fe)),1;if(He=0,Ae=Ae===""?".":Ae+":",D(K))for(var Ke=0;Ke<K.length;Ke++){Pe=K[Ke];var Xe=Ae+ne(Pe,Ke);He+=me(Pe,Z,De,Xe,Fe)}else if(Xe=y(K),typeof Xe=="function")for(K=Xe.call(K),Ke=0;!(Pe=K.next()).done;)Pe=Pe.value,Xe=Ae+ne(Pe,Ke++),He+=me(Pe,Z,De,Xe,Fe);else if(Pe==="object")throw Z=String(K),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return He}function ge(K,Z,De){if(K==null)return K;var Ae=[],Fe=0;return me(K,Ae,"","",function(Pe){return Z.call(De,Pe,Fe++)}),Ae}function be(K){if(K._status===-1){var Z=K._result;Z=Z(),Z.then(function(De){(K._status===0||K._status===-1)&&(K._status=1,K._result=De)},function(De){(K._status===0||K._status===-1)&&(K._status=2,K._result=De)}),K._status===-1&&(K._status=0,K._result=Z)}if(K._status===1)return K._result.default;throw K._result}var pe={current:null},te={transition:null},ye={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:te,ReactCurrentOwner:P};function ce(){throw Error("act(...) is not supported in production builds of React.")}return In.Children={map:ge,forEach:function(K,Z,De){ge(K,function(){Z.apply(this,arguments)},De)},count:function(K){var Z=0;return ge(K,function(){Z++}),Z},toArray:function(K){return ge(K,function(Z){return Z})||[]},only:function(K){if(!X(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},In.Component=C,In.Fragment=t,In.Profiler=s,In.PureComponent=$,In.StrictMode=r,In.Suspense=c,In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,In.act=ce,In.cloneElement=function(K,Z,De){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Ae=S({},K.props),Fe=K.key,Pe=K.ref,He=K._owner;if(Z!=null){if(Z.ref!==void 0&&(Pe=Z.ref,He=P.current),Z.key!==void 0&&(Fe=""+Z.key),K.type&&K.type.defaultProps)var Ke=K.type.defaultProps;for(Xe in Z)L.call(Z,Xe)&&!W.hasOwnProperty(Xe)&&(Ae[Xe]=Z[Xe]===void 0&&Ke!==void 0?Ke[Xe]:Z[Xe])}var Xe=arguments.length-2;if(Xe===1)Ae.children=De;else if(1<Xe){Ke=Array(Xe);for(var ct=0;ct<Xe;ct++)Ke[ct]=arguments[ct+2];Ae.children=Ke}return{$$typeof:n,type:K.type,key:Fe,ref:Pe,props:Ae,_owner:He}},In.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:a,_context:K},K.Consumer=K},In.createElement=B,In.createFactory=function(K){var Z=B.bind(null,K);return Z.type=K,Z},In.createRef=function(){return{current:null}},In.forwardRef=function(K){return{$$typeof:u,render:K}},In.isValidElement=X,In.lazy=function(K){return{$$typeof:m,_payload:{_status:-1,_result:K},_init:be}},In.memo=function(K,Z){return{$$typeof:d,type:K,compare:Z===void 0?null:Z}},In.startTransition=function(K){var Z=te.transition;te.transition={};try{K()}finally{te.transition=Z}},In.unstable_act=ce,In.useCallback=function(K,Z){return pe.current.useCallback(K,Z)},In.useContext=function(K){return pe.current.useContext(K)},In.useDebugValue=function(){},In.useDeferredValue=function(K){return pe.current.useDeferredValue(K)},In.useEffect=function(K,Z){return pe.current.useEffect(K,Z)},In.useId=function(){return pe.current.useId()},In.useImperativeHandle=function(K,Z,De){return pe.current.useImperativeHandle(K,Z,De)},In.useInsertionEffect=function(K,Z){return pe.current.useInsertionEffect(K,Z)},In.useLayoutEffect=function(K,Z){return pe.current.useLayoutEffect(K,Z)},In.useMemo=function(K,Z){return pe.current.useMemo(K,Z)},In.useReducer=function(K,Z,De){return pe.current.useReducer(K,Z,De)},In.useRef=function(K){return pe.current.useRef(K)},In.useState=function(K){return pe.current.useState(K)},In.useSyncExternalStore=function(K,Z,De){return pe.current.useSyncExternalStore(K,Z,De)},In.useTransition=function(){return pe.current.useTransition()},In.version="18.3.1",In}var ib={exports:{}};/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ib.exports;var aL;function KG(){return aL||(aL=1,function(n,e){process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var t="18.3.1",r=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),C=Symbol.iterator,N="@@iterator";function $(z){if(z===null||typeof z!="object")return null;var ee=C&&z[C]||z[N];return typeof ee=="function"?ee:null}var A={current:null},D={transition:null},L={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},P={current:null},W={},B=null;function G(z){B=z}W.setExtraStackFrame=function(z){B=z},W.getCurrentStack=null,W.getStackAddendum=function(){var z="";B&&(z+=B);var ee=W.getCurrentStack;return ee&&(z+=ee()||""),z};var X=!1,re=!1,ue=!1,ne=!1,me=!1,ge={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:P};ge.ReactDebugCurrentFrame=W,ge.ReactCurrentActQueue=L;function be(z){{for(var ee=arguments.length,Ee=new Array(ee>1?ee-1:0),Oe=1;Oe<ee;Oe++)Ee[Oe-1]=arguments[Oe];te("warn",z,Ee)}}function pe(z){{for(var ee=arguments.length,Ee=new Array(ee>1?ee-1:0),Oe=1;Oe<ee;Oe++)Ee[Oe-1]=arguments[Oe];te("error",z,Ee)}}function te(z,ee,Ee){{var Oe=ge.ReactDebugCurrentFrame,et=Oe.getStackAddendum();et!==""&&(ee+="%s",Ee=Ee.concat([et]));var Ut=Ee.map(function(lt){return String(lt)});Ut.unshift("Warning: "+ee),Function.prototype.apply.call(console[z],console,Ut)}}var ye={};function ce(z,ee){{var Ee=z.constructor,Oe=Ee&&(Ee.displayName||Ee.name)||"ReactClass",et=Oe+"."+ee;if(ye[et])return;pe("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",ee,Oe),ye[et]=!0}}var K={isMounted:function(z){return!1},enqueueForceUpdate:function(z,ee,Ee){ce(z,"forceUpdate")},enqueueReplaceState:function(z,ee,Ee,Oe){ce(z,"replaceState")},enqueueSetState:function(z,ee,Ee,Oe){ce(z,"setState")}},Z=Object.assign,De={};Object.freeze(De);function Ae(z,ee,Ee){this.props=z,this.context=ee,this.refs=De,this.updater=Ee||K}Ae.prototype.isReactComponent={},Ae.prototype.setState=function(z,ee){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ee,"setState")},Ae.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};{var Fe={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},Pe=function(z,ee){Object.defineProperty(Ae.prototype,z,{get:function(){be("%s(...) is deprecated in plain JavaScript React classes. %s",ee[0],ee[1])}})};for(var He in Fe)Fe.hasOwnProperty(He)&&Pe(He,Fe[He])}function Ke(){}Ke.prototype=Ae.prototype;function Xe(z,ee,Ee){this.props=z,this.context=ee,this.refs=De,this.updater=Ee||K}var ct=Xe.prototype=new Ke;ct.constructor=Xe,Z(ct,Ae.prototype),ct.isPureReactComponent=!0;function Tt(){var z={current:null};return Object.seal(z),z}var tn=Array.isArray;function Xt(z){return tn(z)}function hn(z){{var ee=typeof Symbol=="function"&&Symbol.toStringTag,Ee=ee&&z[Symbol.toStringTag]||z.constructor.name||"Object";return Ee}}function Zt(z){try{return Ne(z),!1}catch{return!0}}function Ne(z){return""+z}function Je(z){if(Zt(z))return pe("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",hn(z)),Ne(z)}function ht(z,ee,Ee){var Oe=z.displayName;if(Oe)return Oe;var et=ee.displayName||ee.name||"";return et!==""?Ee+"("+et+")":Ee}function Lt(z){return z.displayName||"Context"}function it(z){if(z==null)return null;if(typeof z.tag=="number"&&pe("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof z=="function")return z.displayName||z.name||null;if(typeof z=="string")return z;switch(z){case a:return"Fragment";case s:return"Portal";case u:return"Profiler";case o:return"StrictMode";case g:return"Suspense";case y:return"SuspenseList"}if(typeof z=="object")switch(z.$$typeof){case d:var ee=z;return Lt(ee)+".Consumer";case c:var Ee=z;return Lt(Ee._context)+".Provider";case m:return ht(z,z.render,"ForwardRef");case x:var Oe=z.displayName||null;return Oe!==null?Oe:it(z.type)||"Memo";case S:{var et=z,Ut=et._payload,lt=et._init;try{return it(lt(Ut))}catch{return null}}}return null}var mt=Object.prototype.hasOwnProperty,Yt={key:!0,ref:!0,__self:!0,__source:!0},jt,Tn,nn;nn={};function Vn(z){if(mt.call(z,"ref")){var ee=Object.getOwnPropertyDescriptor(z,"ref").get;if(ee&&ee.isReactWarning)return!1}return z.ref!==void 0}function tr(z){if(mt.call(z,"key")){var ee=Object.getOwnPropertyDescriptor(z,"key").get;if(ee&&ee.isReactWarning)return!1}return z.key!==void 0}function Zn(z,ee){var Ee=function(){jt||(jt=!0,pe("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ee))};Ee.isReactWarning=!0,Object.defineProperty(z,"key",{get:Ee,configurable:!0})}function Ir(z,ee){var Ee=function(){Tn||(Tn=!0,pe("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ee))};Ee.isReactWarning=!0,Object.defineProperty(z,"ref",{get:Ee,configurable:!0})}function Ze(z){if(typeof z.ref=="string"&&P.current&&z.__self&&P.current.stateNode!==z.__self){var ee=it(P.current.type);nn[ee]||(pe('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',ee,z.ref),nn[ee]=!0)}}var pt=function(z,ee,Ee,Oe,et,Ut,lt){var Gt={$$typeof:r,type:z,key:ee,ref:Ee,props:lt,_owner:Ut};return Gt._store={},Object.defineProperty(Gt._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(Gt,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Oe}),Object.defineProperty(Gt,"_source",{configurable:!1,enumerable:!1,writable:!1,value:et}),Object.freeze&&(Object.freeze(Gt.props),Object.freeze(Gt)),Gt};function Pt(z,ee,Ee){var Oe,et={},Ut=null,lt=null,Gt=null,En=null;if(ee!=null){Vn(ee)&&(lt=ee.ref,Ze(ee)),tr(ee)&&(Je(ee.key),Ut=""+ee.key),Gt=ee.__self===void 0?null:ee.__self,En=ee.__source===void 0?null:ee.__source;for(Oe in ee)mt.call(ee,Oe)&&!Yt.hasOwnProperty(Oe)&&(et[Oe]=ee[Oe])}var zn=arguments.length-2;if(zn===1)et.children=Ee;else if(zn>1){for(var br=Array(zn),lr=0;lr<zn;lr++)br[lr]=arguments[lr+2];Object.freeze&&Object.freeze(br),et.children=br}if(z&&z.defaultProps){var vn=z.defaultProps;for(Oe in vn)et[Oe]===void 0&&(et[Oe]=vn[Oe])}if(Ut||lt){var ur=typeof z=="function"?z.displayName||z.name||"Unknown":z;Ut&&Zn(et,ur),lt&&Ir(et,ur)}return pt(z,Ut,lt,Gt,En,P.current,et)}function Vt(z,ee){var Ee=pt(z.type,ee,z.ref,z._self,z._source,z._owner,z.props);return Ee}function jn(z,ee,Ee){if(z==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Oe,et=Z({},z.props),Ut=z.key,lt=z.ref,Gt=z._self,En=z._source,zn=z._owner;if(ee!=null){Vn(ee)&&(lt=ee.ref,zn=P.current),tr(ee)&&(Je(ee.key),Ut=""+ee.key);var br;z.type&&z.type.defaultProps&&(br=z.type.defaultProps);for(Oe in ee)mt.call(ee,Oe)&&!Yt.hasOwnProperty(Oe)&&(ee[Oe]===void 0&&br!==void 0?et[Oe]=br[Oe]:et[Oe]=ee[Oe])}var lr=arguments.length-2;if(lr===1)et.children=Ee;else if(lr>1){for(var vn=Array(lr),ur=0;ur<lr;ur++)vn[ur]=arguments[ur+2];et.children=vn}return pt(z.type,Ut,lt,Gt,En,zn,et)}function mr(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}var ar=".",ir=":";function nr(z){var ee=/[=:]/g,Ee={"=":"=0",":":"=2"},Oe=z.replace(ee,function(et){return Ee[et]});return"$"+Oe}var Bt=!1,Un=/\/+/g;function Sa(z){return z.replace(Un,"$&/")}function as(z,ee){return typeof z=="object"&&z!==null&&z.key!=null?(Je(z.key),nr(""+z.key)):ee.toString(36)}function Ya(z,ee,Ee,Oe,et){var Ut=typeof z;(Ut==="undefined"||Ut==="boolean")&&(z=null);var lt=!1;if(z===null)lt=!0;else switch(Ut){case"string":case"number":lt=!0;break;case"object":switch(z.$$typeof){case r:case s:lt=!0}}if(lt){var Gt=z,En=et(Gt),zn=Oe===""?ar+as(Gt,0):Oe;if(Xt(En)){var br="";zn!=null&&(br=Sa(zn)+"/"),Ya(En,ee,br,"",function(M0){return M0})}else En!=null&&(mr(En)&&(En.key&&(!Gt||Gt.key!==En.key)&&Je(En.key),En=Vt(En,Ee+(En.key&&(!Gt||Gt.key!==En.key)?Sa(""+En.key)+"/":"")+zn)),ee.push(En));return 1}var lr,vn,ur=0,Fr=Oe===""?ar:Oe+ir;if(Xt(z))for(var Xu=0;Xu<z.length;Xu++)lr=z[Xu],vn=Fr+as(lr,Xu),ur+=Ya(lr,ee,Ee,vn,et);else{var xp=$(z);if(typeof xp=="function"){var Zl=z;xp===Zl.entries&&(Bt||be("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Bt=!0);for(var wp=xp.call(Zl),nf,L0=0;!(nf=wp.next()).done;)lr=nf.value,vn=Fr+as(lr,L0++),ur+=Ya(lr,ee,Ee,vn,et)}else if(Ut==="object"){var Sy=String(z);throw new Error("Objects are not valid as a React child (found: "+(Sy==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Sy)+"). If you meant to render a collection of children, use an array instead.")}}return ur}function tl(z,ee,Ee){if(z==null)return z;var Oe=[],et=0;return Ya(z,Oe,"","",function(Ut){return ee.call(Ee,Ut,et++)}),Oe}function nl(z){var ee=0;return tl(z,function(){ee++}),ee}function Xl(z,ee,Ee){tl(z,function(){ee.apply(this,arguments)},Ee)}function rl(z){return tl(z,function(ee){return ee})||[]}function Vu(z){if(!mr(z))throw new Error("React.Children.only expected to receive a single React element child.");return z}function Xc(z){var ee={$$typeof:d,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};ee.Provider={$$typeof:c,_context:ee};var Ee=!1,Oe=!1,et=!1;{var Ut={$$typeof:d,_context:ee};Object.defineProperties(Ut,{Provider:{get:function(){return Oe||(Oe=!0,pe("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),ee.Provider},set:function(lt){ee.Provider=lt}},_currentValue:{get:function(){return ee._currentValue},set:function(lt){ee._currentValue=lt}},_currentValue2:{get:function(){return ee._currentValue2},set:function(lt){ee._currentValue2=lt}},_threadCount:{get:function(){return ee._threadCount},set:function(lt){ee._threadCount=lt}},Consumer:{get:function(){return Ee||(Ee=!0,pe("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),ee.Consumer}},displayName:{get:function(){return ee.displayName},set:function(lt){et||(be("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",lt),et=!0)}}}),ee.Consumer=Ut}return ee._currentRenderer=null,ee._currentRenderer2=null,ee}var Ca=-1,Ta=0,Hs=1,sl=2;function Eo(z){if(z._status===Ca){var ee=z._result,Ee=ee();if(Ee.then(function(Ut){if(z._status===Ta||z._status===Ca){var lt=z;lt._status=Hs,lt._result=Ut}},function(Ut){if(z._status===Ta||z._status===Ca){var lt=z;lt._status=sl,lt._result=Ut}}),z._status===Ca){var Oe=z;Oe._status=Ta,Oe._result=Ee}}if(z._status===Hs){var et=z._result;return et===void 0&&pe(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,et),"default"in et||pe(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,et),et.default}else throw z._result}function al(z){var ee={_status:Ca,_result:z},Ee={$$typeof:S,_payload:ee,_init:Eo};{var Oe,et;Object.defineProperties(Ee,{defaultProps:{configurable:!0,get:function(){return Oe},set:function(Ut){pe("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Oe=Ut,Object.defineProperty(Ee,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return et},set:function(Ut){pe("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),et=Ut,Object.defineProperty(Ee,"propTypes",{enumerable:!0})}}})}return Ee}function il(z){z!=null&&z.$$typeof===x?pe("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof z!="function"?pe("forwardRef requires a render function but was given %s.",z===null?"null":typeof z):z.length!==0&&z.length!==2&&pe("forwardRef render functions accept exactly two parameters: props and ref. %s",z.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),z!=null&&(z.defaultProps!=null||z.propTypes!=null)&&pe("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var ee={$$typeof:m,render:z};{var Ee;Object.defineProperty(ee,"displayName",{enumerable:!1,configurable:!0,get:function(){return Ee},set:function(Oe){Ee=Oe,!z.name&&!z.displayName&&(z.displayName=Oe)}})}return ee}var se;se=Symbol.for("react.module.reference");function Ue(z){return!!(typeof z=="string"||typeof z=="function"||z===a||z===u||me||z===o||z===g||z===y||ne||z===k||X||re||ue||typeof z=="object"&&z!==null&&(z.$$typeof===S||z.$$typeof===x||z.$$typeof===c||z.$$typeof===d||z.$$typeof===m||z.$$typeof===se||z.getModuleId!==void 0))}function ut(z,ee){Ue(z)||pe("memo: The first argument must be a component. Instead received: %s",z===null?"null":typeof z);var Ee={$$typeof:x,type:z,compare:ee===void 0?null:ee};{var Oe;Object.defineProperty(Ee,"displayName",{enumerable:!1,configurable:!0,get:function(){return Oe},set:function(et){Oe=et,!z.name&&!z.displayName&&(z.displayName=et)}})}return Ee}function St(){var z=A.current;return z===null&&pe(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),z}function fn(z){var ee=St();if(z._context!==void 0){var Ee=z._context;Ee.Consumer===z?pe("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):Ee.Provider===z&&pe("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return ee.useContext(z)}function an(z){var ee=St();return ee.useState(z)}function kn(z,ee,Ee){var Oe=St();return Oe.useReducer(z,ee,Ee)}function bn(z){var ee=St();return ee.useRef(z)}function qr(z,ee){var Ee=St();return Ee.useEffect(z,ee)}function vr(z,ee){var Ee=St();return Ee.useInsertionEffect(z,ee)}function Tr(z,ee){var Ee=St();return Ee.useLayoutEffect(z,ee)}function js(z,ee){var Ee=St();return Ee.useCallback(z,ee)}function No(z,ee){var Ee=St();return Ee.useMemo(z,ee)}function $o(z,ee,Ee){var Oe=St();return Oe.useImperativeHandle(z,ee,Ee)}function dn(z,ee){{var Ee=St();return Ee.useDebugValue(z,ee)}}function mn(){var z=St();return z.useTransition()}function Io(z){var ee=St();return ee.useDeferredValue(z)}function Yc(){var z=St();return z.useId()}function Qc(z,ee,Ee){var Oe=St();return Oe.useSyncExternalStore(z,ee,Ee)}var Uu=0,bd,Wu,Qa,gp,ka,xy,wy;function xd(){}xd.__reactDisabledLog=!0;function Hu(){{if(Uu===0){bd=console.log,Wu=console.info,Qa=console.warn,gp=console.error,ka=console.group,xy=console.groupCollapsed,wy=console.groupEnd;var z={configurable:!0,enumerable:!0,value:xd,writable:!0};Object.defineProperties(console,{info:z,log:z,warn:z,error:z,group:z,groupCollapsed:z,groupEnd:z})}Uu++}}function Ci(){{if(Uu--,Uu===0){var z={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Z({},z,{value:bd}),info:Z({},z,{value:Wu}),warn:Z({},z,{value:Qa}),error:Z({},z,{value:gp}),group:Z({},z,{value:ka}),groupCollapsed:Z({},z,{value:xy}),groupEnd:Z({},z,{value:wy})})}Uu<0&&pe("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Ro=ge.ReactCurrentDispatcher,Do;function wd(z,ee,Ee){{if(Do===void 0)try{throw Error()}catch(et){var Oe=et.stack.trim().match(/\n( *(at )?)/);Do=Oe&&Oe[1]||""}return`
`+Do+z}}var Zc=!1,ju;{var Sd=typeof WeakMap=="function"?WeakMap:Map;ju=new Sd}function Cd(z,ee){if(!z||Zc)return"";{var Ee=ju.get(z);if(Ee!==void 0)return Ee}var Oe;Zc=!0;var et=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var Ut;Ut=Ro.current,Ro.current=null,Hu();try{if(ee){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(Fr){Oe=Fr}Reflect.construct(z,[],lt)}else{try{lt.call()}catch(Fr){Oe=Fr}z.call(lt.prototype)}}else{try{throw Error()}catch(Fr){Oe=Fr}z()}}catch(Fr){if(Fr&&Oe&&typeof Fr.stack=="string"){for(var Gt=Fr.stack.split(`
`),En=Oe.stack.split(`
`),zn=Gt.length-1,br=En.length-1;zn>=1&&br>=0&&Gt[zn]!==En[br];)br--;for(;zn>=1&&br>=0;zn--,br--)if(Gt[zn]!==En[br]){if(zn!==1||br!==1)do if(zn--,br--,br<0||Gt[zn]!==En[br]){var lr=`
`+Gt[zn].replace(" at new "," at ");return z.displayName&&lr.includes("<anonymous>")&&(lr=lr.replace("<anonymous>",z.displayName)),typeof z=="function"&&ju.set(z,lr),lr}while(zn>=1&&br>=0);break}}}finally{Zc=!1,Ro.current=Ut,Ci(),Error.prepareStackTrace=et}var vn=z?z.displayName||z.name:"",ur=vn?wd(vn):"";return typeof z=="function"&&ju.set(z,ur),ur}function Yl(z,ee,Ee){return Cd(z,!1)}function O0(z){var ee=z.prototype;return!!(ee&&ee.isReactComponent)}function Ql(z,ee,Ee){if(z==null)return"";if(typeof z=="function")return Cd(z,O0(z));if(typeof z=="string")return wd(z);switch(z){case g:return wd("Suspense");case y:return wd("SuspenseList")}if(typeof z=="object")switch(z.$$typeof){case m:return Yl(z.render);case x:return Ql(z.type,ee,Ee);case S:{var Oe=z,et=Oe._payload,Ut=Oe._init;try{return Ql(Ut(et),ee,Ee)}catch{}}}return""}var Gn={},Td=ge.ReactDebugCurrentFrame;function Mn(z){if(z){var ee=z._owner,Ee=Ql(z.type,z._source,ee?ee.type:null);Td.setExtraStackFrame(Ee)}else Td.setExtraStackFrame(null)}function yp(z,ee,Ee,Oe,et){{var Ut=Function.call.bind(mt);for(var lt in z)if(Ut(z,lt)){var Gt=void 0;try{if(typeof z[lt]!="function"){var En=Error((Oe||"React class")+": "+Ee+" type `"+lt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof z[lt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw En.name="Invariant Violation",En}Gt=z[lt](ee,lt,Oe,Ee,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(zn){Gt=zn}Gt&&!(Gt instanceof Error)&&(Mn(et),pe("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Oe||"React class",Ee,lt,typeof Gt),Mn(null)),Gt instanceof Error&&!(Gt.message in Gn)&&(Gn[Gt.message]=!0,Mn(et),pe("Failed %s type: %s",Ee,Gt.message),Mn(null))}}}function ol(z){if(z){var ee=z._owner,Ee=Ql(z.type,z._source,ee?ee.type:null);G(Ee)}else G(null)}var sn;sn=!1;function kd(){if(P.current){var z=it(P.current.type);if(z)return`

Check the render method of \``+z+"`."}return""}function Gs(z){if(z!==void 0){var ee=z.fileName.replace(/^.*[\\\/]/,""),Ee=z.lineNumber;return`

Check your code at `+ee+":"+Ee+"."}return""}function ll(z){return z!=null?Gs(z.__source):""}var Ea={};function ul(z){var ee=kd();if(!ee){var Ee=typeof z=="string"?z:z.displayName||z.name;Ee&&(ee=`

Check the top-level render call using <`+Ee+">.")}return ee}function kr(z,ee){if(!(!z._store||z._store.validated||z.key!=null)){z._store.validated=!0;var Ee=ul(ee);if(!Ea[Ee]){Ea[Ee]=!0;var Oe="";z&&z._owner&&z._owner!==P.current&&(Oe=" It was passed a child from "+it(z._owner.type)+"."),ol(z),pe('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Ee,Oe),ol(null)}}}function or(z,ee){if(typeof z=="object"){if(Xt(z))for(var Ee=0;Ee<z.length;Ee++){var Oe=z[Ee];mr(Oe)&&kr(Oe,ee)}else if(mr(z))z._store&&(z._store.validated=!0);else if(z){var et=$(z);if(typeof et=="function"&&et!==z.entries)for(var Ut=et.call(z),lt;!(lt=Ut.next()).done;)mr(lt.value)&&kr(lt.value,ee)}}}function Gu(z){{var ee=z.type;if(ee==null||typeof ee=="string")return;var Ee;if(typeof ee=="function")Ee=ee.propTypes;else if(typeof ee=="object"&&(ee.$$typeof===m||ee.$$typeof===x))Ee=ee.propTypes;else return;if(Ee){var Oe=it(ee);yp(Ee,z.props,"prop",Oe,z)}else if(ee.PropTypes!==void 0&&!sn){sn=!0;var et=it(ee);pe("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",et||"Unknown")}typeof ee.getDefaultProps=="function"&&!ee.getDefaultProps.isReactClassApproved&&pe("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function xs(z){{for(var ee=Object.keys(z.props),Ee=0;Ee<ee.length;Ee++){var Oe=ee[Ee];if(Oe!=="children"&&Oe!=="key"){ol(z),pe("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Oe),ol(null);break}}z.ref!==null&&(ol(z),pe("Invalid attribute `ref` supplied to `React.Fragment`."),ol(null))}}function Na(z,ee,Ee){var Oe=Ue(z);if(!Oe){var et="";(z===void 0||typeof z=="object"&&z!==null&&Object.keys(z).length===0)&&(et+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ut=ll(ee);Ut?et+=Ut:et+=kd();var lt;z===null?lt="null":Xt(z)?lt="array":z!==void 0&&z.$$typeof===r?(lt="<"+(it(z.type)||"Unknown")+" />",et=" Did you accidentally export a JSX literal instead of a component?"):lt=typeof z,pe("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",lt,et)}var Gt=Pt.apply(this,arguments);if(Gt==null)return Gt;if(Oe)for(var En=2;En<arguments.length;En++)or(arguments[En],z);return z===a?xs(Gt):Gu(Gt),Gt}var Yi=!1;function Jc(z){var ee=Na.bind(null,z);return ee.type=z,Yi||(Yi=!0,be("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(ee,"type",{enumerable:!1,get:function(){return be("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:z}),z}}),ee}function vp(z,ee,Ee){for(var Oe=jn.apply(this,arguments),et=2;et<arguments.length;et++)or(arguments[et],Oe.type);return Gu(Oe),Oe}function bp(z,ee){var Ee=D.transition;D.transition={};var Oe=D.transition;D.transition._updatedFibers=new Set;try{z()}finally{if(D.transition=Ee,Ee===null&&Oe._updatedFibers){var et=Oe._updatedFibers.size;et>10&&be("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),Oe._updatedFibers.clear()}}}var qu=!1,ef=null;function F0(z){if(ef===null)try{var ee=("require"+Math.random()).slice(0,7),Ee=n&&n[ee];ef=Ee.call(n,"timers").setImmediate}catch{ef=function(et){qu===!1&&(qu=!0,typeof MessageChannel>"u"&&pe("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var Ut=new MessageChannel;Ut.port1.onmessage=et,Ut.port2.postMessage(void 0)}}return ef(z)}var Qi=0,_o=!1;function cl(z){{var ee=Qi;Qi++,L.current===null&&(L.current=[]);var Ee=L.isBatchingLegacy,Oe;try{if(L.isBatchingLegacy=!0,Oe=z(),!Ee&&L.didScheduleLegacyUpdate){var et=L.current;et!==null&&(L.didScheduleLegacyUpdate=!1,Ku(et))}}catch(vn){throw Zi(ee),vn}finally{L.isBatchingLegacy=Ee}if(Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var Ut=Oe,lt=!1,Gt={then:function(vn,ur){lt=!0,Ut.then(function(Fr){Zi(ee),Qi===0?Ed(Fr,vn,ur):vn(Fr)},function(Fr){Zi(ee),ur(Fr)})}};return!_o&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){lt||(_o=!0,pe("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),Gt}else{var En=Oe;if(Zi(ee),Qi===0){var zn=L.current;zn!==null&&(Ku(zn),L.current=null);var br={then:function(vn,ur){L.current===null?(L.current=[],Ed(En,vn,ur)):vn(En)}};return br}else{var lr={then:function(vn,ur){vn(En)}};return lr}}}}function Zi(z){z!==Qi-1&&pe("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),Qi=z}function Ed(z,ee,Ee){{var Oe=L.current;if(Oe!==null)try{Ku(Oe),F0(function(){Oe.length===0?(L.current=null,ee(z)):Ed(z,ee,Ee)})}catch(et){Ee(et)}else ee(z)}}var Nd=!1;function Ku(z){if(!Nd){Nd=!0;var ee=0;try{for(;ee<z.length;ee++){var Ee=z[ee];do Ee=Ee(!0);while(Ee!==null)}z.length=0}catch(Oe){throw z=z.slice(ee+1),Oe}finally{Nd=!1}}}var tf=Na,$d=vp,Id=Jc,Ao={map:tl,forEach:Xl,count:nl,toArray:rl,only:Vu};e.Children=Ao,e.Component=Ae,e.Fragment=a,e.Profiler=u,e.PureComponent=Xe,e.StrictMode=o,e.Suspense=g,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,e.act=cl,e.cloneElement=$d,e.createContext=Xc,e.createElement=tf,e.createFactory=Id,e.createRef=Tt,e.forwardRef=il,e.isValidElement=mr,e.lazy=al,e.memo=ut,e.startTransition=bp,e.unstable_act=cl,e.useCallback=js,e.useContext=fn,e.useDebugValue=dn,e.useDeferredValue=Io,e.useEffect=qr,e.useId=Yc,e.useImperativeHandle=$o,e.useInsertionEffect=vr,e.useLayoutEffect=Tr,e.useMemo=No,e.useReducer=kn,e.useRef=bn,e.useState=an,e.useSyncExternalStore=Qc,e.useTransition=mn,e.version=t,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()}(ib,ib.exports)),ib.exports}process.env.NODE_ENV==="production"?o$.exports=qG():o$.exports=KG();var Kt=o$.exports;const l$=rL(Kt);var P1={exports:{}},u$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iL;function XG(){return iL||(iL=1,function(n){function e(te,ye){var ce=te.length;te.push(ye);e:for(;0<ce;){var K=ce-1>>>1,Z=te[K];if(0<s(Z,ye))te[K]=ye,te[ce]=Z,ce=K;else break e}}function t(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ye=te[0],ce=te.pop();if(ce!==ye){te[0]=ce;e:for(var K=0,Z=te.length,De=Z>>>1;K<De;){var Ae=2*(K+1)-1,Fe=te[Ae],Pe=Ae+1,He=te[Pe];if(0>s(Fe,ce))Pe<Z&&0>s(He,Fe)?(te[K]=He,te[Pe]=ce,K=Pe):(te[K]=Fe,te[Ae]=ce,K=Ae);else if(Pe<Z&&0>s(He,ce))te[K]=He,te[Pe]=ce,K=Pe;else break e}}return ye}function s(te,ye){var ce=te.sortIndex-ye.sortIndex;return ce!==0?ce:te.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var c=[],d=[],m=1,g=null,y=3,x=!1,S=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(te){for(var ye=t(d);ye!==null;){if(ye.callback===null)r(d);else if(ye.startTime<=te)r(d),ye.sortIndex=ye.expirationTime,e(c,ye);else break;ye=t(d)}}function D(te){if(k=!1,A(te),!S)if(t(c)!==null)S=!0,be(L);else{var ye=t(d);ye!==null&&pe(D,ye.startTime-te)}}function L(te,ye){S=!1,k&&(k=!1,N(B),B=-1),x=!0;var ce=y;try{for(A(ye),g=t(c);g!==null&&(!(g.expirationTime>ye)||te&&!re());){var K=g.callback;if(typeof K=="function"){g.callback=null,y=g.priorityLevel;var Z=K(g.expirationTime<=ye);ye=n.unstable_now(),typeof Z=="function"?g.callback=Z:g===t(c)&&r(c),A(ye)}else r(c);g=t(c)}if(g!==null)var De=!0;else{var Ae=t(d);Ae!==null&&pe(D,Ae.startTime-ye),De=!1}return De}finally{g=null,y=ce,x=!1}}var P=!1,W=null,B=-1,G=5,X=-1;function re(){return!(n.unstable_now()-X<G)}function ue(){if(W!==null){var te=n.unstable_now();X=te;var ye=!0;try{ye=W(!0,te)}finally{ye?ne():(P=!1,W=null)}}else P=!1}var ne;if(typeof $=="function")ne=function(){$(ue)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ge=me.port2;me.port1.onmessage=ue,ne=function(){ge.postMessage(null)}}else ne=function(){C(ue,0)};function be(te){W=te,P||(P=!0,ne())}function pe(te,ye){B=C(function(){te(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){S||x||(S=!0,be(L))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(te){switch(y){case 1:case 2:case 3:var ye=3;break;default:ye=y}var ce=y;y=ye;try{return te()}finally{y=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,ye){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ce=y;y=te;try{return ye()}finally{y=ce}},n.unstable_scheduleCallback=function(te,ye,ce){var K=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?K+ce:K):ce=K,te){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ce+Z,te={id:m++,callback:ye,priorityLevel:te,startTime:ce,expirationTime:Z,sortIndex:-1},ce>K?(te.sortIndex=ce,e(d,te),t(c)===null&&te===t(d)&&(k?(N(B),B=-1):k=!0,pe(D,ce-K))):(te.sortIndex=Z,e(c,te),S||x||(S=!0,be(L))),te},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(te){var ye=y;return function(){var ce=y;y=ye;try{return te.apply(this,arguments)}finally{y=ce}}}}(u$)),u$}var c$={};/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oL;function YG(){return oL||(oL=1,function(n){process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=!1,t=5;function r(Ze,pt){var Pt=Ze.length;Ze.push(pt),o(Ze,pt,Pt)}function s(Ze){return Ze.length===0?null:Ze[0]}function a(Ze){if(Ze.length===0)return null;var pt=Ze[0],Pt=Ze.pop();return Pt!==pt&&(Ze[0]=Pt,u(Ze,Pt,0)),pt}function o(Ze,pt,Pt){for(var Vt=Pt;Vt>0;){var jn=Vt-1>>>1,mr=Ze[jn];if(c(mr,pt)>0)Ze[jn]=pt,Ze[Vt]=mr,Vt=jn;else return}}function u(Ze,pt,Pt){for(var Vt=Pt,jn=Ze.length,mr=jn>>>1;Vt<mr;){var ar=(Vt+1)*2-1,ir=Ze[ar],nr=ar+1,Bt=Ze[nr];if(c(ir,pt)<0)nr<jn&&c(Bt,ir)<0?(Ze[Vt]=Bt,Ze[nr]=pt,Vt=nr):(Ze[Vt]=ir,Ze[ar]=pt,Vt=ar);else if(nr<jn&&c(Bt,pt)<0)Ze[Vt]=Bt,Ze[nr]=pt,Vt=nr;else return}}function c(Ze,pt){var Pt=Ze.sortIndex-pt.sortIndex;return Pt!==0?Pt:Ze.id-pt.id}var d=1,m=2,g=3,y=4,x=5;function S(Ze,pt){}var k=typeof performance=="object"&&typeof performance.now=="function";if(k){var C=performance;n.unstable_now=function(){return C.now()}}else{var N=Date,$=N.now();n.unstable_now=function(){return N.now()-$}}var A=1073741823,D=-1,L=250,P=5e3,W=1e4,B=A,G=[],X=[],re=1,ue=null,ne=g,me=!1,ge=!1,be=!1,pe=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(Ze){for(var pt=s(X);pt!==null;){if(pt.callback===null)a(X);else if(pt.startTime<=Ze)a(X),pt.sortIndex=pt.expirationTime,r(G,pt);else return;pt=s(X)}}function K(Ze){if(be=!1,ce(Ze),!ge)if(s(G)!==null)ge=!0,nn(Z);else{var pt=s(X);pt!==null&&Vn(K,pt.startTime-Ze)}}function Z(Ze,pt){ge=!1,be&&(be=!1,tr()),me=!0;var Pt=ne;try{var Vt;if(!e)return De(Ze,pt)}finally{ue=null,ne=Pt,me=!1}}function De(Ze,pt){var Pt=pt;for(ce(Pt),ue=s(G);ue!==null&&!(ue.expirationTime>Pt&&(!Ze||ht()));){var Vt=ue.callback;if(typeof Vt=="function"){ue.callback=null,ne=ue.priorityLevel;var jn=ue.expirationTime<=Pt,mr=Vt(jn);Pt=n.unstable_now(),typeof mr=="function"?ue.callback=mr:ue===s(G)&&a(G),ce(Pt)}else a(G);ue=s(G)}if(ue!==null)return!0;var ar=s(X);return ar!==null&&Vn(K,ar.startTime-Pt),!1}function Ae(Ze,pt){switch(Ze){case d:case m:case g:case y:case x:break;default:Ze=g}var Pt=ne;ne=Ze;try{return pt()}finally{ne=Pt}}function Fe(Ze){var pt;switch(ne){case d:case m:case g:pt=g;break;default:pt=ne;break}var Pt=ne;ne=pt;try{return Ze()}finally{ne=Pt}}function Pe(Ze){var pt=ne;return function(){var Pt=ne;ne=pt;try{return Ze.apply(this,arguments)}finally{ne=Pt}}}function He(Ze,pt,Pt){var Vt=n.unstable_now(),jn;if(typeof Pt=="object"&&Pt!==null){var mr=Pt.delay;typeof mr=="number"&&mr>0?jn=Vt+mr:jn=Vt}else jn=Vt;var ar;switch(Ze){case d:ar=D;break;case m:ar=L;break;case x:ar=B;break;case y:ar=W;break;case g:default:ar=P;break}var ir=jn+ar,nr={id:re++,callback:pt,priorityLevel:Ze,startTime:jn,expirationTime:ir,sortIndex:-1};return jn>Vt?(nr.sortIndex=jn,r(X,nr),s(G)===null&&nr===s(X)&&(be?tr():be=!0,Vn(K,jn-Vt))):(nr.sortIndex=ir,r(G,nr),!ge&&!me&&(ge=!0,nn(Z))),nr}function Ke(){}function Xe(){!ge&&!me&&(ge=!0,nn(Z))}function ct(){return s(G)}function Tt(Ze){Ze.callback=null}function tn(){return ne}var Xt=!1,hn=null,Zt=-1,Ne=t,Je=-1;function ht(){var Ze=n.unstable_now()-Je;return!(Ze<Ne)}function Lt(){}function it(Ze){if(Ze<0||Ze>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}Ze>0?Ne=Math.floor(1e3/Ze):Ne=t}var mt=function(){if(hn!==null){var Ze=n.unstable_now();Je=Ze;var pt=!0,Pt=!0;try{Pt=hn(pt,Ze)}finally{Pt?Yt():(Xt=!1,hn=null)}}else Xt=!1},Yt;if(typeof ye=="function")Yt=function(){ye(mt)};else if(typeof MessageChannel<"u"){var jt=new MessageChannel,Tn=jt.port2;jt.port1.onmessage=mt,Yt=function(){Tn.postMessage(null)}}else Yt=function(){pe(mt,0)};function nn(Ze){hn=Ze,Xt||(Xt=!0,Yt())}function Vn(Ze,pt){Zt=pe(function(){Ze(n.unstable_now())},pt)}function tr(){te(Zt),Zt=-1}var Zn=Lt,Ir=null;n.unstable_IdlePriority=x,n.unstable_ImmediatePriority=d,n.unstable_LowPriority=y,n.unstable_NormalPriority=g,n.unstable_Profiling=Ir,n.unstable_UserBlockingPriority=m,n.unstable_cancelCallback=Tt,n.unstable_continueExecution=Xe,n.unstable_forceFrameRate=it,n.unstable_getCurrentPriorityLevel=tn,n.unstable_getFirstCallbackNode=ct,n.unstable_next=Fe,n.unstable_pauseExecution=Ke,n.unstable_requestPaint=Zn,n.unstable_runWithPriority=Ae,n.unstable_scheduleCallback=He,n.unstable_shouldYield=ht,n.unstable_wrapCallback=Pe,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()}(c$)),c$}var lL;function uL(){return lL||(lL=1,process.env.NODE_ENV==="production"?P1.exports=XG():P1.exports=YG()),P1.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cL;function QG(){if(cL)return Fi;cL=1;var n=Kt,e=uL();function t(f){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(f,h){o(f,h),o(f+"Capture",h)}function o(f,h){for(s[f]=h,f=0;f<h.length;f++)r.add(h[f])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function y(f){return c.call(g,f)?!0:c.call(m,f)?!1:d.test(f)?g[f]=!0:(m[f]=!0,!1)}function x(f,h,b,T){if(b!==null&&b.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return T?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function S(f,h,b,T){if(h===null||typeof h>"u"||x(f,h,b,T))return!0;if(T)return!1;if(b!==null)switch(b.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function k(f,h,b,T,I,_,V){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=T,this.attributeNamespace=I,this.mustUseProperty=b,this.propertyName=f,this.type=h,this.sanitizeURL=_,this.removeEmptyString=V}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){C[f]=new k(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var h=f[0];C[h]=new k(h,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){C[f]=new k(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){C[f]=new k(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){C[f]=new k(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){C[f]=new k(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){C[f]=new k(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){C[f]=new k(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){C[f]=new k(f,5,!1,f.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function $(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var h=f.replace(N,$);C[h]=new k(h,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var h=f.replace(N,$);C[h]=new k(h,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var h=f.replace(N,$);C[h]=new k(h,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){C[f]=new k(f,1,!1,f.toLowerCase(),null,!1,!1)}),C.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){C[f]=new k(f,1,!1,f.toLowerCase(),null,!0,!0)});function A(f,h,b,T){var I=C.hasOwnProperty(h)?C[h]:null;(I!==null?I.type!==0:T||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(S(h,b,I,T)&&(b=null),T||I===null?y(h)&&(b===null?f.removeAttribute(h):f.setAttribute(h,""+b)):I.mustUseProperty?f[I.propertyName]=b===null?I.type===3?!1:"":b:(h=I.attributeName,T=I.attributeNamespace,b===null?f.removeAttribute(h):(I=I.type,b=I===3||I===4&&b===!0?"":""+b,T?f.setAttributeNS(T,h,b):f.setAttribute(h,b))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),P=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),re=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),te=Symbol.iterator;function ye(f){return f===null||typeof f!="object"?null:(f=te&&f[te]||f["@@iterator"],typeof f=="function"?f:null)}var ce=Object.assign,K;function Z(f){if(K===void 0)try{throw Error()}catch(b){var h=b.stack.trim().match(/\n( *(at )?)/);K=h&&h[1]||""}return`
`+K+f}var De=!1;function Ae(f,h){if(!f||De)return"";De=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch($e){var T=$e}Reflect.construct(f,[],h)}else{try{h.call()}catch($e){T=$e}f.call(h.prototype)}else{try{throw Error()}catch($e){T=$e}f()}}catch($e){if($e&&T&&typeof $e.stack=="string"){for(var I=$e.stack.split(`
`),_=T.stack.split(`
`),V=I.length-1,Y=_.length-1;1<=V&&0<=Y&&I[V]!==_[Y];)Y--;for(;1<=V&&0<=Y;V--,Y--)if(I[V]!==_[Y]){if(V!==1||Y!==1)do if(V--,Y--,0>Y||I[V]!==_[Y]){var ie=`
`+I[V].replace(" at new "," at ");return f.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",f.displayName)),ie}while(1<=V&&0<=Y);break}}}finally{De=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?Z(f):""}function Fe(f){switch(f.tag){case 5:return Z(f.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return f=Ae(f.type,!1),f;case 11:return f=Ae(f.type.render,!1),f;case 1:return f=Ae(f.type,!0),f;default:return""}}function Pe(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case W:return"Fragment";case P:return"Portal";case G:return"Profiler";case B:return"StrictMode";case ne:return"Suspense";case me:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case re:return(f.displayName||"Context")+".Consumer";case X:return(f._context.displayName||"Context")+".Provider";case ue:var h=f.render;return f=f.displayName,f||(f=h.displayName||h.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case ge:return h=f.displayName||null,h!==null?h:Pe(f.type)||"Memo";case be:h=f._payload,f=f._init;try{return Pe(f(h))}catch{}}return null}function He(f){var h=f.type;switch(f.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=h.render,f=f.displayName||f.name||"",h.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(h);case 8:return h===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Ke(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Xe(f){var h=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function ct(f){var h=Xe(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,h),T=""+f[h];if(!f.hasOwnProperty(h)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var I=b.get,_=b.set;return Object.defineProperty(f,h,{configurable:!0,get:function(){return I.call(this)},set:function(V){T=""+V,_.call(this,V)}}),Object.defineProperty(f,h,{enumerable:b.enumerable}),{getValue:function(){return T},setValue:function(V){T=""+V},stopTracking:function(){f._valueTracker=null,delete f[h]}}}}function Tt(f){f._valueTracker||(f._valueTracker=ct(f))}function tn(f){if(!f)return!1;var h=f._valueTracker;if(!h)return!0;var b=h.getValue(),T="";return f&&(T=Xe(f)?f.checked?"true":"false":f.value),f=T,f!==b?(h.setValue(f),!0):!1}function Xt(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function hn(f,h){var b=h.checked;return ce({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function Zt(f,h){var b=h.defaultValue==null?"":h.defaultValue,T=h.checked!=null?h.checked:h.defaultChecked;b=Ke(h.value!=null?h.value:b),f._wrapperState={initialChecked:T,initialValue:b,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function Ne(f,h){h=h.checked,h!=null&&A(f,"checked",h,!1)}function Je(f,h){Ne(f,h);var b=Ke(h.value),T=h.type;if(b!=null)T==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(T==="submit"||T==="reset"){f.removeAttribute("value");return}h.hasOwnProperty("value")?Lt(f,h.type,b):h.hasOwnProperty("defaultValue")&&Lt(f,h.type,Ke(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(f.defaultChecked=!!h.defaultChecked)}function ht(f,h,b){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var T=h.type;if(!(T!=="submit"&&T!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+f._wrapperState.initialValue,b||h===f.value||(f.value=h),f.defaultValue=h}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function Lt(f,h,b){(h!=="number"||Xt(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var it=Array.isArray;function mt(f,h,b,T){if(f=f.options,h){h={};for(var I=0;I<b.length;I++)h["$"+b[I]]=!0;for(b=0;b<f.length;b++)I=h.hasOwnProperty("$"+f[b].value),f[b].selected!==I&&(f[b].selected=I),I&&T&&(f[b].defaultSelected=!0)}else{for(b=""+Ke(b),h=null,I=0;I<f.length;I++){if(f[I].value===b){f[I].selected=!0,T&&(f[I].defaultSelected=!0);return}h!==null||f[I].disabled||(h=f[I])}h!==null&&(h.selected=!0)}}function Yt(f,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},h,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function jt(f,h){var b=h.value;if(b==null){if(b=h.children,h=h.defaultValue,b!=null){if(h!=null)throw Error(t(92));if(it(b)){if(1<b.length)throw Error(t(93));b=b[0]}h=b}h==null&&(h=""),b=h}f._wrapperState={initialValue:Ke(b)}}function Tn(f,h){var b=Ke(h.value),T=Ke(h.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),h.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),T!=null&&(f.defaultValue=""+T)}function nn(f){var h=f.textContent;h===f._wrapperState.initialValue&&h!==""&&h!==null&&(f.value=h)}function Vn(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(f,h){return f==null||f==="http://www.w3.org/1999/xhtml"?Vn(h):f==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Zn,Ir=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,b,T,I){MSApp.execUnsafeLocalFunction(function(){return f(h,b,T,I)})}:f}(function(f,h){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=h;else{for(Zn=Zn||document.createElement("div"),Zn.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Zn.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;h.firstChild;)f.appendChild(h.firstChild)}});function Ze(f,h){if(h){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=h;return}}f.textContent=h}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pt=["Webkit","ms","Moz","O"];Object.keys(pt).forEach(function(f){Pt.forEach(function(h){h=h+f.charAt(0).toUpperCase()+f.substring(1),pt[h]=pt[f]})});function Vt(f,h,b){return h==null||typeof h=="boolean"||h===""?"":b||typeof h!="number"||h===0||pt.hasOwnProperty(f)&&pt[f]?(""+h).trim():h+"px"}function jn(f,h){f=f.style;for(var b in h)if(h.hasOwnProperty(b)){var T=b.indexOf("--")===0,I=Vt(b,h[b],T);b==="float"&&(b="cssFloat"),T?f.setProperty(b,I):f[b]=I}}var mr=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ar(f,h){if(h){if(mr[f]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,f));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function ir(f,h){if(f.indexOf("-")===-1)return typeof h.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nr=null;function Bt(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var Un=null,Sa=null,as=null;function Ya(f){if(f=Mt(f)){if(typeof Un!="function")throw Error(t(280));var h=f.stateNode;h&&(h=Lr(h),Un(f.stateNode,f.type,h))}}function tl(f){Sa?as?as.push(f):as=[f]:Sa=f}function nl(){if(Sa){var f=Sa,h=as;if(as=Sa=null,Ya(f),h)for(f=0;f<h.length;f++)Ya(h[f])}}function Xl(f,h){return f(h)}function rl(){}var Vu=!1;function Xc(f,h,b){if(Vu)return f(h,b);Vu=!0;try{return Xl(f,h,b)}finally{Vu=!1,(Sa!==null||as!==null)&&(rl(),nl())}}function Ca(f,h){var b=f.stateNode;if(b===null)return null;var T=Lr(b);if(T===null)return null;b=T[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(T=!T.disabled)||(f=f.type,T=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!T;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(t(231,h,typeof b));return b}var Ta=!1;if(u)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){Ta=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{Ta=!1}function sl(f,h,b,T,I,_,V,Y,ie){var $e=Array.prototype.slice.call(arguments,3);try{h.apply(b,$e)}catch(Ge){this.onError(Ge)}}var Eo=!1,al=null,il=!1,se=null,Ue={onError:function(f){Eo=!0,al=f}};function ut(f,h,b,T,I,_,V,Y,ie){Eo=!1,al=null,sl.apply(Ue,arguments)}function St(f,h,b,T,I,_,V,Y,ie){if(ut.apply(this,arguments),Eo){if(Eo){var $e=al;Eo=!1,al=null}else throw Error(t(198));il||(il=!0,se=$e)}}function fn(f){var h=f,b=f;if(f.alternate)for(;h.return;)h=h.return;else{f=h;do h=f,h.flags&4098&&(b=h.return),f=h.return;while(f)}return h.tag===3?b:null}function an(f){if(f.tag===13){var h=f.memoizedState;if(h===null&&(f=f.alternate,f!==null&&(h=f.memoizedState)),h!==null)return h.dehydrated}return null}function kn(f){if(fn(f)!==f)throw Error(t(188))}function bn(f){var h=f.alternate;if(!h){if(h=fn(f),h===null)throw Error(t(188));return h!==f?null:f}for(var b=f,T=h;;){var I=b.return;if(I===null)break;var _=I.alternate;if(_===null){if(T=I.return,T!==null){b=T;continue}break}if(I.child===_.child){for(_=I.child;_;){if(_===b)return kn(I),f;if(_===T)return kn(I),h;_=_.sibling}throw Error(t(188))}if(b.return!==T.return)b=I,T=_;else{for(var V=!1,Y=I.child;Y;){if(Y===b){V=!0,b=I,T=_;break}if(Y===T){V=!0,T=I,b=_;break}Y=Y.sibling}if(!V){for(Y=_.child;Y;){if(Y===b){V=!0,b=_,T=I;break}if(Y===T){V=!0,T=_,b=I;break}Y=Y.sibling}if(!V)throw Error(t(189))}}if(b.alternate!==T)throw Error(t(190))}if(b.tag!==3)throw Error(t(188));return b.stateNode.current===b?f:h}function qr(f){return f=bn(f),f!==null?vr(f):null}function vr(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var h=vr(f);if(h!==null)return h;f=f.sibling}return null}var Tr=e.unstable_scheduleCallback,js=e.unstable_cancelCallback,No=e.unstable_shouldYield,$o=e.unstable_requestPaint,dn=e.unstable_now,mn=e.unstable_getCurrentPriorityLevel,Io=e.unstable_ImmediatePriority,Yc=e.unstable_UserBlockingPriority,Qc=e.unstable_NormalPriority,Uu=e.unstable_LowPriority,bd=e.unstable_IdlePriority,Wu=null,Qa=null;function gp(f){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(Wu,f,void 0,(f.current.flags&128)===128)}catch{}}var ka=Math.clz32?Math.clz32:xd,xy=Math.log,wy=Math.LN2;function xd(f){return f>>>=0,f===0?32:31-(xy(f)/wy|0)|0}var Hu=64,Ci=4194304;function Ro(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Do(f,h){var b=f.pendingLanes;if(b===0)return 0;var T=0,I=f.suspendedLanes,_=f.pingedLanes,V=b&268435455;if(V!==0){var Y=V&~I;Y!==0?T=Ro(Y):(_&=V,_!==0&&(T=Ro(_)))}else V=b&~I,V!==0?T=Ro(V):_!==0&&(T=Ro(_));if(T===0)return 0;if(h!==0&&h!==T&&!(h&I)&&(I=T&-T,_=h&-h,I>=_||I===16&&(_&4194240)!==0))return h;if(T&4&&(T|=b&16),h=f.entangledLanes,h!==0)for(f=f.entanglements,h&=T;0<h;)b=31-ka(h),I=1<<b,T|=f[b],h&=~I;return T}function wd(f,h){switch(f){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zc(f,h){for(var b=f.suspendedLanes,T=f.pingedLanes,I=f.expirationTimes,_=f.pendingLanes;0<_;){var V=31-ka(_),Y=1<<V,ie=I[V];ie===-1?(!(Y&b)||Y&T)&&(I[V]=wd(Y,h)):ie<=h&&(f.expiredLanes|=Y),_&=~Y}}function ju(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Sd(){var f=Hu;return Hu<<=1,!(Hu&4194240)&&(Hu=64),f}function Cd(f){for(var h=[],b=0;31>b;b++)h.push(f);return h}function Yl(f,h,b){f.pendingLanes|=h,h!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,h=31-ka(h),f[h]=b}function O0(f,h){var b=f.pendingLanes&~h;f.pendingLanes=h,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=h,f.mutableReadLanes&=h,f.entangledLanes&=h,h=f.entanglements;var T=f.eventTimes;for(f=f.expirationTimes;0<b;){var I=31-ka(b),_=1<<I;h[I]=0,T[I]=-1,f[I]=-1,b&=~_}}function Ql(f,h){var b=f.entangledLanes|=h;for(f=f.entanglements;b;){var T=31-ka(b),I=1<<T;I&h|f[T]&h&&(f[T]|=h),b&=~I}}var Gn=0;function Td(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var Mn,yp,ol,sn,kd,Gs=!1,ll=[],Ea=null,ul=null,kr=null,or=new Map,Gu=new Map,xs=[],Na="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yi(f,h){switch(f){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":ul=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":or.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(h.pointerId)}}function Jc(f,h,b,T,I,_){return f===null||f.nativeEvent!==_?(f={blockedOn:h,domEventName:b,eventSystemFlags:T,nativeEvent:_,targetContainers:[I]},h!==null&&(h=Mt(h),h!==null&&yp(h)),f):(f.eventSystemFlags|=T,h=f.targetContainers,I!==null&&h.indexOf(I)===-1&&h.push(I),f)}function vp(f,h,b,T,I){switch(h){case"focusin":return Ea=Jc(Ea,f,h,b,T,I),!0;case"dragenter":return ul=Jc(ul,f,h,b,T,I),!0;case"mouseover":return kr=Jc(kr,f,h,b,T,I),!0;case"pointerover":var _=I.pointerId;return or.set(_,Jc(or.get(_)||null,f,h,b,T,I)),!0;case"gotpointercapture":return _=I.pointerId,Gu.set(_,Jc(Gu.get(_)||null,f,h,b,T,I)),!0}return!1}function bp(f){var h=uf(f.target);if(h!==null){var b=fn(h);if(b!==null){if(h=b.tag,h===13){if(h=an(b),h!==null){f.blockedOn=h,kd(f.priority,function(){ol(b)});return}}else if(h===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function qu(f){if(f.blockedOn!==null)return!1;for(var h=f.targetContainers;0<h.length;){var b=$d(f.domEventName,f.eventSystemFlags,h[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var T=new b.constructor(b.type,b);nr=T,b.target.dispatchEvent(T),nr=null}else return h=Mt(b),h!==null&&yp(h),f.blockedOn=b,!1;h.shift()}return!0}function ef(f,h,b){qu(f)&&b.delete(h)}function F0(){Gs=!1,Ea!==null&&qu(Ea)&&(Ea=null),ul!==null&&qu(ul)&&(ul=null),kr!==null&&qu(kr)&&(kr=null),or.forEach(ef),Gu.forEach(ef)}function Qi(f,h){f.blockedOn===h&&(f.blockedOn=null,Gs||(Gs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,F0)))}function _o(f){function h(I){return Qi(I,f)}if(0<ll.length){Qi(ll[0],f);for(var b=1;b<ll.length;b++){var T=ll[b];T.blockedOn===f&&(T.blockedOn=null)}}for(Ea!==null&&Qi(Ea,f),ul!==null&&Qi(ul,f),kr!==null&&Qi(kr,f),or.forEach(h),Gu.forEach(h),b=0;b<xs.length;b++)T=xs[b],T.blockedOn===f&&(T.blockedOn=null);for(;0<xs.length&&(b=xs[0],b.blockedOn===null);)bp(b),b.blockedOn===null&&xs.shift()}var cl=D.ReactCurrentBatchConfig,Zi=!0;function Ed(f,h,b,T){var I=Gn,_=cl.transition;cl.transition=null;try{Gn=1,Ku(f,h,b,T)}finally{Gn=I,cl.transition=_}}function Nd(f,h,b,T){var I=Gn,_=cl.transition;cl.transition=null;try{Gn=4,Ku(f,h,b,T)}finally{Gn=I,cl.transition=_}}function Ku(f,h,b,T){if(Zi){var I=$d(f,h,b,T);if(I===null)Ay(f,h,T,tf,b),Yi(f,T);else if(vp(I,f,h,b,T))T.stopPropagation();else if(Yi(f,T),h&4&&-1<Na.indexOf(f)){for(;I!==null;){var _=Mt(I);if(_!==null&&Mn(_),_=$d(f,h,b,T),_===null&&Ay(f,h,T,tf,b),_===I)break;I=_}I!==null&&T.stopPropagation()}else Ay(f,h,T,null,b)}}var tf=null;function $d(f,h,b,T){if(tf=null,f=Bt(T),f=uf(f),f!==null)if(h=fn(f),h===null)f=null;else if(b=h.tag,b===13){if(f=an(h),f!==null)return f;f=null}else if(b===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;f=null}else h!==f&&(f=null);return tf=f,null}function Id(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mn()){case Io:return 1;case Yc:return 4;case Qc:case Uu:return 16;case bd:return 536870912;default:return 16}default:return 16}}var Ao=null,z=null,ee=null;function Ee(){if(ee)return ee;var f,h=z,b=h.length,T,I="value"in Ao?Ao.value:Ao.textContent,_=I.length;for(f=0;f<b&&h[f]===I[f];f++);var V=b-f;for(T=1;T<=V&&h[b-T]===I[_-T];T++);return ee=I.slice(f,1<T?1-T:void 0)}function Oe(f){var h=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&h===13&&(f=13)):f=h,f===10&&(f=13),32<=f||f===13?f:0}function et(){return!0}function Ut(){return!1}function lt(f){function h(b,T,I,_,V){this._reactName=b,this._targetInst=I,this.type=T,this.nativeEvent=_,this.target=V,this.currentTarget=null;for(var Y in f)f.hasOwnProperty(Y)&&(b=f[Y],this[Y]=b?b(_):_[Y]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?et:Ut,this.isPropagationStopped=Ut,this}return ce(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=et)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=et)},persist:function(){},isPersistent:et}),h}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},En=lt(Gt),zn=ce({},Gt,{view:0,detail:0}),br=lt(zn),lr,vn,ur,Fr=ce({},zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B0,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ur&&(ur&&f.type==="mousemove"?(lr=f.screenX-ur.screenX,vn=f.screenY-ur.screenY):vn=lr=0,ur=f),lr)},movementY:function(f){return"movementY"in f?f.movementY:vn}}),Xu=lt(Fr),xp=ce({},Fr,{dataTransfer:0}),Zl=lt(xp),wp=ce({},zn,{relatedTarget:0}),nf=lt(wp),L0=ce({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),Sy=lt(L0),M0=ce({},Gt,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),mk=lt(M0),z0=ce({},Gt,{data:0}),P0=lt(z0),gk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(f){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(f):(f=V_[f])?!!h[f]:!1}function B0(){return Jl}var V0=ce({},zn,{key:function(f){if(f.key){var h=gk[f.key]||f.key;if(h!=="Unidentified")return h}return f.type==="keypress"?(f=Oe(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?yk[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B0,charCode:function(f){return f.type==="keypress"?Oe(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Oe(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),U0=lt(V0),W0=ce({},Fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vk=lt(W0),Cy=ce({},zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B0}),bk=lt(Cy),Za=ce({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),eu=lt(Za),is=ce({},Fr,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),tu=lt(is),H0=[9,13,27,32],Rd=u&&"CompositionEvent"in window,Sp=null;u&&"documentMode"in document&&(Sp=document.documentMode);var Cp=u&&"TextEvent"in window&&!Sp,xk=u&&(!Rd||Sp&&8<Sp&&11>=Sp),wk=" ",Ty=!1;function Sk(f,h){switch(f){case"keyup":return H0.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ck(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Dd=!1;function Tk(f,h){switch(f){case"compositionend":return Ck(h);case"keypress":return h.which!==32?null:(Ty=!0,wk);case"textInput":return f=h.data,f===wk&&Ty?null:f;default:return null}}function U_(f,h){if(Dd)return f==="compositionend"||!Rd&&Sk(f,h)?(f=Ee(),ee=z=Ao=null,Dd=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return xk&&h.locale!=="ko"?null:h.data;default:return null}}var W_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kk(f){var h=f&&f.nodeName&&f.nodeName.toLowerCase();return h==="input"?!!W_[f.type]:h==="textarea"}function j0(f,h,b,T){tl(T),h=Ip(h,"onChange"),0<h.length&&(b=new En("onChange","change",null,b,T),f.push({event:b,listeners:h}))}var fl=null,rf=null;function Ek(f){of(f,0)}function Tp(f){var h=Fo(f);if(tn(h))return f}function H_(f,h){if(f==="change")return h}var Nk=!1;if(u){var G0;if(u){var q0="oninput"in document;if(!q0){var $k=document.createElement("div");$k.setAttribute("oninput","return;"),q0=typeof $k.oninput=="function"}G0=q0}else G0=!1;Nk=G0&&(!document.documentMode||9<document.documentMode)}function Ik(){fl&&(fl.detachEvent("onpropertychange",Rk),rf=fl=null)}function Rk(f){if(f.propertyName==="value"&&Tp(rf)){var h=[];j0(h,rf,f,Bt(f)),Xc(Ek,h)}}function j_(f,h,b){f==="focusin"?(Ik(),fl=h,rf=b,fl.attachEvent("onpropertychange",Rk)):f==="focusout"&&Ik()}function Dk(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Tp(rf)}function G_(f,h){if(f==="click")return Tp(h)}function _k(f,h){if(f==="input"||f==="change")return Tp(h)}function q_(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var Oo=typeof Object.is=="function"?Object.is:q_;function kp(f,h){if(Oo(f,h))return!0;if(typeof f!="object"||f===null||typeof h!="object"||h===null)return!1;var b=Object.keys(f),T=Object.keys(h);if(b.length!==T.length)return!1;for(T=0;T<b.length;T++){var I=b[T];if(!c.call(h,I)||!Oo(f[I],h[I]))return!1}return!0}function Ak(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function ky(f,h){var b=Ak(f);f=0;for(var T;b;){if(b.nodeType===3){if(T=f+b.textContent.length,f<=h&&T>=h)return{node:b,offset:h-f};f=T}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Ak(b)}}function Yu(f,h){return f&&h?f===h?!0:f&&f.nodeType===3?!1:h&&h.nodeType===3?Yu(f,h.parentNode):"contains"in f?f.contains(h):f.compareDocumentPosition?!!(f.compareDocumentPosition(h)&16):!1:!1}function Ep(){for(var f=window,h=Xt();h instanceof f.HTMLIFrameElement;){try{var b=typeof h.contentWindow.location.href=="string"}catch{b=!1}if(b)f=h.contentWindow;else break;h=Xt(f.document)}return h}function Ey(f){var h=f&&f.nodeName&&f.nodeName.toLowerCase();return h&&(h==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||h==="textarea"||f.contentEditable==="true")}function _d(f){var h=Ep(),b=f.focusedElem,T=f.selectionRange;if(h!==b&&b&&b.ownerDocument&&Yu(b.ownerDocument.documentElement,b)){if(T!==null&&Ey(b)){if(h=T.start,f=T.end,f===void 0&&(f=h),"selectionStart"in b)b.selectionStart=h,b.selectionEnd=Math.min(f,b.value.length);else if(f=(h=b.ownerDocument||document)&&h.defaultView||window,f.getSelection){f=f.getSelection();var I=b.textContent.length,_=Math.min(T.start,I);T=T.end===void 0?_:Math.min(T.end,I),!f.extend&&_>T&&(I=T,T=_,_=I),I=ky(b,_);var V=ky(b,T);I&&V&&(f.rangeCount!==1||f.anchorNode!==I.node||f.anchorOffset!==I.offset||f.focusNode!==V.node||f.focusOffset!==V.offset)&&(h=h.createRange(),h.setStart(I.node,I.offset),f.removeAllRanges(),_>T?(f.addRange(h),f.extend(V.node,V.offset)):(h.setEnd(V.node,V.offset),f.addRange(h)))}}for(h=[],f=b;f=f.parentNode;)f.nodeType===1&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<h.length;b++)f=h[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var K_=u&&"documentMode"in document&&11>=document.documentMode,Ad=null,K0=null,Np=null,X0=!1;function Y0(f,h,b){var T=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;X0||Ad==null||Ad!==Xt(T)||(T=Ad,"selectionStart"in T&&Ey(T)?T={start:T.selectionStart,end:T.selectionEnd}:(T=(T.ownerDocument&&T.ownerDocument.defaultView||window).getSelection(),T={anchorNode:T.anchorNode,anchorOffset:T.anchorOffset,focusNode:T.focusNode,focusOffset:T.focusOffset}),Np&&kp(Np,T)||(Np=T,T=Ip(K0,"onSelect"),0<T.length&&(h=new En("onSelect","select",null,h,b),f.push({event:h,listeners:T}),h.target=Ad)))}function Ny(f,h){var b={};return b[f.toLowerCase()]=h.toLowerCase(),b["Webkit"+f]="webkit"+h,b["Moz"+f]="moz"+h,b}var sf={animationend:Ny("Animation","AnimationEnd"),animationiteration:Ny("Animation","AnimationIteration"),animationstart:Ny("Animation","AnimationStart"),transitionend:Ny("Transition","TransitionEnd")},qs={},Q0={};u&&(Q0=document.createElement("div").style,"AnimationEvent"in window||(delete sf.animationend.animation,delete sf.animationiteration.animation,delete sf.animationstart.animation),"TransitionEvent"in window||delete sf.transitionend.transition);function $y(f){if(qs[f])return qs[f];if(!sf[f])return f;var h=sf[f],b;for(b in h)if(h.hasOwnProperty(b)&&b in Q0)return qs[f]=h[b];return f}var Ok=$y("animationend"),Fk=$y("animationiteration"),Lk=$y("animationstart"),Mk=$y("transitionend"),Z0=new Map,Iy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ji(f,h){Z0.set(f,h),a(h,[f])}for(var J0=0;J0<Iy.length;J0++){var af=Iy[J0],X_=af.toLowerCase(),Y_=af[0].toUpperCase()+af.slice(1);Ji(X_,"on"+Y_)}Ji(Ok,"onAnimationEnd"),Ji(Fk,"onAnimationIteration"),Ji(Lk,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(Mk,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $p="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ew=new Set("cancel close invalid load scroll toggle".split(" ").concat($p));function Ry(f,h,b){var T=f.type||"unknown-event";f.currentTarget=b,St(T,h,void 0,f),f.currentTarget=null}function of(f,h){h=(h&4)!==0;for(var b=0;b<f.length;b++){var T=f[b],I=T.event;T=T.listeners;e:{var _=void 0;if(h)for(var V=T.length-1;0<=V;V--){var Y=T[V],ie=Y.instance,$e=Y.currentTarget;if(Y=Y.listener,ie!==_&&I.isPropagationStopped())break e;Ry(I,Y,$e),_=ie}else for(V=0;V<T.length;V++){if(Y=T[V],ie=Y.instance,$e=Y.currentTarget,Y=Y.listener,ie!==_&&I.isPropagationStopped())break e;Ry(I,Y,$e),_=ie}}}if(il)throw f=se,il=!1,se=null,f}function Jn(f,h){var b=h[_p];b===void 0&&(b=h[_p]=new Set);var T=f+"__bubble";b.has(T)||(zk(h,f,2,!1),b.add(T))}function Dy(f,h,b){var T=0;h&&(T|=4),zk(b,f,T,h)}var _y="_reactListening"+Math.random().toString(36).slice(2);function Od(f){if(!f[_y]){f[_y]=!0,r.forEach(function(b){b!=="selectionchange"&&(ew.has(b)||Dy(b,!1,f),Dy(b,!0,f))});var h=f.nodeType===9?f:f.ownerDocument;h===null||h[_y]||(h[_y]=!0,Dy("selectionchange",!1,h))}}function zk(f,h,b,T){switch(Id(h)){case 1:var I=Ed;break;case 4:I=Nd;break;default:I=Ku}b=I.bind(null,h,b,f),I=void 0,!Ta||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(I=!0),T?I!==void 0?f.addEventListener(h,b,{capture:!0,passive:I}):f.addEventListener(h,b,!0):I!==void 0?f.addEventListener(h,b,{passive:I}):f.addEventListener(h,b,!1)}function Ay(f,h,b,T,I){var _=T;if(!(h&1)&&!(h&2)&&T!==null)e:for(;;){if(T===null)return;var V=T.tag;if(V===3||V===4){var Y=T.stateNode.containerInfo;if(Y===I||Y.nodeType===8&&Y.parentNode===I)break;if(V===4)for(V=T.return;V!==null;){var ie=V.tag;if((ie===3||ie===4)&&(ie=V.stateNode.containerInfo,ie===I||ie.nodeType===8&&ie.parentNode===I))return;V=V.return}for(;Y!==null;){if(V=uf(Y),V===null)return;if(ie=V.tag,ie===5||ie===6){T=_=V;continue e}Y=Y.parentNode}}T=T.return}Xc(function(){var $e=_,Ge=Bt(b),Ye=[];e:{var je=Z0.get(f);if(je!==void 0){var yt=En,kt=f;switch(f){case"keypress":if(Oe(b)===0)break e;case"keydown":case"keyup":yt=U0;break;case"focusin":kt="focus",yt=nf;break;case"focusout":kt="blur",yt=nf;break;case"beforeblur":case"afterblur":yt=nf;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Xu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=Zl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=bk;break;case Ok:case Fk:case Lk:yt=Sy;break;case Mk:yt=eu;break;case"scroll":yt=br;break;case"wheel":yt=tu;break;case"copy":case"cut":case"paste":yt=mk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=vk}var Dt=(h&4)!==0,Zr=!Dt&&f==="scroll",we=Dt?je!==null?je+"Capture":null:je;Dt=[];for(var de=$e,Te;de!==null;){Te=de;var qe=Te.stateNode;if(Te.tag===5&&qe!==null&&(Te=qe,we!==null&&(qe=Ca(de,we),qe!=null&&Dt.push(Fd(de,qe,Te)))),Zr)break;de=de.return}0<Dt.length&&(je=new yt(je,kt,null,b,Ge),Ye.push({event:je,listeners:Dt}))}}if(!(h&7)){e:{if(je=f==="mouseover"||f==="pointerover",yt=f==="mouseout"||f==="pointerout",je&&b!==nr&&(kt=b.relatedTarget||b.fromElement)&&(uf(kt)||kt[nu]))break e;if((yt||je)&&(je=Ge.window===Ge?Ge:(je=Ge.ownerDocument)?je.defaultView||je.parentWindow:window,yt?(kt=b.relatedTarget||b.toElement,yt=$e,kt=kt?uf(kt):null,kt!==null&&(Zr=fn(kt),kt!==Zr||kt.tag!==5&&kt.tag!==6)&&(kt=null)):(yt=null,kt=$e),yt!==kt)){if(Dt=Xu,qe="onMouseLeave",we="onMouseEnter",de="mouse",(f==="pointerout"||f==="pointerover")&&(Dt=vk,qe="onPointerLeave",we="onPointerEnter",de="pointer"),Zr=yt==null?je:Fo(yt),Te=kt==null?je:Fo(kt),je=new Dt(qe,de+"leave",yt,b,Ge),je.target=Zr,je.relatedTarget=Te,qe=null,uf(Ge)===$e&&(Dt=new Dt(we,de+"enter",kt,b,Ge),Dt.target=Te,Dt.relatedTarget=Zr,qe=Dt),Zr=qe,yt&&kt)t:{for(Dt=yt,we=kt,de=0,Te=Dt;Te;Te=Qu(Te))de++;for(Te=0,qe=we;qe;qe=Qu(qe))Te++;for(;0<de-Te;)Dt=Qu(Dt),de--;for(;0<Te-de;)we=Qu(we),Te--;for(;de--;){if(Dt===we||we!==null&&Dt===we.alternate)break t;Dt=Qu(Dt),we=Qu(we)}Dt=null}else Dt=null;yt!==null&&Pk(Ye,je,yt,Dt,!1),kt!==null&&Zr!==null&&Pk(Ye,Zr,kt,Dt,!0)}}e:{if(je=$e?Fo($e):window,yt=je.nodeName&&je.nodeName.toLowerCase(),yt==="select"||yt==="input"&&je.type==="file")var Et=H_;else if(kk(je))if(Nk)Et=_k;else{Et=Dk;var Ht=j_}else(yt=je.nodeName)&&yt.toLowerCase()==="input"&&(je.type==="checkbox"||je.type==="radio")&&(Et=G_);if(Et&&(Et=Et(f,$e))){j0(Ye,Et,b,Ge);break e}Ht&&Ht(f,je,$e),f==="focusout"&&(Ht=je._wrapperState)&&Ht.controlled&&je.type==="number"&&Lt(je,"number",je.value)}switch(Ht=$e?Fo($e):window,f){case"focusin":(kk(Ht)||Ht.contentEditable==="true")&&(Ad=Ht,K0=$e,Np=null);break;case"focusout":Np=K0=Ad=null;break;case"mousedown":X0=!0;break;case"contextmenu":case"mouseup":case"dragend":X0=!1,Y0(Ye,b,Ge);break;case"selectionchange":if(K_)break;case"keydown":case"keyup":Y0(Ye,b,Ge)}var qt;if(Rd)e:{switch(f){case"compositionstart":var rn="onCompositionStart";break e;case"compositionend":rn="onCompositionEnd";break e;case"compositionupdate":rn="onCompositionUpdate";break e}rn=void 0}else Dd?Sk(f,b)&&(rn="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(rn="onCompositionStart");rn&&(xk&&b.locale!=="ko"&&(Dd||rn!=="onCompositionStart"?rn==="onCompositionEnd"&&Dd&&(qt=Ee()):(Ao=Ge,z="value"in Ao?Ao.value:Ao.textContent,Dd=!0)),Ht=Ip($e,rn),0<Ht.length&&(rn=new P0(rn,f,null,b,Ge),Ye.push({event:rn,listeners:Ht}),qt?rn.data=qt:(qt=Ck(b),qt!==null&&(rn.data=qt)))),(qt=Cp?Tk(f,b):U_(f,b))&&($e=Ip($e,"onBeforeInput"),0<$e.length&&(Ge=new P0("onBeforeInput","beforeinput",null,b,Ge),Ye.push({event:Ge,listeners:$e}),Ge.data=qt))}of(Ye,h)})}function Fd(f,h,b){return{instance:f,listener:h,currentTarget:b}}function Ip(f,h){for(var b=h+"Capture",T=[];f!==null;){var I=f,_=I.stateNode;I.tag===5&&_!==null&&(I=_,_=Ca(f,b),_!=null&&T.unshift(Fd(f,_,I)),_=Ca(f,h),_!=null&&T.push(Fd(f,_,I))),f=f.return}return T}function Qu(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function Pk(f,h,b,T,I){for(var _=h._reactName,V=[];b!==null&&b!==T;){var Y=b,ie=Y.alternate,$e=Y.stateNode;if(ie!==null&&ie===T)break;Y.tag===5&&$e!==null&&(Y=$e,I?(ie=Ca(b,_),ie!=null&&V.unshift(Fd(b,ie,Y))):I||(ie=Ca(b,_),ie!=null&&V.push(Fd(b,ie,Y)))),b=b.return}V.length!==0&&f.push({event:h,listeners:V})}var Bk=/\r\n?/g,Q_=/\u0000|\uFFFD/g;function Vk(f){return(typeof f=="string"?f:""+f).replace(Bk,`
`).replace(Q_,"")}function Oy(f,h,b){if(h=Vk(h),Vk(f)!==h&&b)throw Error(t(425))}function Zu(){}var Rp=null,lf=null;function Fy(f,h){return f==="textarea"||f==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Ly=typeof setTimeout=="function"?setTimeout:void 0,tw=typeof clearTimeout=="function"?clearTimeout:void 0,Uk=typeof Promise=="function"?Promise:void 0,Ld=typeof queueMicrotask=="function"?queueMicrotask:typeof Uk<"u"?function(f){return Uk.resolve(null).then(f).catch(My)}:Ly;function My(f){setTimeout(function(){throw f})}function Md(f,h){var b=h,T=0;do{var I=b.nextSibling;if(f.removeChild(b),I&&I.nodeType===8)if(b=I.data,b==="/$"){if(T===0){f.removeChild(I),_o(h);return}T--}else b!=="$"&&b!=="$?"&&b!=="$!"||T++;b=I}while(b);_o(h)}function dl(f){for(;f!=null;f=f.nextSibling){var h=f.nodeType;if(h===1||h===3)break;if(h===8){if(h=f.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return f}function Wk(f){f=f.previousSibling;for(var h=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(h===0)return f;h--}else b==="/$"&&h++}f=f.previousSibling}return null}var Ju=Math.random().toString(36).slice(2),hl="__reactFiber$"+Ju,Dp="__reactProps$"+Ju,nu="__reactContainer$"+Ju,_p="__reactEvents$"+Ju,zd="__reactListeners$"+Ju,Z_="__reactHandles$"+Ju;function uf(f){var h=f[hl];if(h)return h;for(var b=f.parentNode;b;){if(h=b[nu]||b[hl]){if(b=h.alternate,h.child!==null||b!==null&&b.child!==null)for(f=Wk(f);f!==null;){if(b=f[hl])return b;f=Wk(f)}return h}f=b,b=f.parentNode}return null}function Mt(f){return f=f[hl]||f[nu],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Fo(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(t(33))}function Lr(f){return f[Dp]||null}var An=[],eo=-1;function to(f){return{current:f}}function xr(f){0>eo||(f.current=An[eo],An[eo]=null,eo--)}function At(f,h){eo++,An[eo]=f.current,f.current=h}var ga={},jr=to(ga),ws=to(!1),Ja=ga;function ei(f,h){var b=f.type.contextTypes;if(!b)return ga;var T=f.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===h)return T.__reactInternalMemoizedMaskedChildContext;var I={},_;for(_ in b)I[_]=h[_];return T&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=h,f.__reactInternalMemoizedMaskedChildContext=I),I}function os(f){return f=f.childContextTypes,f!=null}function Pd(){xr(ws),xr(jr)}function Hk(f,h,b){if(jr.current!==ga)throw Error(t(168));At(jr,h),At(ws,b)}function Ap(f,h,b){var T=f.stateNode;if(h=h.childContextTypes,typeof T.getChildContext!="function")return b;T=T.getChildContext();for(var I in T)if(!(I in h))throw Error(t(108,He(f)||"Unknown",I));return ce({},b,T)}function Ds(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||ga,Ja=jr.current,At(jr,f),At(ws,ws.current),!0}function zy(f,h,b){var T=f.stateNode;if(!T)throw Error(t(169));b?(f=Ap(f,h,Ja),T.__reactInternalMemoizedMergedChildContext=f,xr(ws),xr(jr),At(jr,f)):xr(ws),At(ws,b)}var pl=null,Bd=!1,ru=!1;function Py(f){pl===null?pl=[f]:pl.push(f)}function ec(f){Bd=!0,Py(f)}function ml(){if(!ru&&pl!==null){ru=!0;var f=0,h=Gn;try{var b=pl;for(Gn=1;f<b.length;f++){var T=b[f];do T=T(!0);while(T!==null)}pl=null,Bd=!1}catch(I){throw pl!==null&&(pl=pl.slice(f+1)),Tr(Io,ml),I}finally{Gn=h,ru=!1}}return null}var tc=[],nc=0,rc=null,su=0,ls=[],no=0,Ti=null,gl=1,yl="";function cf(f,h){tc[nc++]=su,tc[nc++]=rc,rc=f,su=h}function jk(f,h,b){ls[no++]=gl,ls[no++]=yl,ls[no++]=Ti,Ti=f;var T=gl;f=yl;var I=32-ka(T)-1;T&=~(1<<I),b+=1;var _=32-ka(h)+I;if(30<_){var V=I-I%5;_=(T&(1<<V)-1).toString(32),T>>=V,I-=V,gl=1<<32-ka(h)+I|b<<I|T,yl=_+f}else gl=1<<_|b<<I|T,yl=f}function By(f){f.return!==null&&(cf(f,1),jk(f,1,0))}function Vy(f){for(;f===rc;)rc=tc[--nc],tc[nc]=null,su=tc[--nc],tc[nc]=null;for(;f===Ti;)Ti=ls[--no],ls[no]=null,yl=ls[--no],ls[no]=null,gl=ls[--no],ls[no]=null}var ti=null,ni=null,Rr=!1,ro=null;function nw(f,h){var b=lo(5,null,null,0);b.elementType="DELETED",b.stateNode=h,b.return=f,h=f.deletions,h===null?(f.deletions=[b],f.flags|=16):h.push(b)}function Gk(f,h){switch(f.tag){case 5:var b=f.type;return h=h.nodeType!==1||b.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(f.stateNode=h,ti=f,ni=dl(h.firstChild),!0):!1;case 6:return h=f.pendingProps===""||h.nodeType!==3?null:h,h!==null?(f.stateNode=h,ti=f,ni=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(b=Ti!==null?{id:gl,overflow:yl}:null,f.memoizedState={dehydrated:h,treeContext:b,retryLane:1073741824},b=lo(18,null,null,0),b.stateNode=h,b.return=f,f.child=b,ti=f,ni=null,!0):!1;default:return!1}}function rw(f){return(f.mode&1)!==0&&(f.flags&128)===0}function sw(f){if(Rr){var h=ni;if(h){var b=h;if(!Gk(f,h)){if(rw(f))throw Error(t(418));h=dl(b.nextSibling);var T=ti;h&&Gk(f,h)?nw(T,b):(f.flags=f.flags&-4097|2,Rr=!1,ti=f)}}else{if(rw(f))throw Error(t(418));f.flags=f.flags&-4097|2,Rr=!1,ti=f}}}function Ss(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;ti=f}function Uy(f){if(f!==ti)return!1;if(!Rr)return Ss(f),Rr=!0,!1;var h;if((h=f.tag!==3)&&!(h=f.tag!==5)&&(h=f.type,h=h!=="head"&&h!=="body"&&!Fy(f.type,f.memoizedProps)),h&&(h=ni)){if(rw(f))throw Op(),Error(t(418));for(;h;)nw(f,h),h=dl(h.nextSibling)}if(Ss(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));e:{for(f=f.nextSibling,h=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(h===0){ni=dl(f.nextSibling);break e}h--}else b!=="$"&&b!=="$!"&&b!=="$?"||h++}f=f.nextSibling}ni=null}}else ni=ti?dl(f.stateNode.nextSibling):null;return!0}function Op(){for(var f=ni;f;)f=dl(f.nextSibling)}function sc(){ni=ti=null,Rr=!1}function au(f){ro===null?ro=[f]:ro.push(f)}var J_=D.ReactCurrentBatchConfig;function ff(f,h,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(t(309));var T=b.stateNode}if(!T)throw Error(t(147,f));var I=T,_=""+f;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===_?h.ref:(h=function(V){var Y=I.refs;V===null?delete Y[_]:Y[_]=V},h._stringRef=_,h)}if(typeof f!="string")throw Error(t(284));if(!b._owner)throw Error(t(290,f))}return f}function Wy(f,h){throw f=Object.prototype.toString.call(h),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":f))}function qk(f){var h=f._init;return h(f._payload)}function df(f){function h(we,de){if(f){var Te=we.deletions;Te===null?(we.deletions=[de],we.flags|=16):Te.push(de)}}function b(we,de){if(!f)return null;for(;de!==null;)h(we,de),de=de.sibling;return null}function T(we,de){for(we=new Map;de!==null;)de.key!==null?we.set(de.key,de):we.set(de.index,de),de=de.sibling;return we}function I(we,de){return we=dc(we,de),we.index=0,we.sibling=null,we}function _(we,de,Te){return we.index=Te,f?(Te=we.alternate,Te!==null?(Te=Te.index,Te<de?(we.flags|=2,de):Te):(we.flags|=2,de)):(we.flags|=1048576,de)}function V(we){return f&&we.alternate===null&&(we.flags|=2),we}function Y(we,de,Te,qe){return de===null||de.tag!==6?(de=Fw(Te,we.mode,qe),de.return=we,de):(de=I(de,Te),de.return=we,de)}function ie(we,de,Te,qe){var Et=Te.type;return Et===W?Ge(we,de,Te.props.children,qe,Te.key):de!==null&&(de.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===be&&qk(Et)===de.type)?(qe=I(de,Te.props),qe.ref=ff(we,de,Te),qe.return=we,qe):(qe=cm(Te.type,Te.key,Te.props,null,we.mode,qe),qe.ref=ff(we,de,Te),qe.return=we,qe)}function $e(we,de,Te,qe){return de===null||de.tag!==4||de.stateNode.containerInfo!==Te.containerInfo||de.stateNode.implementation!==Te.implementation?(de=Sv(Te,we.mode,qe),de.return=we,de):(de=I(de,Te.children||[]),de.return=we,de)}function Ge(we,de,Te,qe,Et){return de===null||de.tag!==7?(de=fu(Te,we.mode,qe,Et),de.return=we,de):(de=I(de,Te),de.return=we,de)}function Ye(we,de,Te){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Fw(""+de,we.mode,Te),de.return=we,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case L:return Te=cm(de.type,de.key,de.props,null,we.mode,Te),Te.ref=ff(we,null,de),Te.return=we,Te;case P:return de=Sv(de,we.mode,Te),de.return=we,de;case be:var qe=de._init;return Ye(we,qe(de._payload),Te)}if(it(de)||ye(de))return de=fu(de,we.mode,Te,null),de.return=we,de;Wy(we,de)}return null}function je(we,de,Te,qe){var Et=de!==null?de.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Et!==null?null:Y(we,de,""+Te,qe);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:return Te.key===Et?ie(we,de,Te,qe):null;case P:return Te.key===Et?$e(we,de,Te,qe):null;case be:return Et=Te._init,je(we,de,Et(Te._payload),qe)}if(it(Te)||ye(Te))return Et!==null?null:Ge(we,de,Te,qe,null);Wy(we,Te)}return null}function yt(we,de,Te,qe,Et){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return we=we.get(Te)||null,Y(de,we,""+qe,Et);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case L:return we=we.get(qe.key===null?Te:qe.key)||null,ie(de,we,qe,Et);case P:return we=we.get(qe.key===null?Te:qe.key)||null,$e(de,we,qe,Et);case be:var Ht=qe._init;return yt(we,de,Te,Ht(qe._payload),Et)}if(it(qe)||ye(qe))return we=we.get(Te)||null,Ge(de,we,qe,Et,null);Wy(de,qe)}return null}function kt(we,de,Te,qe){for(var Et=null,Ht=null,qt=de,rn=de=0,Os=null;qt!==null&&rn<Te.length;rn++){qt.index>rn?(Os=qt,qt=null):Os=qt.sibling;var Xn=je(we,qt,Te[rn],qe);if(Xn===null){qt===null&&(qt=Os);break}f&&qt&&Xn.alternate===null&&h(we,qt),de=_(Xn,de,rn),Ht===null?Et=Xn:Ht.sibling=Xn,Ht=Xn,qt=Os}if(rn===Te.length)return b(we,qt),Rr&&cf(we,rn),Et;if(qt===null){for(;rn<Te.length;rn++)qt=Ye(we,Te[rn],qe),qt!==null&&(de=_(qt,de,rn),Ht===null?Et=qt:Ht.sibling=qt,Ht=qt);return Rr&&cf(we,rn),Et}for(qt=T(we,qt);rn<Te.length;rn++)Os=yt(qt,we,rn,Te[rn],qe),Os!==null&&(f&&Os.alternate!==null&&qt.delete(Os.key===null?rn:Os.key),de=_(Os,de,rn),Ht===null?Et=Os:Ht.sibling=Os,Ht=Os);return f&&qt.forEach(function(mc){return h(we,mc)}),Rr&&cf(we,rn),Et}function Dt(we,de,Te,qe){var Et=ye(Te);if(typeof Et!="function")throw Error(t(150));if(Te=Et.call(Te),Te==null)throw Error(t(151));for(var Ht=Et=null,qt=de,rn=de=0,Os=null,Xn=Te.next();qt!==null&&!Xn.done;rn++,Xn=Te.next()){qt.index>rn?(Os=qt,qt=null):Os=qt.sibling;var mc=je(we,qt,Xn.value,qe);if(mc===null){qt===null&&(qt=Os);break}f&&qt&&mc.alternate===null&&h(we,qt),de=_(mc,de,rn),Ht===null?Et=mc:Ht.sibling=mc,Ht=mc,qt=Os}if(Xn.done)return b(we,qt),Rr&&cf(we,rn),Et;if(qt===null){for(;!Xn.done;rn++,Xn=Te.next())Xn=Ye(we,Xn.value,qe),Xn!==null&&(de=_(Xn,de,rn),Ht===null?Et=Xn:Ht.sibling=Xn,Ht=Xn);return Rr&&cf(we,rn),Et}for(qt=T(we,qt);!Xn.done;rn++,Xn=Te.next())Xn=yt(qt,we,rn,Xn.value,qe),Xn!==null&&(f&&Xn.alternate!==null&&qt.delete(Xn.key===null?rn:Xn.key),de=_(Xn,de,rn),Ht===null?Et=Xn:Ht.sibling=Xn,Ht=Xn);return f&&qt.forEach(function(IE){return h(we,IE)}),Rr&&cf(we,rn),Et}function Zr(we,de,Te,qe){if(typeof Te=="object"&&Te!==null&&Te.type===W&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case L:e:{for(var Et=Te.key,Ht=de;Ht!==null;){if(Ht.key===Et){if(Et=Te.type,Et===W){if(Ht.tag===7){b(we,Ht.sibling),de=I(Ht,Te.props.children),de.return=we,we=de;break e}}else if(Ht.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===be&&qk(Et)===Ht.type){b(we,Ht.sibling),de=I(Ht,Te.props),de.ref=ff(we,Ht,Te),de.return=we,we=de;break e}b(we,Ht);break}else h(we,Ht);Ht=Ht.sibling}Te.type===W?(de=fu(Te.props.children,we.mode,qe,Te.key),de.return=we,we=de):(qe=cm(Te.type,Te.key,Te.props,null,we.mode,qe),qe.ref=ff(we,de,Te),qe.return=we,we=qe)}return V(we);case P:e:{for(Ht=Te.key;de!==null;){if(de.key===Ht)if(de.tag===4&&de.stateNode.containerInfo===Te.containerInfo&&de.stateNode.implementation===Te.implementation){b(we,de.sibling),de=I(de,Te.children||[]),de.return=we,we=de;break e}else{b(we,de);break}else h(we,de);de=de.sibling}de=Sv(Te,we.mode,qe),de.return=we,we=de}return V(we);case be:return Ht=Te._init,Zr(we,de,Ht(Te._payload),qe)}if(it(Te))return kt(we,de,Te,qe);if(ye(Te))return Dt(we,de,Te,qe);Wy(we,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,de!==null&&de.tag===6?(b(we,de.sibling),de=I(de,Te),de.return=we,we=de):(b(we,de),de=Fw(Te,we.mode,qe),de.return=we,we=de),V(we)):b(we,de)}return Zr}var Kr=df(!0),ft=df(!1),ki=to(null),ri=null,Vd=null,aw=null;function iw(){aw=Vd=ri=null}function ow(f){var h=ki.current;xr(ki),f._currentValue=h}function lw(f,h,b){for(;f!==null;){var T=f.alternate;if((f.childLanes&h)!==h?(f.childLanes|=h,T!==null&&(T.childLanes|=h)):T!==null&&(T.childLanes&h)!==h&&(T.childLanes|=h),f===b)break;f=f.return}}function Mr(f,h){ri=f,aw=Vd=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&h&&(cs=!0),f.firstContext=null)}function so(f){var h=f._currentValue;if(aw!==f)if(f={context:f,memoizedValue:h,next:null},Vd===null){if(ri===null)throw Error(t(308));Vd=f,ri.dependencies={lanes:0,firstContext:f}}else Vd=Vd.next=f;return h}var hf=null;function uw(f){hf===null?hf=[f]:hf.push(f)}function cw(f,h,b,T){var I=h.interleaved;return I===null?(b.next=b,uw(h)):(b.next=I.next,I.next=b),h.interleaved=b,Ei(f,T)}function Ei(f,h){f.lanes|=h;var b=f.alternate;for(b!==null&&(b.lanes|=h),b=f,f=f.return;f!==null;)f.childLanes|=h,b=f.alternate,b!==null&&(b.childLanes|=h),b=f,f=f.return;return b.tag===3?b.stateNode:null}var Ni=!1;function fw(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kk(f,h){f=f.updateQueue,h.updateQueue===f&&(h.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function iu(f,h){return{eventTime:f,lane:h,tag:0,payload:null,callback:null,next:null}}function ac(f,h,b){var T=f.updateQueue;if(T===null)return null;if(T=T.shared,On&2){var I=T.pending;return I===null?h.next=h:(h.next=I.next,I.next=h),T.pending=h,Ei(f,b)}return I=T.interleaved,I===null?(h.next=h,uw(T)):(h.next=I.next,I.next=h),T.interleaved=h,Ei(f,b)}function Hy(f,h,b){if(h=h.updateQueue,h!==null&&(h=h.shared,(b&4194240)!==0)){var T=h.lanes;T&=f.pendingLanes,b|=T,h.lanes=b,Ql(f,b)}}function Xk(f,h){var b=f.updateQueue,T=f.alternate;if(T!==null&&(T=T.updateQueue,b===T)){var I=null,_=null;if(b=b.firstBaseUpdate,b!==null){do{var V={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};_===null?I=_=V:_=_.next=V,b=b.next}while(b!==null);_===null?I=_=h:_=_.next=h}else I=_=h;b={baseState:T.baseState,firstBaseUpdate:I,lastBaseUpdate:_,shared:T.shared,effects:T.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=h:f.next=h,b.lastBaseUpdate=h}function Fp(f,h,b,T){var I=f.updateQueue;Ni=!1;var _=I.firstBaseUpdate,V=I.lastBaseUpdate,Y=I.shared.pending;if(Y!==null){I.shared.pending=null;var ie=Y,$e=ie.next;ie.next=null,V===null?_=$e:V.next=$e,V=ie;var Ge=f.alternate;Ge!==null&&(Ge=Ge.updateQueue,Y=Ge.lastBaseUpdate,Y!==V&&(Y===null?Ge.firstBaseUpdate=$e:Y.next=$e,Ge.lastBaseUpdate=ie))}if(_!==null){var Ye=I.baseState;V=0,Ge=$e=ie=null,Y=_;do{var je=Y.lane,yt=Y.eventTime;if((T&je)===je){Ge!==null&&(Ge=Ge.next={eventTime:yt,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var kt=f,Dt=Y;switch(je=h,yt=b,Dt.tag){case 1:if(kt=Dt.payload,typeof kt=="function"){Ye=kt.call(yt,Ye,je);break e}Ye=kt;break e;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Dt.payload,je=typeof kt=="function"?kt.call(yt,Ye,je):kt,je==null)break e;Ye=ce({},Ye,je);break e;case 2:Ni=!0}}Y.callback!==null&&Y.lane!==0&&(f.flags|=64,je=I.effects,je===null?I.effects=[Y]:je.push(Y))}else yt={eventTime:yt,lane:je,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ge===null?($e=Ge=yt,ie=Ye):Ge=Ge.next=yt,V|=je;if(Y=Y.next,Y===null){if(Y=I.shared.pending,Y===null)break;je=Y,Y=je.next,je.next=null,I.lastBaseUpdate=je,I.shared.pending=null}}while(!0);if(Ge===null&&(ie=Ye),I.baseState=ie,I.firstBaseUpdate=$e,I.lastBaseUpdate=Ge,h=I.shared.interleaved,h!==null){I=h;do V|=I.lane,I=I.next;while(I!==h)}else _===null&&(I.shared.lanes=0);Sl|=V,f.lanes=V,f.memoizedState=Ye}}function dw(f,h,b){if(f=h.effects,h.effects=null,f!==null)for(h=0;h<f.length;h++){var T=f[h],I=T.callback;if(I!==null){if(T.callback=null,T=b,typeof I!="function")throw Error(t(191,I));I.call(T)}}}var Lp={},vl=to(Lp),Mp=to(Lp),zp=to(Lp);function pf(f){if(f===Lp)throw Error(t(174));return f}function hw(f,h){switch(At(zp,h),At(Mp,f),At(vl,Lp),f=h.nodeType,f){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:tr(null,"");break;default:f=f===8?h.parentNode:h,h=f.namespaceURI||null,f=f.tagName,h=tr(h,f)}xr(vl),At(vl,h)}function mf(){xr(vl),xr(Mp),xr(zp)}function Yk(f){pf(zp.current);var h=pf(vl.current),b=tr(h,f.type);h!==b&&(At(Mp,f),At(vl,b))}function jy(f){Mp.current===f&&(xr(vl),xr(Mp))}var zr=to(0);function Gy(f){for(var h=f;h!==null;){if(h.tag===13){var b=h.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Pp=[];function zt(){for(var f=0;f<Pp.length;f++)Pp[f]._workInProgressVersionPrimary=null;Pp.length=0}var xn=D.ReactCurrentDispatcher,qn=D.ReactCurrentBatchConfig,cr=0,Kn=null,us=null,_s=null,qy=!1,Bp=!1,gf=0,We=0;function Wn(){throw Error(t(321))}function Qt(f,h){if(h===null)return!1;for(var b=0;b<h.length&&b<f.length;b++)if(!Oo(f[b],h[b]))return!1;return!0}function ic(f,h,b,T,I,_){if(cr=_,Kn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,xn.current=f===null||f.memoizedState===null?lv:Gp,f=b(T,I),Bp){_=0;do{if(Bp=!1,gf=0,25<=_)throw Error(t(301));_+=1,_s=us=null,h.updateQueue=null,xn.current=uv,f=b(T,I)}while(Bp)}if(xn.current=wf,h=us!==null&&us.next!==null,cr=0,_s=us=Kn=null,qy=!1,h)throw Error(t(300));return f}function Lo(){var f=gf!==0;return gf=0,f}function ya(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _s===null?Kn.memoizedState=_s=f:_s=_s.next=f,_s}function Xr(){if(us===null){var f=Kn.alternate;f=f!==null?f.memoizedState:null}else f=us.next;var h=_s===null?Kn.memoizedState:_s.next;if(h!==null)_s=h,us=f;else{if(f===null)throw Error(t(310));us=f,f={memoizedState:us.memoizedState,baseState:us.baseState,baseQueue:us.baseQueue,queue:us.queue,next:null},_s===null?Kn.memoizedState=_s=f:_s=_s.next=f}return _s}function ou(f,h){return typeof h=="function"?h(f):h}function oc(f){var h=Xr(),b=h.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var T=us,I=T.baseQueue,_=b.pending;if(_!==null){if(I!==null){var V=I.next;I.next=_.next,_.next=V}T.baseQueue=I=_,b.pending=null}if(I!==null){_=I.next,T=T.baseState;var Y=V=null,ie=null,$e=_;do{var Ge=$e.lane;if((cr&Ge)===Ge)ie!==null&&(ie=ie.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),T=$e.hasEagerState?$e.eagerState:f(T,$e.action);else{var Ye={lane:Ge,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};ie===null?(Y=ie=Ye,V=T):ie=ie.next=Ye,Kn.lanes|=Ge,Sl|=Ge}$e=$e.next}while($e!==null&&$e!==_);ie===null?V=T:ie.next=Y,Oo(T,h.memoizedState)||(cs=!0),h.memoizedState=T,h.baseState=V,h.baseQueue=ie,b.lastRenderedState=T}if(f=b.interleaved,f!==null){I=f;do _=I.lane,Kn.lanes|=_,Sl|=_,I=I.next;while(I!==f)}else I===null&&(b.lanes=0);return[h.memoizedState,b.dispatch]}function yf(f){var h=Xr(),b=h.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var T=b.dispatch,I=b.pending,_=h.memoizedState;if(I!==null){b.pending=null;var V=I=I.next;do _=f(_,V.action),V=V.next;while(V!==I);Oo(_,h.memoizedState)||(cs=!0),h.memoizedState=_,h.baseQueue===null&&(h.baseState=_),b.lastRenderedState=_}return[_,T]}function Ky(){}function Xy(f,h){var b=Kn,T=Xr(),I=h(),_=!Oo(T.memoizedState,I);if(_&&(T.memoizedState=I,cs=!0),T=T.queue,Vp(Zy.bind(null,b,T,f),[f]),T.getSnapshot!==h||_||_s!==null&&_s.memoizedState.tag&1){if(b.flags|=2048,vf(9,Qy.bind(null,b,T,I,h),void 0,null),Cs===null)throw Error(t(349));cr&30||Yy(b,h,I)}return I}function Yy(f,h,b){f.flags|=16384,f={getSnapshot:h,value:b},h=Kn.updateQueue,h===null?(h={lastEffect:null,stores:null},Kn.updateQueue=h,h.stores=[f]):(b=h.stores,b===null?h.stores=[f]:b.push(f))}function Qy(f,h,b,T){h.value=b,h.getSnapshot=T,Jy(h)&&ev(f)}function Zy(f,h,b){return b(function(){Jy(h)&&ev(f)})}function Jy(f){var h=f.getSnapshot;f=f.value;try{var b=h();return!Oo(f,b)}catch{return!0}}function ev(f){var h=Ei(f,1);h!==null&&Da(h,f,1,-1)}function tv(f){var h=ya();return typeof f=="function"&&(f=f()),h.memoizedState=h.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:f},h.queue=f,f=f.dispatch=xf.bind(null,Kn,f),[h.memoizedState,f]}function vf(f,h,b,T){return f={tag:f,create:h,destroy:b,deps:T,next:null},h=Kn.updateQueue,h===null?(h={lastEffect:null,stores:null},Kn.updateQueue=h,h.lastEffect=f.next=f):(b=h.lastEffect,b===null?h.lastEffect=f.next=f:(T=b.next,b.next=f,f.next=T,h.lastEffect=f)),f}function nv(){return Xr().memoizedState}function Ud(f,h,b,T){var I=ya();Kn.flags|=f,I.memoizedState=vf(1|h,b,void 0,T===void 0?null:T)}function Wd(f,h,b,T){var I=Xr();T=T===void 0?null:T;var _=void 0;if(us!==null){var V=us.memoizedState;if(_=V.destroy,T!==null&&Qt(T,V.deps)){I.memoizedState=vf(h,b,_,T);return}}Kn.flags|=f,I.memoizedState=vf(1|h,b,_,T)}function rv(f,h){return Ud(8390656,8,f,h)}function Vp(f,h){return Wd(2048,8,f,h)}function sv(f,h){return Wd(4,2,f,h)}function Up(f,h){return Wd(4,4,f,h)}function bf(f,h){if(typeof h=="function")return f=f(),h(f),function(){h(null)};if(h!=null)return f=f(),h.current=f,function(){h.current=null}}function av(f,h,b){return b=b!=null?b.concat([f]):null,Wd(4,4,bf.bind(null,h,f),b)}function Wp(){}function iv(f,h){var b=Xr();h=h===void 0?null:h;var T=b.memoizedState;return T!==null&&h!==null&&Qt(h,T[1])?T[0]:(b.memoizedState=[f,h],f)}function ov(f,h){var b=Xr();h=h===void 0?null:h;var T=b.memoizedState;return T!==null&&h!==null&&Qt(h,T[1])?T[0]:(f=f(),b.memoizedState=[f,h],f)}function pw(f,h,b){return cr&21?(Oo(b,h)||(b=Sd(),Kn.lanes|=b,Sl|=b,f.baseState=!0),h):(f.baseState&&(f.baseState=!1,cs=!0),f.memoizedState=b)}function Hp(f,h){var b=Gn;Gn=b!==0&&4>b?b:4,f(!0);var T=qn.transition;qn.transition={};try{f(!1),h()}finally{Gn=b,qn.transition=T}}function mw(){return Xr().memoizedState}function jp(f,h,b){var T=Cl(f);if(b={lane:T,action:b,hasEagerState:!1,eagerState:null,next:null},si(f))Qk(h,b);else if(b=cw(f,h,b,T),b!==null){var I=hs();Da(b,f,T,I),gr(b,h,T)}}function xf(f,h,b){var T=Cl(f),I={lane:T,action:b,hasEagerState:!1,eagerState:null,next:null};if(si(f))Qk(h,I);else{var _=f.alternate;if(f.lanes===0&&(_===null||_.lanes===0)&&(_=h.lastRenderedReducer,_!==null))try{var V=h.lastRenderedState,Y=_(V,b);if(I.hasEagerState=!0,I.eagerState=Y,Oo(Y,V)){var ie=h.interleaved;ie===null?(I.next=I,uw(h)):(I.next=ie.next,ie.next=I),h.interleaved=I;return}}catch{}finally{}b=cw(f,h,I,T),b!==null&&(I=hs(),Da(b,f,T,I),gr(b,h,T))}}function si(f){var h=f.alternate;return f===Kn||h!==null&&h===Kn}function Qk(f,h){Bp=qy=!0;var b=f.pending;b===null?h.next=h:(h.next=b.next,b.next=h),f.pending=h}function gr(f,h,b){if(b&4194240){var T=h.lanes;T&=f.pendingLanes,b|=T,h.lanes=b,Ql(f,b)}}var wf={readContext:so,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},lv={readContext:so,useCallback:function(f,h){return ya().memoizedState=[f,h===void 0?null:h],f},useContext:so,useEffect:rv,useImperativeHandle:function(f,h,b){return b=b!=null?b.concat([f]):null,Ud(4194308,4,bf.bind(null,h,f),b)},useLayoutEffect:function(f,h){return Ud(4194308,4,f,h)},useInsertionEffect:function(f,h){return Ud(4,2,f,h)},useMemo:function(f,h){var b=ya();return h=h===void 0?null:h,f=f(),b.memoizedState=[f,h],f},useReducer:function(f,h,b){var T=ya();return h=b!==void 0?b(h):h,T.memoizedState=T.baseState=h,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:h},T.queue=f,f=f.dispatch=jp.bind(null,Kn,f),[T.memoizedState,f]},useRef:function(f){var h=ya();return f={current:f},h.memoizedState=f},useState:tv,useDebugValue:Wp,useDeferredValue:function(f){return ya().memoizedState=f},useTransition:function(){var f=tv(!1),h=f[0];return f=Hp.bind(null,f[1]),ya().memoizedState=f,[h,f]},useMutableSource:function(){},useSyncExternalStore:function(f,h,b){var T=Kn,I=ya();if(Rr){if(b===void 0)throw Error(t(407));b=b()}else{if(b=h(),Cs===null)throw Error(t(349));cr&30||Yy(T,h,b)}I.memoizedState=b;var _={value:b,getSnapshot:h};return I.queue=_,rv(Zy.bind(null,T,_,f),[f]),T.flags|=2048,vf(9,Qy.bind(null,T,_,b,h),void 0,null),b},useId:function(){var f=ya(),h=Cs.identifierPrefix;if(Rr){var b=yl,T=gl;b=(T&~(1<<32-ka(T)-1)).toString(32)+b,h=":"+h+"R"+b,b=gf++,0<b&&(h+="H"+b.toString(32)),h+=":"}else b=We++,h=":"+h+"r"+b.toString(32)+":";return f.memoizedState=h},unstable_isNewReconciler:!1},Gp={readContext:so,useCallback:iv,useContext:so,useEffect:Vp,useImperativeHandle:av,useInsertionEffect:sv,useLayoutEffect:Up,useMemo:ov,useReducer:oc,useRef:nv,useState:function(){return oc(ou)},useDebugValue:Wp,useDeferredValue:function(f){var h=Xr();return pw(h,us.memoizedState,f)},useTransition:function(){var f=oc(ou)[0],h=Xr().memoizedState;return[f,h]},useMutableSource:Ky,useSyncExternalStore:Xy,useId:mw,unstable_isNewReconciler:!1},uv={readContext:so,useCallback:iv,useContext:so,useEffect:Vp,useImperativeHandle:av,useInsertionEffect:sv,useLayoutEffect:Up,useMemo:ov,useReducer:yf,useRef:nv,useState:function(){return yf(ou)},useDebugValue:Wp,useDeferredValue:function(f){var h=Xr();return us===null?h.memoizedState=f:pw(h,us.memoizedState,f)},useTransition:function(){var f=yf(ou)[0],h=Xr().memoizedState;return[f,h]},useMutableSource:Ky,useSyncExternalStore:Xy,useId:mw,unstable_isNewReconciler:!1};function Mo(f,h){if(f&&f.defaultProps){h=ce({},h),f=f.defaultProps;for(var b in f)h[b]===void 0&&(h[b]=f[b]);return h}return h}function gw(f,h,b,T){h=f.memoizedState,b=b(T,h),b=b==null?h:ce({},h,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var cv={isMounted:function(f){return(f=f._reactInternals)?fn(f)===f:!1},enqueueSetState:function(f,h,b){f=f._reactInternals;var T=hs(),I=Cl(f),_=iu(T,I);_.payload=h,b!=null&&(_.callback=b),h=ac(f,_,I),h!==null&&(Da(h,f,I,T),Hy(h,f,I))},enqueueReplaceState:function(f,h,b){f=f._reactInternals;var T=hs(),I=Cl(f),_=iu(T,I);_.tag=1,_.payload=h,b!=null&&(_.callback=b),h=ac(f,_,I),h!==null&&(Da(h,f,I,T),Hy(h,f,I))},enqueueForceUpdate:function(f,h){f=f._reactInternals;var b=hs(),T=Cl(f),I=iu(b,T);I.tag=2,h!=null&&(I.callback=h),h=ac(f,I,T),h!==null&&(Da(h,f,T,b),Hy(h,f,T))}};function Zk(f,h,b,T,I,_,V){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(T,_,V):h.prototype&&h.prototype.isPureReactComponent?!kp(b,T)||!kp(I,_):!0}function fv(f,h,b){var T=!1,I=ga,_=h.contextType;return typeof _=="object"&&_!==null?_=so(_):(I=os(h)?Ja:jr.current,T=h.contextTypes,_=(T=T!=null)?ei(f,I):ga),h=new h(b,_),f.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=cv,f.stateNode=h,h._reactInternals=f,T&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=I,f.__reactInternalMemoizedMaskedChildContext=_),h}function Jk(f,h,b,T){f=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(b,T),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(b,T),h.state!==f&&cv.enqueueReplaceState(h,h.state,null)}function qp(f,h,b,T){var I=f.stateNode;I.props=b,I.state=f.memoizedState,I.refs={},fw(f);var _=h.contextType;typeof _=="object"&&_!==null?I.context=so(_):(_=os(h)?Ja:jr.current,I.context=ei(f,_)),I.state=f.memoizedState,_=h.getDerivedStateFromProps,typeof _=="function"&&(gw(f,h,_,b),I.state=f.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(h=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),h!==I.state&&cv.enqueueReplaceState(I,I.state,null),Fp(f,b,I,T),I.state=f.memoizedState),typeof I.componentDidMount=="function"&&(f.flags|=4194308)}function Sf(f,h){try{var b="",T=h;do b+=Fe(T),T=T.return;while(T);var I=b}catch(_){I=`
Error generating stack: `+_.message+`
`+_.stack}return{value:f,source:h,stack:I,digest:null}}function yw(f,h,b){return{value:f,source:null,stack:b??null,digest:h??null}}function vw(f,h){try{console.error(h.value)}catch(b){setTimeout(function(){throw b})}}var dv=typeof WeakMap=="function"?WeakMap:Map;function eE(f,h,b){b=iu(-1,b),b.tag=3,b.payload={element:null};var T=h.value;return b.callback=function(){Xd||(Xd=!0,kf=T),vw(f,h)},b}function bw(f,h,b){b=iu(-1,b),b.tag=3;var T=f.type.getDerivedStateFromError;if(typeof T=="function"){var I=h.value;b.payload=function(){return T(I)},b.callback=function(){vw(f,h)}}var _=f.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(b.callback=function(){vw(f,h),typeof T!="function"&&(cc===null?cc=new Set([this]):cc.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})}),b}function xw(f,h,b){var T=f.pingCache;if(T===null){T=f.pingCache=new dv;var I=new Set;T.set(h,I)}else I=T.get(h),I===void 0&&(I=new Set,T.set(h,I));I.has(b)||(I.add(b),f=iA.bind(null,f,h,b),h.then(f,f))}function tE(f){do{var h;if((h=f.tag===13)&&(h=f.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return f;f=f.return}while(f!==null);return null}function lc(f,h,b,T,I){return f.mode&1?(f.flags|=65536,f.lanes=I,f):(f===h?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(h=iu(-1,1),h.tag=2,ac(b,h,1))),b.lanes|=1),f)}var Kp=D.ReactCurrentOwner,cs=!1;function Ks(f,h,b,T){h.child=f===null?ft(h,null,b,T):Kr(h,f.child,b,T)}function ai(f,h,b,T,I){b=b.render;var _=h.ref;return Mr(h,I),T=ic(f,h,b,T,_,I),b=Lo(),f!==null&&!cs?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~I,io(f,h,I)):(Rr&&b&&By(h),h.flags|=1,Ks(f,h,T,I),h.child)}function Cf(f,h,b,T,I){if(f===null){var _=b.type;return typeof _=="function"&&!Ow(_)&&_.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(h.tag=15,h.type=_,pn(f,h,_,T,I)):(f=cm(b.type,null,T,h,h.mode,I),f.ref=h.ref,f.return=h,h.child=f)}if(_=f.child,!(f.lanes&I)){var V=_.memoizedProps;if(b=b.compare,b=b!==null?b:kp,b(V,T)&&f.ref===h.ref)return io(f,h,I)}return h.flags|=1,f=dc(_,T),f.ref=h.ref,f.return=h,h.child=f}function pn(f,h,b,T,I){if(f!==null){var _=f.memoizedProps;if(kp(_,T)&&f.ref===h.ref)if(cs=!1,h.pendingProps=T=_,(f.lanes&I)!==0)f.flags&131072&&(cs=!0);else return h.lanes=f.lanes,io(f,h,I)}return nE(f,h,b,T,I)}function Xp(f,h,b){var T=h.pendingProps,I=T.children,_=f!==null?f.memoizedState:null;if(T.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Gd,$i),$i|=b;else{if(!(b&1073741824))return f=_!==null?_.baseLanes|b:b,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:f,cachePool:null,transitions:null},h.updateQueue=null,At(Gd,$i),$i|=f,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=_!==null?_.baseLanes:b,At(Gd,$i),$i|=T}else _!==null?(T=_.baseLanes|b,h.memoizedState=null):T=b,At(Gd,$i),$i|=T;return Ks(f,h,I,b),h.child}function ww(f,h){var b=h.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(h.flags|=512,h.flags|=2097152)}function nE(f,h,b,T,I){var _=os(b)?Ja:jr.current;return _=ei(h,_),Mr(h,I),b=ic(f,h,b,T,_,I),T=Lo(),f!==null&&!cs?(h.updateQueue=f.updateQueue,h.flags&=-2053,f.lanes&=~I,io(f,h,I)):(Rr&&T&&By(h),h.flags|=1,Ks(f,h,b,I),h.child)}function rE(f,h,b,T,I){if(os(b)){var _=!0;Ds(h)}else _=!1;if(Mr(h,I),h.stateNode===null)ao(f,h),fv(h,b,T),qp(h,b,T,I),T=!0;else if(f===null){var V=h.stateNode,Y=h.memoizedProps;V.props=Y;var ie=V.context,$e=b.contextType;typeof $e=="object"&&$e!==null?$e=so($e):($e=os(b)?Ja:jr.current,$e=ei(h,$e));var Ge=b.getDerivedStateFromProps,Ye=typeof Ge=="function"||typeof V.getSnapshotBeforeUpdate=="function";Ye||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Y!==T||ie!==$e)&&Jk(h,V,T,$e),Ni=!1;var je=h.memoizedState;V.state=je,Fp(h,T,V,I),ie=h.memoizedState,Y!==T||je!==ie||ws.current||Ni?(typeof Ge=="function"&&(gw(h,b,Ge,T),ie=h.memoizedState),(Y=Ni||Zk(h,b,Y,T,je,ie,$e))?(Ye||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=T,h.memoizedState=ie),V.props=T,V.state=ie,V.context=$e,T=Y):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),T=!1)}else{V=h.stateNode,Kk(f,h),Y=h.memoizedProps,$e=h.type===h.elementType?Y:Mo(h.type,Y),V.props=$e,Ye=h.pendingProps,je=V.context,ie=b.contextType,typeof ie=="object"&&ie!==null?ie=so(ie):(ie=os(b)?Ja:jr.current,ie=ei(h,ie));var yt=b.getDerivedStateFromProps;(Ge=typeof yt=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Y!==Ye||je!==ie)&&Jk(h,V,T,ie),Ni=!1,je=h.memoizedState,V.state=je,Fp(h,T,V,I);var kt=h.memoizedState;Y!==Ye||je!==kt||ws.current||Ni?(typeof yt=="function"&&(gw(h,b,yt,T),kt=h.memoizedState),($e=Ni||Zk(h,b,$e,T,je,kt,ie)||!1)?(Ge||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(T,kt,ie),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(T,kt,ie)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||Y===f.memoizedProps&&je===f.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Y===f.memoizedProps&&je===f.memoizedState||(h.flags|=1024),h.memoizedProps=T,h.memoizedState=kt),V.props=T,V.state=kt,V.context=ie,T=$e):(typeof V.componentDidUpdate!="function"||Y===f.memoizedProps&&je===f.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||Y===f.memoizedProps&&je===f.memoizedState||(h.flags|=1024),T=!1)}return Yp(f,h,b,T,_,I)}function Yp(f,h,b,T,I,_){ww(f,h);var V=(h.flags&128)!==0;if(!T&&!V)return I&&zy(h,b,!1),io(f,h,_);T=h.stateNode,Kp.current=h;var Y=V&&typeof b.getDerivedStateFromError!="function"?null:T.render();return h.flags|=1,f!==null&&V?(h.child=Kr(h,f.child,null,_),h.child=Kr(h,null,Y,_)):Ks(f,h,Y,_),h.memoizedState=T.state,I&&zy(h,b,!0),h.child}function Hd(f){var h=f.stateNode;h.pendingContext?Hk(f,h.pendingContext,h.pendingContext!==h.context):h.context&&Hk(f,h.context,!1),hw(f,h.containerInfo)}function sE(f,h,b,T,I){return sc(),au(I),h.flags|=256,Ks(f,h,b,T),h.child}var hv={dehydrated:null,treeContext:null,retryLane:0};function Sw(f){return{baseLanes:f,cachePool:null,transitions:null}}function pv(f,h,b){var T=h.pendingProps,I=zr.current,_=!1,V=(h.flags&128)!==0,Y;if((Y=V)||(Y=f!==null&&f.memoizedState===null?!1:(I&2)!==0),Y?(_=!0,h.flags&=-129):(f===null||f.memoizedState!==null)&&(I|=1),At(zr,I&1),f===null)return sw(h),f=h.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(h.mode&1?f.data==="$!"?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(V=T.children,f=T.fallback,_?(T=h.mode,_=h.child,V={mode:"hidden",children:V},!(T&1)&&_!==null?(_.childLanes=0,_.pendingProps=V):_=hc(V,T,0,null),f=fu(f,T,b,null),_.return=h,f.return=h,_.sibling=f,h.child=_,h.child.memoizedState=Sw(b),h.memoizedState=hv,f):Cw(h,V));if(I=f.memoizedState,I!==null&&(Y=I.dehydrated,Y!==null))return aE(f,h,V,T,Y,I,b);if(_){_=T.fallback,V=h.mode,I=f.child,Y=I.sibling;var ie={mode:"hidden",children:T.children};return!(V&1)&&h.child!==I?(T=h.child,T.childLanes=0,T.pendingProps=ie,h.deletions=null):(T=dc(I,ie),T.subtreeFlags=I.subtreeFlags&14680064),Y!==null?_=dc(Y,_):(_=fu(_,V,b,null),_.flags|=2),_.return=h,T.return=h,T.sibling=_,h.child=T,T=_,_=h.child,V=f.child.memoizedState,V=V===null?Sw(b):{baseLanes:V.baseLanes|b,cachePool:null,transitions:V.transitions},_.memoizedState=V,_.childLanes=f.childLanes&~b,h.memoizedState=hv,T}return _=f.child,f=_.sibling,T=dc(_,{mode:"visible",children:T.children}),!(h.mode&1)&&(T.lanes=b),T.return=h,T.sibling=null,f!==null&&(b=h.deletions,b===null?(h.deletions=[f],h.flags|=16):b.push(f)),h.child=T,h.memoizedState=null,T}function Cw(f,h){return h=hc({mode:"visible",children:h},f.mode,0,null),h.return=f,f.child=h}function Qp(f,h,b,T){return T!==null&&au(T),Kr(h,f.child,null,b),f=Cw(h,h.pendingProps.children),f.flags|=2,h.memoizedState=null,f}function aE(f,h,b,T,I,_,V){if(b)return h.flags&256?(h.flags&=-257,T=yw(Error(t(422))),Qp(f,h,V,T)):h.memoizedState!==null?(h.child=f.child,h.flags|=128,null):(_=T.fallback,I=h.mode,T=hc({mode:"visible",children:T.children},I,0,null),_=fu(_,I,V,null),_.flags|=2,T.return=h,_.return=h,T.sibling=_,h.child=T,h.mode&1&&Kr(h,f.child,null,V),h.child.memoizedState=Sw(V),h.memoizedState=hv,_);if(!(h.mode&1))return Qp(f,h,V,null);if(I.data==="$!"){if(T=I.nextSibling&&I.nextSibling.dataset,T)var Y=T.dgst;return T=Y,_=Error(t(419)),T=yw(_,T,void 0),Qp(f,h,V,T)}if(Y=(V&f.childLanes)!==0,cs||Y){if(T=Cs,T!==null){switch(V&-V){case 4:I=2;break;case 16:I=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:I=32;break;case 536870912:I=268435456;break;default:I=0}I=I&(T.suspendedLanes|V)?0:I,I!==0&&I!==_.retryLane&&(_.retryLane=I,Ei(f,I),Da(T,f,I,-1))}return Aw(),T=yw(Error(t(421))),Qp(f,h,V,T)}return I.data==="$?"?(h.flags|=128,h.child=f.child,h=oA.bind(null,f),I._reactRetry=h,null):(f=_.treeContext,ni=dl(I.nextSibling),ti=h,Rr=!0,ro=null,f!==null&&(ls[no++]=gl,ls[no++]=yl,ls[no++]=Ti,gl=f.id,yl=f.overflow,Ti=h),h=Cw(h,T.children),h.flags|=4096,h)}function Tw(f,h,b){f.lanes|=h;var T=f.alternate;T!==null&&(T.lanes|=h),lw(f.return,h,b)}function $a(f,h,b,T,I){var _=f.memoizedState;_===null?f.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:T,tail:b,tailMode:I}:(_.isBackwards=h,_.rendering=null,_.renderingStartTime=0,_.last=T,_.tail=b,_.tailMode=I)}function bl(f,h,b){var T=h.pendingProps,I=T.revealOrder,_=T.tail;if(Ks(f,h,T.children,b),T=zr.current,T&2)T=T&1|2,h.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=h.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Tw(f,b,h);else if(f.tag===19)Tw(f,b,h);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===h)break e;for(;f.sibling===null;){if(f.return===null||f.return===h)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}T&=1}if(At(zr,T),!(h.mode&1))h.memoizedState=null;else switch(I){case"forwards":for(b=h.child,I=null;b!==null;)f=b.alternate,f!==null&&Gy(f)===null&&(I=b),b=b.sibling;b=I,b===null?(I=h.child,h.child=null):(I=b.sibling,b.sibling=null),$a(h,!1,I,b,_);break;case"backwards":for(b=null,I=h.child,h.child=null;I!==null;){if(f=I.alternate,f!==null&&Gy(f)===null){h.child=I;break}f=I.sibling,I.sibling=b,b=I,I=f}$a(h,!0,b,null,_);break;case"together":$a(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function ao(f,h){!(h.mode&1)&&f!==null&&(f.alternate=null,h.alternate=null,h.flags|=2)}function io(f,h,b){if(f!==null&&(h.dependencies=f.dependencies),Sl|=h.lanes,!(b&h.childLanes))return null;if(f!==null&&h.child!==f.child)throw Error(t(153));if(h.child!==null){for(f=h.child,b=dc(f,f.pendingProps),h.child=b,b.return=h;f.sibling!==null;)f=f.sibling,b=b.sibling=dc(f,f.pendingProps),b.return=h;b.sibling=null}return h.child}function Zp(f,h,b){switch(h.tag){case 3:Hd(h),sc();break;case 5:Yk(h);break;case 1:os(h.type)&&Ds(h);break;case 4:hw(h,h.stateNode.containerInfo);break;case 10:var T=h.type._context,I=h.memoizedProps.value;At(ki,T._currentValue),T._currentValue=I;break;case 13:if(T=h.memoizedState,T!==null)return T.dehydrated!==null?(At(zr,zr.current&1),h.flags|=128,null):b&h.child.childLanes?pv(f,h,b):(At(zr,zr.current&1),f=io(f,h,b),f!==null?f.sibling:null);At(zr,zr.current&1);break;case 19:if(T=(b&h.childLanes)!==0,f.flags&128){if(T)return bl(f,h,b);h.flags|=128}if(I=h.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),At(zr,zr.current),T)break;return null;case 22:case 23:return h.lanes=0,Xp(f,h,b)}return io(f,h,b)}var oo,fs,iE,oE;oo=function(f,h){for(var b=h.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===h)break;for(;b.sibling===null;){if(b.return===null||b.return===h)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},fs=function(){},iE=function(f,h,b,T){var I=f.memoizedProps;if(I!==T){f=h.stateNode,pf(vl.current);var _=null;switch(b){case"input":I=hn(f,I),T=hn(f,T),_=[];break;case"select":I=ce({},I,{value:void 0}),T=ce({},T,{value:void 0}),_=[];break;case"textarea":I=Yt(f,I),T=Yt(f,T),_=[];break;default:typeof I.onClick!="function"&&typeof T.onClick=="function"&&(f.onclick=Zu)}ar(b,T);var V;b=null;for($e in I)if(!T.hasOwnProperty($e)&&I.hasOwnProperty($e)&&I[$e]!=null)if($e==="style"){var Y=I[$e];for(V in Y)Y.hasOwnProperty(V)&&(b||(b={}),b[V]="")}else $e!=="dangerouslySetInnerHTML"&&$e!=="children"&&$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&$e!=="autoFocus"&&(s.hasOwnProperty($e)?_||(_=[]):(_=_||[]).push($e,null));for($e in T){var ie=T[$e];if(Y=I?.[$e],T.hasOwnProperty($e)&&ie!==Y&&(ie!=null||Y!=null))if($e==="style")if(Y){for(V in Y)!Y.hasOwnProperty(V)||ie&&ie.hasOwnProperty(V)||(b||(b={}),b[V]="");for(V in ie)ie.hasOwnProperty(V)&&Y[V]!==ie[V]&&(b||(b={}),b[V]=ie[V])}else b||(_||(_=[]),_.push($e,b)),b=ie;else $e==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,Y=Y?Y.__html:void 0,ie!=null&&Y!==ie&&(_=_||[]).push($e,ie)):$e==="children"?typeof ie!="string"&&typeof ie!="number"||(_=_||[]).push($e,""+ie):$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&(s.hasOwnProperty($e)?(ie!=null&&$e==="onScroll"&&Jn("scroll",f),_||Y===ie||(_=[])):(_=_||[]).push($e,ie))}b&&(_=_||[]).push("style",b);var $e=_;(h.updateQueue=$e)&&(h.flags|=4)}},oE=function(f,h,b,T){b!==T&&(h.flags|=4)};function Jp(f,h){if(!Rr)switch(f.tailMode){case"hidden":h=f.tail;for(var b=null;h!==null;)h.alternate!==null&&(b=h),h=h.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var T=null;b!==null;)b.alternate!==null&&(T=b),b=b.sibling;T===null?h||f.tail===null?f.tail=null:f.tail.sibling=null:T.sibling=null}}function As(f){var h=f.alternate!==null&&f.alternate.child===f.child,b=0,T=0;if(h)for(var I=f.child;I!==null;)b|=I.lanes|I.childLanes,T|=I.subtreeFlags&14680064,T|=I.flags&14680064,I.return=f,I=I.sibling;else for(I=f.child;I!==null;)b|=I.lanes|I.childLanes,T|=I.subtreeFlags,T|=I.flags,I.return=f,I=I.sibling;return f.subtreeFlags|=T,f.childLanes=b,h}function lE(f,h,b){var T=h.pendingProps;switch(Vy(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return As(h),null;case 1:return os(h.type)&&Pd(),As(h),null;case 3:return T=h.stateNode,mf(),xr(ws),xr(jr),zt(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(f===null||f.child===null)&&(Uy(h)?h.flags|=4:f===null||f.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,ro!==null&&(Ef(ro),ro=null))),fs(f,h),As(h),null;case 5:jy(h);var I=pf(zp.current);if(b=h.type,f!==null&&h.stateNode!=null)iE(f,h,b,T,I),f.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!T){if(h.stateNode===null)throw Error(t(166));return As(h),null}if(f=pf(vl.current),Uy(h)){T=h.stateNode,b=h.type;var _=h.memoizedProps;switch(T[hl]=h,T[Dp]=_,f=(h.mode&1)!==0,b){case"dialog":Jn("cancel",T),Jn("close",T);break;case"iframe":case"object":case"embed":Jn("load",T);break;case"video":case"audio":for(I=0;I<$p.length;I++)Jn($p[I],T);break;case"source":Jn("error",T);break;case"img":case"image":case"link":Jn("error",T),Jn("load",T);break;case"details":Jn("toggle",T);break;case"input":Zt(T,_),Jn("invalid",T);break;case"select":T._wrapperState={wasMultiple:!!_.multiple},Jn("invalid",T);break;case"textarea":jt(T,_),Jn("invalid",T)}ar(b,_),I=null;for(var V in _)if(_.hasOwnProperty(V)){var Y=_[V];V==="children"?typeof Y=="string"?T.textContent!==Y&&(_.suppressHydrationWarning!==!0&&Oy(T.textContent,Y,f),I=["children",Y]):typeof Y=="number"&&T.textContent!==""+Y&&(_.suppressHydrationWarning!==!0&&Oy(T.textContent,Y,f),I=["children",""+Y]):s.hasOwnProperty(V)&&Y!=null&&V==="onScroll"&&Jn("scroll",T)}switch(b){case"input":Tt(T),ht(T,_,!0);break;case"textarea":Tt(T),nn(T);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(T.onclick=Zu)}T=I,h.updateQueue=T,T!==null&&(h.flags|=4)}else{V=I.nodeType===9?I:I.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Vn(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=V.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof T.is=="string"?f=V.createElement(b,{is:T.is}):(f=V.createElement(b),b==="select"&&(V=f,T.multiple?V.multiple=!0:T.size&&(V.size=T.size))):f=V.createElementNS(f,b),f[hl]=h,f[Dp]=T,oo(f,h,!1,!1),h.stateNode=f;e:{switch(V=ir(b,T),b){case"dialog":Jn("cancel",f),Jn("close",f),I=T;break;case"iframe":case"object":case"embed":Jn("load",f),I=T;break;case"video":case"audio":for(I=0;I<$p.length;I++)Jn($p[I],f);I=T;break;case"source":Jn("error",f),I=T;break;case"img":case"image":case"link":Jn("error",f),Jn("load",f),I=T;break;case"details":Jn("toggle",f),I=T;break;case"input":Zt(f,T),I=hn(f,T),Jn("invalid",f);break;case"option":I=T;break;case"select":f._wrapperState={wasMultiple:!!T.multiple},I=ce({},T,{value:void 0}),Jn("invalid",f);break;case"textarea":jt(f,T),I=Yt(f,T),Jn("invalid",f);break;default:I=T}ar(b,I),Y=I;for(_ in Y)if(Y.hasOwnProperty(_)){var ie=Y[_];_==="style"?jn(f,ie):_==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&Ir(f,ie)):_==="children"?typeof ie=="string"?(b!=="textarea"||ie!=="")&&Ze(f,ie):typeof ie=="number"&&Ze(f,""+ie):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?ie!=null&&_==="onScroll"&&Jn("scroll",f):ie!=null&&A(f,_,ie,V))}switch(b){case"input":Tt(f),ht(f,T,!1);break;case"textarea":Tt(f),nn(f);break;case"option":T.value!=null&&f.setAttribute("value",""+Ke(T.value));break;case"select":f.multiple=!!T.multiple,_=T.value,_!=null?mt(f,!!T.multiple,_,!1):T.defaultValue!=null&&mt(f,!!T.multiple,T.defaultValue,!0);break;default:typeof I.onClick=="function"&&(f.onclick=Zu)}switch(b){case"button":case"input":case"select":case"textarea":T=!!T.autoFocus;break e;case"img":T=!0;break e;default:T=!1}}T&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return As(h),null;case 6:if(f&&h.stateNode!=null)oE(f,h,f.memoizedProps,T);else{if(typeof T!="string"&&h.stateNode===null)throw Error(t(166));if(b=pf(zp.current),pf(vl.current),Uy(h)){if(T=h.stateNode,b=h.memoizedProps,T[hl]=h,(_=T.nodeValue!==b)&&(f=ti,f!==null))switch(f.tag){case 3:Oy(T.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Oy(T.nodeValue,b,(f.mode&1)!==0)}_&&(h.flags|=4)}else T=(b.nodeType===9?b:b.ownerDocument).createTextNode(T),T[hl]=h,h.stateNode=T}return As(h),null;case 13:if(xr(zr),T=h.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Rr&&ni!==null&&h.mode&1&&!(h.flags&128))Op(),sc(),h.flags|=98560,_=!1;else if(_=Uy(h),T!==null&&T.dehydrated!==null){if(f===null){if(!_)throw Error(t(318));if(_=h.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[hl]=h}else sc(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;As(h),_=!1}else ro!==null&&(Ef(ro),ro=null),_=!0;if(!_)return h.flags&65536?h:null}return h.flags&128?(h.lanes=b,h):(T=T!==null,T!==(f!==null&&f.memoizedState!==null)&&T&&(h.child.flags|=8192,h.mode&1&&(f===null||zr.current&1?Qr===0&&(Qr=3):Aw())),h.updateQueue!==null&&(h.flags|=4),As(h),null);case 4:return mf(),fs(f,h),f===null&&Od(h.stateNode.containerInfo),As(h),null;case 10:return ow(h.type._context),As(h),null;case 17:return os(h.type)&&Pd(),As(h),null;case 19:if(xr(zr),_=h.memoizedState,_===null)return As(h),null;if(T=(h.flags&128)!==0,V=_.rendering,V===null)if(T)Jp(_,!1);else{if(Qr!==0||f!==null&&f.flags&128)for(f=h.child;f!==null;){if(V=Gy(f),V!==null){for(h.flags|=128,Jp(_,!1),T=V.updateQueue,T!==null&&(h.updateQueue=T,h.flags|=4),h.subtreeFlags=0,T=b,b=h.child;b!==null;)_=b,f=T,_.flags&=14680066,V=_.alternate,V===null?(_.childLanes=0,_.lanes=f,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=V.childLanes,_.lanes=V.lanes,_.child=V.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=V.memoizedProps,_.memoizedState=V.memoizedState,_.updateQueue=V.updateQueue,_.type=V.type,f=V.dependencies,_.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return At(zr,zr.current&1|2),h.child}f=f.sibling}_.tail!==null&&dn()>Kd&&(h.flags|=128,T=!0,Jp(_,!1),h.lanes=4194304)}else{if(!T)if(f=Gy(V),f!==null){if(h.flags|=128,T=!0,b=f.updateQueue,b!==null&&(h.updateQueue=b,h.flags|=4),Jp(_,!0),_.tail===null&&_.tailMode==="hidden"&&!V.alternate&&!Rr)return As(h),null}else 2*dn()-_.renderingStartTime>Kd&&b!==1073741824&&(h.flags|=128,T=!0,Jp(_,!1),h.lanes=4194304);_.isBackwards?(V.sibling=h.child,h.child=V):(b=_.last,b!==null?b.sibling=V:h.child=V,_.last=V)}return _.tail!==null?(h=_.tail,_.rendering=h,_.tail=h.sibling,_.renderingStartTime=dn(),h.sibling=null,b=zr.current,At(zr,T?b&1|2:b&1),h):(As(h),null);case 22:case 23:return _w(),T=h.memoizedState!==null,f!==null&&f.memoizedState!==null!==T&&(h.flags|=8192),T&&h.mode&1?$i&1073741824&&(As(h),h.subtreeFlags&6&&(h.flags|=8192)):As(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function mv(f,h){switch(Vy(h),h.tag){case 1:return os(h.type)&&Pd(),f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 3:return mf(),xr(ws),xr(jr),zt(),f=h.flags,f&65536&&!(f&128)?(h.flags=f&-65537|128,h):null;case 5:return jy(h),null;case 13:if(xr(zr),f=h.memoizedState,f!==null&&f.dehydrated!==null){if(h.alternate===null)throw Error(t(340));sc()}return f=h.flags,f&65536?(h.flags=f&-65537|128,h):null;case 19:return xr(zr),null;case 4:return mf(),null;case 10:return ow(h.type._context),null;case 22:case 23:return _w(),null;case 24:return null;default:return null}}var em=!1,va=!1,eA=typeof WeakSet=="function"?WeakSet:Set,wt=null;function jd(f,h){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(T){Dr(f,h,T)}else b.current=null}function gv(f,h,b){try{b()}catch(T){Dr(f,h,T)}}var uE=!1;function cE(f,h){if(Rp=Zi,f=Ep(),Ey(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var T=b.getSelection&&b.getSelection();if(T&&T.rangeCount!==0){b=T.anchorNode;var I=T.anchorOffset,_=T.focusNode;T=T.focusOffset;try{b.nodeType,_.nodeType}catch{b=null;break e}var V=0,Y=-1,ie=-1,$e=0,Ge=0,Ye=f,je=null;t:for(;;){for(var yt;Ye!==b||I!==0&&Ye.nodeType!==3||(Y=V+I),Ye!==_||T!==0&&Ye.nodeType!==3||(ie=V+T),Ye.nodeType===3&&(V+=Ye.nodeValue.length),(yt=Ye.firstChild)!==null;)je=Ye,Ye=yt;for(;;){if(Ye===f)break t;if(je===b&&++$e===I&&(Y=V),je===_&&++Ge===T&&(ie=V),(yt=Ye.nextSibling)!==null)break;Ye=je,je=Ye.parentNode}Ye=yt}b=Y===-1||ie===-1?null:{start:Y,end:ie}}else b=null}b=b||{start:0,end:0}}else b=null;for(lf={focusedElem:f,selectionRange:b},Zi=!1,wt=h;wt!==null;)if(h=wt,f=h.child,(h.subtreeFlags&1028)!==0&&f!==null)f.return=h,wt=f;else for(;wt!==null;){h=wt;try{var kt=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(kt!==null){var Dt=kt.memoizedProps,Zr=kt.memoizedState,we=h.stateNode,de=we.getSnapshotBeforeUpdate(h.elementType===h.type?Dt:Mo(h.type,Dt),Zr);we.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var Te=h.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(qe){Dr(h,h.return,qe)}if(f=h.sibling,f!==null){f.return=h.return,wt=f;break}wt=h.return}return kt=uE,uE=!1,kt}function tm(f,h,b){var T=h.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var I=T=T.next;do{if((I.tag&f)===f){var _=I.destroy;I.destroy=void 0,_!==void 0&&gv(h,b,_)}I=I.next}while(I!==T)}}function nm(f,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var b=h=h.next;do{if((b.tag&f)===f){var T=b.create;b.destroy=T()}b=b.next}while(b!==h)}}function kw(f){var h=f.ref;if(h!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof h=="function"?h(f):h.current=f}}function yv(f){var h=f.alternate;h!==null&&(f.alternate=null,yv(h)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(h=f.stateNode,h!==null&&(delete h[hl],delete h[Dp],delete h[_p],delete h[zd],delete h[Z_])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function rm(f){return f.tag===5||f.tag===3||f.tag===4}function lu(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||rm(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function xl(f,h,b){var T=f.tag;if(T===5||T===6)f=f.stateNode,h?b.nodeType===8?b.parentNode.insertBefore(f,h):b.insertBefore(f,h):(b.nodeType===8?(h=b.parentNode,h.insertBefore(f,b)):(h=b,h.appendChild(f)),b=b._reactRootContainer,b!=null||h.onclick!==null||(h.onclick=Zu));else if(T!==4&&(f=f.child,f!==null))for(xl(f,h,b),f=f.sibling;f!==null;)xl(f,h,b),f=f.sibling}function wl(f,h,b){var T=f.tag;if(T===5||T===6)f=f.stateNode,h?b.insertBefore(f,h):b.appendChild(f);else if(T!==4&&(f=f.child,f!==null))for(wl(f,h,b),f=f.sibling;f!==null;)wl(f,h,b),f=f.sibling}var Yr=null,Ia=!1;function Ra(f,h,b){for(b=b.child;b!==null;)fE(f,h,b),b=b.sibling}function fE(f,h,b){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(Wu,b)}catch{}switch(b.tag){case 5:va||jd(b,h);case 6:var T=Yr,I=Ia;Yr=null,Ra(f,h,b),Yr=T,Ia=I,Yr!==null&&(Ia?(f=Yr,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):Yr.removeChild(b.stateNode));break;case 18:Yr!==null&&(Ia?(f=Yr,b=b.stateNode,f.nodeType===8?Md(f.parentNode,b):f.nodeType===1&&Md(f,b),_o(f)):Md(Yr,b.stateNode));break;case 4:T=Yr,I=Ia,Yr=b.stateNode.containerInfo,Ia=!0,Ra(f,h,b),Yr=T,Ia=I;break;case 0:case 11:case 14:case 15:if(!va&&(T=b.updateQueue,T!==null&&(T=T.lastEffect,T!==null))){I=T=T.next;do{var _=I,V=_.destroy;_=_.tag,V!==void 0&&(_&2||_&4)&&gv(b,h,V),I=I.next}while(I!==T)}Ra(f,h,b);break;case 1:if(!va&&(jd(b,h),T=b.stateNode,typeof T.componentWillUnmount=="function"))try{T.props=b.memoizedProps,T.state=b.memoizedState,T.componentWillUnmount()}catch(Y){Dr(b,h,Y)}Ra(f,h,b);break;case 21:Ra(f,h,b);break;case 22:b.mode&1?(va=(T=va)||b.memoizedState!==null,Ra(f,h,b),va=T):Ra(f,h,b);break;default:Ra(f,h,b)}}function dE(f){var h=f.updateQueue;if(h!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new eA),h.forEach(function(T){var I=wE.bind(null,f,T);b.has(T)||(b.add(T),T.then(I,I))})}}function zo(f,h){var b=h.deletions;if(b!==null)for(var T=0;T<b.length;T++){var I=b[T];try{var _=f,V=h,Y=V;e:for(;Y!==null;){switch(Y.tag){case 5:Yr=Y.stateNode,Ia=!1;break e;case 3:Yr=Y.stateNode.containerInfo,Ia=!0;break e;case 4:Yr=Y.stateNode.containerInfo,Ia=!0;break e}Y=Y.return}if(Yr===null)throw Error(t(160));fE(_,V,I),Yr=null,Ia=!1;var ie=I.alternate;ie!==null&&(ie.return=null),I.return=null}catch($e){Dr(I,h,$e)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)Ew(h,f),h=h.sibling}function Ew(f,h){var b=f.alternate,T=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(zo(h,f),ii(f),T&4){try{tm(3,f,f.return),nm(3,f)}catch(Dt){Dr(f,f.return,Dt)}try{tm(5,f,f.return)}catch(Dt){Dr(f,f.return,Dt)}}break;case 1:zo(h,f),ii(f),T&512&&b!==null&&jd(b,b.return);break;case 5:if(zo(h,f),ii(f),T&512&&b!==null&&jd(b,b.return),f.flags&32){var I=f.stateNode;try{Ze(I,"")}catch(Dt){Dr(f,f.return,Dt)}}if(T&4&&(I=f.stateNode,I!=null)){var _=f.memoizedProps,V=b!==null?b.memoizedProps:_,Y=f.type,ie=f.updateQueue;if(f.updateQueue=null,ie!==null)try{Y==="input"&&_.type==="radio"&&_.name!=null&&Ne(I,_),ir(Y,V);var $e=ir(Y,_);for(V=0;V<ie.length;V+=2){var Ge=ie[V],Ye=ie[V+1];Ge==="style"?jn(I,Ye):Ge==="dangerouslySetInnerHTML"?Ir(I,Ye):Ge==="children"?Ze(I,Ye):A(I,Ge,Ye,$e)}switch(Y){case"input":Je(I,_);break;case"textarea":Tn(I,_);break;case"select":var je=I._wrapperState.wasMultiple;I._wrapperState.wasMultiple=!!_.multiple;var yt=_.value;yt!=null?mt(I,!!_.multiple,yt,!1):je!==!!_.multiple&&(_.defaultValue!=null?mt(I,!!_.multiple,_.defaultValue,!0):mt(I,!!_.multiple,_.multiple?[]:"",!1))}I[Dp]=_}catch(Dt){Dr(f,f.return,Dt)}}break;case 6:if(zo(h,f),ii(f),T&4){if(f.stateNode===null)throw Error(t(162));I=f.stateNode,_=f.memoizedProps;try{I.nodeValue=_}catch(Dt){Dr(f,f.return,Dt)}}break;case 3:if(zo(h,f),ii(f),T&4&&b!==null&&b.memoizedState.isDehydrated)try{_o(h.containerInfo)}catch(Dt){Dr(f,f.return,Dt)}break;case 4:zo(h,f),ii(f);break;case 13:zo(h,f),ii(f),I=f.child,I.flags&8192&&(_=I.memoizedState!==null,I.stateNode.isHidden=_,!_||I.alternate!==null&&I.alternate.memoizedState!==null||(Iw=dn())),T&4&&dE(f);break;case 22:if(Ge=b!==null&&b.memoizedState!==null,f.mode&1?(va=($e=va)||Ge,zo(h,f),va=$e):zo(h,f),ii(f),T&8192){if($e=f.memoizedState!==null,(f.stateNode.isHidden=$e)&&!Ge&&f.mode&1)for(wt=f,Ge=f.child;Ge!==null;){for(Ye=wt=Ge;wt!==null;){switch(je=wt,yt=je.child,je.tag){case 0:case 11:case 14:case 15:tm(4,je,je.return);break;case 1:jd(je,je.return);var kt=je.stateNode;if(typeof kt.componentWillUnmount=="function"){T=je,b=je.return;try{h=T,kt.props=h.memoizedProps,kt.state=h.memoizedState,kt.componentWillUnmount()}catch(Dt){Dr(T,b,Dt)}}break;case 5:jd(je,je.return);break;case 22:if(je.memoizedState!==null){sm(Ye);continue}}yt!==null?(yt.return=je,wt=yt):sm(Ye)}Ge=Ge.sibling}e:for(Ge=null,Ye=f;;){if(Ye.tag===5){if(Ge===null){Ge=Ye;try{I=Ye.stateNode,$e?(_=I.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(Y=Ye.stateNode,ie=Ye.memoizedProps.style,V=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,Y.style.display=Vt("display",V))}catch(Dt){Dr(f,f.return,Dt)}}}else if(Ye.tag===6){if(Ge===null)try{Ye.stateNode.nodeValue=$e?"":Ye.memoizedProps}catch(Dt){Dr(f,f.return,Dt)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===f)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===f)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===f)break e;Ge===Ye&&(Ge=null),Ye=Ye.return}Ge===Ye&&(Ge=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:zo(h,f),ii(f),T&4&&dE(f);break;case 21:break;default:zo(h,f),ii(f)}}function ii(f){var h=f.flags;if(h&2){try{e:{for(var b=f.return;b!==null;){if(rm(b)){var T=b;break e}b=b.return}throw Error(t(160))}switch(T.tag){case 5:var I=T.stateNode;T.flags&32&&(Ze(I,""),T.flags&=-33);var _=lu(f);wl(f,_,I);break;case 3:case 4:var V=T.stateNode.containerInfo,Y=lu(f);xl(f,Y,V);break;default:throw Error(t(161))}}catch(ie){Dr(f,f.return,ie)}f.flags&=-3}h&4096&&(f.flags&=-4097)}function tA(f,h,b){wt=f,Nw(f)}function Nw(f,h,b){for(var T=(f.mode&1)!==0;wt!==null;){var I=wt,_=I.child;if(I.tag===22&&T){var V=I.memoizedState!==null||em;if(!V){var Y=I.alternate,ie=Y!==null&&Y.memoizedState!==null||va;Y=em;var $e=va;if(em=V,(va=ie)&&!$e)for(wt=I;wt!==null;)V=wt,ie=V.child,V.tag===22&&V.memoizedState!==null?$w(I):ie!==null?(ie.return=V,wt=ie):$w(I);for(;_!==null;)wt=_,Nw(_),_=_.sibling;wt=I,em=Y,va=$e}hE(f)}else I.subtreeFlags&8772&&_!==null?(_.return=I,wt=_):hE(f)}}function hE(f){for(;wt!==null;){var h=wt;if(h.flags&8772){var b=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:va||nm(5,h);break;case 1:var T=h.stateNode;if(h.flags&4&&!va)if(b===null)T.componentDidMount();else{var I=h.elementType===h.type?b.memoizedProps:Mo(h.type,b.memoizedProps);T.componentDidUpdate(I,b.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var _=h.updateQueue;_!==null&&dw(h,_,T);break;case 3:var V=h.updateQueue;if(V!==null){if(b=null,h.child!==null)switch(h.child.tag){case 5:b=h.child.stateNode;break;case 1:b=h.child.stateNode}dw(h,V,b)}break;case 5:var Y=h.stateNode;if(b===null&&h.flags&4){b=Y;var ie=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&b.focus();break;case"img":ie.src&&(b.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var $e=h.alternate;if($e!==null){var Ge=$e.memoizedState;if(Ge!==null){var Ye=Ge.dehydrated;Ye!==null&&_o(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}va||h.flags&512&&kw(h)}catch(je){Dr(h,h.return,je)}}if(h===f){wt=null;break}if(b=h.sibling,b!==null){b.return=h.return,wt=b;break}wt=h.return}}function sm(f){for(;wt!==null;){var h=wt;if(h===f){wt=null;break}var b=h.sibling;if(b!==null){b.return=h.return,wt=b;break}wt=h.return}}function $w(f){for(;wt!==null;){var h=wt;try{switch(h.tag){case 0:case 11:case 15:var b=h.return;try{nm(4,h)}catch(ie){Dr(h,b,ie)}break;case 1:var T=h.stateNode;if(typeof T.componentDidMount=="function"){var I=h.return;try{T.componentDidMount()}catch(ie){Dr(h,I,ie)}}var _=h.return;try{kw(h)}catch(ie){Dr(h,_,ie)}break;case 5:var V=h.return;try{kw(h)}catch(ie){Dr(h,V,ie)}}}catch(ie){Dr(h,h.return,ie)}if(h===f){wt=null;break}var Y=h.sibling;if(Y!==null){Y.return=h.return,wt=Y;break}wt=h.return}}var nA=Math.ceil,uc=D.ReactCurrentDispatcher,Tf=D.ReactCurrentOwner,Xs=D.ReactCurrentBatchConfig,On=0,Cs=null,ds=null,Ys=0,$i=0,Gd=to(0),Qr=0,am=null,Sl=0,qd=0,vv=0,im=null,oi=null,Iw=0,Kd=1/0,Ii=null,Xd=!1,kf=null,cc=null,bv=!1,uu=null,om=0,fc=0,Yd=null,lm=-1,ba=0;function hs(){return On&6?dn():lm!==-1?lm:lm=dn()}function Cl(f){return f.mode&1?On&2&&Ys!==0?Ys&-Ys:J_.transition!==null?(ba===0&&(ba=Sd()),ba):(f=Gn,f!==0||(f=window.event,f=f===void 0?16:Id(f.type)),f):1}function Da(f,h,b,T){if(50<fc)throw fc=0,Yd=null,Error(t(185));Yl(f,b,T),(!(On&2)||f!==Cs)&&(f===Cs&&(!(On&2)&&(qd|=b),Qr===4&&Po(f,Ys)),li(f,T),b===1&&On===0&&!(h.mode&1)&&(Kd=dn()+500,Bd&&ml()))}function li(f,h){var b=f.callbackNode;Zc(f,h);var T=Do(f,f===Cs?Ys:0);if(T===0)b!==null&&js(b),f.callbackNode=null,f.callbackPriority=0;else if(h=T&-T,f.callbackPriority!==h){if(b!=null&&js(b),h===1)f.tag===0?ec(Rw.bind(null,f)):Py(Rw.bind(null,f)),Ld(function(){!(On&6)&&ml()}),b=null;else{switch(Td(T)){case 1:b=Io;break;case 4:b=Yc;break;case 16:b=Qc;break;case 536870912:b=bd;break;default:b=Qc}b=CE(b,xv.bind(null,f))}f.callbackPriority=h,f.callbackNode=b}}function xv(f,h){if(lm=-1,ba=0,On&6)throw Error(t(327));var b=f.callbackNode;if(Qd()&&f.callbackNode!==b)return null;var T=Do(f,f===Cs?Ys:0);if(T===0)return null;if(T&30||T&f.expiredLanes||h)h=wv(f,T);else{h=T;var I=On;On|=2;var _=mE();(Cs!==f||Ys!==h)&&(Ii=null,Kd=dn()+500,cu(f,h));do try{gE();break}catch(Y){pE(f,Y)}while(!0);iw(),uc.current=_,On=I,ds!==null?h=0:(Cs=null,Ys=0,h=Qr)}if(h!==0){if(h===2&&(I=ju(f),I!==0&&(T=I,h=um(f,I))),h===1)throw b=am,cu(f,0),Po(f,T),li(f,dn()),b;if(h===6)Po(f,T);else{if(I=f.current.alternate,!(T&30)&&!rA(I)&&(h=wv(f,T),h===2&&(_=ju(f),_!==0&&(T=_,h=um(f,_))),h===1))throw b=am,cu(f,0),Po(f,T),li(f,dn()),b;switch(f.finishedWork=I,f.finishedLanes=T,h){case 0:case 1:throw Error(t(345));case 2:$f(f,oi,Ii);break;case 3:if(Po(f,T),(T&130023424)===T&&(h=Iw+500-dn(),10<h)){if(Do(f,0)!==0)break;if(I=f.suspendedLanes,(I&T)!==T){hs(),f.pingedLanes|=f.suspendedLanes&I;break}f.timeoutHandle=Ly($f.bind(null,f,oi,Ii),h);break}$f(f,oi,Ii);break;case 4:if(Po(f,T),(T&4194240)===T)break;for(h=f.eventTimes,I=-1;0<T;){var V=31-ka(T);_=1<<V,V=h[V],V>I&&(I=V),T&=~_}if(T=I,T=dn()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*nA(T/1960))-T,10<T){f.timeoutHandle=Ly($f.bind(null,f,oi,Ii),T);break}$f(f,oi,Ii);break;case 5:$f(f,oi,Ii);break;default:throw Error(t(329))}}}return li(f,dn()),f.callbackNode===b?xv.bind(null,f):null}function um(f,h){var b=im;return f.current.memoizedState.isDehydrated&&(cu(f,h).flags|=256),f=wv(f,h),f!==2&&(h=oi,oi=b,h!==null&&Ef(h)),f}function Ef(f){oi===null?oi=f:oi.push.apply(oi,f)}function rA(f){for(var h=f;;){if(h.flags&16384){var b=h.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var T=0;T<b.length;T++){var I=b[T],_=I.getSnapshot;I=I.value;try{if(!Oo(_(),I))return!1}catch{return!1}}}if(b=h.child,h.subtreeFlags&16384&&b!==null)b.return=h,h=b;else{if(h===f)break;for(;h.sibling===null;){if(h.return===null||h.return===f)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Po(f,h){for(h&=~vv,h&=~qd,f.suspendedLanes|=h,f.pingedLanes&=~h,f=f.expirationTimes;0<h;){var b=31-ka(h),T=1<<b;f[b]=-1,h&=~T}}function Rw(f){if(On&6)throw Error(t(327));Qd();var h=Do(f,0);if(!(h&1))return li(f,dn()),null;var b=wv(f,h);if(f.tag!==0&&b===2){var T=ju(f);T!==0&&(h=T,b=um(f,T))}if(b===1)throw b=am,cu(f,0),Po(f,h),li(f,dn()),b;if(b===6)throw Error(t(345));return f.finishedWork=f.current.alternate,f.finishedLanes=h,$f(f,oi,Ii),li(f,dn()),null}function Dw(f,h){var b=On;On|=1;try{return f(h)}finally{On=b,On===0&&(Kd=dn()+500,Bd&&ml())}}function Nf(f){uu!==null&&uu.tag===0&&!(On&6)&&Qd();var h=On;On|=1;var b=Xs.transition,T=Gn;try{if(Xs.transition=null,Gn=1,f)return f()}finally{Gn=T,Xs.transition=b,On=h,!(On&6)&&ml()}}function _w(){$i=Gd.current,xr(Gd)}function cu(f,h){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,tw(b)),ds!==null)for(b=ds.return;b!==null;){var T=b;switch(Vy(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&Pd();break;case 3:mf(),xr(ws),xr(jr),zt();break;case 5:jy(T);break;case 4:mf();break;case 13:xr(zr);break;case 19:xr(zr);break;case 10:ow(T.type._context);break;case 22:case 23:_w()}b=b.return}if(Cs=f,ds=f=dc(f.current,null),Ys=$i=h,Qr=0,am=null,vv=qd=Sl=0,oi=im=null,hf!==null){for(h=0;h<hf.length;h++)if(b=hf[h],T=b.interleaved,T!==null){b.interleaved=null;var I=T.next,_=b.pending;if(_!==null){var V=_.next;_.next=I,T.next=V}b.pending=T}hf=null}return f}function pE(f,h){do{var b=ds;try{if(iw(),xn.current=wf,qy){for(var T=Kn.memoizedState;T!==null;){var I=T.queue;I!==null&&(I.pending=null),T=T.next}qy=!1}if(cr=0,_s=us=Kn=null,Bp=!1,gf=0,Tf.current=null,b===null||b.return===null){Qr=1,am=h,ds=null;break}e:{var _=f,V=b.return,Y=b,ie=h;if(h=Ys,Y.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var $e=ie,Ge=Y,Ye=Ge.tag;if(!(Ge.mode&1)&&(Ye===0||Ye===11||Ye===15)){var je=Ge.alternate;je?(Ge.updateQueue=je.updateQueue,Ge.memoizedState=je.memoizedState,Ge.lanes=je.lanes):(Ge.updateQueue=null,Ge.memoizedState=null)}var yt=tE(V);if(yt!==null){yt.flags&=-257,lc(yt,V,Y,_,h),yt.mode&1&&xw(_,$e,h),h=yt,ie=$e;var kt=h.updateQueue;if(kt===null){var Dt=new Set;Dt.add(ie),h.updateQueue=Dt}else kt.add(ie);break e}else{if(!(h&1)){xw(_,$e,h),Aw();break e}ie=Error(t(426))}}else if(Rr&&Y.mode&1){var Zr=tE(V);if(Zr!==null){!(Zr.flags&65536)&&(Zr.flags|=256),lc(Zr,V,Y,_,h),au(Sf(ie,Y));break e}}_=ie=Sf(ie,Y),Qr!==4&&(Qr=2),im===null?im=[_]:im.push(_),_=V;do{switch(_.tag){case 3:_.flags|=65536,h&=-h,_.lanes|=h;var we=eE(_,ie,h);Xk(_,we);break e;case 1:Y=ie;var de=_.type,Te=_.stateNode;if(!(_.flags&128)&&(typeof de.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(cc===null||!cc.has(Te)))){_.flags|=65536,h&=-h,_.lanes|=h;var qe=bw(_,Y,h);Xk(_,qe);break e}}_=_.return}while(_!==null)}vE(b)}catch(Et){h=Et,ds===b&&b!==null&&(ds=b=b.return);continue}break}while(!0)}function mE(){var f=uc.current;return uc.current=wf,f===null?wf:f}function Aw(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),Cs===null||!(Sl&268435455)&&!(qd&268435455)||Po(Cs,Ys)}function wv(f,h){var b=On;On|=2;var T=mE();(Cs!==f||Ys!==h)&&(Ii=null,cu(f,h));do try{sA();break}catch(I){pE(f,I)}while(!0);if(iw(),On=b,uc.current=T,ds!==null)throw Error(t(261));return Cs=null,Ys=0,Qr}function sA(){for(;ds!==null;)yE(ds)}function gE(){for(;ds!==null&&!No();)yE(ds)}function yE(f){var h=SE(f.alternate,f,$i);f.memoizedProps=f.pendingProps,h===null?vE(f):ds=h,Tf.current=null}function vE(f){var h=f;do{var b=h.alternate;if(f=h.return,h.flags&32768){if(b=mv(b,h),b!==null){b.flags&=32767,ds=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Qr=6,ds=null;return}}else if(b=lE(b,h,$i),b!==null){ds=b;return}if(h=h.sibling,h!==null){ds=h;return}ds=h=f}while(h!==null);Qr===0&&(Qr=5)}function $f(f,h,b){var T=Gn,I=Xs.transition;try{Xs.transition=null,Gn=1,aA(f,h,b,T)}finally{Xs.transition=I,Gn=T}return null}function aA(f,h,b,T){do Qd();while(uu!==null);if(On&6)throw Error(t(327));b=f.finishedWork;var I=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(t(177));f.callbackNode=null,f.callbackPriority=0;var _=b.lanes|b.childLanes;if(O0(f,_),f===Cs&&(ds=Cs=null,Ys=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||bv||(bv=!0,CE(Qc,function(){return Qd(),null})),_=(b.flags&15990)!==0,b.subtreeFlags&15990||_){_=Xs.transition,Xs.transition=null;var V=Gn;Gn=1;var Y=On;On|=4,Tf.current=null,cE(f,b),Ew(b,f),_d(lf),Zi=!!Rp,lf=Rp=null,f.current=b,tA(b),$o(),On=Y,Gn=V,Xs.transition=_}else f.current=b;if(bv&&(bv=!1,uu=f,om=I),_=f.pendingLanes,_===0&&(cc=null),gp(b.stateNode),li(f,dn()),h!==null)for(T=f.onRecoverableError,b=0;b<h.length;b++)I=h[b],T(I.value,{componentStack:I.stack,digest:I.digest});if(Xd)throw Xd=!1,f=kf,kf=null,f;return om&1&&f.tag!==0&&Qd(),_=f.pendingLanes,_&1?f===Yd?fc++:(fc=0,Yd=f):fc=0,ml(),null}function Qd(){if(uu!==null){var f=Td(om),h=Xs.transition,b=Gn;try{if(Xs.transition=null,Gn=16>f?16:f,uu===null)var T=!1;else{if(f=uu,uu=null,om=0,On&6)throw Error(t(331));var I=On;for(On|=4,wt=f.current;wt!==null;){var _=wt,V=_.child;if(wt.flags&16){var Y=_.deletions;if(Y!==null){for(var ie=0;ie<Y.length;ie++){var $e=Y[ie];for(wt=$e;wt!==null;){var Ge=wt;switch(Ge.tag){case 0:case 11:case 15:tm(8,Ge,_)}var Ye=Ge.child;if(Ye!==null)Ye.return=Ge,wt=Ye;else for(;wt!==null;){Ge=wt;var je=Ge.sibling,yt=Ge.return;if(yv(Ge),Ge===$e){wt=null;break}if(je!==null){je.return=yt,wt=je;break}wt=yt}}}var kt=_.alternate;if(kt!==null){var Dt=kt.child;if(Dt!==null){kt.child=null;do{var Zr=Dt.sibling;Dt.sibling=null,Dt=Zr}while(Dt!==null)}}wt=_}}if(_.subtreeFlags&2064&&V!==null)V.return=_,wt=V;else e:for(;wt!==null;){if(_=wt,_.flags&2048)switch(_.tag){case 0:case 11:case 15:tm(9,_,_.return)}var we=_.sibling;if(we!==null){we.return=_.return,wt=we;break e}wt=_.return}}var de=f.current;for(wt=de;wt!==null;){V=wt;var Te=V.child;if(V.subtreeFlags&2064&&Te!==null)Te.return=V,wt=Te;else e:for(V=de;wt!==null;){if(Y=wt,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:nm(9,Y)}}catch(Et){Dr(Y,Y.return,Et)}if(Y===V){wt=null;break e}var qe=Y.sibling;if(qe!==null){qe.return=Y.return,wt=qe;break e}wt=Y.return}}if(On=I,ml(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(Wu,f)}catch{}T=!0}return T}finally{Gn=b,Xs.transition=h}}return!1}function bE(f,h,b){h=Sf(b,h),h=eE(f,h,1),f=ac(f,h,1),h=hs(),f!==null&&(Yl(f,1,h),li(f,h))}function Dr(f,h,b){if(f.tag===3)bE(f,f,b);else for(;h!==null;){if(h.tag===3){bE(h,f,b);break}else if(h.tag===1){var T=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(cc===null||!cc.has(T))){f=Sf(b,f),f=bw(h,f,1),h=ac(h,f,1),f=hs(),h!==null&&(Yl(h,1,f),li(h,f));break}}h=h.return}}function iA(f,h,b){var T=f.pingCache;T!==null&&T.delete(h),h=hs(),f.pingedLanes|=f.suspendedLanes&b,Cs===f&&(Ys&b)===b&&(Qr===4||Qr===3&&(Ys&130023424)===Ys&&500>dn()-Iw?cu(f,0):vv|=b),li(f,h)}function xE(f,h){h===0&&(f.mode&1?(h=Ci,Ci<<=1,!(Ci&130023424)&&(Ci=4194304)):h=1);var b=hs();f=Ei(f,h),f!==null&&(Yl(f,h,b),li(f,b))}function oA(f){var h=f.memoizedState,b=0;h!==null&&(b=h.retryLane),xE(f,b)}function wE(f,h){var b=0;switch(f.tag){case 13:var T=f.stateNode,I=f.memoizedState;I!==null&&(b=I.retryLane);break;case 19:T=f.stateNode;break;default:throw Error(t(314))}T!==null&&T.delete(h),xE(f,b)}var SE;SE=function(f,h,b){if(f!==null)if(f.memoizedProps!==h.pendingProps||ws.current)cs=!0;else{if(!(f.lanes&b)&&!(h.flags&128))return cs=!1,Zp(f,h,b);cs=!!(f.flags&131072)}else cs=!1,Rr&&h.flags&1048576&&jk(h,su,h.index);switch(h.lanes=0,h.tag){case 2:var T=h.type;ao(f,h),f=h.pendingProps;var I=ei(h,jr.current);Mr(h,b),I=ic(null,h,T,f,I,b);var _=Lo();return h.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,os(T)?(_=!0,Ds(h)):_=!1,h.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,fw(h),I.updater=cv,h.stateNode=I,I._reactInternals=h,qp(h,T,f,b),h=Yp(null,h,T,!0,_,b)):(h.tag=0,Rr&&_&&By(h),Ks(null,h,I,b),h=h.child),h;case 16:T=h.elementType;e:{switch(ao(f,h),f=h.pendingProps,I=T._init,T=I(T._payload),h.type=T,I=h.tag=uA(T),f=Mo(T,f),I){case 0:h=nE(null,h,T,f,b);break e;case 1:h=rE(null,h,T,f,b);break e;case 11:h=ai(null,h,T,f,b);break e;case 14:h=Cf(null,h,T,Mo(T.type,f),b);break e}throw Error(t(306,T,""))}return h;case 0:return T=h.type,I=h.pendingProps,I=h.elementType===T?I:Mo(T,I),nE(f,h,T,I,b);case 1:return T=h.type,I=h.pendingProps,I=h.elementType===T?I:Mo(T,I),rE(f,h,T,I,b);case 3:e:{if(Hd(h),f===null)throw Error(t(387));T=h.pendingProps,_=h.memoizedState,I=_.element,Kk(f,h),Fp(h,T,null,b);var V=h.memoizedState;if(T=V.element,_.isDehydrated)if(_={element:T,isDehydrated:!1,cache:V.cache,pendingSuspenseBoundaries:V.pendingSuspenseBoundaries,transitions:V.transitions},h.updateQueue.baseState=_,h.memoizedState=_,h.flags&256){I=Sf(Error(t(423)),h),h=sE(f,h,T,b,I);break e}else if(T!==I){I=Sf(Error(t(424)),h),h=sE(f,h,T,b,I);break e}else for(ni=dl(h.stateNode.containerInfo.firstChild),ti=h,Rr=!0,ro=null,b=ft(h,null,T,b),h.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(sc(),T===I){h=io(f,h,b);break e}Ks(f,h,T,b)}h=h.child}return h;case 5:return Yk(h),f===null&&sw(h),T=h.type,I=h.pendingProps,_=f!==null?f.memoizedProps:null,V=I.children,Fy(T,I)?V=null:_!==null&&Fy(T,_)&&(h.flags|=32),ww(f,h),Ks(f,h,V,b),h.child;case 6:return f===null&&sw(h),null;case 13:return pv(f,h,b);case 4:return hw(h,h.stateNode.containerInfo),T=h.pendingProps,f===null?h.child=Kr(h,null,T,b):Ks(f,h,T,b),h.child;case 11:return T=h.type,I=h.pendingProps,I=h.elementType===T?I:Mo(T,I),ai(f,h,T,I,b);case 7:return Ks(f,h,h.pendingProps,b),h.child;case 8:return Ks(f,h,h.pendingProps.children,b),h.child;case 12:return Ks(f,h,h.pendingProps.children,b),h.child;case 10:e:{if(T=h.type._context,I=h.pendingProps,_=h.memoizedProps,V=I.value,At(ki,T._currentValue),T._currentValue=V,_!==null)if(Oo(_.value,V)){if(_.children===I.children&&!ws.current){h=io(f,h,b);break e}}else for(_=h.child,_!==null&&(_.return=h);_!==null;){var Y=_.dependencies;if(Y!==null){V=_.child;for(var ie=Y.firstContext;ie!==null;){if(ie.context===T){if(_.tag===1){ie=iu(-1,b&-b),ie.tag=2;var $e=_.updateQueue;if($e!==null){$e=$e.shared;var Ge=$e.pending;Ge===null?ie.next=ie:(ie.next=Ge.next,Ge.next=ie),$e.pending=ie}}_.lanes|=b,ie=_.alternate,ie!==null&&(ie.lanes|=b),lw(_.return,b,h),Y.lanes|=b;break}ie=ie.next}}else if(_.tag===10)V=_.type===h.type?null:_.child;else if(_.tag===18){if(V=_.return,V===null)throw Error(t(341));V.lanes|=b,Y=V.alternate,Y!==null&&(Y.lanes|=b),lw(V,b,h),V=_.sibling}else V=_.child;if(V!==null)V.return=_;else for(V=_;V!==null;){if(V===h){V=null;break}if(_=V.sibling,_!==null){_.return=V.return,V=_;break}V=V.return}_=V}Ks(f,h,I.children,b),h=h.child}return h;case 9:return I=h.type,T=h.pendingProps.children,Mr(h,b),I=so(I),T=T(I),h.flags|=1,Ks(f,h,T,b),h.child;case 14:return T=h.type,I=Mo(T,h.pendingProps),I=Mo(T.type,I),Cf(f,h,T,I,b);case 15:return pn(f,h,h.type,h.pendingProps,b);case 17:return T=h.type,I=h.pendingProps,I=h.elementType===T?I:Mo(T,I),ao(f,h),h.tag=1,os(T)?(f=!0,Ds(h)):f=!1,Mr(h,b),fv(h,T,I),qp(h,T,I,b),Yp(null,h,T,!0,f,b);case 19:return bl(f,h,b);case 22:return Xp(f,h,b)}throw Error(t(156,h.tag))};function CE(f,h){return Tr(f,h)}function lA(f,h,b,T){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lo(f,h,b,T){return new lA(f,h,b,T)}function Ow(f){return f=f.prototype,!(!f||!f.isReactComponent)}function uA(f){if(typeof f=="function")return Ow(f)?1:0;if(f!=null){if(f=f.$$typeof,f===ue)return 11;if(f===ge)return 14}return 2}function dc(f,h){var b=f.alternate;return b===null?(b=lo(f.tag,h,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=h,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,h=f.dependencies,b.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function cm(f,h,b,T,I,_){var V=2;if(T=f,typeof f=="function")Ow(f)&&(V=1);else if(typeof f=="string")V=5;else e:switch(f){case W:return fu(b.children,I,_,h);case B:V=8,I|=8;break;case G:return f=lo(12,b,h,I|2),f.elementType=G,f.lanes=_,f;case ne:return f=lo(13,b,h,I),f.elementType=ne,f.lanes=_,f;case me:return f=lo(19,b,h,I),f.elementType=me,f.lanes=_,f;case pe:return hc(b,I,_,h);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case X:V=10;break e;case re:V=9;break e;case ue:V=11;break e;case ge:V=14;break e;case be:V=16,T=null;break e}throw Error(t(130,f==null?f:typeof f,""))}return h=lo(V,b,h,I),h.elementType=f,h.type=T,h.lanes=_,h}function fu(f,h,b,T){return f=lo(7,f,T,h),f.lanes=b,f}function hc(f,h,b,T){return f=lo(22,f,T,h),f.elementType=pe,f.lanes=b,f.stateNode={isHidden:!1},f}function Fw(f,h,b){return f=lo(6,f,null,h),f.lanes=b,f}function Sv(f,h,b){return h=lo(4,f.children!==null?f.children:[],f.key,h),h.lanes=b,h.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},h}function TE(f,h,b,T,I){this.tag=h,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cd(0),this.expirationTimes=Cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cd(0),this.identifierPrefix=T,this.onRecoverableError=I,this.mutableSourceEagerHydrationData=null}function Cv(f,h,b,T,I,_,V,Y,ie){return f=new TE(f,h,b,Y,ie),h===1?(h=1,_===!0&&(h|=8)):h=0,_=lo(3,null,null,h),f.current=_,_.stateNode=f,_.memoizedState={element:T,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},fw(_),f}function cA(f,h,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:T==null?null:""+T,children:f,containerInfo:h,implementation:b}}function Lw(f){if(!f)return ga;f=f._reactInternals;e:{if(fn(f)!==f||f.tag!==1)throw Error(t(170));var h=f;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(os(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(f.tag===1){var b=f.type;if(os(b))return Ap(f,b,h)}return h}function kE(f,h,b,T,I,_,V,Y,ie){return f=Cv(b,T,!0,f,I,_,V,Y,ie),f.context=Lw(null),b=f.current,T=hs(),I=Cl(b),_=iu(T,I),_.callback=h??null,ac(b,_,I),f.current.lanes=I,Yl(f,I,T),li(f,T),f}function Tv(f,h,b,T){var I=h.current,_=hs(),V=Cl(I);return b=Lw(b),h.context===null?h.context=b:h.pendingContext=b,h=iu(_,V),h.payload={element:f},T=T===void 0?null:T,T!==null&&(h.callback=T),f=ac(I,h,V),f!==null&&(Da(f,I,V,_),Hy(f,I,V)),V}function kv(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function Mw(f,h){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<h?b:h}}function Ev(f,h){Mw(f,h),(f=f.alternate)&&Mw(f,h)}function EE(){return null}var If=typeof reportError=="function"?reportError:function(f){console.error(f)};function zw(f){this._internalRoot=f}Nv.prototype.render=zw.prototype.render=function(f){var h=this._internalRoot;if(h===null)throw Error(t(409));Tv(f,h,null,null)},Nv.prototype.unmount=zw.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var h=f.containerInfo;Nf(function(){Tv(null,f,null,null)}),h[nu]=null}};function Nv(f){this._internalRoot=f}Nv.prototype.unstable_scheduleHydration=function(f){if(f){var h=sn();f={blockedOn:null,target:f,priority:h};for(var b=0;b<xs.length&&h!==0&&h<xs[b].priority;b++);xs.splice(b,0,f),b===0&&bp(f)}};function Pw(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function $v(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function NE(){}function fA(f,h,b,T,I){if(I){if(typeof T=="function"){var _=T;T=function(){var $e=kv(V);_.call($e)}}var V=kE(h,T,f,0,null,!1,!1,"",NE);return f._reactRootContainer=V,f[nu]=V.current,Od(f.nodeType===8?f.parentNode:f),Nf(),V}for(;I=f.lastChild;)f.removeChild(I);if(typeof T=="function"){var Y=T;T=function(){var $e=kv(ie);Y.call($e)}}var ie=Cv(f,0,!1,null,null,!1,!1,"",NE);return f._reactRootContainer=ie,f[nu]=ie.current,Od(f.nodeType===8?f.parentNode:f),Nf(function(){Tv(h,ie,b,T)}),ie}function fm(f,h,b,T,I){var _=b._reactRootContainer;if(_){var V=_;if(typeof I=="function"){var Y=I;I=function(){var ie=kv(V);Y.call(ie)}}Tv(h,V,f,I)}else V=fA(b,h,f,I,T);return kv(V)}Mn=function(f){switch(f.tag){case 3:var h=f.stateNode;if(h.current.memoizedState.isDehydrated){var b=Ro(h.pendingLanes);b!==0&&(Ql(h,b|1),li(h,dn()),!(On&6)&&(Kd=dn()+500,ml()))}break;case 13:Nf(function(){var T=Ei(f,1);if(T!==null){var I=hs();Da(T,f,1,I)}}),Ev(f,1)}},yp=function(f){if(f.tag===13){var h=Ei(f,134217728);if(h!==null){var b=hs();Da(h,f,134217728,b)}Ev(f,134217728)}},ol=function(f){if(f.tag===13){var h=Cl(f),b=Ei(f,h);if(b!==null){var T=hs();Da(b,f,h,T)}Ev(f,h)}},sn=function(){return Gn},kd=function(f,h){var b=Gn;try{return Gn=f,h()}finally{Gn=b}},Un=function(f,h,b){switch(h){case"input":if(Je(f,b),h=b.name,b.type==="radio"&&h!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<b.length;h++){var T=b[h];if(T!==f&&T.form===f.form){var I=Lr(T);if(!I)throw Error(t(90));tn(T),Je(T,I)}}}break;case"textarea":Tn(f,b);break;case"select":h=b.value,h!=null&&mt(f,!!b.multiple,h,!1)}},Xl=Dw,rl=Nf;var dA={usingClientEntryPoint:!1,Events:[Mt,Fo,Lr,tl,nl,Dw]},dm={findFiberByHostInstance:uf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$E={bundleType:dm.bundleType,version:dm.version,rendererPackageName:dm.rendererPackageName,rendererConfig:dm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=qr(f),f===null?null:f.stateNode},findFiberByHostInstance:dm.findFiberByHostInstance||EE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Wu=pc.inject($E),Qa=pc}catch{}}return Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dA,Fi.createPortal=function(f,h){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pw(h))throw Error(t(200));return cA(f,h,null,b)},Fi.createRoot=function(f,h){if(!Pw(f))throw Error(t(299));var b=!1,T="",I=If;return h!=null&&(h.unstable_strictMode===!0&&(b=!0),h.identifierPrefix!==void 0&&(T=h.identifierPrefix),h.onRecoverableError!==void 0&&(I=h.onRecoverableError)),h=Cv(f,1,!1,null,null,b,!1,T,I),f[nu]=h.current,Od(f.nodeType===8?f.parentNode:f),new zw(h)},Fi.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var h=f._reactInternals;if(h===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=qr(h),f=f===null?null:f.stateNode,f},Fi.flushSync=function(f){return Nf(f)},Fi.hydrate=function(f,h,b){if(!$v(h))throw Error(t(200));return fm(null,f,h,!0,b)},Fi.hydrateRoot=function(f,h,b){if(!Pw(f))throw Error(t(405));var T=b!=null&&b.hydratedSources||null,I=!1,_="",V=If;if(b!=null&&(b.unstable_strictMode===!0&&(I=!0),b.identifierPrefix!==void 0&&(_=b.identifierPrefix),b.onRecoverableError!==void 0&&(V=b.onRecoverableError)),h=kE(h,null,f,1,b??null,I,!1,_,V),f[nu]=h.current,Od(f),T)for(f=0;f<T.length;f++)b=T[f],I=b._getVersion,I=I(b._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[b,I]:h.mutableSourceEagerHydrationData.push(b,I);return new Nv(h)},Fi.render=function(f,h,b){if(!$v(h))throw Error(t(200));return fm(null,f,h,!1,b)},Fi.unmountComponentAtNode=function(f){if(!$v(f))throw Error(t(40));return f._reactRootContainer?(Nf(function(){fm(null,null,f,!1,function(){f._reactRootContainer=null,f[nu]=null})}),!0):!1},Fi.unstable_batchedUpdates=Dw,Fi.unstable_renderSubtreeIntoContainer=function(f,h,b,T){if(!$v(b))throw Error(t(200));if(f==null||f._reactInternals===void 0)throw Error(t(38));return fm(f,h,b,!1,T)},Fi.version="18.3.1-next-f1338f8080-20240426",Fi}var Li={};/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fL;function ZG(){return fL||(fL=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var n=Kt,e=uL(),t=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=!1;function s(i){r=i}function a(i){if(!r){for(var l=arguments.length,p=new Array(l>1?l-1:0),v=1;v<l;v++)p[v-1]=arguments[v];u("warn",i,p)}}function o(i){if(!r){for(var l=arguments.length,p=new Array(l>1?l-1:0),v=1;v<l;v++)p[v-1]=arguments[v];u("error",i,p)}}function u(i,l,p){{var v=t.ReactDebugCurrentFrame,w=v.getStackAddendum();w!==""&&(l+="%s",p=p.concat([w]));var E=p.map(function(R){return String(R)});E.unshift("Warning: "+l),Function.prototype.apply.call(console[i],console,E)}}var c=0,d=1,m=2,g=3,y=4,x=5,S=6,k=7,C=8,N=9,$=10,A=11,D=12,L=13,P=14,W=15,B=16,G=17,X=18,re=19,ue=21,ne=22,me=23,ge=24,be=25,pe=!0,te=!1,ye=!1,ce=!1,K=!1,Z=!0,De=!0,Ae=!0,Fe=!0,Pe=new Set,He={},Ke={};function Xe(i,l){ct(i,l),ct(i+"Capture",l)}function ct(i,l){He[i]&&o("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",i),He[i]=l;{var p=i.toLowerCase();Ke[p]=i,i==="onDoubleClick"&&(Ke.ondblclick=i)}for(var v=0;v<l.length;v++)Pe.add(l[v])}var Tt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tn=Object.prototype.hasOwnProperty;function Xt(i){{var l=typeof Symbol=="function"&&Symbol.toStringTag,p=l&&i[Symbol.toStringTag]||i.constructor.name||"Object";return p}}function hn(i){try{return Zt(i),!1}catch{return!0}}function Zt(i){return""+i}function Ne(i,l){if(hn(i))return o("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",l,Xt(i)),Zt(i)}function Je(i){if(hn(i))return o("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Xt(i)),Zt(i)}function ht(i,l){if(hn(i))return o("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",l,Xt(i)),Zt(i)}function Lt(i,l){if(hn(i))return o("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",l,Xt(i)),Zt(i)}function it(i){if(hn(i))return o("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",Xt(i)),Zt(i)}function mt(i){if(hn(i))return o("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",Xt(i)),Zt(i)}var Yt=0,jt=1,Tn=2,nn=3,Vn=4,tr=5,Zn=6,Ir=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Ze=Ir+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",pt=new RegExp("^["+Ir+"]["+Ze+"]*$"),Pt={},Vt={};function jn(i){return tn.call(Vt,i)?!0:tn.call(Pt,i)?!1:pt.test(i)?(Vt[i]=!0,!0):(Pt[i]=!0,o("Invalid attribute name: `%s`",i),!1)}function mr(i,l,p){return l!==null?l.type===Yt:p?!1:i.length>2&&(i[0]==="o"||i[0]==="O")&&(i[1]==="n"||i[1]==="N")}function ar(i,l,p,v){if(p!==null&&p.type===Yt)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":{if(v)return!1;if(p!==null)return!p.acceptsBooleans;var w=i.toLowerCase().slice(0,5);return w!=="data-"&&w!=="aria-"}default:return!1}}function ir(i,l,p,v){if(l===null||typeof l>"u"||ar(i,l,p,v))return!0;if(v)return!1;if(p!==null)switch(p.type){case nn:return!l;case Vn:return l===!1;case tr:return isNaN(l);case Zn:return isNaN(l)||l<1}return!1}function nr(i){return Un.hasOwnProperty(i)?Un[i]:null}function Bt(i,l,p,v,w,E,R){this.acceptsBooleans=l===Tn||l===nn||l===Vn,this.attributeName=v,this.attributeNamespace=w,this.mustUseProperty=p,this.propertyName=i,this.type=l,this.sanitizeURL=E,this.removeEmptyString=R}var Un={},Sa=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Sa.forEach(function(i){Un[i]=new Bt(i,Yt,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var l=i[0],p=i[1];Un[l]=new Bt(l,jt,!1,p,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){Un[i]=new Bt(i,Tn,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Un[i]=new Bt(i,Tn,!1,i,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(i){Un[i]=new Bt(i,nn,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){Un[i]=new Bt(i,nn,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){Un[i]=new Bt(i,Vn,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){Un[i]=new Bt(i,Zn,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){Un[i]=new Bt(i,tr,!1,i.toLowerCase(),null,!1,!1)});var as=/[\-\:]([a-z])/g,Ya=function(i){return i[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(i){var l=i.replace(as,Ya);Un[l]=new Bt(l,jt,!1,i,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(i){var l=i.replace(as,Ya);Un[l]=new Bt(l,jt,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var l=i.replace(as,Ya);Un[l]=new Bt(l,jt,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){Un[i]=new Bt(i,jt,!1,i.toLowerCase(),null,!1,!1)});var tl="xlinkHref";Un[tl]=new Bt("xlinkHref",jt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){Un[i]=new Bt(i,jt,!1,i.toLowerCase(),null,!0,!0)});var nl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Xl=!1;function rl(i){!Xl&&nl.test(i)&&(Xl=!0,o("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(i)))}function Vu(i,l,p,v){if(v.mustUseProperty){var w=v.propertyName;return i[w]}else{Ne(p,l),v.sanitizeURL&&rl(""+p);var E=v.attributeName,R=null;if(v.type===Vn){if(i.hasAttribute(E)){var F=i.getAttribute(E);return F===""?!0:ir(l,p,v,!1)?F:F===""+p?p:F}}else if(i.hasAttribute(E)){if(ir(l,p,v,!1))return i.getAttribute(E);if(v.type===nn)return p;R=i.getAttribute(E)}return ir(l,p,v,!1)?R===null?p:R:R===""+p?p:R}}function Xc(i,l,p,v){{if(!jn(l))return;if(!i.hasAttribute(l))return p===void 0?void 0:null;var w=i.getAttribute(l);return Ne(p,l),w===""+p?p:w}}function Ca(i,l,p,v){var w=nr(l);if(!mr(l,w,v)){if(ir(l,p,w,v)&&(p=null),v||w===null){if(jn(l)){var E=l;p===null?i.removeAttribute(E):(Ne(p,l),i.setAttribute(E,""+p))}return}var R=w.mustUseProperty;if(R){var F=w.propertyName;if(p===null){var M=w.type;i[F]=M===nn?!1:""}else i[F]=p;return}var j=w.attributeName,q=w.attributeNamespace;if(p===null)i.removeAttribute(j);else{var he=w.type,fe;he===nn||he===Vn&&p===!0?fe="":(Ne(p,j),fe=""+p,w.sanitizeURL&&rl(fe.toString())),q?i.setAttributeNS(q,j,fe):i.setAttribute(j,fe)}}}var Ta=Symbol.for("react.element"),Hs=Symbol.for("react.portal"),sl=Symbol.for("react.fragment"),Eo=Symbol.for("react.strict_mode"),al=Symbol.for("react.profiler"),il=Symbol.for("react.provider"),se=Symbol.for("react.context"),Ue=Symbol.for("react.forward_ref"),ut=Symbol.for("react.suspense"),St=Symbol.for("react.suspense_list"),fn=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),kn=Symbol.for("react.scope"),bn=Symbol.for("react.debug_trace_mode"),qr=Symbol.for("react.offscreen"),vr=Symbol.for("react.legacy_hidden"),Tr=Symbol.for("react.cache"),js=Symbol.for("react.tracing_marker"),No=Symbol.iterator,$o="@@iterator";function dn(i){if(i===null||typeof i!="object")return null;var l=No&&i[No]||i[$o];return typeof l=="function"?l:null}var mn=Object.assign,Io=0,Yc,Qc,Uu,bd,Wu,Qa,gp;function ka(){}ka.__reactDisabledLog=!0;function xy(){{if(Io===0){Yc=console.log,Qc=console.info,Uu=console.warn,bd=console.error,Wu=console.group,Qa=console.groupCollapsed,gp=console.groupEnd;var i={configurable:!0,enumerable:!0,value:ka,writable:!0};Object.defineProperties(console,{info:i,log:i,warn:i,error:i,group:i,groupCollapsed:i,groupEnd:i})}Io++}}function wy(){{if(Io--,Io===0){var i={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:mn({},i,{value:Yc}),info:mn({},i,{value:Qc}),warn:mn({},i,{value:Uu}),error:mn({},i,{value:bd}),group:mn({},i,{value:Wu}),groupCollapsed:mn({},i,{value:Qa}),groupEnd:mn({},i,{value:gp})})}Io<0&&o("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var xd=t.ReactCurrentDispatcher,Hu;function Ci(i,l,p){{if(Hu===void 0)try{throw Error()}catch(w){var v=w.stack.trim().match(/\n( *(at )?)/);Hu=v&&v[1]||""}return`
`+Hu+i}}var Ro=!1,Do;{var wd=typeof WeakMap=="function"?WeakMap:Map;Do=new wd}function Zc(i,l){if(!i||Ro)return"";{var p=Do.get(i);if(p!==void 0)return p}var v;Ro=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var E;E=xd.current,xd.current=null,xy();try{if(l){var R=function(){throw Error()};if(Object.defineProperty(R.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(R,[])}catch(Ie){v=Ie}Reflect.construct(i,[],R)}else{try{R.call()}catch(Ie){v=Ie}i.call(R.prototype)}}else{try{throw Error()}catch(Ie){v=Ie}i()}}catch(Ie){if(Ie&&v&&typeof Ie.stack=="string"){for(var F=Ie.stack.split(`
`),M=v.stack.split(`
`),j=F.length-1,q=M.length-1;j>=1&&q>=0&&F[j]!==M[q];)q--;for(;j>=1&&q>=0;j--,q--)if(F[j]!==M[q]){if(j!==1||q!==1)do if(j--,q--,q<0||F[j]!==M[q]){var he=`
`+F[j].replace(" at new "," at ");return i.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",i.displayName)),typeof i=="function"&&Do.set(i,he),he}while(j>=1&&q>=0);break}}}finally{Ro=!1,xd.current=E,wy(),Error.prepareStackTrace=w}var fe=i?i.displayName||i.name:"",ke=fe?Ci(fe):"";return typeof i=="function"&&Do.set(i,ke),ke}function ju(i,l,p){return Zc(i,!0)}function Sd(i,l,p){return Zc(i,!1)}function Cd(i){var l=i.prototype;return!!(l&&l.isReactComponent)}function Yl(i,l,p){if(i==null)return"";if(typeof i=="function")return Zc(i,Cd(i));if(typeof i=="string")return Ci(i);switch(i){case ut:return Ci("Suspense");case St:return Ci("SuspenseList")}if(typeof i=="object")switch(i.$$typeof){case Ue:return Sd(i.render);case fn:return Yl(i.type,l,p);case an:{var v=i,w=v._payload,E=v._init;try{return Yl(E(w),l,p)}catch{}}}return""}function O0(i){switch(i._debugOwner&&i._debugOwner.type,i._debugSource,i.tag){case x:return Ci(i.type);case B:return Ci("Lazy");case L:return Ci("Suspense");case re:return Ci("SuspenseList");case c:case m:case W:return Sd(i.type);case A:return Sd(i.type.render);case d:return ju(i.type);default:return""}}function Ql(i){try{var l="",p=i;do l+=O0(p),p=p.return;while(p);return l}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Gn(i,l,p){var v=i.displayName;if(v)return v;var w=l.displayName||l.name||"";return w!==""?p+"("+w+")":p}function Td(i){return i.displayName||"Context"}function Mn(i){if(i==null)return null;if(typeof i.tag=="number"&&o("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case sl:return"Fragment";case Hs:return"Portal";case al:return"Profiler";case Eo:return"StrictMode";case ut:return"Suspense";case St:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case se:var l=i;return Td(l)+".Consumer";case il:var p=i;return Td(p._context)+".Provider";case Ue:return Gn(i,i.render,"ForwardRef");case fn:var v=i.displayName||null;return v!==null?v:Mn(i.type)||"Memo";case an:{var w=i,E=w._payload,R=w._init;try{return Mn(R(E))}catch{return null}}}return null}function yp(i,l,p){var v=l.displayName||l.name||"";return i.displayName||(v!==""?p+"("+v+")":p)}function ol(i){return i.displayName||"Context"}function sn(i){var l=i.tag,p=i.type;switch(l){case ge:return"Cache";case N:var v=p;return ol(v)+".Consumer";case $:var w=p;return ol(w._context)+".Provider";case X:return"DehydratedFragment";case A:return yp(p,p.render,"ForwardRef");case k:return"Fragment";case x:return p;case y:return"Portal";case g:return"Root";case S:return"Text";case B:return Mn(p);case C:return p===Eo?"StrictMode":"Mode";case ne:return"Offscreen";case D:return"Profiler";case ue:return"Scope";case L:return"Suspense";case re:return"SuspenseList";case be:return"TracingMarker";case d:case c:case G:case m:case P:case W:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;break}return null}var kd=t.ReactDebugCurrentFrame,Gs=null,ll=!1;function Ea(){{if(Gs===null)return null;var i=Gs._debugOwner;if(i!==null&&typeof i<"u")return sn(i)}return null}function ul(){return Gs===null?"":Ql(Gs)}function kr(){kd.getCurrentStack=null,Gs=null,ll=!1}function or(i){kd.getCurrentStack=i===null?null:ul,Gs=i,ll=!1}function Gu(){return Gs}function xs(i){ll=i}function Na(i){return""+i}function Yi(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return mt(i),i;default:return""}}var Jc={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function vp(i,l){Jc[l.type]||l.onChange||l.onInput||l.readOnly||l.disabled||l.value==null||o("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),l.onChange||l.readOnly||l.disabled||l.checked==null||o("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function bp(i){var l=i.type,p=i.nodeName;return p&&p.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function qu(i){return i._valueTracker}function ef(i){i._valueTracker=null}function F0(i){var l="";return i&&(bp(i)?l=i.checked?"true":"false":l=i.value),l}function Qi(i){var l=bp(i)?"checked":"value",p=Object.getOwnPropertyDescriptor(i.constructor.prototype,l);mt(i[l]);var v=""+i[l];if(!(i.hasOwnProperty(l)||typeof p>"u"||typeof p.get!="function"||typeof p.set!="function")){var w=p.get,E=p.set;Object.defineProperty(i,l,{configurable:!0,get:function(){return w.call(this)},set:function(F){mt(F),v=""+F,E.call(this,F)}}),Object.defineProperty(i,l,{enumerable:p.enumerable});var R={getValue:function(){return v},setValue:function(F){mt(F),v=""+F},stopTracking:function(){ef(i),delete i[l]}};return R}}function _o(i){qu(i)||(i._valueTracker=Qi(i))}function cl(i){if(!i)return!1;var l=qu(i);if(!l)return!0;var p=l.getValue(),v=F0(i);return v!==p?(l.setValue(v),!0):!1}function Zi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ed=!1,Nd=!1,Ku=!1,tf=!1;function $d(i){var l=i.type==="checkbox"||i.type==="radio";return l?i.checked!=null:i.value!=null}function Id(i,l){var p=i,v=l.checked,w=mn({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??p._wrapperState.initialChecked});return w}function Ao(i,l){vp("input",l),l.checked!==void 0&&l.defaultChecked!==void 0&&!Nd&&(o("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ea()||"A component",l.type),Nd=!0),l.value!==void 0&&l.defaultValue!==void 0&&!Ed&&(o("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ea()||"A component",l.type),Ed=!0);var p=i,v=l.defaultValue==null?"":l.defaultValue;p._wrapperState={initialChecked:l.checked!=null?l.checked:l.defaultChecked,initialValue:Yi(l.value!=null?l.value:v),controlled:$d(l)}}function z(i,l){var p=i,v=l.checked;v!=null&&Ca(p,"checked",v,!1)}function ee(i,l){var p=i;{var v=$d(l);!p._wrapperState.controlled&&v&&!tf&&(o("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),tf=!0),p._wrapperState.controlled&&!v&&!Ku&&(o("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Ku=!0)}z(i,l);var w=Yi(l.value),E=l.type;if(w!=null)E==="number"?(w===0&&p.value===""||p.value!=w)&&(p.value=Na(w)):p.value!==Na(w)&&(p.value=Na(w));else if(E==="submit"||E==="reset"){p.removeAttribute("value");return}l.hasOwnProperty("value")?Ut(p,l.type,w):l.hasOwnProperty("defaultValue")&&Ut(p,l.type,Yi(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(p.defaultChecked=!!l.defaultChecked)}function Ee(i,l,p){var v=i;if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var w=l.type,E=w==="submit"||w==="reset";if(E&&(l.value===void 0||l.value===null))return;var R=Na(v._wrapperState.initialValue);p||R!==v.value&&(v.value=R),v.defaultValue=R}var F=v.name;F!==""&&(v.name=""),v.defaultChecked=!v.defaultChecked,v.defaultChecked=!!v._wrapperState.initialChecked,F!==""&&(v.name=F)}function Oe(i,l){var p=i;ee(p,l),et(p,l)}function et(i,l){var p=l.name;if(l.type==="radio"&&p!=null){for(var v=i;v.parentNode;)v=v.parentNode;Ne(p,"name");for(var w=v.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),E=0;E<w.length;E++){var R=w[E];if(!(R===i||R.form!==i.form)){var F=GE(R);if(!F)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");cl(R),ee(R,F)}}}}function Ut(i,l,p){(l!=="number"||Zi(i.ownerDocument)!==i)&&(p==null?i.defaultValue=Na(i._wrapperState.initialValue):i.defaultValue!==Na(p)&&(i.defaultValue=Na(p)))}var lt=!1,Gt=!1,En=!1;function zn(i,l){l.value==null&&(typeof l.children=="object"&&l.children!==null?n.Children.forEach(l.children,function(p){p!=null&&(typeof p=="string"||typeof p=="number"||Gt||(Gt=!0,o("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):l.dangerouslySetInnerHTML!=null&&(En||(En=!0,o("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),l.selected!=null&&!lt&&(o("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),lt=!0)}function br(i,l){l.value!=null&&i.setAttribute("value",Na(Yi(l.value)))}var lr=Array.isArray;function vn(i){return lr(i)}var ur;ur=!1;function Fr(){var i=Ea();return i?`

Check the render method of \``+i+"`.":""}var Xu=["value","defaultValue"];function xp(i){{vp("select",i);for(var l=0;l<Xu.length;l++){var p=Xu[l];if(i[p]!=null){var v=vn(i[p]);i.multiple&&!v?o("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",p,Fr()):!i.multiple&&v&&o("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",p,Fr())}}}}function Zl(i,l,p,v){var w=i.options;if(l){for(var E=p,R={},F=0;F<E.length;F++)R["$"+E[F]]=!0;for(var M=0;M<w.length;M++){var j=R.hasOwnProperty("$"+w[M].value);w[M].selected!==j&&(w[M].selected=j),j&&v&&(w[M].defaultSelected=!0)}}else{for(var q=Na(Yi(p)),he=null,fe=0;fe<w.length;fe++){if(w[fe].value===q){w[fe].selected=!0,v&&(w[fe].defaultSelected=!0);return}he===null&&!w[fe].disabled&&(he=w[fe])}he!==null&&(he.selected=!0)}}function wp(i,l){return mn({},l,{value:void 0})}function nf(i,l){var p=i;xp(l),p._wrapperState={wasMultiple:!!l.multiple},l.value!==void 0&&l.defaultValue!==void 0&&!ur&&(o("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),ur=!0)}function L0(i,l){var p=i;p.multiple=!!l.multiple;var v=l.value;v!=null?Zl(p,!!l.multiple,v,!1):l.defaultValue!=null&&Zl(p,!!l.multiple,l.defaultValue,!0)}function Sy(i,l){var p=i,v=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!l.multiple;var w=l.value;w!=null?Zl(p,!!l.multiple,w,!1):v!==!!l.multiple&&(l.defaultValue!=null?Zl(p,!!l.multiple,l.defaultValue,!0):Zl(p,!!l.multiple,l.multiple?[]:"",!1))}function M0(i,l){var p=i,v=l.value;v!=null&&Zl(p,!!l.multiple,v,!1)}var mk=!1;function z0(i,l){var p=i;if(l.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var v=mn({},l,{value:void 0,defaultValue:void 0,children:Na(p._wrapperState.initialValue)});return v}function P0(i,l){var p=i;vp("textarea",l),l.value!==void 0&&l.defaultValue!==void 0&&!mk&&(o("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",Ea()||"A component"),mk=!0);var v=l.value;if(v==null){var w=l.children,E=l.defaultValue;if(w!=null){o("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(E!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(vn(w)){if(w.length>1)throw new Error("<textarea> can only have at most one child.");w=w[0]}E=w}}E==null&&(E=""),v=E}p._wrapperState={initialValue:Yi(v)}}function gk(i,l){var p=i,v=Yi(l.value),w=Yi(l.defaultValue);if(v!=null){var E=Na(v);E!==p.value&&(p.value=E),l.defaultValue==null&&p.defaultValue!==E&&(p.defaultValue=E)}w!=null&&(p.defaultValue=Na(w))}function yk(i,l){var p=i,v=p.textContent;v===p._wrapperState.initialValue&&v!==""&&v!==null&&(p.value=v)}function V_(i,l){gk(i,l)}var Jl="http://www.w3.org/1999/xhtml",B0="http://www.w3.org/1998/Math/MathML",V0="http://www.w3.org/2000/svg";function U0(i){switch(i){case"svg":return V0;case"math":return B0;default:return Jl}}function W0(i,l){return i==null||i===Jl?U0(l):i===V0&&l==="foreignObject"?Jl:i}var vk=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,p,v,w){MSApp.execUnsafeLocalFunction(function(){return i(l,p,v,w)})}:i},Cy,bk=vk(function(i,l){if(i.namespaceURI===V0&&!("innerHTML"in i)){Cy=Cy||document.createElement("div"),Cy.innerHTML="<svg>"+l.valueOf().toString()+"</svg>";for(var p=Cy.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;p.firstChild;)i.appendChild(p.firstChild);return}i.innerHTML=l}),Za=1,eu=3,is=8,tu=9,H0=11,Rd=function(i,l){if(l){var p=i.firstChild;if(p&&p===i.lastChild&&p.nodeType===eu){p.nodeValue=l;return}}i.textContent=l},Sp={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},Cp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function xk(i,l){return i+l.charAt(0).toUpperCase()+l.substring(1)}var wk=["Webkit","ms","Moz","O"];Object.keys(Cp).forEach(function(i){wk.forEach(function(l){Cp[xk(l,i)]=Cp[i]})});function Ty(i,l,p){var v=l==null||typeof l=="boolean"||l==="";return v?"":!p&&typeof l=="number"&&l!==0&&!(Cp.hasOwnProperty(i)&&Cp[i])?l+"px":(Lt(l,i),(""+l).trim())}var Sk=/([A-Z])/g,Ck=/^ms-/;function Dd(i){return i.replace(Sk,"-$1").toLowerCase().replace(Ck,"-ms-")}var Tk=function(){};{var U_=/^(?:webkit|moz|o)[A-Z]/,W_=/^-ms-/,kk=/-(.)/g,j0=/;\s*$/,fl={},rf={},Ek=!1,Tp=!1,H_=function(i){return i.replace(kk,function(l,p){return p.toUpperCase()})},Nk=function(i){fl.hasOwnProperty(i)&&fl[i]||(fl[i]=!0,o("Unsupported style property %s. Did you mean %s?",i,H_(i.replace(W_,"ms-"))))},G0=function(i){fl.hasOwnProperty(i)&&fl[i]||(fl[i]=!0,o("Unsupported vendor-prefixed style property %s. Did you mean %s?",i,i.charAt(0).toUpperCase()+i.slice(1)))},q0=function(i,l){rf.hasOwnProperty(l)&&rf[l]||(rf[l]=!0,o(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,i,l.replace(j0,"")))},$k=function(i,l){Ek||(Ek=!0,o("`NaN` is an invalid value for the `%s` css style property.",i))},Ik=function(i,l){Tp||(Tp=!0,o("`Infinity` is an invalid value for the `%s` css style property.",i))};Tk=function(i,l){i.indexOf("-")>-1?Nk(i):U_.test(i)?G0(i):j0.test(l)&&q0(i,l),typeof l=="number"&&(isNaN(l)?$k(i,l):isFinite(l)||Ik(i,l))}}var Rk=Tk;function j_(i){{var l="",p="";for(var v in i)if(i.hasOwnProperty(v)){var w=i[v];if(w!=null){var E=v.indexOf("--")===0;l+=p+(E?v:Dd(v))+":",l+=Ty(v,w,E),p=";"}}return l||null}}function Dk(i,l){var p=i.style;for(var v in l)if(l.hasOwnProperty(v)){var w=v.indexOf("--")===0;w||Rk(v,l[v]);var E=Ty(v,l[v],w);v==="float"&&(v="cssFloat"),w?p.setProperty(v,E):p[v]=E}}function G_(i){return i==null||typeof i=="boolean"||i===""}function _k(i){var l={};for(var p in i)for(var v=Sp[p]||[p],w=0;w<v.length;w++)l[v[w]]=p;return l}function q_(i,l){{if(!l)return;var p=_k(i),v=_k(l),w={};for(var E in p){var R=p[E],F=v[E];if(F&&R!==F){var M=R+","+F;if(w[M])continue;w[M]=!0,o("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",G_(i[R])?"Removing":"Updating",R,F)}}}}var Oo={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},kp=mn({menuitem:!0},Oo),Ak="__html";function ky(i,l){if(l){if(kp[i]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw new Error(i+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof l.dangerouslySetInnerHTML!="object"||!(Ak in l.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!l.suppressContentEditableWarning&&l.contentEditable&&l.children!=null&&o("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),l.style!=null&&typeof l.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function Yu(i,l){if(i.indexOf("-")===-1)return typeof l.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ep={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Ey={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},_d={},K_=new RegExp("^(aria)-["+Ze+"]*$"),Ad=new RegExp("^(aria)[A-Z]["+Ze+"]*$");function K0(i,l){{if(tn.call(_d,l)&&_d[l])return!0;if(Ad.test(l)){var p="aria-"+l.slice(4).toLowerCase(),v=Ey.hasOwnProperty(p)?p:null;if(v==null)return o("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",l),_d[l]=!0,!0;if(l!==v)return o("Invalid ARIA attribute `%s`. Did you mean `%s`?",l,v),_d[l]=!0,!0}if(K_.test(l)){var w=l.toLowerCase(),E=Ey.hasOwnProperty(w)?w:null;if(E==null)return _d[l]=!0,!1;if(l!==E)return o("Unknown ARIA attribute `%s`. Did you mean `%s`?",l,E),_d[l]=!0,!0}}return!0}function Np(i,l){{var p=[];for(var v in l){var w=K0(i,v);w||p.push(v)}var E=p.map(function(R){return"`"+R+"`"}).join(", ");p.length===1?o("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",E,i):p.length>1&&o("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",E,i)}}function X0(i,l){Yu(i,l)||Np(i,l)}var Y0=!1;function Ny(i,l){{if(i!=="input"&&i!=="textarea"&&i!=="select")return;l!=null&&l.value===null&&!Y0&&(Y0=!0,i==="select"&&l.multiple?o("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",i):o("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",i))}}var sf=function(){};{var qs={},Q0=/^on./,$y=/^on[^A-Z]/,Ok=new RegExp("^(aria)-["+Ze+"]*$"),Fk=new RegExp("^(aria)[A-Z]["+Ze+"]*$");sf=function(i,l,p,v){if(tn.call(qs,l)&&qs[l])return!0;var w=l.toLowerCase();if(w==="onfocusin"||w==="onfocusout")return o("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),qs[l]=!0,!0;if(v!=null){var E=v.registrationNameDependencies,R=v.possibleRegistrationNames;if(E.hasOwnProperty(l))return!0;var F=R.hasOwnProperty(w)?R[w]:null;if(F!=null)return o("Invalid event handler property `%s`. Did you mean `%s`?",l,F),qs[l]=!0,!0;if(Q0.test(l))return o("Unknown event handler property `%s`. It will be ignored.",l),qs[l]=!0,!0}else if(Q0.test(l))return $y.test(l)&&o("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",l),qs[l]=!0,!0;if(Ok.test(l)||Fk.test(l))return!0;if(w==="innerhtml")return o("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),qs[l]=!0,!0;if(w==="aria")return o("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),qs[l]=!0,!0;if(w==="is"&&p!==null&&p!==void 0&&typeof p!="string")return o("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof p),qs[l]=!0,!0;if(typeof p=="number"&&isNaN(p))return o("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",l),qs[l]=!0,!0;var M=nr(l),j=M!==null&&M.type===Yt;if(Ep.hasOwnProperty(w)){var q=Ep[w];if(q!==l)return o("Invalid DOM property `%s`. Did you mean `%s`?",l,q),qs[l]=!0,!0}else if(!j&&l!==w)return o("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",l,w),qs[l]=!0,!0;return typeof p=="boolean"&&ar(l,p,M,!1)?(p?o('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',p,l,l,p,l):o('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',p,l,l,p,l,l,l),qs[l]=!0,!0):j?!0:ar(l,p,M,!1)?(qs[l]=!0,!1):((p==="false"||p==="true")&&M!==null&&M.type===nn&&(o("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",p,l,p==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',l,p),qs[l]=!0),!0)}}var Lk=function(i,l,p){{var v=[];for(var w in l){var E=sf(i,w,l[w],p);E||v.push(w)}var R=v.map(function(F){return"`"+F+"`"}).join(", ");v.length===1?o("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",R,i):v.length>1&&o("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",R,i)}};function Mk(i,l,p){Yu(i,l)||Lk(i,l,p)}var Z0=1,Iy=2,Ji=4,J0=Z0|Iy|Ji,af=null;function X_(i){af!==null&&o("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),af=i}function Y_(){af===null&&o("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),af=null}function $p(i){return i===af}function ew(i){var l=i.target||i.srcElement||window;return l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===eu?l.parentNode:l}var Ry=null,of=null,Jn=null;function Dy(i){var l=eh(i);if(l){if(typeof Ry!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var p=l.stateNode;if(p){var v=GE(p);Ry(l.stateNode,l.type,v)}}}function _y(i){Ry=i}function Od(i){of?Jn?Jn.push(i):Jn=[i]:of=i}function zk(){return of!==null||Jn!==null}function Ay(){if(of){var i=of,l=Jn;if(of=null,Jn=null,Dy(i),l)for(var p=0;p<l.length;p++)Dy(l[p])}}var Fd=function(i,l){return i(l)},Ip=function(){},Qu=!1;function Pk(){var i=zk();i&&(Ip(),Ay())}function Bk(i,l,p){if(Qu)return i(l,p);Qu=!0;try{return Fd(i,l,p)}finally{Qu=!1,Pk()}}function Q_(i,l,p){Fd=i,Ip=p}function Vk(i){return i==="button"||i==="input"||i==="select"||i==="textarea"}function Oy(i,l,p){switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(p.disabled&&Vk(l));default:return!1}}function Zu(i,l){var p=i.stateNode;if(p===null)return null;var v=GE(p);if(v===null)return null;var w=v[l];if(Oy(l,i.type,v))return null;if(w&&typeof w!="function")throw new Error("Expected `"+l+"` listener to be a function, instead got a value of `"+typeof w+"` type.");return w}var Rp=!1;if(Tt)try{var lf={};Object.defineProperty(lf,"passive",{get:function(){Rp=!0}}),window.addEventListener("test",lf,lf),window.removeEventListener("test",lf,lf)}catch{Rp=!1}function Fy(i,l,p,v,w,E,R,F,M){var j=Array.prototype.slice.call(arguments,3);try{l.apply(p,j)}catch(q){this.onError(q)}}var Ly=Fy;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var tw=document.createElement("react");Ly=function(l,p,v,w,E,R,F,M,j){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var q=document.createEvent("Event"),he=!1,fe=!0,ke=window.event,Ie=Object.getOwnPropertyDescriptor(window,"event");function Le(){tw.removeEventListener(Me,Wt,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=ke)}var dt=Array.prototype.slice.call(arguments,3);function Wt(){he=!0,Le(),p.apply(v,dt),fe=!1}var _t,Ln=!1,$n=!1;function Se(Ce){if(_t=Ce.error,Ln=!0,_t===null&&Ce.colno===0&&Ce.lineno===0&&($n=!0),Ce.defaultPrevented&&_t!=null&&typeof _t=="object")try{_t._suppressLogging=!0}catch{}}var Me="react-"+(l||"invokeguardedcallback");if(window.addEventListener("error",Se),tw.addEventListener(Me,Wt,!1),q.initEvent(Me,!1,!1),tw.dispatchEvent(q),Ie&&Object.defineProperty(window,"event",Ie),he&&fe&&(Ln?$n&&(_t=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):_t=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(_t)),window.removeEventListener("error",Se),!he)return Le(),Fy.apply(this,arguments)}}var Uk=Ly,Ld=!1,My=null,Md=!1,dl=null,Wk={onError:function(i){Ld=!0,My=i}};function Ju(i,l,p,v,w,E,R,F,M){Ld=!1,My=null,Uk.apply(Wk,arguments)}function hl(i,l,p,v,w,E,R,F,M){if(Ju.apply(this,arguments),Ld){var j=_p();Md||(Md=!0,dl=j)}}function Dp(){if(Md){var i=dl;throw Md=!1,dl=null,i}}function nu(){return Ld}function _p(){if(Ld){var i=My;return Ld=!1,My=null,i}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function zd(i){return i._reactInternals}function Z_(i){return i._reactInternals!==void 0}function uf(i,l){i._reactInternals=l}var Mt=0,Fo=1,Lr=2,An=4,eo=16,to=32,xr=64,At=128,ga=256,jr=512,ws=1024,Ja=2048,ei=4096,os=8192,Pd=16384,Hk=32767,Ap=32768,Ds=65536,zy=131072,pl=1048576,Bd=2097152,ru=4194304,Py=8388608,ec=16777216,ml=33554432,tc=An|ws|0,nc=Lr|An|eo|to|jr|ei|os,rc=An|xr|jr|os,su=Ja|eo,ls=ru|Py|Bd,no=t.ReactCurrentOwner;function Ti(i){var l=i,p=i;if(i.alternate)for(;l.return;)l=l.return;else{var v=l;do l=v,(l.flags&(Lr|ei))!==Mt&&(p=l.return),v=l.return;while(v)}return l.tag===g?p:null}function gl(i){if(i.tag===L){var l=i.memoizedState;if(l===null){var p=i.alternate;p!==null&&(l=p.memoizedState)}if(l!==null)return l.dehydrated}return null}function yl(i){return i.tag===g?i.stateNode.containerInfo:null}function cf(i){return Ti(i)===i}function jk(i){{var l=no.current;if(l!==null&&l.tag===d){var p=l,v=p.stateNode;v._warnedAboutRefsInRender||o("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",sn(p)||"A component"),v._warnedAboutRefsInRender=!0}}var w=zd(i);return w?Ti(w)===w:!1}function By(i){if(Ti(i)!==i)throw new Error("Unable to find node on an unmounted component.")}function Vy(i){var l=i.alternate;if(!l){var p=Ti(i);if(p===null)throw new Error("Unable to find node on an unmounted component.");return p!==i?null:i}for(var v=i,w=l;;){var E=v.return;if(E===null)break;var R=E.alternate;if(R===null){var F=E.return;if(F!==null){v=w=F;continue}break}if(E.child===R.child){for(var M=E.child;M;){if(M===v)return By(E),i;if(M===w)return By(E),l;M=M.sibling}throw new Error("Unable to find node on an unmounted component.")}if(v.return!==w.return)v=E,w=R;else{for(var j=!1,q=E.child;q;){if(q===v){j=!0,v=E,w=R;break}if(q===w){j=!0,w=E,v=R;break}q=q.sibling}if(!j){for(q=R.child;q;){if(q===v){j=!0,v=R,w=E;break}if(q===w){j=!0,w=R,v=E;break}q=q.sibling}if(!j)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(v.alternate!==w)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(v.tag!==g)throw new Error("Unable to find node on an unmounted component.");return v.stateNode.current===v?i:l}function ti(i){var l=Vy(i);return l!==null?ni(l):null}function ni(i){if(i.tag===x||i.tag===S)return i;for(var l=i.child;l!==null;){var p=ni(l);if(p!==null)return p;l=l.sibling}return null}function Rr(i){var l=Vy(i);return l!==null?ro(l):null}function ro(i){if(i.tag===x||i.tag===S)return i;for(var l=i.child;l!==null;){if(l.tag!==y){var p=ro(l);if(p!==null)return p}l=l.sibling}return null}var nw=e.unstable_scheduleCallback,Gk=e.unstable_cancelCallback,rw=e.unstable_shouldYield,sw=e.unstable_requestPaint,Ss=e.unstable_now,Uy=e.unstable_getCurrentPriorityLevel,Op=e.unstable_ImmediatePriority,sc=e.unstable_UserBlockingPriority,au=e.unstable_NormalPriority,J_=e.unstable_LowPriority,ff=e.unstable_IdlePriority,Wy=e.unstable_yieldValue,qk=e.unstable_setDisableYieldValue,df=null,Kr=null,ft=null,ki=!1,ri=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function Vd(i){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled)return!0;if(!l.supportsFiber)return o("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{De&&(i=mn({},i,{getLaneLabelMap:hf,injectProfilingHooks:so})),df=l.inject(i),Kr=l}catch(p){o("React instrumentation encountered an error: %s.",p)}return!!l.checkDCE}function aw(i,l){if(Kr&&typeof Kr.onScheduleFiberRoot=="function")try{Kr.onScheduleFiberRoot(df,i,l)}catch(p){ki||(ki=!0,o("React instrumentation encountered an error: %s",p))}}function iw(i,l){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{var p=(i.current.flags&At)===At;if(Ae){var v;switch(l){case $a:v=Op;break;case bl:v=sc;break;case ao:v=au;break;case io:v=ff;break;default:v=au;break}Kr.onCommitFiberRoot(df,i,v,p)}}catch(w){ki||(ki=!0,o("React instrumentation encountered an error: %s",w))}}function ow(i){if(Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(df,i)}catch(l){ki||(ki=!0,o("React instrumentation encountered an error: %s",l))}}function lw(i){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(df,i)}catch(l){ki||(ki=!0,o("React instrumentation encountered an error: %s",l))}}function Mr(i){if(typeof Wy=="function"&&(qk(i),s(i)),Kr&&typeof Kr.setStrictMode=="function")try{Kr.setStrictMode(df,i)}catch(l){ki||(ki=!0,o("React instrumentation encountered an error: %s",l))}}function so(i){ft=i}function hf(){{for(var i=new Map,l=1,p=0;p<gf;p++){var v=Qk(l);i.set(l,v),l*=2}return i}}function uw(i){ft!==null&&typeof ft.markCommitStarted=="function"&&ft.markCommitStarted(i)}function cw(){ft!==null&&typeof ft.markCommitStopped=="function"&&ft.markCommitStopped()}function Ei(i){ft!==null&&typeof ft.markComponentRenderStarted=="function"&&ft.markComponentRenderStarted(i)}function Ni(){ft!==null&&typeof ft.markComponentRenderStopped=="function"&&ft.markComponentRenderStopped()}function fw(i){ft!==null&&typeof ft.markComponentPassiveEffectMountStarted=="function"&&ft.markComponentPassiveEffectMountStarted(i)}function Kk(){ft!==null&&typeof ft.markComponentPassiveEffectMountStopped=="function"&&ft.markComponentPassiveEffectMountStopped()}function iu(i){ft!==null&&typeof ft.markComponentPassiveEffectUnmountStarted=="function"&&ft.markComponentPassiveEffectUnmountStarted(i)}function ac(){ft!==null&&typeof ft.markComponentPassiveEffectUnmountStopped=="function"&&ft.markComponentPassiveEffectUnmountStopped()}function Hy(i){ft!==null&&typeof ft.markComponentLayoutEffectMountStarted=="function"&&ft.markComponentLayoutEffectMountStarted(i)}function Xk(){ft!==null&&typeof ft.markComponentLayoutEffectMountStopped=="function"&&ft.markComponentLayoutEffectMountStopped()}function Fp(i){ft!==null&&typeof ft.markComponentLayoutEffectUnmountStarted=="function"&&ft.markComponentLayoutEffectUnmountStarted(i)}function dw(){ft!==null&&typeof ft.markComponentLayoutEffectUnmountStopped=="function"&&ft.markComponentLayoutEffectUnmountStopped()}function Lp(i,l,p){ft!==null&&typeof ft.markComponentErrored=="function"&&ft.markComponentErrored(i,l,p)}function vl(i,l,p){ft!==null&&typeof ft.markComponentSuspended=="function"&&ft.markComponentSuspended(i,l,p)}function Mp(i){ft!==null&&typeof ft.markLayoutEffectsStarted=="function"&&ft.markLayoutEffectsStarted(i)}function zp(){ft!==null&&typeof ft.markLayoutEffectsStopped=="function"&&ft.markLayoutEffectsStopped()}function pf(i){ft!==null&&typeof ft.markPassiveEffectsStarted=="function"&&ft.markPassiveEffectsStarted(i)}function hw(){ft!==null&&typeof ft.markPassiveEffectsStopped=="function"&&ft.markPassiveEffectsStopped()}function mf(i){ft!==null&&typeof ft.markRenderStarted=="function"&&ft.markRenderStarted(i)}function Yk(){ft!==null&&typeof ft.markRenderYielded=="function"&&ft.markRenderYielded()}function jy(){ft!==null&&typeof ft.markRenderStopped=="function"&&ft.markRenderStopped()}function zr(i){ft!==null&&typeof ft.markRenderScheduled=="function"&&ft.markRenderScheduled(i)}function Gy(i,l){ft!==null&&typeof ft.markForceUpdateScheduled=="function"&&ft.markForceUpdateScheduled(i,l)}function Pp(i,l){ft!==null&&typeof ft.markStateUpdateScheduled=="function"&&ft.markStateUpdateScheduled(i,l)}var zt=0,xn=1,qn=2,cr=8,Kn=16,us=Math.clz32?Math.clz32:Bp,_s=Math.log,qy=Math.LN2;function Bp(i){var l=i>>>0;return l===0?32:31-(_s(l)/qy|0)|0}var gf=31,We=0,Wn=0,Qt=1,ic=2,Lo=4,ya=8,Xr=16,ou=32,oc=4194240,yf=64,Ky=128,Xy=256,Yy=512,Qy=1024,Zy=2048,Jy=4096,ev=8192,tv=16384,vf=32768,nv=65536,Ud=131072,Wd=262144,rv=524288,Vp=1048576,sv=2097152,Up=130023424,bf=4194304,av=8388608,Wp=16777216,iv=33554432,ov=67108864,pw=bf,Hp=134217728,mw=268435455,jp=268435456,xf=536870912,si=1073741824;function Qk(i){{if(i&Qt)return"Sync";if(i&ic)return"InputContinuousHydration";if(i&Lo)return"InputContinuous";if(i&ya)return"DefaultHydration";if(i&Xr)return"Default";if(i&ou)return"TransitionHydration";if(i&oc)return"Transition";if(i&Up)return"Retry";if(i&Hp)return"SelectiveHydration";if(i&jp)return"IdleHydration";if(i&xf)return"Idle";if(i&si)return"Offscreen"}}var gr=-1,wf=yf,lv=bf;function Gp(i){switch(lc(i)){case Qt:return Qt;case ic:return ic;case Lo:return Lo;case ya:return ya;case Xr:return Xr;case ou:return ou;case yf:case Ky:case Xy:case Yy:case Qy:case Zy:case Jy:case ev:case tv:case vf:case nv:case Ud:case Wd:case rv:case Vp:case sv:return i&oc;case bf:case av:case Wp:case iv:case ov:return i&Up;case Hp:return Hp;case jp:return jp;case xf:return xf;case si:return si;default:return o("Should have found matching lanes. This is a bug in React."),i}}function uv(i,l){var p=i.pendingLanes;if(p===We)return We;var v=We,w=i.suspendedLanes,E=i.pingedLanes,R=p&mw;if(R!==We){var F=R&~w;if(F!==We)v=Gp(F);else{var M=R&E;M!==We&&(v=Gp(M))}}else{var j=p&~w;j!==We?v=Gp(j):E!==We&&(v=Gp(E))}if(v===We)return We;if(l!==We&&l!==v&&(l&w)===We){var q=lc(v),he=lc(l);if(q>=he||q===Xr&&(he&oc)!==We)return l}(v&Lo)!==We&&(v|=p&Xr);var fe=i.entangledLanes;if(fe!==We)for(var ke=i.entanglements,Ie=v&fe;Ie>0;){var Le=cs(Ie),dt=1<<Le;v|=ke[Le],Ie&=~dt}return v}function Mo(i,l){for(var p=i.eventTimes,v=gr;l>0;){var w=cs(l),E=1<<w,R=p[w];R>v&&(v=R),l&=~E}return v}function gw(i,l){switch(i){case Qt:case ic:case Lo:return l+250;case ya:case Xr:case ou:case yf:case Ky:case Xy:case Yy:case Qy:case Zy:case Jy:case ev:case tv:case vf:case nv:case Ud:case Wd:case rv:case Vp:case sv:return l+5e3;case bf:case av:case Wp:case iv:case ov:return gr;case Hp:case jp:case xf:case si:return gr;default:return o("Should have found matching lanes. This is a bug in React."),gr}}function cv(i,l){for(var p=i.pendingLanes,v=i.suspendedLanes,w=i.pingedLanes,E=i.expirationTimes,R=p;R>0;){var F=cs(R),M=1<<F,j=E[F];j===gr?((M&v)===We||(M&w)!==We)&&(E[F]=gw(M,l)):j<=l&&(i.expiredLanes|=M),R&=~M}}function Zk(i){return Gp(i.pendingLanes)}function fv(i){var l=i.pendingLanes&~si;return l!==We?l:l&si?si:We}function Jk(i){return(i&Qt)!==We}function qp(i){return(i&mw)!==We}function Sf(i){return(i&Up)===i}function yw(i){var l=Qt|Lo|Xr;return(i&l)===We}function vw(i){return(i&oc)===i}function dv(i,l){var p=ic|Lo|ya|Xr;return(l&p)!==We}function eE(i,l){return(l&i.expiredLanes)!==We}function bw(i){return(i&oc)!==We}function xw(){var i=wf;return wf<<=1,(wf&oc)===We&&(wf=yf),i}function tE(){var i=lv;return lv<<=1,(lv&Up)===We&&(lv=bf),i}function lc(i){return i&-i}function Kp(i){return lc(i)}function cs(i){return 31-us(i)}function Ks(i){return cs(i)}function ai(i,l){return(i&l)!==We}function Cf(i,l){return(i&l)===l}function pn(i,l){return i|l}function Xp(i,l){return i&~l}function ww(i,l){return i&l}function nE(i){return i}function rE(i,l){return i!==Wn&&i<l?i:l}function Yp(i){for(var l=[],p=0;p<gf;p++)l.push(i);return l}function Hd(i,l,p){i.pendingLanes|=l,l!==xf&&(i.suspendedLanes=We,i.pingedLanes=We);var v=i.eventTimes,w=Ks(l);v[w]=p}function sE(i,l){i.suspendedLanes|=l,i.pingedLanes&=~l;for(var p=i.expirationTimes,v=l;v>0;){var w=cs(v),E=1<<w;p[w]=gr,v&=~E}}function hv(i,l,p){i.pingedLanes|=i.suspendedLanes&l}function Sw(i,l){var p=i.pendingLanes&~l;i.pendingLanes=l,i.suspendedLanes=We,i.pingedLanes=We,i.expiredLanes&=l,i.mutableReadLanes&=l,i.entangledLanes&=l;for(var v=i.entanglements,w=i.eventTimes,E=i.expirationTimes,R=p;R>0;){var F=cs(R),M=1<<F;v[F]=We,w[F]=gr,E[F]=gr,R&=~M}}function pv(i,l){for(var p=i.entangledLanes|=l,v=i.entanglements,w=p;w;){var E=cs(w),R=1<<E;R&l|v[E]&l&&(v[E]|=l),w&=~R}}function Cw(i,l){var p=lc(l),v;switch(p){case Lo:v=ic;break;case Xr:v=ya;break;case yf:case Ky:case Xy:case Yy:case Qy:case Zy:case Jy:case ev:case tv:case vf:case nv:case Ud:case Wd:case rv:case Vp:case sv:case bf:case av:case Wp:case iv:case ov:v=ou;break;case xf:v=jp;break;default:v=Wn;break}return(v&(i.suspendedLanes|l))!==Wn?Wn:v}function Qp(i,l,p){if(ri)for(var v=i.pendingUpdatersLaneMap;p>0;){var w=Ks(p),E=1<<w,R=v[w];R.add(l),p&=~E}}function aE(i,l){if(ri)for(var p=i.pendingUpdatersLaneMap,v=i.memoizedUpdaters;l>0;){var w=Ks(l),E=1<<w,R=p[w];R.size>0&&(R.forEach(function(F){var M=F.alternate;(M===null||!v.has(M))&&v.add(F)}),R.clear()),l&=~E}}function Tw(i,l){return null}var $a=Qt,bl=Lo,ao=Xr,io=xf,Zp=Wn;function oo(){return Zp}function fs(i){Zp=i}function iE(i,l){var p=Zp;try{return Zp=i,l()}finally{Zp=p}}function oE(i,l){return i!==0&&i<l?i:l}function Jp(i,l){return i>l?i:l}function As(i,l){return i!==0&&i<l}function lE(i){var l=lc(i);return As($a,l)?As(bl,l)?qp(l)?ao:io:bl:$a}function mv(i){var l=i.current.memoizedState;return l.isDehydrated}var em;function va(i){em=i}function eA(i){em(i)}var wt;function jd(i){wt=i}var gv;function uE(i){gv=i}var cE;function tm(i){cE=i}var nm;function kw(i){nm=i}var yv=!1,rm=[],lu=null,xl=null,wl=null,Yr=new Map,Ia=new Map,Ra=[],fE=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function dE(i){return fE.indexOf(i)>-1}function zo(i,l,p,v,w){return{blockedOn:i,domEventName:l,eventSystemFlags:p,nativeEvent:w,targetContainers:[v]}}function Ew(i,l){switch(i){case"focusin":case"focusout":lu=null;break;case"dragenter":case"dragleave":xl=null;break;case"mouseover":case"mouseout":wl=null;break;case"pointerover":case"pointerout":{var p=l.pointerId;Yr.delete(p);break}case"gotpointercapture":case"lostpointercapture":{var v=l.pointerId;Ia.delete(v);break}}}function ii(i,l,p,v,w,E){if(i===null||i.nativeEvent!==E){var R=zo(l,p,v,w,E);if(l!==null){var F=eh(l);F!==null&&wt(F)}return R}i.eventSystemFlags|=v;var M=i.targetContainers;return w!==null&&M.indexOf(w)===-1&&M.push(w),i}function tA(i,l,p,v,w){switch(l){case"focusin":{var E=w;return lu=ii(lu,i,l,p,v,E),!0}case"dragenter":{var R=w;return xl=ii(xl,i,l,p,v,R),!0}case"mouseover":{var F=w;return wl=ii(wl,i,l,p,v,F),!0}case"pointerover":{var M=w,j=M.pointerId;return Yr.set(j,ii(Yr.get(j)||null,i,l,p,v,M)),!0}case"gotpointercapture":{var q=w,he=q.pointerId;return Ia.set(he,ii(Ia.get(he)||null,i,l,p,v,q)),!0}}return!1}function Nw(i){var l=mm(i.target);if(l!==null){var p=Ti(l);if(p!==null){var v=p.tag;if(v===L){var w=gl(p);if(w!==null){i.blockedOn=w,nm(i.priority,function(){gv(p)});return}}else if(v===g){var E=p.stateNode;if(mv(E)){i.blockedOn=yl(p);return}}}}i.blockedOn=null}function hE(i){for(var l=cE(),p={blockedOn:null,target:i,priority:l},v=0;v<Ra.length&&As(l,Ra[v].priority);v++);Ra.splice(v,0,p),v===0&&Nw(p)}function sm(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;l.length>0;){var p=l[0],v=qd(i.domEventName,i.eventSystemFlags,p,i.nativeEvent);if(v===null){var w=i.nativeEvent,E=new w.constructor(w.type,w);X_(E),w.target.dispatchEvent(E),Y_()}else{var R=eh(v);return R!==null&&wt(R),i.blockedOn=v,!1}l.shift()}return!0}function $w(i,l,p){sm(i)&&p.delete(l)}function nA(){yv=!1,lu!==null&&sm(lu)&&(lu=null),xl!==null&&sm(xl)&&(xl=null),wl!==null&&sm(wl)&&(wl=null),Yr.forEach($w),Ia.forEach($w)}function uc(i,l){i.blockedOn===l&&(i.blockedOn=null,yv||(yv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,nA)))}function Tf(i){if(rm.length>0){uc(rm[0],i);for(var l=1;l<rm.length;l++){var p=rm[l];p.blockedOn===i&&(p.blockedOn=null)}}lu!==null&&uc(lu,i),xl!==null&&uc(xl,i),wl!==null&&uc(wl,i);var v=function(F){return uc(F,i)};Yr.forEach(v),Ia.forEach(v);for(var w=0;w<Ra.length;w++){var E=Ra[w];E.blockedOn===i&&(E.blockedOn=null)}for(;Ra.length>0;){var R=Ra[0];if(R.blockedOn!==null)break;Nw(R),R.blockedOn===null&&Ra.shift()}}var Xs=t.ReactCurrentBatchConfig,On=!0;function Cs(i){On=!!i}function ds(){return On}function Ys(i,l,p){var v=vv(l),w;switch(v){case $a:w=$i;break;case bl:w=Gd;break;case ao:default:w=Qr;break}return w.bind(null,l,p,i)}function $i(i,l,p,v){var w=oo(),E=Xs.transition;Xs.transition=null;try{fs($a),Qr(i,l,p,v)}finally{fs(w),Xs.transition=E}}function Gd(i,l,p,v){var w=oo(),E=Xs.transition;Xs.transition=null;try{fs(bl),Qr(i,l,p,v)}finally{fs(w),Xs.transition=E}}function Qr(i,l,p,v){On&&am(i,l,p,v)}function am(i,l,p,v){var w=qd(i,l,p,v);if(w===null){bA(i,l,v,Sl,p),Ew(i,v);return}if(tA(w,i,l,p,v)){v.stopPropagation();return}if(Ew(i,v),l&Ji&&dE(i)){for(;w!==null;){var E=eh(w);E!==null&&eA(E);var R=qd(i,l,p,v);if(R===null&&bA(i,l,v,Sl,p),R===w)break;w=R}w!==null&&v.stopPropagation();return}bA(i,l,v,null,p)}var Sl=null;function qd(i,l,p,v){Sl=null;var w=ew(v),E=mm(w);if(E!==null){var R=Ti(E);if(R===null)E=null;else{var F=R.tag;if(F===L){var M=gl(R);if(M!==null)return M;E=null}else if(F===g){var j=R.stateNode;if(mv(j))return yl(R);E=null}else R!==E&&(E=null)}}return Sl=E,null}function vv(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return $a;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return bl;case"message":{var l=Uy();switch(l){case Op:return $a;case sc:return bl;case au:case J_:return ao;case ff:return io;default:return ao}}default:return ao}}function im(i,l,p){return i.addEventListener(l,p,!1),p}function oi(i,l,p){return i.addEventListener(l,p,!0),p}function Iw(i,l,p,v){return i.addEventListener(l,p,{capture:!0,passive:v}),p}function Kd(i,l,p,v){return i.addEventListener(l,p,{passive:v}),p}var Ii=null,Xd=null,kf=null;function cc(i){return Ii=i,Xd=om(),!0}function bv(){Ii=null,Xd=null,kf=null}function uu(){if(kf)return kf;var i,l=Xd,p=l.length,v,w=om(),E=w.length;for(i=0;i<p&&l[i]===w[i];i++);var R=p-i;for(v=1;v<=R&&l[p-v]===w[E-v];v++);var F=v>1?1-v:void 0;return kf=w.slice(i,F),kf}function om(){return"value"in Ii?Ii.value:Ii.textContent}function fc(i){var l,p=i.keyCode;return"charCode"in i?(l=i.charCode,l===0&&p===13&&(l=13)):l=p,l===10&&(l=13),l>=32||l===13?l:0}function Yd(){return!0}function lm(){return!1}function ba(i){function l(p,v,w,E,R){this._reactName=p,this._targetInst=w,this.type=v,this.nativeEvent=E,this.target=R,this.currentTarget=null;for(var F in i)if(i.hasOwnProperty(F)){var M=i[F];M?this[F]=M(E):this[F]=E[F]}var j=E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1;return j?this.isDefaultPrevented=Yd:this.isDefaultPrevented=lm,this.isPropagationStopped=lm,this}return mn(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Yd)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Yd)},persist:function(){},isPersistent:Yd}),l}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cl=ba(hs),Da=mn({},hs,{view:0,detail:0}),li=ba(Da),xv,um,Ef;function rA(i){i!==Ef&&(Ef&&i.type==="mousemove"?(xv=i.screenX-Ef.screenX,um=i.screenY-Ef.screenY):(xv=0,um=0),Ef=i)}var Po=mn({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(rA(i),xv)},movementY:function(i){return"movementY"in i?i.movementY:um}}),Rw=ba(Po),Dw=mn({},Po,{dataTransfer:0}),Nf=ba(Dw),_w=mn({},Da,{relatedTarget:0}),cu=ba(_w),pE=mn({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),mE=ba(pE),Aw=mn({},hs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),wv=ba(Aw),sA=mn({},hs,{data:0}),gE=ba(sA),yE=gE,vE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$f={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function aA(i){if(i.key){var l=vE[i.key]||i.key;if(l!=="Unidentified")return l}if(i.type==="keypress"){var p=fc(i);return p===13?"Enter":String.fromCharCode(p)}return i.type==="keydown"||i.type==="keyup"?$f[i.keyCode]||"Unidentified":""}var Qd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bE(i){var l=this,p=l.nativeEvent;if(p.getModifierState)return p.getModifierState(i);var v=Qd[i];return v?!!p[v]:!1}function Dr(i){return bE}var iA=mn({},Da,{key:aA,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(i){return i.type==="keypress"?fc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),xE=ba(iA),oA=mn({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wE=ba(oA),SE=mn({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),CE=ba(SE),lA=mn({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lo=ba(lA),Ow=mn({},Po,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),uA=ba(Ow),dc=[9,13,27,32],cm=229,fu=Tt&&"CompositionEvent"in window,hc=null;Tt&&"documentMode"in document&&(hc=document.documentMode);var Fw=Tt&&"TextEvent"in window&&!hc,Sv=Tt&&(!fu||hc&&hc>8&&hc<=11),TE=32,Cv=String.fromCharCode(TE);function cA(){Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),Xe("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),Xe("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var Lw=!1;function kE(i){return(i.ctrlKey||i.altKey||i.metaKey)&&!(i.ctrlKey&&i.altKey)}function Tv(i){switch(i){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function kv(i,l){return i==="keydown"&&l.keyCode===cm}function Mw(i,l){switch(i){case"keyup":return dc.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==cm;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ev(i){var l=i.detail;return typeof l=="object"&&"data"in l?l.data:null}function EE(i){return i.locale==="ko"}var If=!1;function zw(i,l,p,v,w){var E,R;if(fu?E=Tv(l):If?Mw(l,v)&&(E="onCompositionEnd"):kv(l,v)&&(E="onCompositionStart"),!E)return null;Sv&&!EE(v)&&(!If&&E==="onCompositionStart"?If=cc(w):E==="onCompositionEnd"&&If&&(R=uu()));var F=AE(p,E);if(F.length>0){var M=new gE(E,l,null,v,w);if(i.push({event:M,listeners:F}),R)M.data=R;else{var j=Ev(v);j!==null&&(M.data=j)}}}function Nv(i,l){switch(i){case"compositionend":return Ev(l);case"keypress":var p=l.which;return p!==TE?null:(Lw=!0,Cv);case"textInput":var v=l.data;return v===Cv&&Lw?null:v;default:return null}}function Pw(i,l){if(If){if(i==="compositionend"||!fu&&Mw(i,l)){var p=uu();return bv(),If=!1,p}return null}switch(i){case"paste":return null;case"keypress":if(!kE(l)){if(l.char&&l.char.length>1)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Sv&&!EE(l)?null:l.data;default:return null}}function $v(i,l,p,v,w){var E;if(Fw?E=Nv(l,v):E=Pw(l,v),!E)return null;var R=AE(p,"onBeforeInput");if(R.length>0){var F=new yE("onBeforeInput","beforeinput",null,v,w);i.push({event:F,listeners:R}),F.data=E}}function NE(i,l,p,v,w,E,R){zw(i,l,p,v,w),$v(i,l,p,v,w)}var fA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fm(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!fA[i.type]:l==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function dA(i){if(!Tt)return!1;var l="on"+i,p=l in document;if(!p){var v=document.createElement("div");v.setAttribute(l,"return;"),p=typeof v[l]=="function"}return p}function dm(){Xe("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function $E(i,l,p,v){Od(v);var w=AE(l,"onChange");if(w.length>0){var E=new Cl("onChange","change",null,p,v);i.push({event:E,listeners:w})}}var pc=null,f=null;function h(i){var l=i.nodeName&&i.nodeName.toLowerCase();return l==="select"||l==="input"&&i.type==="file"}function b(i){var l=[];$E(l,f,i,ew(i)),Bk(T,l)}function T(i){CW(i,0)}function I(i){var l=Ov(i);if(cl(l))return i}function _(i,l){if(i==="change")return l}var V=!1;Tt&&(V=dA("input")&&(!document.documentMode||document.documentMode>9));function Y(i,l){pc=i,f=l,pc.attachEvent("onpropertychange",$e)}function ie(){pc&&(pc.detachEvent("onpropertychange",$e),pc=null,f=null)}function $e(i){i.propertyName==="value"&&I(f)&&b(i)}function Ge(i,l,p){i==="focusin"?(ie(),Y(l,p)):i==="focusout"&&ie()}function Ye(i,l){if(i==="selectionchange"||i==="keyup"||i==="keydown")return I(f)}function je(i){var l=i.nodeName;return l&&l.toLowerCase()==="input"&&(i.type==="checkbox"||i.type==="radio")}function yt(i,l){if(i==="click")return I(l)}function kt(i,l){if(i==="input"||i==="change")return I(l)}function Dt(i){var l=i._wrapperState;!l||!l.controlled||i.type!=="number"||Ut(i,"number",i.value)}function Zr(i,l,p,v,w,E,R){var F=p?Ov(p):window,M,j;if(h(F)?M=_:fm(F)?V?M=kt:(M=Ye,j=Ge):je(F)&&(M=yt),M){var q=M(l,p);if(q){$E(i,q,v,w);return}}j&&j(l,F,p),l==="focusout"&&Dt(F)}function we(){ct("onMouseEnter",["mouseout","mouseover"]),ct("onMouseLeave",["mouseout","mouseover"]),ct("onPointerEnter",["pointerout","pointerover"]),ct("onPointerLeave",["pointerout","pointerover"])}function de(i,l,p,v,w,E,R){var F=l==="mouseover"||l==="pointerover",M=l==="mouseout"||l==="pointerout";if(F&&!$p(v)){var j=v.relatedTarget||v.fromElement;if(j&&(mm(j)||Jw(j)))return}if(!(!M&&!F)){var q;if(w.window===w)q=w;else{var he=w.ownerDocument;he?q=he.defaultView||he.parentWindow:q=window}var fe,ke;if(M){var Ie=v.relatedTarget||v.toElement;if(fe=p,ke=Ie?mm(Ie):null,ke!==null){var Le=Ti(ke);(ke!==Le||ke.tag!==x&&ke.tag!==S)&&(ke=null)}}else fe=null,ke=p;if(fe!==ke){var dt=Rw,Wt="onMouseLeave",_t="onMouseEnter",Ln="mouse";(l==="pointerout"||l==="pointerover")&&(dt=wE,Wt="onPointerLeave",_t="onPointerEnter",Ln="pointer");var $n=fe==null?q:Ov(fe),Se=ke==null?q:Ov(ke),Me=new dt(Wt,Ln+"leave",fe,v,w);Me.target=$n,Me.relatedTarget=Se;var Ce=null,Qe=mm(w);if(Qe===p){var xt=new dt(_t,Ln+"enter",ke,v,w);xt.target=Se,xt.relatedTarget=$n,Ce=xt}H0e(i,Me,Ce,fe,ke)}}}function Te(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var qe=typeof Object.is=="function"?Object.is:Te;function Et(i,l){if(qe(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var p=Object.keys(i),v=Object.keys(l);if(p.length!==v.length)return!1;for(var w=0;w<p.length;w++){var E=p[w];if(!tn.call(l,E)||!qe(i[E],l[E]))return!1}return!0}function Ht(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function qt(i){for(;i;){if(i.nextSibling)return i.nextSibling;i=i.parentNode}}function rn(i,l){for(var p=Ht(i),v=0,w=0;p;){if(p.nodeType===eu){if(w=v+p.textContent.length,v<=l&&w>=l)return{node:p,offset:l-v};v=w}p=Ht(qt(p))}}function Os(i){var l=i.ownerDocument,p=l&&l.defaultView||window,v=p.getSelection&&p.getSelection();if(!v||v.rangeCount===0)return null;var w=v.anchorNode,E=v.anchorOffset,R=v.focusNode,F=v.focusOffset;try{w.nodeType,R.nodeType}catch{return null}return Xn(i,w,E,R,F)}function Xn(i,l,p,v,w){var E=0,R=-1,F=-1,M=0,j=0,q=i,he=null;e:for(;;){for(var fe=null;q===l&&(p===0||q.nodeType===eu)&&(R=E+p),q===v&&(w===0||q.nodeType===eu)&&(F=E+w),q.nodeType===eu&&(E+=q.nodeValue.length),(fe=q.firstChild)!==null;)he=q,q=fe;for(;;){if(q===i)break e;if(he===l&&++M===p&&(R=E),he===v&&++j===w&&(F=E),(fe=q.nextSibling)!==null)break;q=he,he=q.parentNode}q=fe}return R===-1||F===-1?null:{start:R,end:F}}function mc(i,l){var p=i.ownerDocument||document,v=p&&p.defaultView||window;if(v.getSelection){var w=v.getSelection(),E=i.textContent.length,R=Math.min(l.start,E),F=l.end===void 0?R:Math.min(l.end,E);if(!w.extend&&R>F){var M=F;F=R,R=M}var j=rn(i,R),q=rn(i,F);if(j&&q){if(w.rangeCount===1&&w.anchorNode===j.node&&w.anchorOffset===j.offset&&w.focusNode===q.node&&w.focusOffset===q.offset)return;var he=p.createRange();he.setStart(j.node,j.offset),w.removeAllRanges(),R>F?(w.addRange(he),w.extend(q.node,q.offset)):(he.setEnd(q.node,q.offset),w.addRange(he))}}}function IE(i){return i&&i.nodeType===eu}function dW(i,l){return!i||!l?!1:i===l?!0:IE(i)?!1:IE(l)?dW(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1}function E0e(i){return i&&i.ownerDocument&&dW(i.ownerDocument.documentElement,i)}function N0e(i){try{return typeof i.contentWindow.location.href=="string"}catch{return!1}}function hW(){for(var i=window,l=Zi();l instanceof i.HTMLIFrameElement;){if(N0e(l))i=l.contentWindow;else return l;l=Zi(i.document)}return l}function hA(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}function $0e(){var i=hW();return{focusedElem:i,selectionRange:hA(i)?R0e(i):null}}function I0e(i){var l=hW(),p=i.focusedElem,v=i.selectionRange;if(l!==p&&E0e(p)){v!==null&&hA(p)&&D0e(p,v);for(var w=[],E=p;E=E.parentNode;)E.nodeType===Za&&w.push({element:E,left:E.scrollLeft,top:E.scrollTop});typeof p.focus=="function"&&p.focus();for(var R=0;R<w.length;R++){var F=w[R];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}}function R0e(i){var l;return"selectionStart"in i?l={start:i.selectionStart,end:i.selectionEnd}:l=Os(i),l||{start:0,end:0}}function D0e(i,l){var p=l.start,v=l.end;v===void 0&&(v=p),"selectionStart"in i?(i.selectionStart=p,i.selectionEnd=Math.min(v,i.value.length)):mc(i,l)}var _0e=Tt&&"documentMode"in document&&document.documentMode<=11;function A0e(){Xe("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var Iv=null,pA=null,Bw=null,mA=!1;function O0e(i){if("selectionStart"in i&&hA(i))return{start:i.selectionStart,end:i.selectionEnd};var l=i.ownerDocument&&i.ownerDocument.defaultView||window,p=l.getSelection();return{anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}}function F0e(i){return i.window===i?i.document:i.nodeType===tu?i:i.ownerDocument}function pW(i,l,p){var v=F0e(p);if(!(mA||Iv==null||Iv!==Zi(v))){var w=O0e(Iv);if(!Bw||!Et(Bw,w)){Bw=w;var E=AE(pA,"onSelect");if(E.length>0){var R=new Cl("onSelect","select",null,l,p);i.push({event:R,listeners:E}),R.target=Iv}}}}function L0e(i,l,p,v,w,E,R){var F=p?Ov(p):window;switch(l){case"focusin":(fm(F)||F.contentEditable==="true")&&(Iv=F,pA=p,Bw=null);break;case"focusout":Iv=null,pA=null,Bw=null;break;case"mousedown":mA=!0;break;case"contextmenu":case"mouseup":case"dragend":mA=!1,pW(i,v,w);break;case"selectionchange":if(_0e)break;case"keydown":case"keyup":pW(i,v,w)}}function RE(i,l){var p={};return p[i.toLowerCase()]=l.toLowerCase(),p["Webkit"+i]="webkit"+l,p["Moz"+i]="moz"+l,p}var Rv={animationend:RE("Animation","AnimationEnd"),animationiteration:RE("Animation","AnimationIteration"),animationstart:RE("Animation","AnimationStart"),transitionend:RE("Transition","TransitionEnd")},gA={},mW={};Tt&&(mW=document.createElement("div").style,"AnimationEvent"in window||(delete Rv.animationend.animation,delete Rv.animationiteration.animation,delete Rv.animationstart.animation),"TransitionEvent"in window||delete Rv.transitionend.transition);function DE(i){if(gA[i])return gA[i];if(!Rv[i])return i;var l=Rv[i];for(var p in l)if(l.hasOwnProperty(p)&&p in mW)return gA[i]=l[p];return i}var gW=DE("animationend"),yW=DE("animationiteration"),vW=DE("animationstart"),bW=DE("transitionend"),xW=new Map,wW=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Zd(i,l){xW.set(i,l),Xe(l,[i])}function M0e(){for(var i=0;i<wW.length;i++){var l=wW[i],p=l.toLowerCase(),v=l[0].toUpperCase()+l.slice(1);Zd(p,"on"+v)}Zd(gW,"onAnimationEnd"),Zd(yW,"onAnimationIteration"),Zd(vW,"onAnimationStart"),Zd("dblclick","onDoubleClick"),Zd("focusin","onFocus"),Zd("focusout","onBlur"),Zd(bW,"onTransitionEnd")}function z0e(i,l,p,v,w,E,R){var F=xW.get(l);if(F!==void 0){var M=Cl,j=l;switch(l){case"keypress":if(fc(v)===0)return;case"keydown":case"keyup":M=xE;break;case"focusin":j="focus",M=cu;break;case"focusout":j="blur",M=cu;break;case"beforeblur":case"afterblur":M=cu;break;case"click":if(v.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Rw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=Nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=CE;break;case gW:case yW:case vW:M=mE;break;case bW:M=lo;break;case"scroll":M=li;break;case"wheel":M=uA;break;case"copy":case"cut":case"paste":M=wv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=wE;break}var q=(E&Ji)!==0;{var he=!q&&l==="scroll",fe=U0e(p,F,v.type,q,he);if(fe.length>0){var ke=new M(F,j,null,v,w);i.push({event:ke,listeners:fe})}}}}M0e(),we(),dm(),A0e(),cA();function P0e(i,l,p,v,w,E,R){z0e(i,l,p,v,w,E);var F=(E&J0)===0;F&&(de(i,l,p,v,w),Zr(i,l,p,v,w),L0e(i,l,p,v,w),NE(i,l,p,v,w))}var Vw=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],yA=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(Vw));function SW(i,l,p){var v=i.type||"unknown-event";i.currentTarget=p,hl(v,l,void 0,i),i.currentTarget=null}function B0e(i,l,p){var v;if(p)for(var w=l.length-1;w>=0;w--){var E=l[w],R=E.instance,F=E.currentTarget,M=E.listener;if(R!==v&&i.isPropagationStopped())return;SW(i,M,F),v=R}else for(var j=0;j<l.length;j++){var q=l[j],he=q.instance,fe=q.currentTarget,ke=q.listener;if(he!==v&&i.isPropagationStopped())return;SW(i,ke,fe),v=he}}function CW(i,l){for(var p=(l&Ji)!==0,v=0;v<i.length;v++){var w=i[v],E=w.event,R=w.listeners;B0e(E,R,p)}Dp()}function V0e(i,l,p,v,w){var E=ew(p),R=[];P0e(R,i,v,p,E,l),CW(R,l)}function Pr(i,l){yA.has(i)||o('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',i);var p=!1,v=y1e(l),w=j0e(i);v.has(w)||(TW(l,i,Iy,p),v.add(w))}function vA(i,l,p){yA.has(i)&&!l&&o('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',i);var v=0;l&&(v|=Ji),TW(p,i,v,l)}var _E="_reactListening"+Math.random().toString(36).slice(2);function Uw(i){if(!i[_E]){i[_E]=!0,Pe.forEach(function(p){p!=="selectionchange"&&(yA.has(p)||vA(p,!1,i),vA(p,!0,i))});var l=i.nodeType===tu?i:i.ownerDocument;l!==null&&(l[_E]||(l[_E]=!0,vA("selectionchange",!1,l)))}}function TW(i,l,p,v,w){var E=Ys(i,l,p),R=void 0;Rp&&(l==="touchstart"||l==="touchmove"||l==="wheel")&&(R=!0),i=i,v?R!==void 0?Iw(i,l,E,R):oi(i,l,E):R!==void 0?Kd(i,l,E,R):im(i,l,E)}function kW(i,l){return i===l||i.nodeType===is&&i.parentNode===l}function bA(i,l,p,v,w){var E=v;if(!(l&Z0)&&!(l&Iy)){var R=w;if(v!==null){var F=v;e:for(;;){if(F===null)return;var M=F.tag;if(M===g||M===y){var j=F.stateNode.containerInfo;if(kW(j,R))break;if(M===y)for(var q=F.return;q!==null;){var he=q.tag;if(he===g||he===y){var fe=q.stateNode.containerInfo;if(kW(fe,R))return}q=q.return}for(;j!==null;){var ke=mm(j);if(ke===null)return;var Ie=ke.tag;if(Ie===x||Ie===S){F=E=ke;continue e}j=j.parentNode}}F=F.return}}}Bk(function(){return V0e(i,l,p,E)})}function Ww(i,l,p){return{instance:i,listener:l,currentTarget:p}}function U0e(i,l,p,v,w,E){for(var R=l!==null?l+"Capture":null,F=v?R:l,M=[],j=i,q=null;j!==null;){var he=j,fe=he.stateNode,ke=he.tag;if(ke===x&&fe!==null&&(q=fe,F!==null)){var Ie=Zu(j,F);Ie!=null&&M.push(Ww(j,Ie,q))}if(w)break;j=j.return}return M}function AE(i,l){for(var p=l+"Capture",v=[],w=i;w!==null;){var E=w,R=E.stateNode,F=E.tag;if(F===x&&R!==null){var M=R,j=Zu(w,p);j!=null&&v.unshift(Ww(w,j,M));var q=Zu(w,l);q!=null&&v.push(Ww(w,q,M))}w=w.return}return v}function Dv(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==x);return i||null}function W0e(i,l){for(var p=i,v=l,w=0,E=p;E;E=Dv(E))w++;for(var R=0,F=v;F;F=Dv(F))R++;for(;w-R>0;)p=Dv(p),w--;for(;R-w>0;)v=Dv(v),R--;for(var M=w;M--;){if(p===v||v!==null&&p===v.alternate)return p;p=Dv(p),v=Dv(v)}return null}function EW(i,l,p,v,w){for(var E=l._reactName,R=[],F=p;F!==null&&F!==v;){var M=F,j=M.alternate,q=M.stateNode,he=M.tag;if(j!==null&&j===v)break;if(he===x&&q!==null){var fe=q;if(w){var ke=Zu(F,E);ke!=null&&R.unshift(Ww(F,ke,fe))}else if(!w){var Ie=Zu(F,E);Ie!=null&&R.push(Ww(F,Ie,fe))}}F=F.return}R.length!==0&&i.push({event:l,listeners:R})}function H0e(i,l,p,v,w){var E=v&&w?W0e(v,w):null;v!==null&&EW(i,l,v,E,!1),w!==null&&p!==null&&EW(i,p,w,E,!0)}function j0e(i,l){return i+"__bubble"}var uo=!1,Hw="dangerouslySetInnerHTML",OE="suppressContentEditableWarning",Jd="suppressHydrationWarning",NW="autoFocus",hm="children",pm="style",FE="__html",xA,LE,jw,$W,ME,IW,RW;xA={dialog:!0,webview:!0},LE=function(i,l){X0(i,l),Ny(i,l),Mk(i,l,{registrationNameDependencies:He,possibleRegistrationNames:Ke})},IW=Tt&&!document.documentMode,jw=function(i,l,p){if(!uo){var v=zE(p),w=zE(l);w!==v&&(uo=!0,o("Prop `%s` did not match. Server: %s Client: %s",i,JSON.stringify(w),JSON.stringify(v)))}},$W=function(i){if(!uo){uo=!0;var l=[];i.forEach(function(p){l.push(p)}),o("Extra attributes from the server: %s",l)}},ME=function(i,l){l===!1?o("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",i,i,i):o("Expected `%s` listener to be a function, instead got a value of `%s` type.",i,typeof l)},RW=function(i,l){var p=i.namespaceURI===Jl?i.ownerDocument.createElement(i.tagName):i.ownerDocument.createElementNS(i.namespaceURI,i.tagName);return p.innerHTML=l,p.innerHTML};var G0e=/\r\n?/g,q0e=/\u0000|\uFFFD/g;function zE(i){it(i);var l=typeof i=="string"?i:""+i;return l.replace(G0e,`
`).replace(q0e,"")}function PE(i,l,p,v){var w=zE(l),E=zE(i);if(E!==w&&(v&&(uo||(uo=!0,o('Text content did not match. Server: "%s" Client: "%s"',E,w))),p&&pe))throw new Error("Text content does not match server-rendered HTML.")}function DW(i){return i.nodeType===tu?i:i.ownerDocument}function K0e(){}function BE(i){i.onclick=K0e}function X0e(i,l,p,v,w){for(var E in v)if(v.hasOwnProperty(E)){var R=v[E];if(E===pm)R&&Object.freeze(R),Dk(l,R);else if(E===Hw){var F=R?R[FE]:void 0;F!=null&&bk(l,F)}else if(E===hm)if(typeof R=="string"){var M=i!=="textarea"||R!=="";M&&Rd(l,R)}else typeof R=="number"&&Rd(l,""+R);else E===OE||E===Jd||E===NW||(He.hasOwnProperty(E)?R!=null&&(typeof R!="function"&&ME(E,R),E==="onScroll"&&Pr("scroll",l)):R!=null&&Ca(l,E,R,w))}}function Y0e(i,l,p,v){for(var w=0;w<l.length;w+=2){var E=l[w],R=l[w+1];E===pm?Dk(i,R):E===Hw?bk(i,R):E===hm?Rd(i,R):Ca(i,E,R,v)}}function Q0e(i,l,p,v){var w,E=DW(p),R,F=v;if(F===Jl&&(F=U0(i)),F===Jl){if(w=Yu(i,l),!w&&i!==i.toLowerCase()&&o("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",i),i==="script"){var M=E.createElement("div");M.innerHTML="<script><\/script>";var j=M.firstChild;R=M.removeChild(j)}else if(typeof l.is=="string")R=E.createElement(i,{is:l.is});else if(R=E.createElement(i),i==="select"){var q=R;l.multiple?q.multiple=!0:l.size&&(q.size=l.size)}}else R=E.createElementNS(F,i);return F===Jl&&!w&&Object.prototype.toString.call(R)==="[object HTMLUnknownElement]"&&!tn.call(xA,i)&&(xA[i]=!0,o("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",i)),R}function Z0e(i,l){return DW(l).createTextNode(i)}function J0e(i,l,p,v){var w=Yu(l,p);LE(l,p);var E;switch(l){case"dialog":Pr("cancel",i),Pr("close",i),E=p;break;case"iframe":case"object":case"embed":Pr("load",i),E=p;break;case"video":case"audio":for(var R=0;R<Vw.length;R++)Pr(Vw[R],i);E=p;break;case"source":Pr("error",i),E=p;break;case"img":case"image":case"link":Pr("error",i),Pr("load",i),E=p;break;case"details":Pr("toggle",i),E=p;break;case"input":Ao(i,p),E=Id(i,p),Pr("invalid",i);break;case"option":zn(i,p),E=p;break;case"select":nf(i,p),E=wp(i,p),Pr("invalid",i);break;case"textarea":P0(i,p),E=z0(i,p),Pr("invalid",i);break;default:E=p}switch(ky(l,E),X0e(l,i,v,E,w),l){case"input":_o(i),Ee(i,p,!1);break;case"textarea":_o(i),yk(i);break;case"option":br(i,p);break;case"select":L0(i,p);break;default:typeof E.onClick=="function"&&BE(i);break}}function ewe(i,l,p,v,w){LE(l,v);var E=null,R,F;switch(l){case"input":R=Id(i,p),F=Id(i,v),E=[];break;case"select":R=wp(i,p),F=wp(i,v),E=[];break;case"textarea":R=z0(i,p),F=z0(i,v),E=[];break;default:R=p,F=v,typeof R.onClick!="function"&&typeof F.onClick=="function"&&BE(i);break}ky(l,F);var M,j,q=null;for(M in R)if(!(F.hasOwnProperty(M)||!R.hasOwnProperty(M)||R[M]==null))if(M===pm){var he=R[M];for(j in he)he.hasOwnProperty(j)&&(q||(q={}),q[j]="")}else M===Hw||M===hm||M===OE||M===Jd||M===NW||(He.hasOwnProperty(M)?E||(E=[]):(E=E||[]).push(M,null));for(M in F){var fe=F[M],ke=R?.[M];if(!(!F.hasOwnProperty(M)||fe===ke||fe==null&&ke==null))if(M===pm)if(fe&&Object.freeze(fe),ke){for(j in ke)ke.hasOwnProperty(j)&&(!fe||!fe.hasOwnProperty(j))&&(q||(q={}),q[j]="");for(j in fe)fe.hasOwnProperty(j)&&ke[j]!==fe[j]&&(q||(q={}),q[j]=fe[j])}else q||(E||(E=[]),E.push(M,q)),q=fe;else if(M===Hw){var Ie=fe?fe[FE]:void 0,Le=ke?ke[FE]:void 0;Ie!=null&&Le!==Ie&&(E=E||[]).push(M,Ie)}else M===hm?(typeof fe=="string"||typeof fe=="number")&&(E=E||[]).push(M,""+fe):M===OE||M===Jd||(He.hasOwnProperty(M)?(fe!=null&&(typeof fe!="function"&&ME(M,fe),M==="onScroll"&&Pr("scroll",i)),!E&&ke!==fe&&(E=[])):(E=E||[]).push(M,fe))}return q&&(q_(q,F[pm]),(E=E||[]).push(pm,q)),E}function twe(i,l,p,v,w){p==="input"&&w.type==="radio"&&w.name!=null&&z(i,w);var E=Yu(p,v),R=Yu(p,w);switch(Y0e(i,l,E,R),p){case"input":ee(i,w);break;case"textarea":gk(i,w);break;case"select":Sy(i,w);break}}function nwe(i){{var l=i.toLowerCase();return Ep.hasOwnProperty(l)&&Ep[l]||null}}function rwe(i,l,p,v,w,E,R){var F,M;switch(F=Yu(l,p),LE(l,p),l){case"dialog":Pr("cancel",i),Pr("close",i);break;case"iframe":case"object":case"embed":Pr("load",i);break;case"video":case"audio":for(var j=0;j<Vw.length;j++)Pr(Vw[j],i);break;case"source":Pr("error",i);break;case"img":case"image":case"link":Pr("error",i),Pr("load",i);break;case"details":Pr("toggle",i);break;case"input":Ao(i,p),Pr("invalid",i);break;case"option":zn(i,p);break;case"select":nf(i,p),Pr("invalid",i);break;case"textarea":P0(i,p),Pr("invalid",i);break}ky(l,p);{M=new Set;for(var q=i.attributes,he=0;he<q.length;he++){var fe=q[he].name.toLowerCase();switch(fe){case"value":break;case"checked":break;case"selected":break;default:M.add(q[he].name)}}}var ke=null;for(var Ie in p)if(p.hasOwnProperty(Ie)){var Le=p[Ie];if(Ie===hm)typeof Le=="string"?i.textContent!==Le&&(p[Jd]!==!0&&PE(i.textContent,Le,E,R),ke=[hm,Le]):typeof Le=="number"&&i.textContent!==""+Le&&(p[Jd]!==!0&&PE(i.textContent,Le,E,R),ke=[hm,""+Le]);else if(He.hasOwnProperty(Ie))Le!=null&&(typeof Le!="function"&&ME(Ie,Le),Ie==="onScroll"&&Pr("scroll",i));else if(R&&typeof F=="boolean"){var dt=void 0,Wt=nr(Ie);if(p[Jd]!==!0){if(!(Ie===OE||Ie===Jd||Ie==="value"||Ie==="checked"||Ie==="selected")){if(Ie===Hw){var _t=i.innerHTML,Ln=Le?Le[FE]:void 0;if(Ln!=null){var $n=RW(i,Ln);$n!==_t&&jw(Ie,_t,$n)}}else if(Ie===pm){if(M.delete(Ie),IW){var Se=j_(Le);dt=i.getAttribute("style"),Se!==dt&&jw(Ie,dt,Se)}}else if(F&&!K)M.delete(Ie.toLowerCase()),dt=Xc(i,Ie,Le),Le!==dt&&jw(Ie,dt,Le);else if(!mr(Ie,Wt,F)&&!ir(Ie,Le,Wt,F)){var Me=!1;if(Wt!==null)M.delete(Wt.attributeName),dt=Vu(i,Ie,Le,Wt);else{var Ce=v;if(Ce===Jl&&(Ce=U0(l)),Ce===Jl)M.delete(Ie.toLowerCase());else{var Qe=nwe(Ie);Qe!==null&&Qe!==Ie&&(Me=!0,M.delete(Qe)),M.delete(Ie)}dt=Xc(i,Ie,Le)}var xt=K;!xt&&Le!==dt&&!Me&&jw(Ie,dt,Le)}}}}}switch(R&&M.size>0&&p[Jd]!==!0&&$W(M),l){case"input":_o(i),Ee(i,p,!0);break;case"textarea":_o(i),yk(i);break;case"select":case"option":break;default:typeof p.onClick=="function"&&BE(i);break}return ke}function swe(i,l,p){var v=i.nodeValue!==l;return v}function wA(i,l){{if(uo)return;uo=!0,o("Did not expect server HTML to contain a <%s> in <%s>.",l.nodeName.toLowerCase(),i.nodeName.toLowerCase())}}function SA(i,l){{if(uo)return;uo=!0,o('Did not expect server HTML to contain the text node "%s" in <%s>.',l.nodeValue,i.nodeName.toLowerCase())}}function CA(i,l,p){{if(uo)return;uo=!0,o("Expected server HTML to contain a matching <%s> in <%s>.",l,i.nodeName.toLowerCase())}}function TA(i,l){{if(l===""||uo)return;uo=!0,o('Expected server HTML to contain a matching text node for "%s" in <%s>.',l,i.nodeName.toLowerCase())}}function awe(i,l,p){switch(l){case"input":Oe(i,p);return;case"textarea":V_(i,p);return;case"select":M0(i,p);return}}var Gw=function(){},qw=function(){};{var iwe=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],_W=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],owe=_W.concat(["button"]),lwe=["dd","dt","li","option","optgroup","p","rp","rt"],AW={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};qw=function(i,l){var p=mn({},i||AW),v={tag:l};return _W.indexOf(l)!==-1&&(p.aTagInScope=null,p.buttonTagInScope=null,p.nobrTagInScope=null),owe.indexOf(l)!==-1&&(p.pTagInButtonScope=null),iwe.indexOf(l)!==-1&&l!=="address"&&l!=="div"&&l!=="p"&&(p.listItemTagAutoclosing=null,p.dlItemTagAutoclosing=null),p.current=v,l==="form"&&(p.formTag=v),l==="a"&&(p.aTagInScope=v),l==="button"&&(p.buttonTagInScope=v),l==="nobr"&&(p.nobrTagInScope=v),l==="p"&&(p.pTagInButtonScope=v),l==="li"&&(p.listItemTagAutoclosing=v),(l==="dd"||l==="dt")&&(p.dlItemTagAutoclosing=v),p};var uwe=function(i,l){switch(l){case"select":return i==="option"||i==="optgroup"||i==="#text";case"optgroup":return i==="option"||i==="#text";case"option":return i==="#text";case"tr":return i==="th"||i==="td"||i==="style"||i==="script"||i==="template";case"tbody":case"thead":case"tfoot":return i==="tr"||i==="style"||i==="script"||i==="template";case"colgroup":return i==="col"||i==="template";case"table":return i==="caption"||i==="colgroup"||i==="tbody"||i==="tfoot"||i==="thead"||i==="style"||i==="script"||i==="template";case"head":return i==="base"||i==="basefont"||i==="bgsound"||i==="link"||i==="meta"||i==="title"||i==="noscript"||i==="noframes"||i==="style"||i==="script"||i==="template";case"html":return i==="head"||i==="body"||i==="frameset";case"frameset":return i==="frame";case"#document":return i==="html"}switch(i){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return l!=="h1"&&l!=="h2"&&l!=="h3"&&l!=="h4"&&l!=="h5"&&l!=="h6";case"rp":case"rt":return lwe.indexOf(l)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return l==null}return!0},cwe=function(i,l){switch(i){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return l.pTagInButtonScope;case"form":return l.formTag||l.pTagInButtonScope;case"li":return l.listItemTagAutoclosing;case"dd":case"dt":return l.dlItemTagAutoclosing;case"button":return l.buttonTagInScope;case"a":return l.aTagInScope;case"nobr":return l.nobrTagInScope}return null},OW={};Gw=function(i,l,p){p=p||AW;var v=p.current,w=v&&v.tag;l!=null&&(i!=null&&o("validateDOMNesting: when childText is passed, childTag should be null"),i="#text");var E=uwe(i,w)?null:v,R=E?null:cwe(i,p),F=E||R;if(F){var M=F.tag,j=!!E+"|"+i+"|"+M;if(!OW[j]){OW[j]=!0;var q=i,he="";if(i==="#text"?/\S/.test(l)?q="Text nodes":(q="Whitespace text nodes",he=" Make sure you don't have any extra whitespace between tags on each line of your source code."):q="<"+i+">",E){var fe="";M==="table"&&i==="tr"&&(fe+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),o("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",q,M,he,fe)}else o("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",q,M)}}}}var VE="suppressHydrationWarning",UE="$",WE="/$",Kw="$?",Xw="$!",fwe="style",kA=null,EA=null;function dwe(i){var l,p,v=i.nodeType;switch(v){case tu:case H0:{l=v===tu?"#document":"#fragment";var w=i.documentElement;p=w?w.namespaceURI:W0(null,"");break}default:{var E=v===is?i.parentNode:i,R=E.namespaceURI||null;l=E.tagName,p=W0(R,l);break}}{var F=l.toLowerCase(),M=qw(null,F);return{namespace:p,ancestorInfo:M}}}function hwe(i,l,p){{var v=i,w=W0(v.namespace,l),E=qw(v.ancestorInfo,l);return{namespace:w,ancestorInfo:E}}}function FEe(i){return i}function pwe(i){kA=ds(),EA=$0e();var l=null;return Cs(!1),l}function mwe(i){I0e(EA),Cs(kA),kA=null,EA=null}function gwe(i,l,p,v,w){var E;{var R=v;if(Gw(i,null,R.ancestorInfo),typeof l.children=="string"||typeof l.children=="number"){var F=""+l.children,M=qw(R.ancestorInfo,i);Gw(null,F,M)}E=R.namespace}var j=Q0e(i,l,p,E);return Zw(w,j),OA(j,l),j}function ywe(i,l){i.appendChild(l)}function vwe(i,l,p,v,w){switch(J0e(i,l,p,v),l){case"button":case"input":case"select":case"textarea":return!!p.autoFocus;case"img":return!0;default:return!1}}function bwe(i,l,p,v,w,E){{var R=E;if(typeof v.children!=typeof p.children&&(typeof v.children=="string"||typeof v.children=="number")){var F=""+v.children,M=qw(R.ancestorInfo,l);Gw(null,F,M)}}return ewe(i,l,p,v)}function NA(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}function xwe(i,l,p,v){{var w=p;Gw(null,i,w.ancestorInfo)}var E=Z0e(i,l);return Zw(v,E),E}function wwe(){var i=window.event;return i===void 0?ao:vv(i.type)}var $A=typeof setTimeout=="function"?setTimeout:void 0,Swe=typeof clearTimeout=="function"?clearTimeout:void 0,IA=-1,FW=typeof Promise=="function"?Promise:void 0,Cwe=typeof queueMicrotask=="function"?queueMicrotask:typeof FW<"u"?function(i){return FW.resolve(null).then(i).catch(Twe)}:$A;function Twe(i){setTimeout(function(){throw i})}function kwe(i,l,p,v){switch(l){case"button":case"input":case"select":case"textarea":p.autoFocus&&i.focus();return;case"img":{p.src&&(i.src=p.src);return}}}function Ewe(i,l,p,v,w,E){twe(i,l,p,v,w),OA(i,w)}function LW(i){Rd(i,"")}function Nwe(i,l,p){i.nodeValue=p}function $we(i,l){i.appendChild(l)}function Iwe(i,l){var p;i.nodeType===is?(p=i.parentNode,p.insertBefore(l,i)):(p=i,p.appendChild(l));var v=i._reactRootContainer;v==null&&p.onclick===null&&BE(p)}function Rwe(i,l,p){i.insertBefore(l,p)}function Dwe(i,l,p){i.nodeType===is?i.parentNode.insertBefore(l,p):i.insertBefore(l,p)}function _we(i,l){i.removeChild(l)}function Awe(i,l){i.nodeType===is?i.parentNode.removeChild(l):i.removeChild(l)}function RA(i,l){var p=l,v=0;do{var w=p.nextSibling;if(i.removeChild(p),w&&w.nodeType===is){var E=w.data;if(E===WE)if(v===0){i.removeChild(w),Tf(l);return}else v--;else(E===UE||E===Kw||E===Xw)&&v++}p=w}while(p);Tf(l)}function Owe(i,l){i.nodeType===is?RA(i.parentNode,l):i.nodeType===Za&&RA(i,l),Tf(i)}function Fwe(i){i=i;var l=i.style;typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"}function Lwe(i){i.nodeValue=""}function Mwe(i,l){i=i;var p=l[fwe],v=p!=null&&p.hasOwnProperty("display")?p.display:null;i.style.display=Ty("display",v)}function zwe(i,l){i.nodeValue=l}function Pwe(i){i.nodeType===Za?i.textContent="":i.nodeType===tu&&i.documentElement&&i.removeChild(i.documentElement)}function Bwe(i,l,p){return i.nodeType!==Za||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i}function Vwe(i,l){return l===""||i.nodeType!==eu?null:i}function Uwe(i){return i.nodeType!==is?null:i}function MW(i){return i.data===Kw}function DA(i){return i.data===Xw}function Wwe(i){var l=i.nextSibling&&i.nextSibling.dataset,p,v,w;return l&&(p=l.dgst,v=l.msg,w=l.stck),{message:v,digest:p,stack:w}}function Hwe(i,l){i._reactRetry=l}function HE(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===Za||l===eu)break;if(l===is){var p=i.data;if(p===UE||p===Xw||p===Kw)break;if(p===WE)return null}}return i}function Yw(i){return HE(i.nextSibling)}function jwe(i){return HE(i.firstChild)}function Gwe(i){return HE(i.firstChild)}function qwe(i){return HE(i.nextSibling)}function Kwe(i,l,p,v,w,E,R){Zw(E,i),OA(i,p);var F;{var M=w;F=M.namespace}var j=(E.mode&xn)!==zt;return rwe(i,l,p,F,v,j,R)}function Xwe(i,l,p,v){return Zw(p,i),p.mode&xn,swe(i,l)}function Ywe(i,l){Zw(l,i)}function Qwe(i){for(var l=i.nextSibling,p=0;l;){if(l.nodeType===is){var v=l.data;if(v===WE){if(p===0)return Yw(l);p--}else(v===UE||v===Xw||v===Kw)&&p++}l=l.nextSibling}return null}function zW(i){for(var l=i.previousSibling,p=0;l;){if(l.nodeType===is){var v=l.data;if(v===UE||v===Xw||v===Kw){if(p===0)return l;p--}else v===WE&&p++}l=l.previousSibling}return null}function Zwe(i){Tf(i)}function Jwe(i){Tf(i)}function e1e(i){return i!=="head"&&i!=="body"}function t1e(i,l,p,v){var w=!0;PE(l.nodeValue,p,v,w)}function n1e(i,l,p,v,w,E){if(l[VE]!==!0){var R=!0;PE(v.nodeValue,w,E,R)}}function r1e(i,l){l.nodeType===Za?wA(i,l):l.nodeType===is||SA(i,l)}function s1e(i,l){{var p=i.parentNode;p!==null&&(l.nodeType===Za?wA(p,l):l.nodeType===is||SA(p,l))}}function a1e(i,l,p,v,w){(w||l[VE]!==!0)&&(v.nodeType===Za?wA(p,v):v.nodeType===is||SA(p,v))}function i1e(i,l,p){CA(i,l)}function o1e(i,l){TA(i,l)}function l1e(i,l,p){{var v=i.parentNode;v!==null&&CA(v,l)}}function u1e(i,l){{var p=i.parentNode;p!==null&&TA(p,l)}}function c1e(i,l,p,v,w,E){(E||l[VE]!==!0)&&CA(p,v)}function f1e(i,l,p,v,w){(w||l[VE]!==!0)&&TA(p,v)}function d1e(i){o("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",i.nodeName.toLowerCase())}function h1e(i){Uw(i)}var _v=Math.random().toString(36).slice(2),Av="__reactFiber$"+_v,_A="__reactProps$"+_v,Qw="__reactContainer$"+_v,AA="__reactEvents$"+_v,p1e="__reactListeners$"+_v,m1e="__reactHandles$"+_v;function g1e(i){delete i[Av],delete i[_A],delete i[AA],delete i[p1e],delete i[m1e]}function Zw(i,l){l[Av]=i}function jE(i,l){l[Qw]=i}function PW(i){i[Qw]=null}function Jw(i){return!!i[Qw]}function mm(i){var l=i[Av];if(l)return l;for(var p=i.parentNode;p;){if(l=p[Qw]||p[Av],l){var v=l.alternate;if(l.child!==null||v!==null&&v.child!==null)for(var w=zW(i);w!==null;){var E=w[Av];if(E)return E;w=zW(w)}return l}i=p,p=i.parentNode}return null}function eh(i){var l=i[Av]||i[Qw];return l&&(l.tag===x||l.tag===S||l.tag===L||l.tag===g)?l:null}function Ov(i){if(i.tag===x||i.tag===S)return i.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function GE(i){return i[_A]||null}function OA(i,l){i[_A]=l}function y1e(i){var l=i[AA];return l===void 0&&(l=i[AA]=new Set),l}var BW={},VW=t.ReactDebugCurrentFrame;function qE(i){if(i){var l=i._owner,p=Yl(i.type,i._source,l?l.type:null);VW.setExtraStackFrame(p)}else VW.setExtraStackFrame(null)}function du(i,l,p,v,w){{var E=Function.call.bind(tn);for(var R in i)if(E(i,R)){var F=void 0;try{if(typeof i[R]!="function"){var M=Error((v||"React class")+": "+p+" type `"+R+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[R]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw M.name="Invariant Violation",M}F=i[R](l,R,v,p,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(j){F=j}F&&!(F instanceof Error)&&(qE(w),o("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",v||"React class",p,R,typeof F),qE(null)),F instanceof Error&&!(F.message in BW)&&(BW[F.message]=!0,qE(w),o("Failed %s type: %s",p,F.message),qE(null))}}}var FA=[],KE;KE=[];var Rf=-1;function th(i){return{current:i}}function ui(i,l){if(Rf<0){o("Unexpected pop.");return}l!==KE[Rf]&&o("Unexpected Fiber popped."),i.current=FA[Rf],FA[Rf]=null,KE[Rf]=null,Rf--}function ci(i,l,p){Rf++,FA[Rf]=i.current,KE[Rf]=p,i.current=l}var LA;LA={};var Bo={};Object.freeze(Bo);var Df=th(Bo),gc=th(!1),MA=Bo;function Fv(i,l,p){return p&&yc(l)?MA:Df.current}function UW(i,l,p){{var v=i.stateNode;v.__reactInternalMemoizedUnmaskedChildContext=l,v.__reactInternalMemoizedMaskedChildContext=p}}function Lv(i,l){{var p=i.type,v=p.contextTypes;if(!v)return Bo;var w=i.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===l)return w.__reactInternalMemoizedMaskedChildContext;var E={};for(var R in v)E[R]=l[R];{var F=sn(i)||"Unknown";du(v,E,"context",F)}return w&&UW(i,l,E),E}}function XE(){return gc.current}function yc(i){{var l=i.childContextTypes;return l!=null}}function YE(i){ui(gc,i),ui(Df,i)}function zA(i){ui(gc,i),ui(Df,i)}function WW(i,l,p){{if(Df.current!==Bo)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");ci(Df,l,i),ci(gc,p,i)}}function HW(i,l,p){{var v=i.stateNode,w=l.childContextTypes;if(typeof v.getChildContext!="function"){{var E=sn(i)||"Unknown";LA[E]||(LA[E]=!0,o("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",E,E))}return p}var R=v.getChildContext();for(var F in R)if(!(F in w))throw new Error((sn(i)||"Unknown")+'.getChildContext(): key "'+F+'" is not defined in childContextTypes.');{var M=sn(i)||"Unknown";du(w,R,"child context",M)}return mn({},p,R)}}function QE(i){{var l=i.stateNode,p=l&&l.__reactInternalMemoizedMergedChildContext||Bo;return MA=Df.current,ci(Df,p,i),ci(gc,gc.current,i),!0}}function jW(i,l,p){{var v=i.stateNode;if(!v)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(p){var w=HW(i,l,MA);v.__reactInternalMemoizedMergedChildContext=w,ui(gc,i),ui(Df,i),ci(Df,w,i),ci(gc,p,i)}else ui(gc,i),ci(gc,p,i)}}function v1e(i){{if(!cf(i)||i.tag!==d)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var l=i;do{switch(l.tag){case g:return l.stateNode.context;case d:{var p=l.type;if(yc(p))return l.stateNode.__reactInternalMemoizedMergedChildContext;break}}l=l.return}while(l!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var nh=0,ZE=1,_f=null,PA=!1,BA=!1;function GW(i){_f===null?_f=[i]:_f.push(i)}function b1e(i){PA=!0,GW(i)}function qW(){PA&&rh()}function rh(){if(!BA&&_f!==null){BA=!0;var i=0,l=oo();try{var p=!0,v=_f;for(fs($a);i<v.length;i++){var w=v[i];do w=w(p);while(w!==null)}_f=null,PA=!1}catch(E){throw _f!==null&&(_f=_f.slice(i+1)),nw(Op,rh),E}finally{fs(l),BA=!1}}return null}var Mv=[],zv=0,JE=null,eN=0,Tl=[],kl=0,gm=null,Af=1,Of="";function x1e(i){return vm(),(i.flags&pl)!==Mt}function w1e(i){return vm(),eN}function S1e(){var i=Of,l=Af,p=l&~C1e(l);return p.toString(32)+i}function ym(i,l){vm(),Mv[zv++]=eN,Mv[zv++]=JE,JE=i,eN=l}function KW(i,l,p){vm(),Tl[kl++]=Af,Tl[kl++]=Of,Tl[kl++]=gm,gm=i;var v=Af,w=Of,E=tN(v)-1,R=v&~(1<<E),F=p+1,M=tN(l)+E;if(M>30){var j=E-E%5,q=(1<<j)-1,he=(R&q).toString(32),fe=R>>j,ke=E-j,Ie=tN(l)+ke,Le=F<<ke,dt=Le|fe,Wt=he+w;Af=1<<Ie|dt,Of=Wt}else{var _t=F<<E,Ln=_t|R,$n=w;Af=1<<M|Ln,Of=$n}}function VA(i){vm();var l=i.return;if(l!==null){var p=1,v=0;ym(i,p),KW(i,p,v)}}function tN(i){return 32-us(i)}function C1e(i){return 1<<tN(i)-1}function UA(i){for(;i===JE;)JE=Mv[--zv],Mv[zv]=null,eN=Mv[--zv],Mv[zv]=null;for(;i===gm;)gm=Tl[--kl],Tl[kl]=null,Of=Tl[--kl],Tl[kl]=null,Af=Tl[--kl],Tl[kl]=null}function T1e(){return vm(),gm!==null?{id:Af,overflow:Of}:null}function k1e(i,l){vm(),Tl[kl++]=Af,Tl[kl++]=Of,Tl[kl++]=gm,Af=l.id,Of=l.overflow,gm=i}function vm(){Aa()||o("Expected to be hydrating. This is a bug in React. Please file an issue.")}var _a=null,El=null,hu=!1,bm=!1,sh=null;function E1e(){hu&&o("We should not be hydrating here. This is a bug in React. Please file a bug.")}function XW(){bm=!0}function N1e(){return bm}function $1e(i){var l=i.stateNode.containerInfo;return El=Gwe(l),_a=i,hu=!0,sh=null,bm=!1,!0}function I1e(i,l,p){return El=qwe(l),_a=i,hu=!0,sh=null,bm=!1,p!==null&&k1e(i,p),!0}function YW(i,l){switch(i.tag){case g:{r1e(i.stateNode.containerInfo,l);break}case x:{var p=(i.mode&xn)!==zt;a1e(i.type,i.memoizedProps,i.stateNode,l,p);break}case L:{var v=i.memoizedState;v.dehydrated!==null&&s1e(v.dehydrated,l);break}}}function QW(i,l){YW(i,l);var p=ATe();p.stateNode=l,p.return=i;var v=i.deletions;v===null?(i.deletions=[p],i.flags|=eo):v.push(p)}function WA(i,l){{if(bm)return;switch(i.tag){case g:{var p=i.stateNode.containerInfo;switch(l.tag){case x:var v=l.type;l.pendingProps,i1e(p,v);break;case S:var w=l.pendingProps;o1e(p,w);break}break}case x:{var E=i.type,R=i.memoizedProps,F=i.stateNode;switch(l.tag){case x:{var M=l.type,j=l.pendingProps,q=(i.mode&xn)!==zt;c1e(E,R,F,M,j,q);break}case S:{var he=l.pendingProps,fe=(i.mode&xn)!==zt;f1e(E,R,F,he,fe);break}}break}case L:{var ke=i.memoizedState,Ie=ke.dehydrated;if(Ie!==null)switch(l.tag){case x:var Le=l.type;l.pendingProps,l1e(Ie,Le);break;case S:var dt=l.pendingProps;u1e(Ie,dt);break}break}default:return}}}function ZW(i,l){l.flags=l.flags&~ei|Lr,WA(i,l)}function JW(i,l){switch(i.tag){case x:{var p=i.type;i.pendingProps;var v=Bwe(l,p);return v!==null?(i.stateNode=v,_a=i,El=jwe(v),!0):!1}case S:{var w=i.pendingProps,E=Vwe(l,w);return E!==null?(i.stateNode=E,_a=i,El=null,!0):!1}case L:{var R=Uwe(l);if(R!==null){var F={dehydrated:R,treeContext:T1e(),retryLane:si};i.memoizedState=F;var M=OTe(R);return M.return=i,i.child=M,_a=i,El=null,!0}return!1}default:return!1}}function HA(i){return(i.mode&xn)!==zt&&(i.flags&At)===Mt}function jA(i){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function GA(i){if(hu){var l=El;if(!l){HA(i)&&(WA(_a,i),jA()),ZW(_a,i),hu=!1,_a=i;return}var p=l;if(!JW(i,l)){HA(i)&&(WA(_a,i),jA()),l=Yw(p);var v=_a;if(!l||!JW(i,l)){ZW(_a,i),hu=!1,_a=i;return}QW(v,p)}}}function R1e(i,l,p){var v=i.stateNode,w=!bm,E=Kwe(v,i.type,i.memoizedProps,l,p,i,w);return i.updateQueue=E,E!==null}function D1e(i){var l=i.stateNode,p=i.memoizedProps,v=Xwe(l,p,i);if(v){var w=_a;if(w!==null)switch(w.tag){case g:{var E=w.stateNode.containerInfo,R=(w.mode&xn)!==zt;t1e(E,l,p,R);break}case x:{var F=w.type,M=w.memoizedProps,j=w.stateNode,q=(w.mode&xn)!==zt;n1e(F,M,j,l,p,q);break}}}return v}function _1e(i){var l=i.memoizedState,p=l!==null?l.dehydrated:null;if(!p)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");Ywe(p,i)}function A1e(i){var l=i.memoizedState,p=l!==null?l.dehydrated:null;if(!p)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return Qwe(p)}function eH(i){for(var l=i.return;l!==null&&l.tag!==x&&l.tag!==g&&l.tag!==L;)l=l.return;_a=l}function nN(i){if(i!==_a)return!1;if(!hu)return eH(i),hu=!0,!1;if(i.tag!==g&&(i.tag!==x||e1e(i.type)&&!NA(i.type,i.memoizedProps))){var l=El;if(l)if(HA(i))tH(i),jA();else for(;l;)QW(i,l),l=Yw(l)}return eH(i),i.tag===L?El=A1e(i):El=_a?Yw(i.stateNode):null,!0}function O1e(){return hu&&El!==null}function tH(i){for(var l=El;l;)YW(i,l),l=Yw(l)}function Pv(){_a=null,El=null,hu=!1,bm=!1}function nH(){sh!==null&&(Xj(sh),sh=null)}function Aa(){return hu}function qA(i){sh===null?sh=[i]:sh.push(i)}var F1e=t.ReactCurrentBatchConfig,L1e=null;function M1e(){return F1e.transition}var pu={recordUnsafeLifecycleWarnings:function(i,l){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(i,l){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var z1e=function(i){for(var l=null,p=i;p!==null;)p.mode&cr&&(l=p),p=p.return;return l},xm=function(i){var l=[];return i.forEach(function(p){l.push(p)}),l.sort().join(", ")},e1=[],t1=[],n1=[],r1=[],s1=[],a1=[],wm=new Set;pu.recordUnsafeLifecycleWarnings=function(i,l){wm.has(i.type)||(typeof l.componentWillMount=="function"&&l.componentWillMount.__suppressDeprecationWarning!==!0&&e1.push(i),i.mode&cr&&typeof l.UNSAFE_componentWillMount=="function"&&t1.push(i),typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&n1.push(i),i.mode&cr&&typeof l.UNSAFE_componentWillReceiveProps=="function"&&r1.push(i),typeof l.componentWillUpdate=="function"&&l.componentWillUpdate.__suppressDeprecationWarning!==!0&&s1.push(i),i.mode&cr&&typeof l.UNSAFE_componentWillUpdate=="function"&&a1.push(i))},pu.flushPendingUnsafeLifecycleWarnings=function(){var i=new Set;e1.length>0&&(e1.forEach(function(fe){i.add(sn(fe)||"Component"),wm.add(fe.type)}),e1=[]);var l=new Set;t1.length>0&&(t1.forEach(function(fe){l.add(sn(fe)||"Component"),wm.add(fe.type)}),t1=[]);var p=new Set;n1.length>0&&(n1.forEach(function(fe){p.add(sn(fe)||"Component"),wm.add(fe.type)}),n1=[]);var v=new Set;r1.length>0&&(r1.forEach(function(fe){v.add(sn(fe)||"Component"),wm.add(fe.type)}),r1=[]);var w=new Set;s1.length>0&&(s1.forEach(function(fe){w.add(sn(fe)||"Component"),wm.add(fe.type)}),s1=[]);var E=new Set;if(a1.length>0&&(a1.forEach(function(fe){E.add(sn(fe)||"Component"),wm.add(fe.type)}),a1=[]),l.size>0){var R=xm(l);o(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,R)}if(v.size>0){var F=xm(v);o(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,F)}if(E.size>0){var M=xm(E);o(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,M)}if(i.size>0){var j=xm(i);a(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,j)}if(p.size>0){var q=xm(p);a(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,q)}if(w.size>0){var he=xm(w);a(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,he)}};var rN=new Map,rH=new Set;pu.recordLegacyContextWarning=function(i,l){var p=z1e(i);if(p===null){o("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!rH.has(i.type)){var v=rN.get(p);(i.type.contextTypes!=null||i.type.childContextTypes!=null||l!==null&&typeof l.getChildContext=="function")&&(v===void 0&&(v=[],rN.set(p,v)),v.push(i))}},pu.flushLegacyContextWarning=function(){rN.forEach(function(i,l){if(i.length!==0){var p=i[0],v=new Set;i.forEach(function(E){v.add(sn(E)||"Component"),rH.add(E.type)});var w=xm(v);try{or(p),o(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)}finally{kr()}}})},pu.discardPendingWarnings=function(){e1=[],t1=[],n1=[],r1=[],s1=[],a1=[],rN=new Map}}var KA,XA,YA,QA,ZA,sH=function(i,l){};KA=!1,XA=!1,YA={},QA={},ZA={},sH=function(i,l){if(!(i===null||typeof i!="object")&&!(!i._store||i._store.validated||i.key!=null)){if(typeof i._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");i._store.validated=!0;var p=sn(l)||"Component";QA[p]||(QA[p]=!0,o('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function P1e(i){return i.prototype&&i.prototype.isReactComponent}function i1(i,l,p){var v=p.ref;if(v!==null&&typeof v!="function"&&typeof v!="object"){if((i.mode&cr||Z)&&!(p._owner&&p._self&&p._owner.stateNode!==p._self)&&!(p._owner&&p._owner.tag!==d)&&!(typeof p.type=="function"&&!P1e(p.type))&&p._owner){var w=sn(i)||"Component";YA[w]||(o('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',w,v),YA[w]=!0)}if(p._owner){var E=p._owner,R;if(E){var F=E;if(F.tag!==d)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");R=F.stateNode}if(!R)throw new Error("Missing owner for string ref "+v+". This error is likely caused by a bug in React. Please file an issue.");var M=R;ht(v,"ref");var j=""+v;if(l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===j)return l.ref;var q=function(he){var fe=M.refs;he===null?delete fe[j]:fe[j]=he};return q._stringRef=j,q}else{if(typeof v!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!p._owner)throw new Error("Element ref was specified as a string ("+v+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return v}function sN(i,l){var p=Object.prototype.toString.call(l);throw new Error("Objects are not valid as a React child (found: "+(p==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":p)+"). If you meant to render a collection of children, use an array instead.")}function aN(i){{var l=sn(i)||"Component";if(ZA[l])return;ZA[l]=!0,o("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function aH(i){var l=i._payload,p=i._init;return p(l)}function iH(i){function l(Se,Me){if(i){var Ce=Se.deletions;Ce===null?(Se.deletions=[Me],Se.flags|=eo):Ce.push(Me)}}function p(Se,Me){if(!i)return null;for(var Ce=Me;Ce!==null;)l(Se,Ce),Ce=Ce.sibling;return null}function v(Se,Me){for(var Ce=new Map,Qe=Me;Qe!==null;)Qe.key!==null?Ce.set(Qe.key,Qe):Ce.set(Qe.index,Qe),Qe=Qe.sibling;return Ce}function w(Se,Me){var Ce=Rm(Se,Me);return Ce.index=0,Ce.sibling=null,Ce}function E(Se,Me,Ce){if(Se.index=Ce,!i)return Se.flags|=pl,Me;var Qe=Se.alternate;if(Qe!==null){var xt=Qe.index;return xt<Me?(Se.flags|=Lr,Me):xt}else return Se.flags|=Lr,Me}function R(Se){return i&&Se.alternate===null&&(Se.flags|=Lr),Se}function F(Se,Me,Ce,Qe){if(Me===null||Me.tag!==S){var xt=qF(Ce,Se.mode,Qe);return xt.return=Se,xt}else{var gt=w(Me,Ce);return gt.return=Se,gt}}function M(Se,Me,Ce,Qe){var xt=Ce.type;if(xt===sl)return q(Se,Me,Ce.props.children,Qe,Ce.key);if(Me!==null&&(Me.elementType===xt||fG(Me,Ce)||typeof xt=="object"&&xt!==null&&xt.$$typeof===an&&aH(xt)===Me.type)){var gt=w(Me,Ce.props);return gt.ref=i1(Se,Me,Ce),gt.return=Se,gt._debugSource=Ce._source,gt._debugOwner=Ce._owner,gt}var Jt=GF(Ce,Se.mode,Qe);return Jt.ref=i1(Se,Me,Ce),Jt.return=Se,Jt}function j(Se,Me,Ce,Qe){if(Me===null||Me.tag!==y||Me.stateNode.containerInfo!==Ce.containerInfo||Me.stateNode.implementation!==Ce.implementation){var xt=KF(Ce,Se.mode,Qe);return xt.return=Se,xt}else{var gt=w(Me,Ce.children||[]);return gt.return=Se,gt}}function q(Se,Me,Ce,Qe,xt){if(Me===null||Me.tag!==k){var gt=mh(Ce,Se.mode,Qe,xt);return gt.return=Se,gt}else{var Jt=w(Me,Ce);return Jt.return=Se,Jt}}function he(Se,Me,Ce){if(typeof Me=="string"&&Me!==""||typeof Me=="number"){var Qe=qF(""+Me,Se.mode,Ce);return Qe.return=Se,Qe}if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case Ta:{var xt=GF(Me,Se.mode,Ce);return xt.ref=i1(Se,null,Me),xt.return=Se,xt}case Hs:{var gt=KF(Me,Se.mode,Ce);return gt.return=Se,gt}case an:{var Jt=Me._payload,ln=Me._init;return he(Se,ln(Jt),Ce)}}if(vn(Me)||dn(Me)){var dr=mh(Me,Se.mode,Ce,null);return dr.return=Se,dr}sN(Se,Me)}return typeof Me=="function"&&aN(Se),null}function fe(Se,Me,Ce,Qe){var xt=Me!==null?Me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return xt!==null?null:F(Se,Me,""+Ce,Qe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case Ta:return Ce.key===xt?M(Se,Me,Ce,Qe):null;case Hs:return Ce.key===xt?j(Se,Me,Ce,Qe):null;case an:{var gt=Ce._payload,Jt=Ce._init;return fe(Se,Me,Jt(gt),Qe)}}if(vn(Ce)||dn(Ce))return xt!==null?null:q(Se,Me,Ce,Qe,null);sN(Se,Ce)}return typeof Ce=="function"&&aN(Se),null}function ke(Se,Me,Ce,Qe,xt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"){var gt=Se.get(Ce)||null;return F(Me,gt,""+Qe,xt)}if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case Ta:{var Jt=Se.get(Qe.key===null?Ce:Qe.key)||null;return M(Me,Jt,Qe,xt)}case Hs:{var ln=Se.get(Qe.key===null?Ce:Qe.key)||null;return j(Me,ln,Qe,xt)}case an:var dr=Qe._payload,Yn=Qe._init;return ke(Se,Me,Ce,Yn(dr),xt)}if(vn(Qe)||dn(Qe)){var Ts=Se.get(Ce)||null;return q(Me,Ts,Qe,xt,null)}sN(Me,Qe)}return typeof Qe=="function"&&aN(Me),null}function Ie(Se,Me,Ce){{if(typeof Se!="object"||Se===null)return Me;switch(Se.$$typeof){case Ta:case Hs:sH(Se,Ce);var Qe=Se.key;if(typeof Qe!="string")break;if(Me===null){Me=new Set,Me.add(Qe);break}if(!Me.has(Qe)){Me.add(Qe);break}o("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",Qe);break;case an:var xt=Se._payload,gt=Se._init;Ie(gt(xt),Me,Ce);break}}return Me}function Le(Se,Me,Ce,Qe){for(var xt=null,gt=0;gt<Ce.length;gt++){var Jt=Ce[gt];xt=Ie(Jt,xt,Se)}for(var ln=null,dr=null,Yn=Me,Ts=0,Qn=0,ps=null;Yn!==null&&Qn<Ce.length;Qn++){Yn.index>Qn?(ps=Yn,Yn=null):ps=Yn.sibling;var di=fe(Se,Yn,Ce[Qn],Qe);if(di===null){Yn===null&&(Yn=ps);break}i&&Yn&&di.alternate===null&&l(Se,Yn),Ts=E(di,Ts,Qn),dr===null?ln=di:dr.sibling=di,dr=di,Yn=ps}if(Qn===Ce.length){if(p(Se,Yn),Aa()){var Ba=Qn;ym(Se,Ba)}return ln}if(Yn===null){for(;Qn<Ce.length;Qn++){var Uo=he(Se,Ce[Qn],Qe);Uo!==null&&(Ts=E(Uo,Ts,Qn),dr===null?ln=Uo:dr.sibling=Uo,dr=Uo)}if(Aa()){var Ai=Qn;ym(Se,Ai)}return ln}for(var Oi=v(Se,Yn);Qn<Ce.length;Qn++){var hi=ke(Oi,Se,Qn,Ce[Qn],Qe);hi!==null&&(i&&hi.alternate!==null&&Oi.delete(hi.key===null?Qn:hi.key),Ts=E(hi,Ts,Qn),dr===null?ln=hi:dr.sibling=hi,dr=hi)}if(i&&Oi.forEach(function(sb){return l(Se,sb)}),Aa()){var Vf=Qn;ym(Se,Vf)}return ln}function dt(Se,Me,Ce,Qe){var xt=dn(Ce);if(typeof xt!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&Ce[Symbol.toStringTag]==="Generator"&&(XA||o("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),XA=!0),Ce.entries===xt&&(KA||o("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),KA=!0);var gt=xt.call(Ce);if(gt)for(var Jt=null,ln=gt.next();!ln.done;ln=gt.next()){var dr=ln.value;Jt=Ie(dr,Jt,Se)}}var Yn=xt.call(Ce);if(Yn==null)throw new Error("An iterable object provided no iterator.");for(var Ts=null,Qn=null,ps=Me,di=0,Ba=0,Uo=null,Ai=Yn.next();ps!==null&&!Ai.done;Ba++,Ai=Yn.next()){ps.index>Ba?(Uo=ps,ps=null):Uo=ps.sibling;var Oi=fe(Se,ps,Ai.value,Qe);if(Oi===null){ps===null&&(ps=Uo);break}i&&ps&&Oi.alternate===null&&l(Se,ps),di=E(Oi,di,Ba),Qn===null?Ts=Oi:Qn.sibling=Oi,Qn=Oi,ps=Uo}if(Ai.done){if(p(Se,ps),Aa()){var hi=Ba;ym(Se,hi)}return Ts}if(ps===null){for(;!Ai.done;Ba++,Ai=Yn.next()){var Vf=he(Se,Ai.value,Qe);Vf!==null&&(di=E(Vf,di,Ba),Qn===null?Ts=Vf:Qn.sibling=Vf,Qn=Vf)}if(Aa()){var sb=Ba;ym(Se,sb)}return Ts}for(var z1=v(Se,ps);!Ai.done;Ba++,Ai=Yn.next()){var kc=ke(z1,Se,Ba,Ai.value,Qe);kc!==null&&(i&&kc.alternate!==null&&z1.delete(kc.key===null?Ba:kc.key),di=E(kc,di,Ba),Qn===null?Ts=kc:Qn.sibling=kc,Qn=kc)}if(i&&z1.forEach(function(fke){return l(Se,fke)}),Aa()){var cke=Ba;ym(Se,cke)}return Ts}function Wt(Se,Me,Ce,Qe){if(Me!==null&&Me.tag===S){p(Se,Me.sibling);var xt=w(Me,Ce);return xt.return=Se,xt}p(Se,Me);var gt=qF(Ce,Se.mode,Qe);return gt.return=Se,gt}function _t(Se,Me,Ce,Qe){for(var xt=Ce.key,gt=Me;gt!==null;){if(gt.key===xt){var Jt=Ce.type;if(Jt===sl){if(gt.tag===k){p(Se,gt.sibling);var ln=w(gt,Ce.props.children);return ln.return=Se,ln._debugSource=Ce._source,ln._debugOwner=Ce._owner,ln}}else if(gt.elementType===Jt||fG(gt,Ce)||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===an&&aH(Jt)===gt.type){p(Se,gt.sibling);var dr=w(gt,Ce.props);return dr.ref=i1(Se,gt,Ce),dr.return=Se,dr._debugSource=Ce._source,dr._debugOwner=Ce._owner,dr}p(Se,gt);break}else l(Se,gt);gt=gt.sibling}if(Ce.type===sl){var Yn=mh(Ce.props.children,Se.mode,Qe,Ce.key);return Yn.return=Se,Yn}else{var Ts=GF(Ce,Se.mode,Qe);return Ts.ref=i1(Se,Me,Ce),Ts.return=Se,Ts}}function Ln(Se,Me,Ce,Qe){for(var xt=Ce.key,gt=Me;gt!==null;){if(gt.key===xt)if(gt.tag===y&&gt.stateNode.containerInfo===Ce.containerInfo&&gt.stateNode.implementation===Ce.implementation){p(Se,gt.sibling);var Jt=w(gt,Ce.children||[]);return Jt.return=Se,Jt}else{p(Se,gt);break}else l(Se,gt);gt=gt.sibling}var ln=KF(Ce,Se.mode,Qe);return ln.return=Se,ln}function $n(Se,Me,Ce,Qe){var xt=typeof Ce=="object"&&Ce!==null&&Ce.type===sl&&Ce.key===null;if(xt&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case Ta:return R(_t(Se,Me,Ce,Qe));case Hs:return R(Ln(Se,Me,Ce,Qe));case an:var gt=Ce._payload,Jt=Ce._init;return $n(Se,Me,Jt(gt),Qe)}if(vn(Ce))return Le(Se,Me,Ce,Qe);if(dn(Ce))return dt(Se,Me,Ce,Qe);sN(Se,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?R(Wt(Se,Me,""+Ce,Qe)):(typeof Ce=="function"&&aN(Se),p(Se,Me))}return $n}var Bv=iH(!0),oH=iH(!1);function B1e(i,l){if(i!==null&&l.child!==i.child)throw new Error("Resuming work not yet implemented.");if(l.child!==null){var p=l.child,v=Rm(p,p.pendingProps);for(l.child=v,v.return=l;p.sibling!==null;)p=p.sibling,v=v.sibling=Rm(p,p.pendingProps),v.return=l;v.sibling=null}}function V1e(i,l){for(var p=i.child;p!==null;)$Te(p,l),p=p.sibling}var JA=th(null),eO;eO={};var iN=null,Vv=null,tO=null,oN=!1;function lN(){iN=null,Vv=null,tO=null,oN=!1}function lH(){oN=!0}function uH(){oN=!1}function cH(i,l,p){ci(JA,l._currentValue,i),l._currentValue=p,l._currentRenderer!==void 0&&l._currentRenderer!==null&&l._currentRenderer!==eO&&o("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),l._currentRenderer=eO}function nO(i,l){var p=JA.current;ui(JA,l),i._currentValue=p}function rO(i,l,p){for(var v=i;v!==null;){var w=v.alternate;if(Cf(v.childLanes,l)?w!==null&&!Cf(w.childLanes,l)&&(w.childLanes=pn(w.childLanes,l)):(v.childLanes=pn(v.childLanes,l),w!==null&&(w.childLanes=pn(w.childLanes,l))),v===p)break;v=v.return}v!==p&&o("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function U1e(i,l,p){W1e(i,l,p)}function W1e(i,l,p){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var w=void 0,E=v.dependencies;if(E!==null){w=v.child;for(var R=E.firstContext;R!==null;){if(R.context===l){if(v.tag===d){var F=Kp(p),M=Ff(gr,F);M.tag=cN;var j=v.updateQueue;if(j!==null){var q=j.shared,he=q.pending;he===null?M.next=M:(M.next=he.next,he.next=M),q.pending=M}}v.lanes=pn(v.lanes,p);var fe=v.alternate;fe!==null&&(fe.lanes=pn(fe.lanes,p)),rO(v.return,p,i),E.lanes=pn(E.lanes,p);break}R=R.next}}else if(v.tag===$)w=v.type===i.type?null:v.child;else if(v.tag===X){var ke=v.return;if(ke===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");ke.lanes=pn(ke.lanes,p);var Ie=ke.alternate;Ie!==null&&(Ie.lanes=pn(Ie.lanes,p)),rO(ke,p,i),w=v.sibling}else w=v.child;if(w!==null)w.return=v;else for(w=v;w!==null;){if(w===i){w=null;break}var Le=w.sibling;if(Le!==null){Le.return=w.return,w=Le;break}w=w.return}v=w}}function Uv(i,l){iN=i,Vv=null,tO=null;var p=i.dependencies;if(p!==null){var v=p.firstContext;v!==null&&(ai(p.lanes,l)&&w1(),p.firstContext=null)}}function Fs(i){oN&&o("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var l=i._currentValue;if(tO!==i){var p={context:i,memoizedValue:l,next:null};if(Vv===null){if(iN===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Vv=p,iN.dependencies={lanes:We,firstContext:p}}else Vv=Vv.next=p}return l}var Sm=null;function sO(i){Sm===null?Sm=[i]:Sm.push(i)}function H1e(){if(Sm!==null){for(var i=0;i<Sm.length;i++){var l=Sm[i],p=l.interleaved;if(p!==null){l.interleaved=null;var v=p.next,w=l.pending;if(w!==null){var E=w.next;w.next=v,p.next=E}l.pending=p}}Sm=null}}function fH(i,l,p,v){var w=l.interleaved;return w===null?(p.next=p,sO(l)):(p.next=w.next,w.next=p),l.interleaved=p,uN(i,v)}function j1e(i,l,p,v){var w=l.interleaved;w===null?(p.next=p,sO(l)):(p.next=w.next,w.next=p),l.interleaved=p}function G1e(i,l,p,v){var w=l.interleaved;return w===null?(p.next=p,sO(l)):(p.next=w.next,w.next=p),l.interleaved=p,uN(i,v)}function co(i,l){return uN(i,l)}var q1e=uN;function uN(i,l){i.lanes=pn(i.lanes,l);var p=i.alternate;p!==null&&(p.lanes=pn(p.lanes,l)),p===null&&(i.flags&(Lr|ei))!==Mt&&oG(i);for(var v=i,w=i.return;w!==null;)w.childLanes=pn(w.childLanes,l),p=w.alternate,p!==null?p.childLanes=pn(p.childLanes,l):(w.flags&(Lr|ei))!==Mt&&oG(i),v=w,w=w.return;if(v.tag===g){var E=v.stateNode;return E}else return null}var dH=0,hH=1,cN=2,aO=3,fN=!1,iO,dN;iO=!1,dN=null;function oO(i){var l={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:We},effects:null};i.updateQueue=l}function pH(i,l){var p=l.updateQueue,v=i.updateQueue;if(p===v){var w={baseState:v.baseState,firstBaseUpdate:v.firstBaseUpdate,lastBaseUpdate:v.lastBaseUpdate,shared:v.shared,effects:v.effects};l.updateQueue=w}}function Ff(i,l){var p={eventTime:i,lane:l,tag:dH,payload:null,callback:null,next:null};return p}function ah(i,l,p){var v=i.updateQueue;if(v===null)return null;var w=v.shared;if(dN===w&&!iO&&(o("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),iO=!0),jCe()){var E=w.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),w.pending=l,q1e(i,p)}else return G1e(i,w,l,p)}function hN(i,l,p){var v=l.updateQueue;if(v!==null){var w=v.shared;if(bw(p)){var E=w.lanes;E=ww(E,i.pendingLanes);var R=pn(E,p);w.lanes=R,pv(i,R)}}}function lO(i,l){var p=i.updateQueue,v=i.alternate;if(v!==null){var w=v.updateQueue;if(p===w){var E=null,R=null,F=p.firstBaseUpdate;if(F!==null){var M=F;do{var j={eventTime:M.eventTime,lane:M.lane,tag:M.tag,payload:M.payload,callback:M.callback,next:null};R===null?E=R=j:(R.next=j,R=j),M=M.next}while(M!==null);R===null?E=R=l:(R.next=l,R=l)}else E=R=l;p={baseState:w.baseState,firstBaseUpdate:E,lastBaseUpdate:R,shared:w.shared,effects:w.effects},i.updateQueue=p;return}}var q=p.lastBaseUpdate;q===null?p.firstBaseUpdate=l:q.next=l,p.lastBaseUpdate=l}function K1e(i,l,p,v,w,E){switch(p.tag){case hH:{var R=p.payload;if(typeof R=="function"){lH();var F=R.call(E,v,w);{if(i.mode&cr){Mr(!0);try{R.call(E,v,w)}finally{Mr(!1)}}uH()}return F}return R}case aO:i.flags=i.flags&~Ds|At;case dH:{var M=p.payload,j;if(typeof M=="function"){lH(),j=M.call(E,v,w);{if(i.mode&cr){Mr(!0);try{M.call(E,v,w)}finally{Mr(!1)}}uH()}}else j=M;return j==null?v:mn({},v,j)}case cN:return fN=!0,v}return v}function pN(i,l,p,v){var w=i.updateQueue;fN=!1,dN=w.shared;var E=w.firstBaseUpdate,R=w.lastBaseUpdate,F=w.shared.pending;if(F!==null){w.shared.pending=null;var M=F,j=M.next;M.next=null,R===null?E=j:R.next=j,R=M;var q=i.alternate;if(q!==null){var he=q.updateQueue,fe=he.lastBaseUpdate;fe!==R&&(fe===null?he.firstBaseUpdate=j:fe.next=j,he.lastBaseUpdate=M)}}if(E!==null){var ke=w.baseState,Ie=We,Le=null,dt=null,Wt=null,_t=E;do{var Ln=_t.lane,$n=_t.eventTime;if(Cf(v,Ln)){if(Wt!==null){var Me={eventTime:$n,lane:Wn,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null};Wt=Wt.next=Me}ke=K1e(i,w,_t,ke,l,p);var Ce=_t.callback;if(Ce!==null&&_t.lane!==Wn){i.flags|=xr;var Qe=w.effects;Qe===null?w.effects=[_t]:Qe.push(_t)}}else{var Se={eventTime:$n,lane:Ln,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null};Wt===null?(dt=Wt=Se,Le=ke):Wt=Wt.next=Se,Ie=pn(Ie,Ln)}if(_t=_t.next,_t===null){if(F=w.shared.pending,F===null)break;var xt=F,gt=xt.next;xt.next=null,_t=gt,w.lastBaseUpdate=xt,w.shared.pending=null}}while(!0);Wt===null&&(Le=ke),w.baseState=Le,w.firstBaseUpdate=dt,w.lastBaseUpdate=Wt;var Jt=w.shared.interleaved;if(Jt!==null){var ln=Jt;do Ie=pn(Ie,ln.lane),ln=ln.next;while(ln!==Jt)}else E===null&&(w.shared.lanes=We);A1(Ie),i.lanes=Ie,i.memoizedState=ke}dN=null}function X1e(i,l){if(typeof i!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+i));i.call(l)}function mH(){fN=!1}function mN(){return fN}function gH(i,l,p){var v=l.effects;if(l.effects=null,v!==null)for(var w=0;w<v.length;w++){var E=v[w],R=E.callback;R!==null&&(E.callback=null,X1e(R,p))}}var o1={},ih=th(o1),l1=th(o1),gN=th(o1);function yN(i){if(i===o1)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return i}function yH(){var i=yN(gN.current);return i}function uO(i,l){ci(gN,l,i),ci(l1,i,i),ci(ih,o1,i);var p=dwe(l);ui(ih,i),ci(ih,p,i)}function Wv(i){ui(ih,i),ui(l1,i),ui(gN,i)}function cO(){var i=yN(ih.current);return i}function vH(i){yN(gN.current);var l=yN(ih.current),p=hwe(l,i.type);l!==p&&(ci(l1,i,i),ci(ih,p,i))}function fO(i){l1.current===i&&(ui(ih,i),ui(l1,i))}var Y1e=0,bH=1,xH=1,u1=2,mu=th(Y1e);function dO(i,l){return(i&l)!==0}function Hv(i){return i&bH}function hO(i,l){return i&bH|l}function Q1e(i,l){return i|l}function oh(i,l){ci(mu,l,i)}function jv(i){ui(mu,i)}function Z1e(i,l){var p=i.memoizedState;return p!==null?p.dehydrated!==null:(i.memoizedProps,!0)}function vN(i){for(var l=i;l!==null;){if(l.tag===L){var p=l.memoizedState;if(p!==null){var v=p.dehydrated;if(v===null||MW(v)||DA(v))return l}}else if(l.tag===re&&l.memoizedProps.revealOrder!==void 0){var w=(l.flags&At)!==Mt;if(w)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)return null;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var fo=0,Qs=1,vc=2,Zs=4,Oa=8,pO=[];function mO(){for(var i=0;i<pO.length;i++){var l=pO[i];l._workInProgressVersionPrimary=null}pO.length=0}function J1e(i,l){var p=l._getVersion,v=p(l._source);i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,v]:i.mutableSourceEagerHydrationData.push(l,v)}var vt=t.ReactCurrentDispatcher,c1=t.ReactCurrentBatchConfig,gO,Gv;gO=new Set;var Cm=We,fr=null,Js=null,ea=null,bN=!1,f1=!1,d1=0,eSe=0,tSe=25,ze=null,Nl=null,lh=-1,yO=!1;function er(){{var i=ze;Nl===null?Nl=[i]:Nl.push(i)}}function ot(){{var i=ze;Nl!==null&&(lh++,Nl[lh]!==i&&nSe(i))}}function qv(i){i!=null&&!vn(i)&&o("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",ze,typeof i)}function nSe(i){{var l=sn(fr);if(!gO.has(l)&&(gO.add(l),Nl!==null)){for(var p="",v=30,w=0;w<=lh;w++){for(var E=Nl[w],R=w===lh?i:E,F=w+1+". "+E;F.length<v;)F+=" ";F+=R+`
`,p+=F}o(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,l,p)}}}function fi(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function vO(i,l){if(yO)return!1;if(l===null)return o("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",ze),!1;i.length!==l.length&&o(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,ze,"["+l.join(", ")+"]","["+i.join(", ")+"]");for(var p=0;p<l.length&&p<i.length;p++)if(!qe(i[p],l[p]))return!1;return!0}function Kv(i,l,p,v,w,E){Cm=E,fr=l,Nl=i!==null?i._debugHookTypes:null,lh=-1,yO=i!==null&&i.type!==l.type,l.memoizedState=null,l.updateQueue=null,l.lanes=We,i!==null&&i.memoizedState!==null?vt.current=UH:Nl!==null?vt.current=VH:vt.current=BH;var R=p(v,w);if(f1){var F=0;do{if(f1=!1,d1=0,F>=tSe)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");F+=1,yO=!1,Js=null,ea=null,l.updateQueue=null,lh=-1,vt.current=WH,R=p(v,w)}while(f1)}vt.current=_N,l._debugHookTypes=Nl;var M=Js!==null&&Js.next!==null;if(Cm=We,fr=null,Js=null,ea=null,ze=null,Nl=null,lh=-1,i!==null&&(i.flags&ls)!==(l.flags&ls)&&(i.mode&xn)!==zt&&o("Internal React error: Expected static flag was missing. Please notify the React team."),bN=!1,M)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return R}function Xv(){var i=d1!==0;return d1=0,i}function wH(i,l,p){l.updateQueue=i.updateQueue,(l.mode&Kn)!==zt?l.flags&=-50333701:l.flags&=-2053,i.lanes=Xp(i.lanes,p)}function SH(){if(vt.current=_N,bN){for(var i=fr.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}bN=!1}Cm=We,fr=null,Js=null,ea=null,Nl=null,lh=-1,ze=null,FH=!1,f1=!1,d1=0}function bc(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ea===null?fr.memoizedState=ea=i:ea=ea.next=i,ea}function $l(){var i;if(Js===null){var l=fr.alternate;l!==null?i=l.memoizedState:i=null}else i=Js.next;var p;if(ea===null?p=fr.memoizedState:p=ea.next,p!==null)ea=p,p=ea.next,Js=i;else{if(i===null)throw new Error("Rendered more hooks than during the previous render.");Js=i;var v={memoizedState:Js.memoizedState,baseState:Js.baseState,baseQueue:Js.baseQueue,queue:Js.queue,next:null};ea===null?fr.memoizedState=ea=v:ea=ea.next=v}return ea}function CH(){return{lastEffect:null,stores:null}}function bO(i,l){return typeof l=="function"?l(i):l}function xO(i,l,p){var v=bc(),w;p!==void 0?w=p(l):w=l,v.memoizedState=v.baseState=w;var E={pending:null,interleaved:null,lanes:We,dispatch:null,lastRenderedReducer:i,lastRenderedState:w};v.queue=E;var R=E.dispatch=iSe.bind(null,fr,E);return[v.memoizedState,R]}function wO(i,l,p){var v=$l(),w=v.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=i;var E=Js,R=E.baseQueue,F=w.pending;if(F!==null){if(R!==null){var M=R.next,j=F.next;R.next=j,F.next=M}E.baseQueue!==R&&o("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),E.baseQueue=R=F,w.pending=null}if(R!==null){var q=R.next,he=E.baseState,fe=null,ke=null,Ie=null,Le=q;do{var dt=Le.lane;if(Cf(Cm,dt)){if(Ie!==null){var _t={lane:Wn,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};Ie=Ie.next=_t}if(Le.hasEagerState)he=Le.eagerState;else{var Ln=Le.action;he=i(he,Ln)}}else{var Wt={lane:dt,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null};Ie===null?(ke=Ie=Wt,fe=he):Ie=Ie.next=Wt,fr.lanes=pn(fr.lanes,dt),A1(dt)}Le=Le.next}while(Le!==null&&Le!==q);Ie===null?fe=he:Ie.next=ke,qe(he,v.memoizedState)||w1(),v.memoizedState=he,v.baseState=fe,v.baseQueue=Ie,w.lastRenderedState=he}var $n=w.interleaved;if($n!==null){var Se=$n;do{var Me=Se.lane;fr.lanes=pn(fr.lanes,Me),A1(Me),Se=Se.next}while(Se!==$n)}else R===null&&(w.lanes=We);var Ce=w.dispatch;return[v.memoizedState,Ce]}function SO(i,l,p){var v=$l(),w=v.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=i;var E=w.dispatch,R=w.pending,F=v.memoizedState;if(R!==null){w.pending=null;var M=R.next,j=M;do{var q=j.action;F=i(F,q),j=j.next}while(j!==M);qe(F,v.memoizedState)||w1(),v.memoizedState=F,v.baseQueue===null&&(v.baseState=F),w.lastRenderedState=F}return[F,E]}function LEe(i,l,p){}function MEe(i,l,p){}function CO(i,l,p){var v=fr,w=bc(),E,R=Aa();if(R){if(p===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");E=p(),Gv||E!==p()&&(o("The result of getServerSnapshot should be cached to avoid an infinite loop"),Gv=!0)}else{if(E=l(),!Gv){var F=l();qe(E,F)||(o("The result of getSnapshot should be cached to avoid an infinite loop"),Gv=!0)}var M=QN();if(M===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");dv(M,Cm)||TH(v,l,E)}w.memoizedState=E;var j={value:E,getSnapshot:l};return w.queue=j,TN(EH.bind(null,v,j,i),[i]),v.flags|=Ja,h1(Qs|Oa,kH.bind(null,v,j,E,l),void 0,null),E}function xN(i,l,p){var v=fr,w=$l(),E=l();if(!Gv){var R=l();qe(E,R)||(o("The result of getSnapshot should be cached to avoid an infinite loop"),Gv=!0)}var F=w.memoizedState,M=!qe(F,E);M&&(w.memoizedState=E,w1());var j=w.queue;if(m1(EH.bind(null,v,j,i),[i]),j.getSnapshot!==l||M||ea!==null&&ea.memoizedState.tag&Qs){v.flags|=Ja,h1(Qs|Oa,kH.bind(null,v,j,E,l),void 0,null);var q=QN();if(q===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");dv(q,Cm)||TH(v,l,E)}return E}function TH(i,l,p){i.flags|=Pd;var v={getSnapshot:l,value:p},w=fr.updateQueue;if(w===null)w=CH(),fr.updateQueue=w,w.stores=[v];else{var E=w.stores;E===null?w.stores=[v]:E.push(v)}}function kH(i,l,p,v){l.value=p,l.getSnapshot=v,NH(l)&&$H(i)}function EH(i,l,p){var v=function(){NH(l)&&$H(i)};return p(v)}function NH(i){var l=i.getSnapshot,p=i.value;try{var v=l();return!qe(p,v)}catch{return!0}}function $H(i){var l=co(i,Qt);l!==null&&sa(l,i,Qt,gr)}function wN(i){var l=bc();typeof i=="function"&&(i=i()),l.memoizedState=l.baseState=i;var p={pending:null,interleaved:null,lanes:We,dispatch:null,lastRenderedReducer:bO,lastRenderedState:i};l.queue=p;var v=p.dispatch=oSe.bind(null,fr,p);return[l.memoizedState,v]}function TO(i){return wO(bO)}function kO(i){return SO(bO)}function h1(i,l,p,v){var w={tag:i,create:l,destroy:p,deps:v,next:null},E=fr.updateQueue;if(E===null)E=CH(),fr.updateQueue=E,E.lastEffect=w.next=w;else{var R=E.lastEffect;if(R===null)E.lastEffect=w.next=w;else{var F=R.next;R.next=w,w.next=F,E.lastEffect=w}}return w}function EO(i){var l=bc();{var p={current:i};return l.memoizedState=p,p}}function SN(i){var l=$l();return l.memoizedState}function p1(i,l,p,v){var w=bc(),E=v===void 0?null:v;fr.flags|=i,w.memoizedState=h1(Qs|l,p,void 0,E)}function CN(i,l,p,v){var w=$l(),E=v===void 0?null:v,R=void 0;if(Js!==null){var F=Js.memoizedState;if(R=F.destroy,E!==null){var M=F.deps;if(vO(E,M)){w.memoizedState=h1(l,p,R,E);return}}}fr.flags|=i,w.memoizedState=h1(Qs|l,p,R,E)}function TN(i,l){return(fr.mode&Kn)!==zt?p1(ml|Ja|Py,Oa,i,l):p1(Ja|Py,Oa,i,l)}function m1(i,l){return CN(Ja,Oa,i,l)}function NO(i,l){return p1(An,vc,i,l)}function kN(i,l){return CN(An,vc,i,l)}function $O(i,l){var p=An;return p|=ru,(fr.mode&Kn)!==zt&&(p|=ec),p1(p,Zs,i,l)}function EN(i,l){return CN(An,Zs,i,l)}function IH(i,l){if(typeof l=="function"){var p=l,v=i();return p(v),function(){p(null)}}else if(l!=null){var w=l;w.hasOwnProperty("current")||o("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(w).join(", ")+"}");var E=i();return w.current=E,function(){w.current=null}}}function IO(i,l,p){typeof l!="function"&&o("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",l!==null?typeof l:"null");var v=p!=null?p.concat([i]):null,w=An;return w|=ru,(fr.mode&Kn)!==zt&&(w|=ec),p1(w,Zs,IH.bind(null,l,i),v)}function NN(i,l,p){typeof l!="function"&&o("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",l!==null?typeof l:"null");var v=p!=null?p.concat([i]):null;return CN(An,Zs,IH.bind(null,l,i),v)}function rSe(i,l){}var $N=rSe;function RO(i,l){var p=bc(),v=l===void 0?null:l;return p.memoizedState=[i,v],i}function IN(i,l){var p=$l(),v=l===void 0?null:l,w=p.memoizedState;if(w!==null&&v!==null){var E=w[1];if(vO(v,E))return w[0]}return p.memoizedState=[i,v],i}function DO(i,l){var p=bc(),v=l===void 0?null:l,w=i();return p.memoizedState=[w,v],w}function RN(i,l){var p=$l(),v=l===void 0?null:l,w=p.memoizedState;if(w!==null&&v!==null){var E=w[1];if(vO(v,E))return w[0]}var R=i();return p.memoizedState=[R,v],R}function _O(i){var l=bc();return l.memoizedState=i,i}function RH(i){var l=$l(),p=Js,v=p.memoizedState;return _H(l,v,i)}function DH(i){var l=$l();if(Js===null)return l.memoizedState=i,i;var p=Js.memoizedState;return _H(l,p,i)}function _H(i,l,p){var v=!yw(Cm);if(v){if(!qe(p,l)){var w=xw();fr.lanes=pn(fr.lanes,w),A1(w),i.baseState=!0}return l}else return i.baseState&&(i.baseState=!1,w1()),i.memoizedState=p,p}function sSe(i,l,p){var v=oo();fs(oE(v,bl)),i(!0);var w=c1.transition;c1.transition={};var E=c1.transition;c1.transition._updatedFibers=new Set;try{i(!1),l()}finally{if(fs(v),c1.transition=w,w===null&&E._updatedFibers){var R=E._updatedFibers.size;R>10&&a("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),E._updatedFibers.clear()}}}function AO(){var i=wN(!1),l=i[0],p=i[1],v=sSe.bind(null,p),w=bc();return w.memoizedState=v,[l,v]}function AH(){var i=TO(),l=i[0],p=$l(),v=p.memoizedState;return[l,v]}function OH(){var i=kO(),l=i[0],p=$l(),v=p.memoizedState;return[l,v]}var FH=!1;function aSe(){return FH}function OO(){var i=bc(),l=QN(),p=l.identifierPrefix,v;if(Aa()){var w=S1e();v=":"+p+"R"+w;var E=d1++;E>0&&(v+="H"+E.toString(32)),v+=":"}else{var R=eSe++;v=":"+p+"r"+R.toString(32)+":"}return i.memoizedState=v,v}function DN(){var i=$l(),l=i.memoizedState;return l}function iSe(i,l,p){typeof arguments[3]=="function"&&o("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var v=hh(i),w={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null};if(LH(i))MH(l,w);else{var E=fH(i,l,w,v);if(E!==null){var R=_i();sa(E,i,v,R),zH(E,l,v)}}PH(i,v)}function oSe(i,l,p){typeof arguments[3]=="function"&&o("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var v=hh(i),w={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null};if(LH(i))MH(l,w);else{var E=i.alternate;if(i.lanes===We&&(E===null||E.lanes===We)){var R=l.lastRenderedReducer;if(R!==null){var F;F=vt.current,vt.current=gu;try{var M=l.lastRenderedState,j=R(M,p);if(w.hasEagerState=!0,w.eagerState=j,qe(j,M)){j1e(i,l,w,v);return}}catch{}finally{vt.current=F}}}var q=fH(i,l,w,v);if(q!==null){var he=_i();sa(q,i,v,he),zH(q,l,v)}}PH(i,v)}function LH(i){var l=i.alternate;return i===fr||l!==null&&l===fr}function MH(i,l){f1=bN=!0;var p=i.pending;p===null?l.next=l:(l.next=p.next,p.next=l),i.pending=l}function zH(i,l,p){if(bw(p)){var v=l.lanes;v=ww(v,i.pendingLanes);var w=pn(v,p);l.lanes=w,pv(i,w)}}function PH(i,l,p){Pp(i,l)}var _N={readContext:Fs,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useInsertionEffect:fi,useLayoutEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useMutableSource:fi,useSyncExternalStore:fi,useId:fi,unstable_isNewReconciler:te},BH=null,VH=null,UH=null,WH=null,xc=null,gu=null,AN=null;{var FO=function(){o("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},on=function(){o("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};BH={readContext:function(i){return Fs(i)},useCallback:function(i,l){return ze="useCallback",er(),qv(l),RO(i,l)},useContext:function(i){return ze="useContext",er(),Fs(i)},useEffect:function(i,l){return ze="useEffect",er(),qv(l),TN(i,l)},useImperativeHandle:function(i,l,p){return ze="useImperativeHandle",er(),qv(p),IO(i,l,p)},useInsertionEffect:function(i,l){return ze="useInsertionEffect",er(),qv(l),NO(i,l)},useLayoutEffect:function(i,l){return ze="useLayoutEffect",er(),qv(l),$O(i,l)},useMemo:function(i,l){ze="useMemo",er(),qv(l);var p=vt.current;vt.current=xc;try{return DO(i,l)}finally{vt.current=p}},useReducer:function(i,l,p){ze="useReducer",er();var v=vt.current;vt.current=xc;try{return xO(i,l,p)}finally{vt.current=v}},useRef:function(i){return ze="useRef",er(),EO(i)},useState:function(i){ze="useState",er();var l=vt.current;vt.current=xc;try{return wN(i)}finally{vt.current=l}},useDebugValue:function(i,l){return ze="useDebugValue",er(),void 0},useDeferredValue:function(i){return ze="useDeferredValue",er(),_O(i)},useTransition:function(){return ze="useTransition",er(),AO()},useMutableSource:function(i,l,p){return ze="useMutableSource",er(),void 0},useSyncExternalStore:function(i,l,p){return ze="useSyncExternalStore",er(),CO(i,l,p)},useId:function(){return ze="useId",er(),OO()},unstable_isNewReconciler:te},VH={readContext:function(i){return Fs(i)},useCallback:function(i,l){return ze="useCallback",ot(),RO(i,l)},useContext:function(i){return ze="useContext",ot(),Fs(i)},useEffect:function(i,l){return ze="useEffect",ot(),TN(i,l)},useImperativeHandle:function(i,l,p){return ze="useImperativeHandle",ot(),IO(i,l,p)},useInsertionEffect:function(i,l){return ze="useInsertionEffect",ot(),NO(i,l)},useLayoutEffect:function(i,l){return ze="useLayoutEffect",ot(),$O(i,l)},useMemo:function(i,l){ze="useMemo",ot();var p=vt.current;vt.current=xc;try{return DO(i,l)}finally{vt.current=p}},useReducer:function(i,l,p){ze="useReducer",ot();var v=vt.current;vt.current=xc;try{return xO(i,l,p)}finally{vt.current=v}},useRef:function(i){return ze="useRef",ot(),EO(i)},useState:function(i){ze="useState",ot();var l=vt.current;vt.current=xc;try{return wN(i)}finally{vt.current=l}},useDebugValue:function(i,l){return ze="useDebugValue",ot(),void 0},useDeferredValue:function(i){return ze="useDeferredValue",ot(),_O(i)},useTransition:function(){return ze="useTransition",ot(),AO()},useMutableSource:function(i,l,p){return ze="useMutableSource",ot(),void 0},useSyncExternalStore:function(i,l,p){return ze="useSyncExternalStore",ot(),CO(i,l,p)},useId:function(){return ze="useId",ot(),OO()},unstable_isNewReconciler:te},UH={readContext:function(i){return Fs(i)},useCallback:function(i,l){return ze="useCallback",ot(),IN(i,l)},useContext:function(i){return ze="useContext",ot(),Fs(i)},useEffect:function(i,l){return ze="useEffect",ot(),m1(i,l)},useImperativeHandle:function(i,l,p){return ze="useImperativeHandle",ot(),NN(i,l,p)},useInsertionEffect:function(i,l){return ze="useInsertionEffect",ot(),kN(i,l)},useLayoutEffect:function(i,l){return ze="useLayoutEffect",ot(),EN(i,l)},useMemo:function(i,l){ze="useMemo",ot();var p=vt.current;vt.current=gu;try{return RN(i,l)}finally{vt.current=p}},useReducer:function(i,l,p){ze="useReducer",ot();var v=vt.current;vt.current=gu;try{return wO(i,l,p)}finally{vt.current=v}},useRef:function(i){return ze="useRef",ot(),SN()},useState:function(i){ze="useState",ot();var l=vt.current;vt.current=gu;try{return TO(i)}finally{vt.current=l}},useDebugValue:function(i,l){return ze="useDebugValue",ot(),$N()},useDeferredValue:function(i){return ze="useDeferredValue",ot(),RH(i)},useTransition:function(){return ze="useTransition",ot(),AH()},useMutableSource:function(i,l,p){return ze="useMutableSource",ot(),void 0},useSyncExternalStore:function(i,l,p){return ze="useSyncExternalStore",ot(),xN(i,l)},useId:function(){return ze="useId",ot(),DN()},unstable_isNewReconciler:te},WH={readContext:function(i){return Fs(i)},useCallback:function(i,l){return ze="useCallback",ot(),IN(i,l)},useContext:function(i){return ze="useContext",ot(),Fs(i)},useEffect:function(i,l){return ze="useEffect",ot(),m1(i,l)},useImperativeHandle:function(i,l,p){return ze="useImperativeHandle",ot(),NN(i,l,p)},useInsertionEffect:function(i,l){return ze="useInsertionEffect",ot(),kN(i,l)},useLayoutEffect:function(i,l){return ze="useLayoutEffect",ot(),EN(i,l)},useMemo:function(i,l){ze="useMemo",ot();var p=vt.current;vt.current=AN;try{return RN(i,l)}finally{vt.current=p}},useReducer:function(i,l,p){ze="useReducer",ot();var v=vt.current;vt.current=AN;try{return SO(i,l,p)}finally{vt.current=v}},useRef:function(i){return ze="useRef",ot(),SN()},useState:function(i){ze="useState",ot();var l=vt.current;vt.current=AN;try{return kO(i)}finally{vt.current=l}},useDebugValue:function(i,l){return ze="useDebugValue",ot(),$N()},useDeferredValue:function(i){return ze="useDeferredValue",ot(),DH(i)},useTransition:function(){return ze="useTransition",ot(),OH()},useMutableSource:function(i,l,p){return ze="useMutableSource",ot(),void 0},useSyncExternalStore:function(i,l,p){return ze="useSyncExternalStore",ot(),xN(i,l)},useId:function(){return ze="useId",ot(),DN()},unstable_isNewReconciler:te},xc={readContext:function(i){return FO(),Fs(i)},useCallback:function(i,l){return ze="useCallback",on(),er(),RO(i,l)},useContext:function(i){return ze="useContext",on(),er(),Fs(i)},useEffect:function(i,l){return ze="useEffect",on(),er(),TN(i,l)},useImperativeHandle:function(i,l,p){return ze="useImperativeHandle",on(),er(),IO(i,l,p)},useInsertionEffect:function(i,l){return ze="useInsertionEffect",on(),er(),NO(i,l)},useLayoutEffect:function(i,l){return ze="useLayoutEffect",on(),er(),$O(i,l)},useMemo:function(i,l){ze="useMemo",on(),er();var p=vt.current;vt.current=xc;try{return DO(i,l)}finally{vt.current=p}},useReducer:function(i,l,p){ze="useReducer",on(),er();var v=vt.current;vt.current=xc;try{return xO(i,l,p)}finally{vt.current=v}},useRef:function(i){return ze="useRef",on(),er(),EO(i)},useState:function(i){ze="useState",on(),er();var l=vt.current;vt.current=xc;try{return wN(i)}finally{vt.current=l}},useDebugValue:function(i,l){return ze="useDebugValue",on(),er(),void 0},useDeferredValue:function(i){return ze="useDeferredValue",on(),er(),_O(i)},useTransition:function(){return ze="useTransition",on(),er(),AO()},useMutableSource:function(i,l,p){return ze="useMutableSource",on(),er(),void 0},useSyncExternalStore:function(i,l,p){return ze="useSyncExternalStore",on(),er(),CO(i,l,p)},useId:function(){return ze="useId",on(),er(),OO()},unstable_isNewReconciler:te},gu={readContext:function(i){return FO(),Fs(i)},useCallback:function(i,l){return ze="useCallback",on(),ot(),IN(i,l)},useContext:function(i){return ze="useContext",on(),ot(),Fs(i)},useEffect:function(i,l){return ze="useEffect",on(),ot(),m1(i,l)},useImperativeHandle:function(i,l,p){return ze="useImperativeHandle",on(),ot(),NN(i,l,p)},useInsertionEffect:function(i,l){return ze="useInsertionEffect",on(),ot(),kN(i,l)},useLayoutEffect:function(i,l){return ze="useLayoutEffect",on(),ot(),EN(i,l)},useMemo:function(i,l){ze="useMemo",on(),ot();var p=vt.current;vt.current=gu;try{return RN(i,l)}finally{vt.current=p}},useReducer:function(i,l,p){ze="useReducer",on(),ot();var v=vt.current;vt.current=gu;try{return wO(i,l,p)}finally{vt.current=v}},useRef:function(i){return ze="useRef",on(),ot(),SN()},useState:function(i){ze="useState",on(),ot();var l=vt.current;vt.current=gu;try{return TO(i)}finally{vt.current=l}},useDebugValue:function(i,l){return ze="useDebugValue",on(),ot(),$N()},useDeferredValue:function(i){return ze="useDeferredValue",on(),ot(),RH(i)},useTransition:function(){return ze="useTransition",on(),ot(),AH()},useMutableSource:function(i,l,p){return ze="useMutableSource",on(),ot(),void 0},useSyncExternalStore:function(i,l,p){return ze="useSyncExternalStore",on(),ot(),xN(i,l)},useId:function(){return ze="useId",on(),ot(),DN()},unstable_isNewReconciler:te},AN={readContext:function(i){return FO(),Fs(i)},useCallback:function(i,l){return ze="useCallback",on(),ot(),IN(i,l)},useContext:function(i){return ze="useContext",on(),ot(),Fs(i)},useEffect:function(i,l){return ze="useEffect",on(),ot(),m1(i,l)},useImperativeHandle:function(i,l,p){return ze="useImperativeHandle",on(),ot(),NN(i,l,p)},useInsertionEffect:function(i,l){return ze="useInsertionEffect",on(),ot(),kN(i,l)},useLayoutEffect:function(i,l){return ze="useLayoutEffect",on(),ot(),EN(i,l)},useMemo:function(i,l){ze="useMemo",on(),ot();var p=vt.current;vt.current=gu;try{return RN(i,l)}finally{vt.current=p}},useReducer:function(i,l,p){ze="useReducer",on(),ot();var v=vt.current;vt.current=gu;try{return SO(i,l,p)}finally{vt.current=v}},useRef:function(i){return ze="useRef",on(),ot(),SN()},useState:function(i){ze="useState",on(),ot();var l=vt.current;vt.current=gu;try{return kO(i)}finally{vt.current=l}},useDebugValue:function(i,l){return ze="useDebugValue",on(),ot(),$N()},useDeferredValue:function(i){return ze="useDeferredValue",on(),ot(),DH(i)},useTransition:function(){return ze="useTransition",on(),ot(),OH()},useMutableSource:function(i,l,p){return ze="useMutableSource",on(),ot(),void 0},useSyncExternalStore:function(i,l,p){return ze="useSyncExternalStore",on(),ot(),xN(i,l)},useId:function(){return ze="useId",on(),ot(),DN()},unstable_isNewReconciler:te}}var uh=e.unstable_now,HH=0,ON=-1,g1=-1,FN=-1,LO=!1,LN=!1;function jH(){return LO}function lSe(){LN=!0}function uSe(){LO=!1,LN=!1}function cSe(){LO=LN,LN=!1}function GH(){return HH}function qH(){HH=uh()}function MO(i){g1=uh(),i.actualStartTime<0&&(i.actualStartTime=uh())}function KH(i){g1=-1}function MN(i,l){if(g1>=0){var p=uh()-g1;i.actualDuration+=p,l&&(i.selfBaseDuration=p),g1=-1}}function wc(i){if(ON>=0){var l=uh()-ON;ON=-1;for(var p=i.return;p!==null;){switch(p.tag){case g:var v=p.stateNode;v.effectDuration+=l;return;case D:var w=p.stateNode;w.effectDuration+=l;return}p=p.return}}}function zO(i){if(FN>=0){var l=uh()-FN;FN=-1;for(var p=i.return;p!==null;){switch(p.tag){case g:var v=p.stateNode;v!==null&&(v.passiveEffectDuration+=l);return;case D:var w=p.stateNode;w!==null&&(w.passiveEffectDuration+=l);return}p=p.return}}}function Sc(){ON=uh()}function PO(){FN=uh()}function BO(i){for(var l=i.child;l;)i.actualDuration+=l.actualDuration,l=l.sibling}function yu(i,l){if(i&&i.defaultProps){var p=mn({},l),v=i.defaultProps;for(var w in v)p[w]===void 0&&(p[w]=v[w]);return p}return l}var VO={},UO,WO,HO,jO,GO,XH,zN,qO,KO,XO,y1;{UO=new Set,WO=new Set,HO=new Set,jO=new Set,qO=new Set,GO=new Set,KO=new Set,XO=new Set,y1=new Set;var YH=new Set;zN=function(i,l){if(!(i===null||typeof i=="function")){var p=l+"_"+i;YH.has(p)||(YH.add(p),o("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",l,i))}},XH=function(i,l){if(l===void 0){var p=Mn(i)||"Component";GO.has(p)||(GO.add(p),o("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",p))}},Object.defineProperty(VO,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(VO)}function YO(i,l,p,v){var w=i.memoizedState,E=p(v,w);{if(i.mode&cr){Mr(!0);try{E=p(v,w)}finally{Mr(!1)}}XH(l,E)}var R=E==null?w:mn({},w,E);if(i.memoizedState=R,i.lanes===We){var F=i.updateQueue;F.baseState=R}}var QO={isMounted:jk,enqueueSetState:function(i,l,p){var v=zd(i),w=_i(),E=hh(v),R=Ff(w,E);R.payload=l,p!=null&&(zN(p,"setState"),R.callback=p);var F=ah(v,R,E);F!==null&&(sa(F,v,E,w),hN(F,v,E)),Pp(v,E)},enqueueReplaceState:function(i,l,p){var v=zd(i),w=_i(),E=hh(v),R=Ff(w,E);R.tag=hH,R.payload=l,p!=null&&(zN(p,"replaceState"),R.callback=p);var F=ah(v,R,E);F!==null&&(sa(F,v,E,w),hN(F,v,E)),Pp(v,E)},enqueueForceUpdate:function(i,l){var p=zd(i),v=_i(),w=hh(p),E=Ff(v,w);E.tag=cN,l!=null&&(zN(l,"forceUpdate"),E.callback=l);var R=ah(p,E,w);R!==null&&(sa(R,p,w,v),hN(R,p,w)),Gy(p,w)}};function QH(i,l,p,v,w,E,R){var F=i.stateNode;if(typeof F.shouldComponentUpdate=="function"){var M=F.shouldComponentUpdate(v,E,R);{if(i.mode&cr){Mr(!0);try{M=F.shouldComponentUpdate(v,E,R)}finally{Mr(!1)}}M===void 0&&o("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",Mn(l)||"Component")}return M}return l.prototype&&l.prototype.isPureReactComponent?!Et(p,v)||!Et(w,E):!0}function fSe(i,l,p){var v=i.stateNode;{var w=Mn(l)||"Component",E=v.render;E||(l.prototype&&typeof l.prototype.render=="function"?o("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",w):o("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",w)),v.getInitialState&&!v.getInitialState.isReactClassApproved&&!v.state&&o("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",w),v.getDefaultProps&&!v.getDefaultProps.isReactClassApproved&&o("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",w),v.propTypes&&o("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",w),v.contextType&&o("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",w),l.childContextTypes&&!y1.has(l)&&(i.mode&cr)===zt&&(y1.add(l),o(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),l.contextTypes&&!y1.has(l)&&(i.mode&cr)===zt&&(y1.add(l),o(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),v.contextTypes&&o("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",w),l.contextType&&l.contextTypes&&!KO.has(l)&&(KO.add(l),o("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",w)),typeof v.componentShouldUpdate=="function"&&o("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",w),l.prototype&&l.prototype.isPureReactComponent&&typeof v.shouldComponentUpdate<"u"&&o("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",Mn(l)||"A pure component"),typeof v.componentDidUnmount=="function"&&o("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",w),typeof v.componentDidReceiveProps=="function"&&o("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",w),typeof v.componentWillRecieveProps=="function"&&o("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",w),typeof v.UNSAFE_componentWillRecieveProps=="function"&&o("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",w);var R=v.props!==p;v.props!==void 0&&R&&o("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",w,w),v.defaultProps&&o("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",w,w),typeof v.getSnapshotBeforeUpdate=="function"&&typeof v.componentDidUpdate!="function"&&!HO.has(l)&&(HO.add(l),o("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",Mn(l))),typeof v.getDerivedStateFromProps=="function"&&o("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof v.getDerivedStateFromError=="function"&&o("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof l.getSnapshotBeforeUpdate=="function"&&o("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",w);var F=v.state;F&&(typeof F!="object"||vn(F))&&o("%s.state: must be set to an object or null",w),typeof v.getChildContext=="function"&&typeof l.childContextTypes!="object"&&o("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",w)}}function ZH(i,l){l.updater=QO,i.stateNode=l,uf(l,i),l._reactInternalInstance=VO}function JH(i,l,p){var v=!1,w=Bo,E=Bo,R=l.contextType;if("contextType"in l){var F=R===null||R!==void 0&&R.$$typeof===se&&R._context===void 0;if(!F&&!XO.has(l)){XO.add(l);var M="";R===void 0?M=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof R!="object"?M=" However, it is set to a "+typeof R+".":R.$$typeof===il?M=" Did you accidentally pass the Context.Provider instead?":R._context!==void 0?M=" Did you accidentally pass the Context.Consumer instead?":M=" However, it is set to an object with keys {"+Object.keys(R).join(", ")+"}.",o("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",Mn(l)||"Component",M)}}if(typeof R=="object"&&R!==null)E=Fs(R);else{w=Fv(i,l,!0);var j=l.contextTypes;v=j!=null,E=v?Lv(i,w):Bo}var q=new l(p,E);if(i.mode&cr){Mr(!0);try{q=new l(p,E)}finally{Mr(!1)}}var he=i.memoizedState=q.state!==null&&q.state!==void 0?q.state:null;ZH(i,q);{if(typeof l.getDerivedStateFromProps=="function"&&he===null){var fe=Mn(l)||"Component";WO.has(fe)||(WO.add(fe),o("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",fe,q.state===null?"null":"undefined",fe))}if(typeof l.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"){var ke=null,Ie=null,Le=null;if(typeof q.componentWillMount=="function"&&q.componentWillMount.__suppressDeprecationWarning!==!0?ke="componentWillMount":typeof q.UNSAFE_componentWillMount=="function"&&(ke="UNSAFE_componentWillMount"),typeof q.componentWillReceiveProps=="function"&&q.componentWillReceiveProps.__suppressDeprecationWarning!==!0?Ie="componentWillReceiveProps":typeof q.UNSAFE_componentWillReceiveProps=="function"&&(Ie="UNSAFE_componentWillReceiveProps"),typeof q.componentWillUpdate=="function"&&q.componentWillUpdate.__suppressDeprecationWarning!==!0?Le="componentWillUpdate":typeof q.UNSAFE_componentWillUpdate=="function"&&(Le="UNSAFE_componentWillUpdate"),ke!==null||Ie!==null||Le!==null){var dt=Mn(l)||"Component",Wt=typeof l.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";jO.has(dt)||(jO.add(dt),o(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,dt,Wt,ke!==null?`
  `+ke:"",Ie!==null?`
  `+Ie:"",Le!==null?`
  `+Le:""))}}}return v&&UW(i,w,E),q}function dSe(i,l){var p=l.state;typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),p!==l.state&&(o("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",sn(i)||"Component"),QO.enqueueReplaceState(l,l.state,null))}function ej(i,l,p,v){var w=l.state;if(typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(p,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(p,v),l.state!==w){{var E=sn(i)||"Component";UO.has(E)||(UO.add(E),o("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",E))}QO.enqueueReplaceState(l,l.state,null)}}function ZO(i,l,p,v){fSe(i,l,p);var w=i.stateNode;w.props=p,w.state=i.memoizedState,w.refs={},oO(i);var E=l.contextType;if(typeof E=="object"&&E!==null)w.context=Fs(E);else{var R=Fv(i,l,!0);w.context=Lv(i,R)}{if(w.state===p){var F=Mn(l)||"Component";qO.has(F)||(qO.add(F),o("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",F))}i.mode&cr&&pu.recordLegacyContextWarning(i,w),pu.recordUnsafeLifecycleWarnings(i,w)}w.state=i.memoizedState;var M=l.getDerivedStateFromProps;if(typeof M=="function"&&(YO(i,l,M,p),w.state=i.memoizedState),typeof l.getDerivedStateFromProps!="function"&&typeof w.getSnapshotBeforeUpdate!="function"&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(dSe(i,w),pN(i,p,w,v),w.state=i.memoizedState),typeof w.componentDidMount=="function"){var j=An;j|=ru,(i.mode&Kn)!==zt&&(j|=ec),i.flags|=j}}function hSe(i,l,p,v){var w=i.stateNode,E=i.memoizedProps;w.props=E;var R=w.context,F=l.contextType,M=Bo;if(typeof F=="object"&&F!==null)M=Fs(F);else{var j=Fv(i,l,!0);M=Lv(i,j)}var q=l.getDerivedStateFromProps,he=typeof q=="function"||typeof w.getSnapshotBeforeUpdate=="function";!he&&(typeof w.UNSAFE_componentWillReceiveProps=="function"||typeof w.componentWillReceiveProps=="function")&&(E!==p||R!==M)&&ej(i,w,p,M),mH();var fe=i.memoizedState,ke=w.state=fe;if(pN(i,p,w,v),ke=i.memoizedState,E===p&&fe===ke&&!XE()&&!mN()){if(typeof w.componentDidMount=="function"){var Ie=An;Ie|=ru,(i.mode&Kn)!==zt&&(Ie|=ec),i.flags|=Ie}return!1}typeof q=="function"&&(YO(i,l,q,p),ke=i.memoizedState);var Le=mN()||QH(i,l,E,p,fe,ke,M);if(Le){if(!he&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"){var dt=An;dt|=ru,(i.mode&Kn)!==zt&&(dt|=ec),i.flags|=dt}}else{if(typeof w.componentDidMount=="function"){var Wt=An;Wt|=ru,(i.mode&Kn)!==zt&&(Wt|=ec),i.flags|=Wt}i.memoizedProps=p,i.memoizedState=ke}return w.props=p,w.state=ke,w.context=M,Le}function pSe(i,l,p,v,w){var E=l.stateNode;pH(i,l);var R=l.memoizedProps,F=l.type===l.elementType?R:yu(l.type,R);E.props=F;var M=l.pendingProps,j=E.context,q=p.contextType,he=Bo;if(typeof q=="object"&&q!==null)he=Fs(q);else{var fe=Fv(l,p,!0);he=Lv(l,fe)}var ke=p.getDerivedStateFromProps,Ie=typeof ke=="function"||typeof E.getSnapshotBeforeUpdate=="function";!Ie&&(typeof E.UNSAFE_componentWillReceiveProps=="function"||typeof E.componentWillReceiveProps=="function")&&(R!==M||j!==he)&&ej(l,E,v,he),mH();var Le=l.memoizedState,dt=E.state=Le;if(pN(l,v,E,w),dt=l.memoizedState,R===M&&Le===dt&&!XE()&&!mN()&&!ye)return typeof E.componentDidUpdate=="function"&&(R!==i.memoizedProps||Le!==i.memoizedState)&&(l.flags|=An),typeof E.getSnapshotBeforeUpdate=="function"&&(R!==i.memoizedProps||Le!==i.memoizedState)&&(l.flags|=ws),!1;typeof ke=="function"&&(YO(l,p,ke,v),dt=l.memoizedState);var Wt=mN()||QH(l,p,F,v,Le,dt,he)||ye;return Wt?(!Ie&&(typeof E.UNSAFE_componentWillUpdate=="function"||typeof E.componentWillUpdate=="function")&&(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(v,dt,he),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(v,dt,he)),typeof E.componentDidUpdate=="function"&&(l.flags|=An),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=ws)):(typeof E.componentDidUpdate=="function"&&(R!==i.memoizedProps||Le!==i.memoizedState)&&(l.flags|=An),typeof E.getSnapshotBeforeUpdate=="function"&&(R!==i.memoizedProps||Le!==i.memoizedState)&&(l.flags|=ws),l.memoizedProps=v,l.memoizedState=dt),E.props=v,E.state=dt,E.context=he,Wt}function Tm(i,l){return{value:i,source:l,stack:Ql(l),digest:null}}function JO(i,l,p){return{value:i,source:null,stack:p??null,digest:l??null}}function mSe(i,l){return!0}function eF(i,l){try{var p=mSe(i,l);if(p===!1)return;var v=l.value,w=l.source,E=l.stack,R=E!==null?E:"";if(v!=null&&v._suppressLogging){if(i.tag===d)return;console.error(v)}var F=w?sn(w):null,M=F?"The above error occurred in the <"+F+"> component:":"The above error occurred in one of your React components:",j;if(i.tag===g)j=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var q=sn(i)||"Anonymous";j="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+q+".")}var he=M+`
`+R+`

`+(""+j);console.error(he)}catch(fe){setTimeout(function(){throw fe})}}var gSe=typeof WeakMap=="function"?WeakMap:Map;function tj(i,l,p){var v=Ff(gr,p);v.tag=aO,v.payload={element:null};var w=l.value;return v.callback=function(){lTe(w),eF(i,l)},v}function tF(i,l,p){var v=Ff(gr,p);v.tag=aO;var w=i.type.getDerivedStateFromError;if(typeof w=="function"){var E=l.value;v.payload=function(){return w(E)},v.callback=function(){dG(i),eF(i,l)}}var R=i.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(v.callback=function(){dG(i),eF(i,l),typeof w!="function"&&iTe(this);var M=l.value,j=l.stack;this.componentDidCatch(M,{componentStack:j!==null?j:""}),typeof w!="function"&&(ai(i.lanes,Qt)||o("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",sn(i)||"Unknown"))}),v}function nj(i,l,p){var v=i.pingCache,w;if(v===null?(v=i.pingCache=new gSe,w=new Set,v.set(l,w)):(w=v.get(l),w===void 0&&(w=new Set,v.set(l,w))),!w.has(p)){w.add(p);var E=uTe.bind(null,i,l,p);ri&&O1(i,p),l.then(E,E)}}function ySe(i,l,p,v){var w=i.updateQueue;if(w===null){var E=new Set;E.add(p),i.updateQueue=E}else w.add(p)}function vSe(i,l){var p=i.tag;if((i.mode&xn)===zt&&(p===c||p===A||p===W)){var v=i.alternate;v?(i.updateQueue=v.updateQueue,i.memoizedState=v.memoizedState,i.lanes=v.lanes):(i.updateQueue=null,i.memoizedState=null)}}function rj(i){var l=i;do{if(l.tag===L&&Z1e(l))return l;l=l.return}while(l!==null);return null}function sj(i,l,p,v,w){if((i.mode&xn)===zt){if(i===l)i.flags|=Ds;else{if(i.flags|=At,p.flags|=zy,p.flags&=-52805,p.tag===d){var E=p.alternate;if(E===null)p.tag=G;else{var R=Ff(gr,Qt);R.tag=cN,ah(p,R,Qt)}}p.lanes=pn(p.lanes,Qt)}return i}return i.flags|=Ds,i.lanes=w,i}function bSe(i,l,p,v,w){if(p.flags|=Ap,ri&&O1(i,w),v!==null&&typeof v=="object"&&typeof v.then=="function"){var E=v;vSe(p),Aa()&&p.mode&xn&&XW();var R=rj(l);if(R!==null){R.flags&=~ga,sj(R,l,p,i,w),R.mode&xn&&nj(i,E,w),ySe(R,i,E);return}else{if(!Jk(w)){nj(i,E,w),OF();return}var F=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");v=F}}else if(Aa()&&p.mode&xn){XW();var M=rj(l);if(M!==null){(M.flags&Ds)===Mt&&(M.flags|=ga),sj(M,l,p,i,w),qA(Tm(v,p));return}}v=Tm(v,p),ZCe(v);var j=l;do{switch(j.tag){case g:{var q=v;j.flags|=Ds;var he=Kp(w);j.lanes=pn(j.lanes,he);var fe=tj(j,q,he);lO(j,fe);return}case d:var ke=v,Ie=j.type,Le=j.stateNode;if((j.flags&At)===Mt&&(typeof Ie.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&!rG(Le))){j.flags|=Ds;var dt=Kp(w);j.lanes=pn(j.lanes,dt);var Wt=tF(j,ke,dt);lO(j,Wt);return}break}j=j.return}while(j!==null)}function xSe(){return null}var v1=t.ReactCurrentOwner,vu=!1,nF,b1,rF,sF,aF,km,iF,PN,x1;nF={},b1={},rF={},sF={},aF={},km=!1,iF={},PN={},x1={};function Ri(i,l,p,v){i===null?l.child=oH(l,null,p,v):l.child=Bv(l,i.child,p,v)}function wSe(i,l,p,v){l.child=Bv(l,i.child,null,v),l.child=Bv(l,null,p,v)}function aj(i,l,p,v,w){if(l.type!==l.elementType){var E=p.propTypes;E&&du(E,v,"prop",Mn(p))}var R=p.render,F=l.ref,M,j;Uv(l,w),Ei(l);{if(v1.current=l,xs(!0),M=Kv(i,l,R,v,F,w),j=Xv(),l.mode&cr){Mr(!0);try{M=Kv(i,l,R,v,F,w),j=Xv()}finally{Mr(!1)}}xs(!1)}return Ni(),i!==null&&!vu?(wH(i,l,w),Lf(i,l,w)):(Aa()&&j&&VA(l),l.flags|=Fo,Ri(i,l,M,w),l.child)}function ij(i,l,p,v,w){if(i===null){var E=p.type;if(ETe(E)&&p.compare===null&&p.defaultProps===void 0){var R=E;return R=rb(E),l.tag=W,l.type=R,uF(l,E),oj(i,l,R,v,w)}{var F=E.propTypes;if(F&&du(F,v,"prop",Mn(E)),p.defaultProps!==void 0){var M=Mn(E)||"Unknown";x1[M]||(o("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",M),x1[M]=!0)}}var j=jF(p.type,null,v,l,l.mode,w);return j.ref=l.ref,j.return=l,l.child=j,j}{var q=p.type,he=q.propTypes;he&&du(he,v,"prop",Mn(q))}var fe=i.child,ke=mF(i,w);if(!ke){var Ie=fe.memoizedProps,Le=p.compare;if(Le=Le!==null?Le:Et,Le(Ie,v)&&i.ref===l.ref)return Lf(i,l,w)}l.flags|=Fo;var dt=Rm(fe,v);return dt.ref=l.ref,dt.return=l,l.child=dt,dt}function oj(i,l,p,v,w){if(l.type!==l.elementType){var E=l.elementType;if(E.$$typeof===an){var R=E,F=R._payload,M=R._init;try{E=M(F)}catch{E=null}var j=E&&E.propTypes;j&&du(j,v,"prop",Mn(E))}}if(i!==null){var q=i.memoizedProps;if(Et(q,v)&&i.ref===l.ref&&l.type===i.type)if(vu=!1,l.pendingProps=v=q,mF(i,w))(i.flags&zy)!==Mt&&(vu=!0);else return l.lanes=i.lanes,Lf(i,l,w)}return oF(i,l,p,v,w)}function lj(i,l,p){var v=l.pendingProps,w=v.children,E=i!==null?i.memoizedState:null;if(v.mode==="hidden"||ce)if((l.mode&xn)===zt){var R={baseLanes:We,cachePool:null,transitions:null};l.memoizedState=R,ZN(l,p)}else if(ai(p,si)){var he={baseLanes:We,cachePool:null,transitions:null};l.memoizedState=he;var fe=E!==null?E.baseLanes:p;ZN(l,fe)}else{var F=null,M;if(E!==null){var j=E.baseLanes;M=pn(j,p)}else M=p;l.lanes=l.childLanes=si;var q={baseLanes:M,cachePool:F,transitions:null};return l.memoizedState=q,l.updateQueue=null,ZN(l,M),null}else{var ke;E!==null?(ke=pn(E.baseLanes,p),l.memoizedState=null):ke=p,ZN(l,ke)}return Ri(i,l,w,p),l.child}function SSe(i,l,p){var v=l.pendingProps;return Ri(i,l,v,p),l.child}function CSe(i,l,p){var v=l.pendingProps.children;return Ri(i,l,v,p),l.child}function TSe(i,l,p){{l.flags|=An;{var v=l.stateNode;v.effectDuration=0,v.passiveEffectDuration=0}}var w=l.pendingProps,E=w.children;return Ri(i,l,E,p),l.child}function uj(i,l){var p=l.ref;(i===null&&p!==null||i!==null&&i.ref!==p)&&(l.flags|=jr,l.flags|=Bd)}function oF(i,l,p,v,w){if(l.type!==l.elementType){var E=p.propTypes;E&&du(E,v,"prop",Mn(p))}var R;{var F=Fv(l,p,!0);R=Lv(l,F)}var M,j;Uv(l,w),Ei(l);{if(v1.current=l,xs(!0),M=Kv(i,l,p,v,R,w),j=Xv(),l.mode&cr){Mr(!0);try{M=Kv(i,l,p,v,R,w),j=Xv()}finally{Mr(!1)}}xs(!1)}return Ni(),i!==null&&!vu?(wH(i,l,w),Lf(i,l,w)):(Aa()&&j&&VA(l),l.flags|=Fo,Ri(i,l,M,w),l.child)}function cj(i,l,p,v,w){{switch(VTe(l)){case!1:{var E=l.stateNode,R=l.type,F=new R(l.memoizedProps,E.context),M=F.state;E.updater.enqueueSetState(E,M,null);break}case!0:{l.flags|=At,l.flags|=Ds;var j=new Error("Simulated error coming from DevTools"),q=Kp(w);l.lanes=pn(l.lanes,q);var he=tF(l,Tm(j,l),q);lO(l,he);break}}if(l.type!==l.elementType){var fe=p.propTypes;fe&&du(fe,v,"prop",Mn(p))}}var ke;yc(p)?(ke=!0,QE(l)):ke=!1,Uv(l,w);var Ie=l.stateNode,Le;Ie===null?(VN(i,l),JH(l,p,v),ZO(l,p,v,w),Le=!0):i===null?Le=hSe(l,p,v,w):Le=pSe(i,l,p,v,w);var dt=lF(i,l,p,Le,ke,w);{var Wt=l.stateNode;Le&&Wt.props!==v&&(km||o("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",sn(l)||"a component"),km=!0)}return dt}function lF(i,l,p,v,w,E){uj(i,l);var R=(l.flags&At)!==Mt;if(!v&&!R)return w&&jW(l,p,!1),Lf(i,l,E);var F=l.stateNode;v1.current=l;var M;if(R&&typeof p.getDerivedStateFromError!="function")M=null,KH();else{Ei(l);{if(xs(!0),M=F.render(),l.mode&cr){Mr(!0);try{F.render()}finally{Mr(!1)}}xs(!1)}Ni()}return l.flags|=Fo,i!==null&&R?wSe(i,l,M,E):Ri(i,l,M,E),l.memoizedState=F.state,w&&jW(l,p,!0),l.child}function fj(i){var l=i.stateNode;l.pendingContext?WW(i,l.pendingContext,l.pendingContext!==l.context):l.context&&WW(i,l.context,!1),uO(i,l.containerInfo)}function kSe(i,l,p){if(fj(l),i===null)throw new Error("Should have a current fiber. This is a bug in React.");var v=l.pendingProps,w=l.memoizedState,E=w.element;pH(i,l),pN(l,v,null,p);var R=l.memoizedState;l.stateNode;var F=R.element;if(w.isDehydrated){var M={element:F,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},j=l.updateQueue;if(j.baseState=M,l.memoizedState=M,l.flags&ga){var q=Tm(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),l);return dj(i,l,F,p,q)}else if(F!==E){var he=Tm(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),l);return dj(i,l,F,p,he)}else{$1e(l);var fe=oH(l,null,F,p);l.child=fe;for(var ke=fe;ke;)ke.flags=ke.flags&~Lr|ei,ke=ke.sibling}}else{if(Pv(),F===E)return Lf(i,l,p);Ri(i,l,F,p)}return l.child}function dj(i,l,p,v,w){return Pv(),qA(w),l.flags|=ga,Ri(i,l,p,v),l.child}function ESe(i,l,p){vH(l),i===null&&GA(l);var v=l.type,w=l.pendingProps,E=i!==null?i.memoizedProps:null,R=w.children,F=NA(v,w);return F?R=null:E!==null&&NA(v,E)&&(l.flags|=to),uj(i,l),Ri(i,l,R,p),l.child}function NSe(i,l){return i===null&&GA(l),null}function $Se(i,l,p,v){VN(i,l);var w=l.pendingProps,E=p,R=E._payload,F=E._init,M=F(R);l.type=M;var j=l.tag=NTe(M),q=yu(M,w),he;switch(j){case c:return uF(l,M),l.type=M=rb(M),he=oF(null,l,M,q,v),he;case d:return l.type=M=PF(M),he=cj(null,l,M,q,v),he;case A:return l.type=M=BF(M),he=aj(null,l,M,q,v),he;case P:{if(l.type!==l.elementType){var fe=M.propTypes;fe&&du(fe,q,"prop",Mn(M))}return he=ij(null,l,M,yu(M.type,q),v),he}}var ke="";throw M!==null&&typeof M=="object"&&M.$$typeof===an&&(ke=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+M+". "+("Lazy element type must resolve to a class or function."+ke))}function ISe(i,l,p,v,w){VN(i,l),l.tag=d;var E;return yc(p)?(E=!0,QE(l)):E=!1,Uv(l,w),JH(l,p,v),ZO(l,p,v,w),lF(null,l,p,!0,E,w)}function RSe(i,l,p,v){VN(i,l);var w=l.pendingProps,E;{var R=Fv(l,p,!1);E=Lv(l,R)}Uv(l,v);var F,M;Ei(l);{if(p.prototype&&typeof p.prototype.render=="function"){var j=Mn(p)||"Unknown";nF[j]||(o("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",j,j),nF[j]=!0)}l.mode&cr&&pu.recordLegacyContextWarning(l,null),xs(!0),v1.current=l,F=Kv(null,l,p,w,E,v),M=Xv(),xs(!1)}if(Ni(),l.flags|=Fo,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0){var q=Mn(p)||"Unknown";b1[q]||(o("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",q,q,q),b1[q]=!0)}if(typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0){{var he=Mn(p)||"Unknown";b1[he]||(o("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",he,he,he),b1[he]=!0)}l.tag=d,l.memoizedState=null,l.updateQueue=null;var fe=!1;return yc(p)?(fe=!0,QE(l)):fe=!1,l.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,oO(l),ZH(l,F),ZO(l,p,w,v),lF(null,l,p,!0,fe,v)}else{if(l.tag=c,l.mode&cr){Mr(!0);try{F=Kv(null,l,p,w,E,v),M=Xv()}finally{Mr(!1)}}return Aa()&&M&&VA(l),Ri(null,l,F,v),uF(l,p),l.child}}function uF(i,l){{if(l&&l.childContextTypes&&o("%s(...): childContextTypes cannot be defined on a function component.",l.displayName||l.name||"Component"),i.ref!==null){var p="",v=Ea();v&&(p+=`

Check the render method of \``+v+"`.");var w=v||"",E=i._debugSource;E&&(w=E.fileName+":"+E.lineNumber),aF[w]||(aF[w]=!0,o("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",p))}if(l.defaultProps!==void 0){var R=Mn(l)||"Unknown";x1[R]||(o("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",R),x1[R]=!0)}if(typeof l.getDerivedStateFromProps=="function"){var F=Mn(l)||"Unknown";sF[F]||(o("%s: Function components do not support getDerivedStateFromProps.",F),sF[F]=!0)}if(typeof l.contextType=="object"&&l.contextType!==null){var M=Mn(l)||"Unknown";rF[M]||(o("%s: Function components do not support contextType.",M),rF[M]=!0)}}}var cF={dehydrated:null,treeContext:null,retryLane:Wn};function fF(i){return{baseLanes:i,cachePool:xSe(),transitions:null}}function DSe(i,l){var p=null;return{baseLanes:pn(i.baseLanes,l),cachePool:p,transitions:i.transitions}}function _Se(i,l,p,v){if(l!==null){var w=l.memoizedState;if(w===null)return!1}return dO(i,u1)}function ASe(i,l){return Xp(i.childLanes,l)}function hj(i,l,p){var v=l.pendingProps;UTe(l)&&(l.flags|=At);var w=mu.current,E=!1,R=(l.flags&At)!==Mt;if(R||_Se(w,i)?(E=!0,l.flags&=~At):(i===null||i.memoizedState!==null)&&(w=Q1e(w,xH)),w=Hv(w),oh(l,w),i===null){GA(l);var F=l.memoizedState;if(F!==null){var M=F.dehydrated;if(M!==null)return zSe(l,M)}var j=v.children,q=v.fallback;if(E){var he=OSe(l,j,q,p),fe=l.child;return fe.memoizedState=fF(p),l.memoizedState=cF,he}else return dF(l,j)}else{var ke=i.memoizedState;if(ke!==null){var Ie=ke.dehydrated;if(Ie!==null)return PSe(i,l,R,v,Ie,ke,p)}if(E){var Le=v.fallback,dt=v.children,Wt=LSe(i,l,dt,Le,p),_t=l.child,Ln=i.child.memoizedState;return _t.memoizedState=Ln===null?fF(p):DSe(Ln,p),_t.childLanes=ASe(i,p),l.memoizedState=cF,Wt}else{var $n=v.children,Se=FSe(i,l,$n,p);return l.memoizedState=null,Se}}}function dF(i,l,p){var v=i.mode,w={mode:"visible",children:l},E=hF(w,v);return E.return=i,i.child=E,E}function OSe(i,l,p,v){var w=i.mode,E=i.child,R={mode:"hidden",children:l},F,M;return(w&xn)===zt&&E!==null?(F=E,F.childLanes=We,F.pendingProps=R,i.mode&qn&&(F.actualDuration=0,F.actualStartTime=-1,F.selfBaseDuration=0,F.treeBaseDuration=0),M=mh(p,w,v,null)):(F=hF(R,w),M=mh(p,w,v,null)),F.return=i,M.return=i,F.sibling=M,i.child=F,M}function hF(i,l,p){return pG(i,l,We,null)}function pj(i,l){return Rm(i,l)}function FSe(i,l,p,v){var w=i.child,E=w.sibling,R=pj(w,{mode:"visible",children:p});if((l.mode&xn)===zt&&(R.lanes=v),R.return=l,R.sibling=null,E!==null){var F=l.deletions;F===null?(l.deletions=[E],l.flags|=eo):F.push(E)}return l.child=R,R}function LSe(i,l,p,v,w){var E=l.mode,R=i.child,F=R.sibling,M={mode:"hidden",children:p},j;if((E&xn)===zt&&l.child!==R){var q=l.child;j=q,j.childLanes=We,j.pendingProps=M,l.mode&qn&&(j.actualDuration=0,j.actualStartTime=-1,j.selfBaseDuration=R.selfBaseDuration,j.treeBaseDuration=R.treeBaseDuration),l.deletions=null}else j=pj(R,M),j.subtreeFlags=R.subtreeFlags&ls;var he;return F!==null?he=Rm(F,v):(he=mh(v,E,w,null),he.flags|=Lr),he.return=l,j.return=l,j.sibling=he,l.child=j,he}function BN(i,l,p,v){v!==null&&qA(v),Bv(l,i.child,null,p);var w=l.pendingProps,E=w.children,R=dF(l,E);return R.flags|=Lr,l.memoizedState=null,R}function MSe(i,l,p,v,w){var E=l.mode,R={mode:"visible",children:p},F=hF(R,E),M=mh(v,E,w,null);return M.flags|=Lr,F.return=l,M.return=l,F.sibling=M,l.child=F,(l.mode&xn)!==zt&&Bv(l,i.child,null,w),M}function zSe(i,l,p){return(i.mode&xn)===zt?(o("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),i.lanes=Qt):DA(l)?i.lanes=ya:i.lanes=si,null}function PSe(i,l,p,v,w,E,R){if(p)if(l.flags&ga){l.flags&=~ga;var Se=JO(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return BN(i,l,R,Se)}else{if(l.memoizedState!==null)return l.child=i.child,l.flags|=At,null;var Me=v.children,Ce=v.fallback,Qe=MSe(i,l,Me,Ce,R),xt=l.child;return xt.memoizedState=fF(R),l.memoizedState=cF,Qe}else{if(E1e(),(l.mode&xn)===zt)return BN(i,l,R,null);if(DA(w)){var F,M,j;{var q=Wwe(w);F=q.digest,M=q.message,j=q.stack}var he;M?he=new Error(M):he=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var fe=JO(he,F,j);return BN(i,l,R,fe)}var ke=ai(R,i.childLanes);if(vu||ke){var Ie=QN();if(Ie!==null){var Le=Cw(Ie,R);if(Le!==Wn&&Le!==E.retryLane){E.retryLane=Le;var dt=gr;co(i,Le),sa(Ie,i,Le,dt)}}OF();var Wt=JO(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return BN(i,l,R,Wt)}else if(MW(w)){l.flags|=At,l.child=i.child;var _t=cTe.bind(null,i);return Hwe(w,_t),null}else{I1e(l,w,E.treeContext);var Ln=v.children,$n=dF(l,Ln);return $n.flags|=ei,$n}}}function mj(i,l,p){i.lanes=pn(i.lanes,l);var v=i.alternate;v!==null&&(v.lanes=pn(v.lanes,l)),rO(i.return,l,p)}function BSe(i,l,p){for(var v=l;v!==null;){if(v.tag===L){var w=v.memoizedState;w!==null&&mj(v,p,i)}else if(v.tag===re)mj(v,p,i);else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)return;for(;v.sibling===null;){if(v.return===null||v.return===i)return;v=v.return}v.sibling.return=v.return,v=v.sibling}}function VSe(i){for(var l=i,p=null;l!==null;){var v=l.alternate;v!==null&&vN(v)===null&&(p=l),l=l.sibling}return p}function USe(i){if(i!==void 0&&i!=="forwards"&&i!=="backwards"&&i!=="together"&&!iF[i])if(iF[i]=!0,typeof i=="string")switch(i.toLowerCase()){case"together":case"forwards":case"backwards":{o('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',i,i.toLowerCase());break}case"forward":case"backward":{o('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',i,i.toLowerCase());break}default:o('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',i);break}else o('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',i)}function WSe(i,l){i!==void 0&&!PN[i]&&(i!=="collapsed"&&i!=="hidden"?(PN[i]=!0,o('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',i)):l!=="forwards"&&l!=="backwards"&&(PN[i]=!0,o('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',i)))}function gj(i,l){{var p=vn(i),v=!p&&typeof dn(i)=="function";if(p||v){var w=p?"array":"iterable";return o("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",w,l,w),!1}}return!0}function HSe(i,l){if((l==="forwards"||l==="backwards")&&i!==void 0&&i!==null&&i!==!1)if(vn(i)){for(var p=0;p<i.length;p++)if(!gj(i[p],p))return}else{var v=dn(i);if(typeof v=="function"){var w=v.call(i);if(w)for(var E=w.next(),R=0;!E.done;E=w.next()){if(!gj(E.value,R))return;R++}}else o('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',l)}}function pF(i,l,p,v,w){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:w}:(E.isBackwards=l,E.rendering=null,E.renderingStartTime=0,E.last=v,E.tail=p,E.tailMode=w)}function yj(i,l,p){var v=l.pendingProps,w=v.revealOrder,E=v.tail,R=v.children;USe(w),WSe(E,w),HSe(R,w),Ri(i,l,R,p);var F=mu.current,M=dO(F,u1);if(M)F=hO(F,u1),l.flags|=At;else{var j=i!==null&&(i.flags&At)!==Mt;j&&BSe(l,l.child,p),F=Hv(F)}if(oh(l,F),(l.mode&xn)===zt)l.memoizedState=null;else switch(w){case"forwards":{var q=VSe(l.child),he;q===null?(he=l.child,l.child=null):(he=q.sibling,q.sibling=null),pF(l,!1,he,q,E);break}case"backwards":{var fe=null,ke=l.child;for(l.child=null;ke!==null;){var Ie=ke.alternate;if(Ie!==null&&vN(Ie)===null){l.child=ke;break}var Le=ke.sibling;ke.sibling=fe,fe=ke,ke=Le}pF(l,!0,fe,null,E);break}case"together":{pF(l,!1,null,null,void 0);break}default:l.memoizedState=null}return l.child}function jSe(i,l,p){uO(l,l.stateNode.containerInfo);var v=l.pendingProps;return i===null?l.child=Bv(l,null,v,p):Ri(i,l,v,p),l.child}var vj=!1;function GSe(i,l,p){var v=l.type,w=v._context,E=l.pendingProps,R=l.memoizedProps,F=E.value;{"value"in E||vj||(vj=!0,o("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var M=l.type.propTypes;M&&du(M,E,"prop","Context.Provider")}if(cH(l,w,F),R!==null){var j=R.value;if(qe(j,F)){if(R.children===E.children&&!XE())return Lf(i,l,p)}else U1e(l,w,p)}var q=E.children;return Ri(i,l,q,p),l.child}var bj=!1;function qSe(i,l,p){var v=l.type;v._context===void 0?v!==v.Consumer&&(bj||(bj=!0,o("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):v=v._context;var w=l.pendingProps,E=w.children;typeof E!="function"&&o("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),Uv(l,p);var R=Fs(v);Ei(l);var F;return v1.current=l,xs(!0),F=E(R),xs(!1),Ni(),l.flags|=Fo,Ri(i,l,F,p),l.child}function w1(){vu=!0}function VN(i,l){(l.mode&xn)===zt&&i!==null&&(i.alternate=null,l.alternate=null,l.flags|=Lr)}function Lf(i,l,p){return i!==null&&(l.dependencies=i.dependencies),KH(),A1(l.lanes),ai(p,l.childLanes)?(B1e(i,l),l.child):null}function KSe(i,l,p){{var v=l.return;if(v===null)throw new Error("Cannot swap the root fiber.");if(i.alternate=null,l.alternate=null,p.index=l.index,p.sibling=l.sibling,p.return=l.return,p.ref=l.ref,l===v.child)v.child=p;else{var w=v.child;if(w===null)throw new Error("Expected parent to have a child.");for(;w.sibling!==l;)if(w=w.sibling,w===null)throw new Error("Expected to find the previous sibling.");w.sibling=p}var E=v.deletions;return E===null?(v.deletions=[i],v.flags|=eo):E.push(i),p.flags|=Lr,p}}function mF(i,l){var p=i.lanes;return!!ai(p,l)}function XSe(i,l,p){switch(l.tag){case g:fj(l),l.stateNode,Pv();break;case x:vH(l);break;case d:{var v=l.type;yc(v)&&QE(l);break}case y:uO(l,l.stateNode.containerInfo);break;case $:{var w=l.memoizedProps.value,E=l.type._context;cH(l,E,w);break}case D:{var R=ai(p,l.childLanes);R&&(l.flags|=An);{var F=l.stateNode;F.effectDuration=0,F.passiveEffectDuration=0}}break;case L:{var M=l.memoizedState;if(M!==null){if(M.dehydrated!==null)return oh(l,Hv(mu.current)),l.flags|=At,null;var j=l.child,q=j.childLanes;if(ai(p,q))return hj(i,l,p);oh(l,Hv(mu.current));var he=Lf(i,l,p);return he!==null?he.sibling:null}else oh(l,Hv(mu.current));break}case re:{var fe=(i.flags&At)!==Mt,ke=ai(p,l.childLanes);if(fe){if(ke)return yj(i,l,p);l.flags|=At}var Ie=l.memoizedState;if(Ie!==null&&(Ie.rendering=null,Ie.tail=null,Ie.lastEffect=null),oh(l,mu.current),ke)break;return null}case ne:case me:return l.lanes=We,lj(i,l,p)}return Lf(i,l,p)}function xj(i,l,p){if(l._debugNeedsRemount&&i!==null)return KSe(i,l,jF(l.type,l.key,l.pendingProps,l._debugOwner||null,l.mode,l.lanes));if(i!==null){var v=i.memoizedProps,w=l.pendingProps;if(v!==w||XE()||l.type!==i.type)vu=!0;else{var E=mF(i,p);if(!E&&(l.flags&At)===Mt)return vu=!1,XSe(i,l,p);(i.flags&zy)!==Mt?vu=!0:vu=!1}}else if(vu=!1,Aa()&&x1e(l)){var R=l.index,F=w1e();KW(l,F,R)}switch(l.lanes=We,l.tag){case m:return RSe(i,l,l.type,p);case B:{var M=l.elementType;return $Se(i,l,M,p)}case c:{var j=l.type,q=l.pendingProps,he=l.elementType===j?q:yu(j,q);return oF(i,l,j,he,p)}case d:{var fe=l.type,ke=l.pendingProps,Ie=l.elementType===fe?ke:yu(fe,ke);return cj(i,l,fe,Ie,p)}case g:return kSe(i,l,p);case x:return ESe(i,l,p);case S:return NSe(i,l);case L:return hj(i,l,p);case y:return jSe(i,l,p);case A:{var Le=l.type,dt=l.pendingProps,Wt=l.elementType===Le?dt:yu(Le,dt);return aj(i,l,Le,Wt,p)}case k:return SSe(i,l,p);case C:return CSe(i,l,p);case D:return TSe(i,l,p);case $:return GSe(i,l,p);case N:return qSe(i,l,p);case P:{var _t=l.type,Ln=l.pendingProps,$n=yu(_t,Ln);if(l.type!==l.elementType){var Se=_t.propTypes;Se&&du(Se,$n,"prop",Mn(_t))}return $n=yu(_t.type,$n),ij(i,l,_t,$n,p)}case W:return oj(i,l,l.type,l.pendingProps,p);case G:{var Me=l.type,Ce=l.pendingProps,Qe=l.elementType===Me?Ce:yu(Me,Ce);return ISe(i,l,Me,Qe,p)}case re:return yj(i,l,p);case ue:break;case ne:return lj(i,l,p)}throw new Error("Unknown unit of work tag ("+l.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Yv(i){i.flags|=An}function wj(i){i.flags|=jr,i.flags|=Bd}var Sj,gF,Cj,Tj;Sj=function(i,l,p,v){for(var w=l.child;w!==null;){if(w.tag===x||w.tag===S)ywe(i,w.stateNode);else if(w.tag!==y){if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===l)return;for(;w.sibling===null;){if(w.return===null||w.return===l)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},gF=function(i,l){},Cj=function(i,l,p,v,w){var E=i.memoizedProps;if(E!==v){var R=l.stateNode,F=cO(),M=bwe(R,p,E,v,w,F);l.updateQueue=M,M&&Yv(l)}},Tj=function(i,l,p,v){p!==v&&Yv(l)};function S1(i,l){if(!Aa())switch(i.tailMode){case"hidden":{for(var p=i.tail,v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?i.tail=null:v.sibling=null;break}case"collapsed":{for(var w=i.tail,E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?!l&&i.tail!==null?i.tail.sibling=null:i.tail=null:E.sibling=null;break}}}function Fa(i){var l=i.alternate!==null&&i.alternate.child===i.child,p=We,v=Mt;if(l){if((i.mode&qn)!==zt){for(var M=i.selfBaseDuration,j=i.child;j!==null;)p=pn(p,pn(j.lanes,j.childLanes)),v|=j.subtreeFlags&ls,v|=j.flags&ls,M+=j.treeBaseDuration,j=j.sibling;i.treeBaseDuration=M}else for(var q=i.child;q!==null;)p=pn(p,pn(q.lanes,q.childLanes)),v|=q.subtreeFlags&ls,v|=q.flags&ls,q.return=i,q=q.sibling;i.subtreeFlags|=v}else{if((i.mode&qn)!==zt){for(var w=i.actualDuration,E=i.selfBaseDuration,R=i.child;R!==null;)p=pn(p,pn(R.lanes,R.childLanes)),v|=R.subtreeFlags,v|=R.flags,w+=R.actualDuration,E+=R.treeBaseDuration,R=R.sibling;i.actualDuration=w,i.treeBaseDuration=E}else for(var F=i.child;F!==null;)p=pn(p,pn(F.lanes,F.childLanes)),v|=F.subtreeFlags,v|=F.flags,F.return=i,F=F.sibling;i.subtreeFlags|=v}return i.childLanes=p,l}function YSe(i,l,p){if(O1e()&&(l.mode&xn)!==zt&&(l.flags&At)===Mt)return tH(l),Pv(),l.flags|=ga|Ap|Ds,!1;var v=nN(l);if(p!==null&&p.dehydrated!==null)if(i===null){if(!v)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(_1e(l),Fa(l),(l.mode&qn)!==zt){var w=p!==null;if(w){var E=l.child;E!==null&&(l.treeBaseDuration-=E.treeBaseDuration)}}return!1}else{if(Pv(),(l.flags&At)===Mt&&(l.memoizedState=null),l.flags|=An,Fa(l),(l.mode&qn)!==zt){var R=p!==null;if(R){var F=l.child;F!==null&&(l.treeBaseDuration-=F.treeBaseDuration)}}return!1}else return nH(),!0}function kj(i,l,p){var v=l.pendingProps;switch(UA(l),l.tag){case m:case B:case W:case c:case A:case k:case C:case D:case N:case P:return Fa(l),null;case d:{var w=l.type;return yc(w)&&YE(l),Fa(l),null}case g:{var E=l.stateNode;if(Wv(l),zA(l),mO(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),i===null||i.child===null){var R=nN(l);if(R)Yv(l);else if(i!==null){var F=i.memoizedState;(!F.isDehydrated||(l.flags&ga)!==Mt)&&(l.flags|=ws,nH())}}return gF(i,l),Fa(l),null}case x:{fO(l);var M=yH(),j=l.type;if(i!==null&&l.stateNode!=null)Cj(i,l,j,v,M),i.ref!==l.ref&&wj(l);else{if(!v){if(l.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return Fa(l),null}var q=cO(),he=nN(l);if(he)R1e(l,M,q)&&Yv(l);else{var fe=gwe(j,v,M,q,l);Sj(fe,l,!1,!1),l.stateNode=fe,vwe(fe,j,v,M)&&Yv(l)}l.ref!==null&&wj(l)}return Fa(l),null}case S:{var ke=v;if(i&&l.stateNode!=null){var Ie=i.memoizedProps;Tj(i,l,Ie,ke)}else{if(typeof ke!="string"&&l.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var Le=yH(),dt=cO(),Wt=nN(l);Wt?D1e(l)&&Yv(l):l.stateNode=xwe(ke,Le,dt,l)}return Fa(l),null}case L:{jv(l);var _t=l.memoizedState;if(i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){var Ln=YSe(i,l,_t);if(!Ln)return l.flags&Ds?l:null}if((l.flags&At)!==Mt)return l.lanes=p,(l.mode&qn)!==zt&&BO(l),l;var $n=_t!==null,Se=i!==null&&i.memoizedState!==null;if($n!==Se&&$n){var Me=l.child;if(Me.flags|=os,(l.mode&xn)!==zt){var Ce=i===null&&(l.memoizedProps.unstable_avoidThisFallback!==!0||!0);Ce||dO(mu.current,xH)?QCe():OF()}}var Qe=l.updateQueue;if(Qe!==null&&(l.flags|=An),Fa(l),(l.mode&qn)!==zt&&$n){var xt=l.child;xt!==null&&(l.treeBaseDuration-=xt.treeBaseDuration)}return null}case y:return Wv(l),gF(i,l),i===null&&h1e(l.stateNode.containerInfo),Fa(l),null;case $:var gt=l.type._context;return nO(gt,l),Fa(l),null;case G:{var Jt=l.type;return yc(Jt)&&YE(l),Fa(l),null}case re:{jv(l);var ln=l.memoizedState;if(ln===null)return Fa(l),null;var dr=(l.flags&At)!==Mt,Yn=ln.rendering;if(Yn===null)if(dr)S1(ln,!1);else{var Ts=JCe()&&(i===null||(i.flags&At)===Mt);if(!Ts)for(var Qn=l.child;Qn!==null;){var ps=vN(Qn);if(ps!==null){dr=!0,l.flags|=At,S1(ln,!1);var di=ps.updateQueue;return di!==null&&(l.updateQueue=di,l.flags|=An),l.subtreeFlags=Mt,V1e(l,p),oh(l,hO(mu.current,u1)),l.child}Qn=Qn.sibling}ln.tail!==null&&Ss()>Gj()&&(l.flags|=At,dr=!0,S1(ln,!1),l.lanes=pw)}else{if(!dr){var Ba=vN(Yn);if(Ba!==null){l.flags|=At,dr=!0;var Uo=Ba.updateQueue;if(Uo!==null&&(l.updateQueue=Uo,l.flags|=An),S1(ln,!0),ln.tail===null&&ln.tailMode==="hidden"&&!Yn.alternate&&!Aa())return Fa(l),null}else Ss()*2-ln.renderingStartTime>Gj()&&p!==si&&(l.flags|=At,dr=!0,S1(ln,!1),l.lanes=pw)}if(ln.isBackwards)Yn.sibling=l.child,l.child=Yn;else{var Ai=ln.last;Ai!==null?Ai.sibling=Yn:l.child=Yn,ln.last=Yn}}if(ln.tail!==null){var Oi=ln.tail;ln.rendering=Oi,ln.tail=Oi.sibling,ln.renderingStartTime=Ss(),Oi.sibling=null;var hi=mu.current;return dr?hi=hO(hi,u1):hi=Hv(hi),oh(l,hi),Oi}return Fa(l),null}case ue:break;case ne:case me:{AF(l);var Vf=l.memoizedState,sb=Vf!==null;if(i!==null){var z1=i.memoizedState,kc=z1!==null;kc!==sb&&!ce&&(l.flags|=os)}return!sb||(l.mode&xn)===zt?Fa(l):ai(Tc,si)&&(Fa(l),l.subtreeFlags&(Lr|An)&&(l.flags|=os)),null}case ge:return null;case be:return null}throw new Error("Unknown unit of work tag ("+l.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function QSe(i,l,p){switch(UA(l),l.tag){case d:{var v=l.type;yc(v)&&YE(l);var w=l.flags;return w&Ds?(l.flags=w&~Ds|At,(l.mode&qn)!==zt&&BO(l),l):null}case g:{l.stateNode,Wv(l),zA(l),mO();var E=l.flags;return(E&Ds)!==Mt&&(E&At)===Mt?(l.flags=E&~Ds|At,l):null}case x:return fO(l),null;case L:{jv(l);var R=l.memoizedState;if(R!==null&&R.dehydrated!==null){if(l.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Pv()}var F=l.flags;return F&Ds?(l.flags=F&~Ds|At,(l.mode&qn)!==zt&&BO(l),l):null}case re:return jv(l),null;case y:return Wv(l),null;case $:var M=l.type._context;return nO(M,l),null;case ne:case me:return AF(l),null;case ge:return null;default:return null}}function Ej(i,l,p){switch(UA(l),l.tag){case d:{var v=l.type.childContextTypes;v!=null&&YE(l);break}case g:{l.stateNode,Wv(l),zA(l),mO();break}case x:{fO(l);break}case y:Wv(l);break;case L:jv(l);break;case re:jv(l);break;case $:var w=l.type._context;nO(w,l);break;case ne:case me:AF(l);break}}var Nj=null;Nj=new Set;var UN=!1,La=!1,ZSe=typeof WeakSet=="function"?WeakSet:Set,Nt=null,Qv=null,Zv=null;function JSe(i){Ju(null,function(){throw i}),_p()}var eCe=function(i,l){if(l.props=i.memoizedProps,l.state=i.memoizedState,i.mode&qn)try{Sc(),l.componentWillUnmount()}finally{wc(i)}else l.componentWillUnmount()};function $j(i,l){try{ch(Zs,i)}catch(p){Er(i,l,p)}}function yF(i,l,p){try{eCe(i,p)}catch(v){Er(i,l,v)}}function tCe(i,l,p){try{p.componentDidMount()}catch(v){Er(i,l,v)}}function Ij(i,l){try{Dj(i)}catch(p){Er(i,l,p)}}function Jv(i,l){var p=i.ref;if(p!==null)if(typeof p=="function"){var v;try{if(Ae&&Fe&&i.mode&qn)try{Sc(),v=p(null)}finally{wc(i)}else v=p(null)}catch(w){Er(i,l,w)}typeof v=="function"&&o("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",sn(i))}else p.current=null}function WN(i,l,p){try{p()}catch(v){Er(i,l,v)}}var Rj=!1;function nCe(i,l){pwe(i.containerInfo),Nt=l,rCe();var p=Rj;return Rj=!1,p}function rCe(){for(;Nt!==null;){var i=Nt,l=i.child;(i.subtreeFlags&tc)!==Mt&&l!==null?(l.return=i,Nt=l):sCe()}}function sCe(){for(;Nt!==null;){var i=Nt;or(i);try{aCe(i)}catch(p){Er(i,i.return,p)}kr();var l=i.sibling;if(l!==null){l.return=i.return,Nt=l;return}Nt=i.return}}function aCe(i){var l=i.alternate,p=i.flags;if((p&ws)!==Mt){switch(or(i),i.tag){case c:case A:case W:break;case d:{if(l!==null){var v=l.memoizedProps,w=l.memoizedState,E=i.stateNode;i.type===i.elementType&&!km&&(E.props!==i.memoizedProps&&o("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",sn(i)||"instance"),E.state!==i.memoizedState&&o("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",sn(i)||"instance"));var R=E.getSnapshotBeforeUpdate(i.elementType===i.type?v:yu(i.type,v),w);{var F=Nj;R===void 0&&!F.has(i.type)&&(F.add(i.type),o("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",sn(i)))}E.__reactInternalSnapshotBeforeUpdate=R}break}case g:{{var M=i.stateNode;Pwe(M.containerInfo)}break}case x:case S:case y:case G:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}kr()}}function bu(i,l,p){var v=l.updateQueue,w=v!==null?v.lastEffect:null;if(w!==null){var E=w.next,R=E;do{if((R.tag&i)===i){var F=R.destroy;R.destroy=void 0,F!==void 0&&((i&Oa)!==fo?iu(l):(i&Zs)!==fo&&Fp(l),(i&vc)!==fo&&F1(!0),WN(l,p,F),(i&vc)!==fo&&F1(!1),(i&Oa)!==fo?ac():(i&Zs)!==fo&&dw())}R=R.next}while(R!==E)}}function ch(i,l){var p=l.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var w=v.next,E=w;do{if((E.tag&i)===i){(i&Oa)!==fo?fw(l):(i&Zs)!==fo&&Hy(l);var R=E.create;(i&vc)!==fo&&F1(!0),E.destroy=R(),(i&vc)!==fo&&F1(!1),(i&Oa)!==fo?Kk():(i&Zs)!==fo&&Xk();{var F=E.destroy;if(F!==void 0&&typeof F!="function"){var M=void 0;(E.tag&Zs)!==Mt?M="useLayoutEffect":(E.tag&vc)!==Mt?M="useInsertionEffect":M="useEffect";var j=void 0;F===null?j=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof F.then=="function"?j=`

It looks like you wrote `+M+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+M+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:j=" You returned: "+F,o("%s must not return anything besides a function, which is used for clean-up.%s",M,j)}}}E=E.next}while(E!==w)}}function iCe(i,l){if((l.flags&An)!==Mt)switch(l.tag){case D:{var p=l.stateNode.passiveEffectDuration,v=l.memoizedProps,w=v.id,E=v.onPostCommit,R=GH(),F=l.alternate===null?"mount":"update";jH()&&(F="nested-update"),typeof E=="function"&&E(w,F,p,R);var M=l.return;e:for(;M!==null;){switch(M.tag){case g:var j=M.stateNode;j.passiveEffectDuration+=p;break e;case D:var q=M.stateNode;q.passiveEffectDuration+=p;break e}M=M.return}break}}}function oCe(i,l,p,v){if((p.flags&rc)!==Mt)switch(p.tag){case c:case A:case W:{if(!La)if(p.mode&qn)try{Sc(),ch(Zs|Qs,p)}finally{wc(p)}else ch(Zs|Qs,p);break}case d:{var w=p.stateNode;if(p.flags&An&&!La)if(l===null)if(p.type===p.elementType&&!km&&(w.props!==p.memoizedProps&&o("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",sn(p)||"instance"),w.state!==p.memoizedState&&o("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",sn(p)||"instance")),p.mode&qn)try{Sc(),w.componentDidMount()}finally{wc(p)}else w.componentDidMount();else{var E=p.elementType===p.type?l.memoizedProps:yu(p.type,l.memoizedProps),R=l.memoizedState;if(p.type===p.elementType&&!km&&(w.props!==p.memoizedProps&&o("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",sn(p)||"instance"),w.state!==p.memoizedState&&o("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",sn(p)||"instance")),p.mode&qn)try{Sc(),w.componentDidUpdate(E,R,w.__reactInternalSnapshotBeforeUpdate)}finally{wc(p)}else w.componentDidUpdate(E,R,w.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&(p.type===p.elementType&&!km&&(w.props!==p.memoizedProps&&o("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",sn(p)||"instance"),w.state!==p.memoizedState&&o("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",sn(p)||"instance")),gH(p,F,w));break}case g:{var M=p.updateQueue;if(M!==null){var j=null;if(p.child!==null)switch(p.child.tag){case x:j=p.child.stateNode;break;case d:j=p.child.stateNode;break}gH(p,M,j)}break}case x:{var q=p.stateNode;if(l===null&&p.flags&An){var he=p.type,fe=p.memoizedProps;kwe(q,he,fe)}break}case S:break;case y:break;case D:{{var ke=p.memoizedProps,Ie=ke.onCommit,Le=ke.onRender,dt=p.stateNode.effectDuration,Wt=GH(),_t=l===null?"mount":"update";jH()&&(_t="nested-update"),typeof Le=="function"&&Le(p.memoizedProps.id,_t,p.actualDuration,p.treeBaseDuration,p.actualStartTime,Wt);{typeof Ie=="function"&&Ie(p.memoizedProps.id,_t,dt,Wt),sTe(p);var Ln=p.return;e:for(;Ln!==null;){switch(Ln.tag){case g:var $n=Ln.stateNode;$n.effectDuration+=dt;break e;case D:var Se=Ln.stateNode;Se.effectDuration+=dt;break e}Ln=Ln.return}}}break}case L:{mCe(i,p);break}case re:case G:case ue:case ne:case me:case be:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}La||p.flags&jr&&Dj(p)}function lCe(i){switch(i.tag){case c:case A:case W:{if(i.mode&qn)try{Sc(),$j(i,i.return)}finally{wc(i)}else $j(i,i.return);break}case d:{var l=i.stateNode;typeof l.componentDidMount=="function"&&tCe(i,i.return,l),Ij(i,i.return);break}case x:{Ij(i,i.return);break}}}function uCe(i,l){for(var p=null,v=i;;){if(v.tag===x){if(p===null){p=v;try{var w=v.stateNode;l?Fwe(w):Mwe(v.stateNode,v.memoizedProps)}catch(R){Er(i,i.return,R)}}}else if(v.tag===S){if(p===null)try{var E=v.stateNode;l?Lwe(E):zwe(E,v.memoizedProps)}catch(R){Er(i,i.return,R)}}else if(!((v.tag===ne||v.tag===me)&&v.memoizedState!==null&&v!==i)){if(v.child!==null){v.child.return=v,v=v.child;continue}}if(v===i)return;for(;v.sibling===null;){if(v.return===null||v.return===i)return;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}function Dj(i){var l=i.ref;if(l!==null){var p=i.stateNode,v;switch(i.tag){case x:v=p;break;default:v=p}if(typeof l=="function"){var w;if(i.mode&qn)try{Sc(),w=l(v)}finally{wc(i)}else w=l(v);typeof w=="function"&&o("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",sn(i))}else l.hasOwnProperty("current")||o("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",sn(i)),l.current=v}}function cCe(i){var l=i.alternate;l!==null&&(l.return=null),i.return=null}function _j(i){var l=i.alternate;l!==null&&(i.alternate=null,_j(l));{if(i.child=null,i.deletions=null,i.sibling=null,i.tag===x){var p=i.stateNode;p!==null&&g1e(p)}i.stateNode=null,i._debugOwner=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}}function fCe(i){for(var l=i.return;l!==null;){if(Aj(l))return l;l=l.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function Aj(i){return i.tag===x||i.tag===g||i.tag===y}function Oj(i){var l=i;e:for(;;){for(;l.sibling===null;){if(l.return===null||Aj(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==x&&l.tag!==S&&l.tag!==X;){if(l.flags&Lr||l.child===null||l.tag===y)continue e;l.child.return=l,l=l.child}if(!(l.flags&Lr))return l.stateNode}}function dCe(i){var l=fCe(i);switch(l.tag){case x:{var p=l.stateNode;l.flags&to&&(LW(p),l.flags&=~to);var v=Oj(i);bF(i,v,p);break}case g:case y:{var w=l.stateNode.containerInfo,E=Oj(i);vF(i,E,w);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function vF(i,l,p){var v=i.tag,w=v===x||v===S;if(w){var E=i.stateNode;l?Dwe(p,E,l):Iwe(p,E)}else if(v!==y){var R=i.child;if(R!==null){vF(R,l,p);for(var F=R.sibling;F!==null;)vF(F,l,p),F=F.sibling}}}function bF(i,l,p){var v=i.tag,w=v===x||v===S;if(w){var E=i.stateNode;l?Rwe(p,E,l):$we(p,E)}else if(v!==y){var R=i.child;if(R!==null){bF(R,l,p);for(var F=R.sibling;F!==null;)bF(F,l,p),F=F.sibling}}}var Ma=null,xu=!1;function hCe(i,l,p){{var v=l;e:for(;v!==null;){switch(v.tag){case x:{Ma=v.stateNode,xu=!1;break e}case g:{Ma=v.stateNode.containerInfo,xu=!0;break e}case y:{Ma=v.stateNode.containerInfo,xu=!0;break e}}v=v.return}if(Ma===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");Fj(i,l,p),Ma=null,xu=!1}cCe(p)}function fh(i,l,p){for(var v=p.child;v!==null;)Fj(i,l,v),v=v.sibling}function Fj(i,l,p){switch(lw(p),p.tag){case x:La||Jv(p,l);case S:{{var v=Ma,w=xu;Ma=null,fh(i,l,p),Ma=v,xu=w,Ma!==null&&(xu?Awe(Ma,p.stateNode):_we(Ma,p.stateNode))}return}case X:{Ma!==null&&(xu?Owe(Ma,p.stateNode):RA(Ma,p.stateNode));return}case y:{{var E=Ma,R=xu;Ma=p.stateNode.containerInfo,xu=!0,fh(i,l,p),Ma=E,xu=R}return}case c:case A:case P:case W:{if(!La){var F=p.updateQueue;if(F!==null){var M=F.lastEffect;if(M!==null){var j=M.next,q=j;do{var he=q,fe=he.destroy,ke=he.tag;fe!==void 0&&((ke&vc)!==fo?WN(p,l,fe):(ke&Zs)!==fo&&(Fp(p),p.mode&qn?(Sc(),WN(p,l,fe),wc(p)):WN(p,l,fe),dw())),q=q.next}while(q!==j)}}}fh(i,l,p);return}case d:{if(!La){Jv(p,l);var Ie=p.stateNode;typeof Ie.componentWillUnmount=="function"&&yF(p,l,Ie)}fh(i,l,p);return}case ue:{fh(i,l,p);return}case ne:{if(p.mode&xn){var Le=La;La=Le||p.memoizedState!==null,fh(i,l,p),La=Le}else fh(i,l,p);break}default:{fh(i,l,p);return}}}function pCe(i){i.memoizedState}function mCe(i,l){var p=l.memoizedState;if(p===null){var v=l.alternate;if(v!==null){var w=v.memoizedState;if(w!==null){var E=w.dehydrated;E!==null&&Jwe(E)}}}}function Lj(i){var l=i.updateQueue;if(l!==null){i.updateQueue=null;var p=i.stateNode;p===null&&(p=i.stateNode=new ZSe),l.forEach(function(v){var w=fTe.bind(null,i,v);if(!p.has(v)){if(p.add(v),ri)if(Qv!==null&&Zv!==null)O1(Zv,Qv);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");v.then(w,w)}})}}function gCe(i,l,p){Qv=p,Zv=i,or(l),Mj(l,i),or(l),Qv=null,Zv=null}function wu(i,l,p){var v=l.deletions;if(v!==null)for(var w=0;w<v.length;w++){var E=v[w];try{hCe(i,l,E)}catch(M){Er(E,l,M)}}var R=Gu();if(l.subtreeFlags&nc)for(var F=l.child;F!==null;)or(F),Mj(F,i),F=F.sibling;or(R)}function Mj(i,l,p){var v=i.alternate,w=i.flags;switch(i.tag){case c:case A:case P:case W:{if(wu(l,i),Cc(i),w&An){try{bu(vc|Qs,i,i.return),ch(vc|Qs,i)}catch(Jt){Er(i,i.return,Jt)}if(i.mode&qn){try{Sc(),bu(Zs|Qs,i,i.return)}catch(Jt){Er(i,i.return,Jt)}wc(i)}else try{bu(Zs|Qs,i,i.return)}catch(Jt){Er(i,i.return,Jt)}}return}case d:{wu(l,i),Cc(i),w&jr&&v!==null&&Jv(v,v.return);return}case x:{wu(l,i),Cc(i),w&jr&&v!==null&&Jv(v,v.return);{if(i.flags&to){var E=i.stateNode;try{LW(E)}catch(Jt){Er(i,i.return,Jt)}}if(w&An){var R=i.stateNode;if(R!=null){var F=i.memoizedProps,M=v!==null?v.memoizedProps:F,j=i.type,q=i.updateQueue;if(i.updateQueue=null,q!==null)try{Ewe(R,q,j,M,F,i)}catch(Jt){Er(i,i.return,Jt)}}}}return}case S:{if(wu(l,i),Cc(i),w&An){if(i.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var he=i.stateNode,fe=i.memoizedProps,ke=v!==null?v.memoizedProps:fe;try{Nwe(he,ke,fe)}catch(Jt){Er(i,i.return,Jt)}}return}case g:{if(wu(l,i),Cc(i),w&An&&v!==null){var Ie=v.memoizedState;if(Ie.isDehydrated)try{Zwe(l.containerInfo)}catch(Jt){Er(i,i.return,Jt)}}return}case y:{wu(l,i),Cc(i);return}case L:{wu(l,i),Cc(i);var Le=i.child;if(Le.flags&os){var dt=Le.stateNode,Wt=Le.memoizedState,_t=Wt!==null;if(dt.isHidden=_t,_t){var Ln=Le.alternate!==null&&Le.alternate.memoizedState!==null;Ln||YCe()}}if(w&An){try{pCe(i)}catch(Jt){Er(i,i.return,Jt)}Lj(i)}return}case ne:{var $n=v!==null&&v.memoizedState!==null;if(i.mode&xn){var Se=La;La=Se||$n,wu(l,i),La=Se}else wu(l,i);if(Cc(i),w&os){var Me=i.stateNode,Ce=i.memoizedState,Qe=Ce!==null,xt=i;if(Me.isHidden=Qe,Qe&&!$n&&(xt.mode&xn)!==zt){Nt=xt;for(var gt=xt.child;gt!==null;)Nt=gt,vCe(gt),gt=gt.sibling}uCe(xt,Qe)}return}case re:{wu(l,i),Cc(i),w&An&&Lj(i);return}case ue:return;default:{wu(l,i),Cc(i);return}}}function Cc(i){var l=i.flags;if(l&Lr){try{dCe(i)}catch(p){Er(i,i.return,p)}i.flags&=~Lr}l&ei&&(i.flags&=~ei)}function yCe(i,l,p){Qv=p,Zv=l,Nt=i,zj(i,l,p),Qv=null,Zv=null}function zj(i,l,p){for(var v=(i.mode&xn)!==zt;Nt!==null;){var w=Nt,E=w.child;if(w.tag===ne&&v){var R=w.memoizedState!==null,F=R||UN;if(F){xF(i,l,p);continue}else{var M=w.alternate,j=M!==null&&M.memoizedState!==null,q=j||La,he=UN,fe=La;UN=F,La=q,La&&!fe&&(Nt=w,bCe(w));for(var ke=E;ke!==null;)Nt=ke,zj(ke,l,p),ke=ke.sibling;Nt=w,UN=he,La=fe,xF(i,l,p);continue}}(w.subtreeFlags&rc)!==Mt&&E!==null?(E.return=w,Nt=E):xF(i,l,p)}}function xF(i,l,p){for(;Nt!==null;){var v=Nt;if((v.flags&rc)!==Mt){var w=v.alternate;or(v);try{oCe(l,w,v,p)}catch(R){Er(v,v.return,R)}kr()}if(v===i){Nt=null;return}var E=v.sibling;if(E!==null){E.return=v.return,Nt=E;return}Nt=v.return}}function vCe(i){for(;Nt!==null;){var l=Nt,p=l.child;switch(l.tag){case c:case A:case P:case W:{if(l.mode&qn)try{Sc(),bu(Zs,l,l.return)}finally{wc(l)}else bu(Zs,l,l.return);break}case d:{Jv(l,l.return);var v=l.stateNode;typeof v.componentWillUnmount=="function"&&yF(l,l.return,v);break}case x:{Jv(l,l.return);break}case ne:{var w=l.memoizedState!==null;if(w){Pj(i);continue}break}}p!==null?(p.return=l,Nt=p):Pj(i)}}function Pj(i){for(;Nt!==null;){var l=Nt;if(l===i){Nt=null;return}var p=l.sibling;if(p!==null){p.return=l.return,Nt=p;return}Nt=l.return}}function bCe(i){for(;Nt!==null;){var l=Nt,p=l.child;if(l.tag===ne){var v=l.memoizedState!==null;if(v){Bj(i);continue}}p!==null?(p.return=l,Nt=p):Bj(i)}}function Bj(i){for(;Nt!==null;){var l=Nt;or(l);try{lCe(l)}catch(v){Er(l,l.return,v)}if(kr(),l===i){Nt=null;return}var p=l.sibling;if(p!==null){p.return=l.return,Nt=p;return}Nt=l.return}}function xCe(i,l,p,v){Nt=l,wCe(l,i,p,v)}function wCe(i,l,p,v){for(;Nt!==null;){var w=Nt,E=w.child;(w.subtreeFlags&su)!==Mt&&E!==null?(E.return=w,Nt=E):SCe(i,l,p,v)}}function SCe(i,l,p,v){for(;Nt!==null;){var w=Nt;if((w.flags&Ja)!==Mt){or(w);try{CCe(l,w,p,v)}catch(R){Er(w,w.return,R)}kr()}if(w===i){Nt=null;return}var E=w.sibling;if(E!==null){E.return=w.return,Nt=E;return}Nt=w.return}}function CCe(i,l,p,v){switch(l.tag){case c:case A:case W:{if(l.mode&qn){PO();try{ch(Oa|Qs,l)}finally{zO(l)}}else ch(Oa|Qs,l);break}}}function TCe(i){Nt=i,kCe()}function kCe(){for(;Nt!==null;){var i=Nt,l=i.child;if((Nt.flags&eo)!==Mt){var p=i.deletions;if(p!==null){for(var v=0;v<p.length;v++){var w=p[v];Nt=w,$Ce(w,i)}{var E=i.alternate;if(E!==null){var R=E.child;if(R!==null){E.child=null;do{var F=R.sibling;R.sibling=null,R=F}while(R!==null)}}}Nt=i}}(i.subtreeFlags&su)!==Mt&&l!==null?(l.return=i,Nt=l):ECe()}}function ECe(){for(;Nt!==null;){var i=Nt;(i.flags&Ja)!==Mt&&(or(i),NCe(i),kr());var l=i.sibling;if(l!==null){l.return=i.return,Nt=l;return}Nt=i.return}}function NCe(i){switch(i.tag){case c:case A:case W:{i.mode&qn?(PO(),bu(Oa|Qs,i,i.return),zO(i)):bu(Oa|Qs,i,i.return);break}}}function $Ce(i,l){for(;Nt!==null;){var p=Nt;or(p),RCe(p,l),kr();var v=p.child;v!==null?(v.return=p,Nt=v):ICe(i)}}function ICe(i){for(;Nt!==null;){var l=Nt,p=l.sibling,v=l.return;if(_j(l),l===i){Nt=null;return}if(p!==null){p.return=v,Nt=p;return}Nt=v}}function RCe(i,l){switch(i.tag){case c:case A:case W:{i.mode&qn?(PO(),bu(Oa,i,l),zO(i)):bu(Oa,i,l);break}}}function DCe(i){switch(i.tag){case c:case A:case W:{try{ch(Zs|Qs,i)}catch(p){Er(i,i.return,p)}break}case d:{var l=i.stateNode;try{l.componentDidMount()}catch(p){Er(i,i.return,p)}break}}}function _Ce(i){switch(i.tag){case c:case A:case W:{try{ch(Oa|Qs,i)}catch(l){Er(i,i.return,l)}break}}}function ACe(i){switch(i.tag){case c:case A:case W:{try{bu(Zs|Qs,i,i.return)}catch(p){Er(i,i.return,p)}break}case d:{var l=i.stateNode;typeof l.componentWillUnmount=="function"&&yF(i,i.return,l);break}}}function OCe(i){switch(i.tag){case c:case A:case W:try{bu(Oa|Qs,i,i.return)}catch(l){Er(i,i.return,l)}}}if(typeof Symbol=="function"&&Symbol.for){var C1=Symbol.for;C1("selector.component"),C1("selector.has_pseudo_class"),C1("selector.role"),C1("selector.test_id"),C1("selector.text")}var FCe=[];function LCe(){FCe.forEach(function(i){return i()})}var MCe=t.ReactCurrentActQueue;function zCe(i){{var l=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,p=typeof jest<"u";return p&&l!==!1}}function Vj(){{var i=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!i&&MCe.current!==null&&o("The current testing environment is not configured to support act(...)"),i}}var PCe=Math.ceil,wF=t.ReactCurrentDispatcher,SF=t.ReactCurrentOwner,za=t.ReactCurrentBatchConfig,Su=t.ReactCurrentActQueue,ta=0,Uj=1,Pa=2,Il=4,Mf=0,T1=1,Em=2,HN=3,k1=4,Wj=5,CF=6,Fn=ta,Di=null,Jr=null,na=We,Tc=We,TF=th(We),ra=Mf,E1=null,jN=We,N1=We,GN=We,$1=null,ho=null,kF=0,Hj=500,jj=1/0,BCe=500,zf=null;function I1(){jj=Ss()+BCe}function Gj(){return jj}var qN=!1,EF=null,eb=null,Nm=!1,dh=null,R1=We,NF=[],$F=null,VCe=50,D1=0,IF=null,RF=!1,KN=!1,UCe=50,tb=0,XN=null,_1=gr,YN=We,qj=!1;function QN(){return Di}function _i(){return(Fn&(Pa|Il))!==ta?Ss():(_1!==gr||(_1=Ss()),_1)}function hh(i){var l=i.mode;if((l&xn)===zt)return Qt;if((Fn&Pa)!==ta&&na!==We)return Kp(na);var p=M1e()!==L1e;if(p){if(za.transition!==null){var v=za.transition;v._updatedFibers||(v._updatedFibers=new Set),v._updatedFibers.add(i)}return YN===Wn&&(YN=xw()),YN}var w=oo();if(w!==Wn)return w;var E=wwe();return E}function WCe(i){var l=i.mode;return(l&xn)===zt?Qt:tE()}function sa(i,l,p,v){hTe(),qj&&o("useInsertionEffect must not schedule updates."),RF&&(KN=!0),Hd(i,p,v),(Fn&Pa)!==We&&i===Di?gTe(l):(ri&&Qp(i,l,p),yTe(l),i===Di&&((Fn&Pa)===ta&&(N1=pn(N1,p)),ra===k1&&ph(i,na)),po(i,v),p===Qt&&Fn===ta&&(l.mode&xn)===zt&&!Su.isBatchingLegacy&&(I1(),qW()))}function HCe(i,l,p){var v=i.current;v.lanes=l,Hd(i,l,p),po(i,p)}function jCe(i){return(Fn&Pa)!==ta}function po(i,l){var p=i.callbackNode;cv(i,l);var v=uv(i,i===Di?na:We);if(v===We){p!==null&&uG(p),i.callbackNode=null,i.callbackPriority=Wn;return}var w=lc(v),E=i.callbackPriority;if(E===w&&!(Su.current!==null&&p!==MF)){p==null&&E!==Qt&&o("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}p!=null&&uG(p);var R;if(w===Qt)i.tag===nh?(Su.isBatchingLegacy!==null&&(Su.didScheduleLegacyUpdate=!0),b1e(Yj.bind(null,i))):GW(Yj.bind(null,i)),Su.current!==null?Su.current.push(rh):Cwe(function(){(Fn&(Pa|Il))===ta&&rh()}),R=null;else{var F;switch(lE(v)){case $a:F=Op;break;case bl:F=sc;break;case ao:F=au;break;case io:F=ff;break;default:F=au;break}R=zF(F,Kj.bind(null,i))}i.callbackPriority=w,i.callbackNode=R}function Kj(i,l){if(uSe(),_1=gr,YN=We,(Fn&(Pa|Il))!==ta)throw new Error("Should not already be working.");var p=i.callbackNode,v=Bf();if(v&&i.callbackNode!==p)return null;var w=uv(i,i===Di?na:We);if(w===We)return null;var E=!dv(i,w)&&!eE(i,w)&&!l,R=E?tTe(i,w):JN(i,w);if(R!==Mf){if(R===Em){var F=fv(i);F!==We&&(w=F,R=DF(i,F))}if(R===T1){var M=E1;throw $m(i,We),ph(i,w),po(i,Ss()),M}if(R===CF)ph(i,w);else{var j=!dv(i,w),q=i.current.alternate;if(j&&!qCe(q)){if(R=JN(i,w),R===Em){var he=fv(i);he!==We&&(w=he,R=DF(i,he))}if(R===T1){var fe=E1;throw $m(i,We),ph(i,w),po(i,Ss()),fe}}i.finishedWork=q,i.finishedLanes=w,GCe(i,R,w)}}return po(i,Ss()),i.callbackNode===p?Kj.bind(null,i):null}function DF(i,l){var p=$1;if(mv(i)){var v=$m(i,l);v.flags|=ga,d1e(i.containerInfo)}var w=JN(i,l);if(w!==Em){var E=ho;ho=p,E!==null&&Xj(E)}return w}function Xj(i){ho===null?ho=i:ho.push.apply(ho,i)}function GCe(i,l,p){switch(l){case Mf:case T1:throw new Error("Root did not complete. This is a bug in React.");case Em:{Im(i,ho,zf);break}case HN:{if(ph(i,p),Sf(p)&&!cG()){var v=kF+Hj-Ss();if(v>10){var w=uv(i,We);if(w!==We)break;var E=i.suspendedLanes;if(!Cf(E,p)){_i(),hv(i,E);break}i.timeoutHandle=$A(Im.bind(null,i,ho,zf),v);break}}Im(i,ho,zf);break}case k1:{if(ph(i,p),vw(p))break;if(!cG()){var R=Mo(i,p),F=R,M=Ss()-F,j=dTe(M)-M;if(j>10){i.timeoutHandle=$A(Im.bind(null,i,ho,zf),j);break}}Im(i,ho,zf);break}case Wj:{Im(i,ho,zf);break}default:throw new Error("Unknown root exit status.")}}function qCe(i){for(var l=i;;){if(l.flags&Pd){var p=l.updateQueue;if(p!==null){var v=p.stores;if(v!==null)for(var w=0;w<v.length;w++){var E=v[w],R=E.getSnapshot,F=E.value;try{if(!qe(R(),F))return!1}catch{return!1}}}}var M=l.child;if(l.subtreeFlags&Pd&&M!==null){M.return=l,l=M;continue}if(l===i)return!0;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}return!0}function ph(i,l){l=Xp(l,GN),l=Xp(l,N1),sE(i,l)}function Yj(i){if(cSe(),(Fn&(Pa|Il))!==ta)throw new Error("Should not already be working.");Bf();var l=uv(i,We);if(!ai(l,Qt))return po(i,Ss()),null;var p=JN(i,l);if(i.tag!==nh&&p===Em){var v=fv(i);v!==We&&(l=v,p=DF(i,v))}if(p===T1){var w=E1;throw $m(i,We),ph(i,l),po(i,Ss()),w}if(p===CF)throw new Error("Root did not complete. This is a bug in React.");var E=i.current.alternate;return i.finishedWork=E,i.finishedLanes=l,Im(i,ho,zf),po(i,Ss()),null}function KCe(i,l){l!==We&&(pv(i,pn(l,Qt)),po(i,Ss()),(Fn&(Pa|Il))===ta&&(I1(),rh()))}function _F(i,l){var p=Fn;Fn|=Uj;try{return i(l)}finally{Fn=p,Fn===ta&&!Su.isBatchingLegacy&&(I1(),qW())}}function XCe(i,l,p,v,w){var E=oo(),R=za.transition;try{return za.transition=null,fs($a),i(l,p,v,w)}finally{fs(E),za.transition=R,Fn===ta&&I1()}}function Pf(i){dh!==null&&dh.tag===nh&&(Fn&(Pa|Il))===ta&&Bf();var l=Fn;Fn|=Uj;var p=za.transition,v=oo();try{return za.transition=null,fs($a),i?i():void 0}finally{fs(v),za.transition=p,Fn=l,(Fn&(Pa|Il))===ta&&rh()}}function Qj(){return(Fn&(Pa|Il))!==ta}function ZN(i,l){ci(TF,Tc,i),Tc=pn(Tc,l)}function AF(i){Tc=TF.current,ui(TF,i)}function $m(i,l){i.finishedWork=null,i.finishedLanes=We;var p=i.timeoutHandle;if(p!==IA&&(i.timeoutHandle=IA,Swe(p)),Jr!==null)for(var v=Jr.return;v!==null;){var w=v.alternate;Ej(w,v),v=v.return}Di=i;var E=Rm(i.current,null);return Jr=E,na=Tc=l,ra=Mf,E1=null,jN=We,N1=We,GN=We,$1=null,ho=null,H1e(),pu.discardPendingWarnings(),E}function Zj(i,l){do{var p=Jr;try{if(lN(),SH(),kr(),SF.current=null,p===null||p.return===null){ra=T1,E1=l,Jr=null;return}if(Ae&&p.mode&qn&&MN(p,!0),De)if(Ni(),l!==null&&typeof l=="object"&&typeof l.then=="function"){var v=l;vl(p,v,na)}else Lp(p,l,na);bSe(i,p.return,p,l,na),nG(p)}catch(w){l=w,Jr===p&&p!==null?(p=p.return,Jr=p):p=Jr;continue}return}while(!0)}function Jj(){var i=wF.current;return wF.current=_N,i===null?_N:i}function eG(i){wF.current=i}function YCe(){kF=Ss()}function A1(i){jN=pn(i,jN)}function QCe(){ra===Mf&&(ra=HN)}function OF(){(ra===Mf||ra===HN||ra===Em)&&(ra=k1),Di!==null&&(qp(jN)||qp(N1))&&ph(Di,na)}function ZCe(i){ra!==k1&&(ra=Em),$1===null?$1=[i]:$1.push(i)}function JCe(){return ra===Mf}function JN(i,l){var p=Fn;Fn|=Pa;var v=Jj();if(Di!==i||na!==l){if(ri){var w=i.memoizedUpdaters;w.size>0&&(O1(i,na),w.clear()),aE(i,l)}zf=Tw(),$m(i,l)}mf(l);do try{eTe();break}catch(E){Zj(i,E)}while(!0);if(lN(),Fn=p,eG(v),Jr!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return jy(),Di=null,na=We,ra}function eTe(){for(;Jr!==null;)tG(Jr)}function tTe(i,l){var p=Fn;Fn|=Pa;var v=Jj();if(Di!==i||na!==l){if(ri){var w=i.memoizedUpdaters;w.size>0&&(O1(i,na),w.clear()),aE(i,l)}zf=Tw(),I1(),$m(i,l)}mf(l);do try{nTe();break}catch(E){Zj(i,E)}while(!0);return lN(),eG(v),Fn=p,Jr!==null?(Yk(),Mf):(jy(),Di=null,na=We,ra)}function nTe(){for(;Jr!==null&&!rw();)tG(Jr)}function tG(i){var l=i.alternate;or(i);var p;(i.mode&qn)!==zt?(MO(i),p=FF(l,i,Tc),MN(i,!0)):p=FF(l,i,Tc),kr(),i.memoizedProps=i.pendingProps,p===null?nG(i):Jr=p,SF.current=null}function nG(i){var l=i;do{var p=l.alternate,v=l.return;if((l.flags&Ap)===Mt){or(l);var w=void 0;if((l.mode&qn)===zt?w=kj(p,l,Tc):(MO(l),w=kj(p,l,Tc),MN(l,!1)),kr(),w!==null){Jr=w;return}}else{var E=QSe(p,l);if(E!==null){E.flags&=Hk,Jr=E;return}if((l.mode&qn)!==zt){MN(l,!1);for(var R=l.actualDuration,F=l.child;F!==null;)R+=F.actualDuration,F=F.sibling;l.actualDuration=R}if(v!==null)v.flags|=Ap,v.subtreeFlags=Mt,v.deletions=null;else{ra=CF,Jr=null;return}}var M=l.sibling;if(M!==null){Jr=M;return}l=v,Jr=l}while(l!==null);ra===Mf&&(ra=Wj)}function Im(i,l,p){var v=oo(),w=za.transition;try{za.transition=null,fs($a),rTe(i,l,p,v)}finally{za.transition=w,fs(v)}return null}function rTe(i,l,p,v){do Bf();while(dh!==null);if(pTe(),(Fn&(Pa|Il))!==ta)throw new Error("Should not already be working.");var w=i.finishedWork,E=i.finishedLanes;if(uw(E),w===null)return cw(),null;if(E===We&&o("root.finishedLanes should not be empty during a commit. This is a bug in React."),i.finishedWork=null,i.finishedLanes=We,w===i.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");i.callbackNode=null,i.callbackPriority=Wn;var R=pn(w.lanes,w.childLanes);Sw(i,R),i===Di&&(Di=null,Jr=null,na=We),((w.subtreeFlags&su)!==Mt||(w.flags&su)!==Mt)&&(Nm||(Nm=!0,$F=p,zF(au,function(){return Bf(),null})));var F=(w.subtreeFlags&(tc|nc|rc|su))!==Mt,M=(w.flags&(tc|nc|rc|su))!==Mt;if(F||M){var j=za.transition;za.transition=null;var q=oo();fs($a);var he=Fn;Fn|=Il,SF.current=null,nCe(i,w),qH(),gCe(i,w,E),mwe(i.containerInfo),i.current=w,Mp(E),yCe(w,i,E),zp(),sw(),Fn=he,fs(q),za.transition=j}else i.current=w,qH();var fe=Nm;if(Nm?(Nm=!1,dh=i,R1=E):(tb=0,XN=null),R=i.pendingLanes,R===We&&(eb=null),fe||iG(i.current,!1),iw(w.stateNode,v),ri&&i.memoizedUpdaters.clear(),LCe(),po(i,Ss()),l!==null)for(var ke=i.onRecoverableError,Ie=0;Ie<l.length;Ie++){var Le=l[Ie],dt=Le.stack,Wt=Le.digest;ke(Le.value,{componentStack:dt,digest:Wt})}if(qN){qN=!1;var _t=EF;throw EF=null,_t}return ai(R1,Qt)&&i.tag!==nh&&Bf(),R=i.pendingLanes,ai(R,Qt)?(lSe(),i===IF?D1++:(D1=0,IF=i)):D1=0,rh(),cw(),null}function Bf(){if(dh!==null){var i=lE(R1),l=Jp(ao,i),p=za.transition,v=oo();try{return za.transition=null,fs(l),aTe()}finally{fs(v),za.transition=p}}return!1}function sTe(i){NF.push(i),Nm||(Nm=!0,zF(au,function(){return Bf(),null}))}function aTe(){if(dh===null)return!1;var i=$F;$F=null;var l=dh,p=R1;if(dh=null,R1=We,(Fn&(Pa|Il))!==ta)throw new Error("Cannot flush passive effects while already rendering.");RF=!0,KN=!1,pf(p);var v=Fn;Fn|=Il,TCe(l.current),xCe(l,l.current,p,i);{var w=NF;NF=[];for(var E=0;E<w.length;E++){var R=w[E];iCe(l,R)}}hw(),iG(l.current,!0),Fn=v,rh(),KN?l===XN?tb++:(tb=0,XN=l):tb=0,RF=!1,KN=!1,ow(l);{var F=l.current.stateNode;F.effectDuration=0,F.passiveEffectDuration=0}return!0}function rG(i){return eb!==null&&eb.has(i)}function iTe(i){eb===null?eb=new Set([i]):eb.add(i)}function oTe(i){qN||(qN=!0,EF=i)}var lTe=oTe;function sG(i,l,p){var v=Tm(p,l),w=tj(i,v,Qt),E=ah(i,w,Qt),R=_i();E!==null&&(Hd(E,Qt,R),po(E,R))}function Er(i,l,p){if(JSe(p),F1(!1),i.tag===g){sG(i,i,p);return}var v=null;for(v=l;v!==null;){if(v.tag===g){sG(v,i,p);return}else if(v.tag===d){var w=v.type,E=v.stateNode;if(typeof w.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&!rG(E)){var R=Tm(p,i),F=tF(v,R,Qt),M=ah(v,F,Qt),j=_i();M!==null&&(Hd(M,Qt,j),po(M,j));return}}v=v.return}o(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,p)}function uTe(i,l,p){var v=i.pingCache;v!==null&&v.delete(l);var w=_i();hv(i,p),vTe(i),Di===i&&Cf(na,p)&&(ra===k1||ra===HN&&Sf(na)&&Ss()-kF<Hj?$m(i,We):GN=pn(GN,p)),po(i,w)}function aG(i,l){l===Wn&&(l=WCe(i));var p=_i(),v=co(i,l);v!==null&&(Hd(v,l,p),po(v,p))}function cTe(i){var l=i.memoizedState,p=Wn;l!==null&&(p=l.retryLane),aG(i,p)}function fTe(i,l){var p=Wn,v;switch(i.tag){case L:v=i.stateNode;var w=i.memoizedState;w!==null&&(p=w.retryLane);break;case re:v=i.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}v!==null&&v.delete(l),aG(i,p)}function dTe(i){return i<120?120:i<480?480:i<1080?1080:i<1920?1920:i<3e3?3e3:i<4320?4320:PCe(i/1960)*1960}function hTe(){if(D1>VCe)throw D1=0,IF=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");tb>UCe&&(tb=0,XN=null,o("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function pTe(){pu.flushLegacyContextWarning(),pu.flushPendingUnsafeLifecycleWarnings()}function iG(i,l){or(i),e$(i,ec,ACe),l&&e$(i,ml,OCe),e$(i,ec,DCe),l&&e$(i,ml,_Ce),kr()}function e$(i,l,p){for(var v=i,w=null;v!==null;){var E=v.subtreeFlags&l;v!==w&&v.child!==null&&E!==Mt?v=v.child:((v.flags&l)!==Mt&&p(v),v.sibling!==null?v=v.sibling:v=w=v.return)}}var t$=null;function oG(i){{if((Fn&Pa)!==ta||!(i.mode&xn))return;var l=i.tag;if(l!==m&&l!==g&&l!==d&&l!==c&&l!==A&&l!==P&&l!==W)return;var p=sn(i)||"ReactComponent";if(t$!==null){if(t$.has(p))return;t$.add(p)}else t$=new Set([p]);var v=Gs;try{or(i),o("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{v?or(i):kr()}}}var FF;{var mTe=null;FF=function(i,l,p){var v=mG(mTe,l);try{return xj(i,l,p)}catch(E){if(N1e()||E!==null&&typeof E=="object"&&typeof E.then=="function")throw E;if(lN(),SH(),Ej(i,l),mG(l,v),l.mode&qn&&MO(l),Ju(null,xj,null,i,l,p),nu()){var w=_p();typeof w=="object"&&w!==null&&w._suppressLogging&&typeof E=="object"&&E!==null&&!E._suppressLogging&&(E._suppressLogging=!0)}throw E}}}var lG=!1,LF;LF=new Set;function gTe(i){if(ll&&!aSe())switch(i.tag){case c:case A:case W:{var l=Jr&&sn(Jr)||"Unknown",p=l;if(!LF.has(p)){LF.add(p);var v=sn(i)||"Unknown";o("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",v,l,l)}break}case d:{lG||(o("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),lG=!0);break}}}function O1(i,l){if(ri){var p=i.memoizedUpdaters;p.forEach(function(v){Qp(i,v,l)})}}var MF={};function zF(i,l){{var p=Su.current;return p!==null?(p.push(l),MF):nw(i,l)}}function uG(i){if(i!==MF)return Gk(i)}function cG(){return Su.current!==null}function yTe(i){{if(i.mode&xn){if(!Vj())return}else if(!zCe()||Fn!==ta||i.tag!==c&&i.tag!==A&&i.tag!==W)return;if(Su.current===null){var l=Gs;try{or(i),o(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,sn(i))}finally{l?or(i):kr()}}}}function vTe(i){i.tag!==nh&&Vj()&&Su.current===null&&o(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function F1(i){qj=i}var Rl=null,nb=null,bTe=function(i){Rl=i};function rb(i){{if(Rl===null)return i;var l=Rl(i);return l===void 0?i:l.current}}function PF(i){return rb(i)}function BF(i){{if(Rl===null)return i;var l=Rl(i);if(l===void 0){if(i!=null&&typeof i.render=="function"){var p=rb(i.render);if(i.render!==p){var v={$$typeof:Ue,render:p};return i.displayName!==void 0&&(v.displayName=i.displayName),v}}return i}return l.current}}function fG(i,l){{if(Rl===null)return!1;var p=i.elementType,v=l.type,w=!1,E=typeof v=="object"&&v!==null?v.$$typeof:null;switch(i.tag){case d:{typeof v=="function"&&(w=!0);break}case c:{(typeof v=="function"||E===an)&&(w=!0);break}case A:{(E===Ue||E===an)&&(w=!0);break}case P:case W:{(E===fn||E===an)&&(w=!0);break}default:return!1}if(w){var R=Rl(p);if(R!==void 0&&R===Rl(v))return!0}return!1}}function dG(i){{if(Rl===null||typeof WeakSet!="function")return;nb===null&&(nb=new WeakSet),nb.add(i)}}var xTe=function(i,l){{if(Rl===null)return;var p=l.staleFamilies,v=l.updatedFamilies;Bf(),Pf(function(){VF(i.current,v,p)})}},wTe=function(i,l){{if(i.context!==Bo)return;Bf(),Pf(function(){L1(l,i,null,null)})}};function VF(i,l,p){{var v=i.alternate,w=i.child,E=i.sibling,R=i.tag,F=i.type,M=null;switch(R){case c:case W:case d:M=F;break;case A:M=F.render;break}if(Rl===null)throw new Error("Expected resolveFamily to be set during hot reload.");var j=!1,q=!1;if(M!==null){var he=Rl(M);he!==void 0&&(p.has(he)?q=!0:l.has(he)&&(R===d?q=!0:j=!0))}if(nb!==null&&(nb.has(i)||v!==null&&nb.has(v))&&(q=!0),q&&(i._debugNeedsRemount=!0),q||j){var fe=co(i,Qt);fe!==null&&sa(fe,i,Qt,gr)}w!==null&&!q&&VF(w,l,p),E!==null&&VF(E,l,p)}}var STe=function(i,l){{var p=new Set,v=new Set(l.map(function(w){return w.current}));return UF(i.current,v,p),p}};function UF(i,l,p){{var v=i.child,w=i.sibling,E=i.tag,R=i.type,F=null;switch(E){case c:case W:case d:F=R;break;case A:F=R.render;break}var M=!1;F!==null&&l.has(F)&&(M=!0),M?CTe(i,p):v!==null&&UF(v,l,p),w!==null&&UF(w,l,p)}}function CTe(i,l){{var p=TTe(i,l);if(p)return;for(var v=i;;){switch(v.tag){case x:l.add(v.stateNode);return;case y:l.add(v.stateNode.containerInfo);return;case g:l.add(v.stateNode.containerInfo);return}if(v.return===null)throw new Error("Expected to reach root first.");v=v.return}}}function TTe(i,l){for(var p=i,v=!1;;){if(p.tag===x)v=!0,l.add(p.stateNode);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)return v;for(;p.sibling===null;){if(p.return===null||p.return===i)return v;p=p.return}p.sibling.return=p.return,p=p.sibling}return!1}var WF;{WF=!1;try{var hG=Object.preventExtensions({})}catch{WF=!0}}function kTe(i,l,p,v){this.tag=i,this.key=p,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=l,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=v,this.flags=Mt,this.subtreeFlags=Mt,this.deletions=null,this.lanes=We,this.childLanes=We,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!WF&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var Vo=function(i,l,p,v){return new kTe(i,l,p,v)};function HF(i){var l=i.prototype;return!!(l&&l.isReactComponent)}function ETe(i){return typeof i=="function"&&!HF(i)&&i.defaultProps===void 0}function NTe(i){if(typeof i=="function")return HF(i)?d:c;if(i!=null){var l=i.$$typeof;if(l===Ue)return A;if(l===fn)return P}return m}function Rm(i,l){var p=i.alternate;p===null?(p=Vo(i.tag,l,i.key,i.mode),p.elementType=i.elementType,p.type=i.type,p.stateNode=i.stateNode,p._debugSource=i._debugSource,p._debugOwner=i._debugOwner,p._debugHookTypes=i._debugHookTypes,p.alternate=i,i.alternate=p):(p.pendingProps=l,p.type=i.type,p.flags=Mt,p.subtreeFlags=Mt,p.deletions=null,p.actualDuration=0,p.actualStartTime=-1),p.flags=i.flags&ls,p.childLanes=i.childLanes,p.lanes=i.lanes,p.child=i.child,p.memoizedProps=i.memoizedProps,p.memoizedState=i.memoizedState,p.updateQueue=i.updateQueue;var v=i.dependencies;switch(p.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},p.sibling=i.sibling,p.index=i.index,p.ref=i.ref,p.selfBaseDuration=i.selfBaseDuration,p.treeBaseDuration=i.treeBaseDuration,p._debugNeedsRemount=i._debugNeedsRemount,p.tag){case m:case c:case W:p.type=rb(i.type);break;case d:p.type=PF(i.type);break;case A:p.type=BF(i.type);break}return p}function $Te(i,l){i.flags&=ls|Lr;var p=i.alternate;if(p===null)i.childLanes=We,i.lanes=l,i.child=null,i.subtreeFlags=Mt,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null,i.selfBaseDuration=0,i.treeBaseDuration=0;else{i.childLanes=p.childLanes,i.lanes=p.lanes,i.child=p.child,i.subtreeFlags=Mt,i.deletions=null,i.memoizedProps=p.memoizedProps,i.memoizedState=p.memoizedState,i.updateQueue=p.updateQueue,i.type=p.type;var v=p.dependencies;i.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},i.selfBaseDuration=p.selfBaseDuration,i.treeBaseDuration=p.treeBaseDuration}return i}function ITe(i,l,p){var v;return i===ZE?(v=xn,l===!0&&(v|=cr,v|=Kn)):v=zt,ri&&(v|=qn),Vo(g,null,null,v)}function jF(i,l,p,v,w,E){var R=m,F=i;if(typeof i=="function")HF(i)?(R=d,F=PF(F)):F=rb(F);else if(typeof i=="string")R=x;else e:switch(i){case sl:return mh(p.children,w,E,l);case Eo:R=C,w|=cr,(w&xn)!==zt&&(w|=Kn);break;case al:return RTe(p,w,E,l);case ut:return DTe(p,w,E,l);case St:return _Te(p,w,E,l);case qr:return pG(p,w,E,l);case vr:case kn:case Tr:case js:case bn:default:{if(typeof i=="object"&&i!==null)switch(i.$$typeof){case il:R=$;break e;case se:R=N;break e;case Ue:R=A,F=BF(F);break e;case fn:R=P;break e;case an:R=B,F=null;break e}var M="";{(i===void 0||typeof i=="object"&&i!==null&&Object.keys(i).length===0)&&(M+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var j=v?sn(v):null;j&&(M+=`

Check the render method of \``+j+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(i==null?i:typeof i)+"."+M))}}var q=Vo(R,p,l,w);return q.elementType=i,q.type=F,q.lanes=E,q._debugOwner=v,q}function GF(i,l,p){var v=null;v=i._owner;var w=i.type,E=i.key,R=i.props,F=jF(w,E,R,v,l,p);return F._debugSource=i._source,F._debugOwner=i._owner,F}function mh(i,l,p,v){var w=Vo(k,i,v,l);return w.lanes=p,w}function RTe(i,l,p,v){typeof i.id!="string"&&o('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof i.id);var w=Vo(D,i,v,l|qn);return w.elementType=al,w.lanes=p,w.stateNode={effectDuration:0,passiveEffectDuration:0},w}function DTe(i,l,p,v){var w=Vo(L,i,v,l);return w.elementType=ut,w.lanes=p,w}function _Te(i,l,p,v){var w=Vo(re,i,v,l);return w.elementType=St,w.lanes=p,w}function pG(i,l,p,v){var w=Vo(ne,i,v,l);w.elementType=qr,w.lanes=p;var E={isHidden:!1};return w.stateNode=E,w}function qF(i,l,p){var v=Vo(S,i,null,l);return v.lanes=p,v}function ATe(){var i=Vo(x,null,null,zt);return i.elementType="DELETED",i}function OTe(i){var l=Vo(X,null,null,zt);return l.stateNode=i,l}function KF(i,l,p){var v=i.children!==null?i.children:[],w=Vo(y,v,i.key,l);return w.lanes=p,w.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},w}function mG(i,l){return i===null&&(i=Vo(m,null,null,zt)),i.tag=l.tag,i.key=l.key,i.elementType=l.elementType,i.type=l.type,i.stateNode=l.stateNode,i.return=l.return,i.child=l.child,i.sibling=l.sibling,i.index=l.index,i.ref=l.ref,i.pendingProps=l.pendingProps,i.memoizedProps=l.memoizedProps,i.updateQueue=l.updateQueue,i.memoizedState=l.memoizedState,i.dependencies=l.dependencies,i.mode=l.mode,i.flags=l.flags,i.subtreeFlags=l.subtreeFlags,i.deletions=l.deletions,i.lanes=l.lanes,i.childLanes=l.childLanes,i.alternate=l.alternate,i.actualDuration=l.actualDuration,i.actualStartTime=l.actualStartTime,i.selfBaseDuration=l.selfBaseDuration,i.treeBaseDuration=l.treeBaseDuration,i._debugSource=l._debugSource,i._debugOwner=l._debugOwner,i._debugNeedsRemount=l._debugNeedsRemount,i._debugHookTypes=l._debugHookTypes,i}function FTe(i,l,p,v,w){this.tag=l,this.containerInfo=i,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=IA,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=Wn,this.eventTimes=Yp(We),this.expirationTimes=Yp(gr),this.pendingLanes=We,this.suspendedLanes=We,this.pingedLanes=We,this.expiredLanes=We,this.mutableReadLanes=We,this.finishedLanes=We,this.entangledLanes=We,this.entanglements=Yp(We),this.identifierPrefix=v,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var E=this.pendingUpdatersLaneMap=[],R=0;R<gf;R++)E.push(new Set)}switch(l){case ZE:this._debugRootType=p?"hydrateRoot()":"createRoot()";break;case nh:this._debugRootType=p?"hydrate()":"render()";break}}function gG(i,l,p,v,w,E,R,F,M,j){var q=new FTe(i,l,p,F,M),he=ITe(l,E);q.current=he,he.stateNode=q;{var fe={element:v,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null};he.memoizedState=fe}return oO(he),q}var XF="18.3.1";function LTe(i,l,p){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return Je(v),{$$typeof:Hs,key:v==null?null:""+v,children:i,containerInfo:l,implementation:p}}var YF,QF;YF=!1,QF={};function yG(i){if(!i)return Bo;var l=zd(i),p=v1e(l);if(l.tag===d){var v=l.type;if(yc(v))return HW(l,v,p)}return p}function MTe(i,l){{var p=zd(i);if(p===void 0){if(typeof i.render=="function")throw new Error("Unable to find node on an unmounted component.");var v=Object.keys(i).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+v)}var w=ti(p);if(w===null)return null;if(w.mode&cr){var E=sn(p)||"Component";if(!QF[E]){QF[E]=!0;var R=Gs;try{or(w),p.mode&cr?o("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",l,l,E):o("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",l,l,E)}finally{R?or(R):kr()}}}return w.stateNode}}function vG(i,l,p,v,w,E,R,F){var M=!1,j=null;return gG(i,l,M,j,p,v,w,E,R)}function bG(i,l,p,v,w,E,R,F,M,j){var q=!0,he=gG(p,v,q,i,w,E,R,F,M);he.context=yG(null);var fe=he.current,ke=_i(),Ie=hh(fe),Le=Ff(ke,Ie);return Le.callback=l??null,ah(fe,Le,Ie),HCe(he,Ie,ke),he}function L1(i,l,p,v){aw(l,i);var w=l.current,E=_i(),R=hh(w);zr(R);var F=yG(p);l.context===null?l.context=F:l.pendingContext=F,ll&&Gs!==null&&!YF&&(YF=!0,o(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,sn(Gs)||"Unknown"));var M=Ff(E,R);M.payload={element:i},v=v===void 0?null:v,v!==null&&(typeof v!="function"&&o("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",v),M.callback=v);var j=ah(w,M,R);return j!==null&&(sa(j,w,R,E),hN(j,w,R)),R}function n$(i){var l=i.current;if(!l.child)return null;switch(l.child.tag){case x:return l.child.stateNode;default:return l.child.stateNode}}function zTe(i){switch(i.tag){case g:{var l=i.stateNode;if(mv(l)){var p=Zk(l);KCe(l,p)}break}case L:{Pf(function(){var w=co(i,Qt);if(w!==null){var E=_i();sa(w,i,Qt,E)}});var v=Qt;ZF(i,v);break}}}function xG(i,l){var p=i.memoizedState;p!==null&&p.dehydrated!==null&&(p.retryLane=rE(p.retryLane,l))}function ZF(i,l){xG(i,l);var p=i.alternate;p&&xG(p,l)}function PTe(i){if(i.tag===L){var l=Hp,p=co(i,l);if(p!==null){var v=_i();sa(p,i,l,v)}ZF(i,l)}}function BTe(i){if(i.tag===L){var l=hh(i),p=co(i,l);if(p!==null){var v=_i();sa(p,i,l,v)}ZF(i,l)}}function wG(i){var l=Rr(i);return l===null?null:l.stateNode}var SG=function(i){return null};function VTe(i){return SG(i)}var CG=function(i){return!1};function UTe(i){return CG(i)}var TG=null,kG=null,EG=null,NG=null,$G=null,IG=null,RG=null,DG=null,_G=null;{var AG=function(i,l,p){var v=l[p],w=vn(i)?i.slice():mn({},i);return p+1===l.length?(vn(w)?w.splice(v,1):delete w[v],w):(w[v]=AG(i[v],l,p+1),w)},OG=function(i,l){return AG(i,l,0)},FG=function(i,l,p,v){var w=l[v],E=vn(i)?i.slice():mn({},i);if(v+1===l.length){var R=p[v];E[R]=E[w],vn(E)?E.splice(w,1):delete E[w]}else E[w]=FG(i[w],l,p,v+1);return E},LG=function(i,l,p){if(l.length!==p.length){a("copyWithRename() expects paths of the same length");return}else for(var v=0;v<p.length-1;v++)if(l[v]!==p[v]){a("copyWithRename() expects paths to be the same except for the deepest key");return}return FG(i,l,p,0)},MG=function(i,l,p,v){if(p>=l.length)return v;var w=l[p],E=vn(i)?i.slice():mn({},i);return E[w]=MG(i[w],l,p+1,v),E},zG=function(i,l,p){return MG(i,l,0,p)},JF=function(i,l){for(var p=i.memoizedState;p!==null&&l>0;)p=p.next,l--;return p};TG=function(i,l,p,v){var w=JF(i,l);if(w!==null){var E=zG(w.memoizedState,p,v);w.memoizedState=E,w.baseState=E,i.memoizedProps=mn({},i.memoizedProps);var R=co(i,Qt);R!==null&&sa(R,i,Qt,gr)}},kG=function(i,l,p){var v=JF(i,l);if(v!==null){var w=OG(v.memoizedState,p);v.memoizedState=w,v.baseState=w,i.memoizedProps=mn({},i.memoizedProps);var E=co(i,Qt);E!==null&&sa(E,i,Qt,gr)}},EG=function(i,l,p,v){var w=JF(i,l);if(w!==null){var E=LG(w.memoizedState,p,v);w.memoizedState=E,w.baseState=E,i.memoizedProps=mn({},i.memoizedProps);var R=co(i,Qt);R!==null&&sa(R,i,Qt,gr)}},NG=function(i,l,p){i.pendingProps=zG(i.memoizedProps,l,p),i.alternate&&(i.alternate.pendingProps=i.pendingProps);var v=co(i,Qt);v!==null&&sa(v,i,Qt,gr)},$G=function(i,l){i.pendingProps=OG(i.memoizedProps,l),i.alternate&&(i.alternate.pendingProps=i.pendingProps);var p=co(i,Qt);p!==null&&sa(p,i,Qt,gr)},IG=function(i,l,p){i.pendingProps=LG(i.memoizedProps,l,p),i.alternate&&(i.alternate.pendingProps=i.pendingProps);var v=co(i,Qt);v!==null&&sa(v,i,Qt,gr)},RG=function(i){var l=co(i,Qt);l!==null&&sa(l,i,Qt,gr)},DG=function(i){SG=i},_G=function(i){CG=i}}function WTe(i){var l=ti(i);return l===null?null:l.stateNode}function HTe(i){return null}function jTe(){return Gs}function GTe(i){var l=i.findFiberByHostInstance,p=t.ReactCurrentDispatcher;return Vd({bundleType:i.bundleType,version:i.version,rendererPackageName:i.rendererPackageName,rendererConfig:i.rendererConfig,overrideHookState:TG,overrideHookStateDeletePath:kG,overrideHookStateRenamePath:EG,overrideProps:NG,overridePropsDeletePath:$G,overridePropsRenamePath:IG,setErrorHandler:DG,setSuspenseHandler:_G,scheduleUpdate:RG,currentDispatcherRef:p,findHostInstanceByFiber:WTe,findFiberByHostInstance:l||HTe,findHostInstancesForRefresh:STe,scheduleRefresh:xTe,scheduleRoot:wTe,setRefreshHandler:bTe,getCurrentFiber:jTe,reconcilerVersion:XF})}var PG=typeof reportError=="function"?reportError:function(i){console.error(i)};function eL(i){this._internalRoot=i}r$.prototype.render=eL.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?o("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):s$(arguments[1])?o("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&o("You passed a second argument to root.render(...) but it only accepts one argument.");var p=l.containerInfo;if(p.nodeType!==is){var v=wG(l.current);v&&v.parentNode!==p&&o("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}L1(i,l,null,null)},r$.prototype.unmount=eL.prototype.unmount=function(){typeof arguments[0]=="function"&&o("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;Qj()&&o("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),Pf(function(){L1(null,i,null,null)}),PW(l)}};function qTe(i,l){if(!s$(i))throw new Error("createRoot(...): Target container is not a DOM element.");BG(i);var p=!1,v=!1,w="",E=PG;l!=null&&(l.hydrate?a("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof l=="object"&&l!==null&&l.$$typeof===Ta&&o(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(w=l.identifierPrefix),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.transitionCallbacks!==void 0&&l.transitionCallbacks);var R=vG(i,ZE,null,p,v,w,E);jE(R.current,i);var F=i.nodeType===is?i.parentNode:i;return Uw(F),new eL(R)}function r$(i){this._internalRoot=i}function KTe(i){i&&hE(i)}r$.prototype.unstable_scheduleHydration=KTe;function XTe(i,l,p){if(!s$(i))throw new Error("hydrateRoot(...): Target container is not a DOM element.");BG(i),l===void 0&&o("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var v=p??null,w=p!=null&&p.hydratedSources||null,E=!1,R=!1,F="",M=PG;p!=null&&(p.unstable_strictMode===!0&&(E=!0),p.identifierPrefix!==void 0&&(F=p.identifierPrefix),p.onRecoverableError!==void 0&&(M=p.onRecoverableError));var j=bG(l,null,i,ZE,v,E,R,F,M);if(jE(j.current,i),Uw(i),w)for(var q=0;q<w.length;q++){var he=w[q];J1e(j,he)}return new r$(j)}function s$(i){return!!(i&&(i.nodeType===Za||i.nodeType===tu||i.nodeType===H0))}function M1(i){return!!(i&&(i.nodeType===Za||i.nodeType===tu||i.nodeType===H0||i.nodeType===is&&i.nodeValue===" react-mount-point-unstable "))}function BG(i){i.nodeType===Za&&i.tagName&&i.tagName.toUpperCase()==="BODY"&&o("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),Jw(i)&&(i._reactRootContainer?o("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):o("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var YTe=t.ReactCurrentOwner,VG;VG=function(i){if(i._reactRootContainer&&i.nodeType!==is){var l=wG(i._reactRootContainer.current);l&&l.parentNode!==i&&o("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var p=!!i._reactRootContainer,v=tL(i),w=!!(v&&eh(v));w&&!p&&o("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),i.nodeType===Za&&i.tagName&&i.tagName.toUpperCase()==="BODY"&&o("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function tL(i){return i?i.nodeType===tu?i.documentElement:i.firstChild:null}function UG(){}function QTe(i,l,p,v,w){if(w){if(typeof v=="function"){var E=v;v=function(){var fe=n$(R);E.call(fe)}}var R=bG(l,v,i,nh,null,!1,!1,"",UG);i._reactRootContainer=R,jE(R.current,i);var F=i.nodeType===is?i.parentNode:i;return Uw(F),Pf(),R}else{for(var M;M=i.lastChild;)i.removeChild(M);if(typeof v=="function"){var j=v;v=function(){var fe=n$(q);j.call(fe)}}var q=vG(i,nh,null,!1,!1,"",UG);i._reactRootContainer=q,jE(q.current,i);var he=i.nodeType===is?i.parentNode:i;return Uw(he),Pf(function(){L1(l,q,p,v)}),q}}function ZTe(i,l){i!==null&&typeof i!="function"&&o("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",l,i)}function a$(i,l,p,v,w){VG(p),ZTe(w===void 0?null:w,"render");var E=p._reactRootContainer,R;if(!E)R=QTe(p,l,i,w,v);else{if(R=E,typeof w=="function"){var F=w;w=function(){var M=n$(R);F.call(M)}}L1(l,R,i,w)}return n$(R)}var WG=!1;function JTe(i){{WG||(WG=!0,o("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var l=YTe.current;if(l!==null&&l.stateNode!==null){var p=l.stateNode._warnedAboutRefsInRender;p||o("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",Mn(l.type)||"A component"),l.stateNode._warnedAboutRefsInRender=!0}}return i==null?null:i.nodeType===Za?i:MTe(i,"findDOMNode")}function eke(i,l,p){if(o("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!M1(l))throw new Error("Target container is not a DOM element.");{var v=Jw(l)&&l._reactRootContainer===void 0;v&&o("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return a$(null,i,l,!0,p)}function tke(i,l,p){if(o("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!M1(l))throw new Error("Target container is not a DOM element.");{var v=Jw(l)&&l._reactRootContainer===void 0;v&&o("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return a$(null,i,l,!1,p)}function nke(i,l,p,v){if(o("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!M1(p))throw new Error("Target container is not a DOM element.");if(i==null||!Z_(i))throw new Error("parentComponent must be a valid React Component");return a$(i,l,p,!1,v)}var HG=!1;function rke(i){if(HG||(HG=!0,o("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!M1(i))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var l=Jw(i)&&i._reactRootContainer===void 0;l&&o("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(i._reactRootContainer){{var p=tL(i),v=p&&!eh(p);v&&o("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return Pf(function(){a$(null,null,i,!1,function(){i._reactRootContainer=null,PW(i)})}),!0}else{{var w=tL(i),E=!!(w&&eh(w)),R=i.nodeType===Za&&M1(i.parentNode)&&!!i.parentNode._reactRootContainer;E&&o("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",R?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}va(zTe),jd(PTe),uE(BTe),tm(oo),kw(iE),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&o("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),_y(awe),Q_(_F,XCe,Pf);function ske(i,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!s$(l))throw new Error("Target container is not a DOM element.");return LTe(i,l,null,p)}function ake(i,l,p,v){return nke(i,l,p,v)}var nL={usingClientEntryPoint:!1,Events:[eh,Ov,GE,Od,Ay,_F]};function ike(i,l){return nL.usingClientEntryPoint||o('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),qTe(i,l)}function oke(i,l,p){return nL.usingClientEntryPoint||o('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),XTe(i,l,p)}function lke(i){return Qj()&&o("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),Pf(i)}var uke=GTe({findFiberByHostInstance:mm,bundleType:1,version:XF,rendererPackageName:"react-dom"});if(!uke&&Tt&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var jG=window.location.protocol;/^(https?|file):$/.test(jG)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(jG==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}Li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nL,Li.createPortal=ske,Li.createRoot=ike,Li.findDOMNode=JTe,Li.flushSync=lke,Li.hydrate=eke,Li.hydrateRoot=oke,Li.render=tke,Li.unmountComponentAtNode=rke,Li.unstable_batchedUpdates=_F,Li.unstable_renderSubtreeIntoContainer=ake,Li.version=XF,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),Li}function dL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function")){if(process.env.NODE_ENV!=="production")throw new Error("^_^");try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dL)}catch(n){console.error(n)}}}process.env.NODE_ENV==="production"?(dL(),i$.exports=QG()):i$.exports=ZG();var hL=i$.exports,B1,V1=hL;if(process.env.NODE_ENV==="production")B1=V1.createRoot,V1.hydrateRoot;else{var pL=V1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;B1=function(n,e){pL.usingClientEntryPoint=!0;try{return V1.createRoot(n,e)}finally{pL.usingClientEntryPoint=!1}}}var f$={exports:{}},ob={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mL;function JG(){if(mL)return ob;mL=1;var n=Kt,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(u,c,d){var m,g={},y=null,x=null;d!==void 0&&(y=""+d),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(x=c.ref);for(m in c)r.call(c,m)&&!a.hasOwnProperty(m)&&(g[m]=c[m]);if(u&&u.defaultProps)for(m in c=u.defaultProps,c)g[m]===void 0&&(g[m]=c[m]);return{$$typeof:e,type:u,key:y,ref:x,props:g,_owner:s.current}}return ob.Fragment=t,ob.jsx=o,ob.jsxs=o,ob}var lb={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gL;function e6(){return gL||(gL=1,process.env.NODE_ENV!=="production"&&function(){var n=Kt,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),S=Symbol.iterator,k="@@iterator";function C(se){if(se===null||typeof se!="object")return null;var Ue=S&&se[S]||se[k];return typeof Ue=="function"?Ue:null}var N=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(se){{for(var Ue=arguments.length,ut=new Array(Ue>1?Ue-1:0),St=1;St<Ue;St++)ut[St-1]=arguments[St];A("error",se,ut)}}function A(se,Ue,ut){{var St=N.ReactDebugCurrentFrame,fn=St.getStackAddendum();fn!==""&&(Ue+="%s",ut=ut.concat([fn]));var an=ut.map(function(kn){return String(kn)});an.unshift("Warning: "+Ue),Function.prototype.apply.call(console[se],console,an)}}var D=!1,L=!1,P=!1,W=!1,B=!1,G;G=Symbol.for("react.module.reference");function X(se){return!!(typeof se=="string"||typeof se=="function"||se===r||se===a||B||se===s||se===d||se===m||W||se===x||D||L||P||typeof se=="object"&&se!==null&&(se.$$typeof===y||se.$$typeof===g||se.$$typeof===o||se.$$typeof===u||se.$$typeof===c||se.$$typeof===G||se.getModuleId!==void 0))}function re(se,Ue,ut){var St=se.displayName;if(St)return St;var fn=Ue.displayName||Ue.name||"";return fn!==""?ut+"("+fn+")":ut}function ue(se){return se.displayName||"Context"}function ne(se){if(se==null)return null;if(typeof se.tag=="number"&&$("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof se=="function")return se.displayName||se.name||null;if(typeof se=="string")return se;switch(se){case r:return"Fragment";case t:return"Portal";case a:return"Profiler";case s:return"StrictMode";case d:return"Suspense";case m:return"SuspenseList"}if(typeof se=="object")switch(se.$$typeof){case u:var Ue=se;return ue(Ue)+".Consumer";case o:var ut=se;return ue(ut._context)+".Provider";case c:return re(se,se.render,"ForwardRef");case g:var St=se.displayName||null;return St!==null?St:ne(se.type)||"Memo";case y:{var fn=se,an=fn._payload,kn=fn._init;try{return ne(kn(an))}catch{return null}}}return null}var me=Object.assign,ge=0,be,pe,te,ye,ce,K,Z;function De(){}De.__reactDisabledLog=!0;function Ae(){{if(ge===0){be=console.log,pe=console.info,te=console.warn,ye=console.error,ce=console.group,K=console.groupCollapsed,Z=console.groupEnd;var se={configurable:!0,enumerable:!0,value:De,writable:!0};Object.defineProperties(console,{info:se,log:se,warn:se,error:se,group:se,groupCollapsed:se,groupEnd:se})}ge++}}function Fe(){{if(ge--,ge===0){var se={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:me({},se,{value:be}),info:me({},se,{value:pe}),warn:me({},se,{value:te}),error:me({},se,{value:ye}),group:me({},se,{value:ce}),groupCollapsed:me({},se,{value:K}),groupEnd:me({},se,{value:Z})})}ge<0&&$("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Pe=N.ReactCurrentDispatcher,He;function Ke(se,Ue,ut){{if(He===void 0)try{throw Error()}catch(fn){var St=fn.stack.trim().match(/\n( *(at )?)/);He=St&&St[1]||""}return`
`+He+se}}var Xe=!1,ct;{var Tt=typeof WeakMap=="function"?WeakMap:Map;ct=new Tt}function tn(se,Ue){if(!se||Xe)return"";{var ut=ct.get(se);if(ut!==void 0)return ut}var St;Xe=!0;var fn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var an;an=Pe.current,Pe.current=null,Ae();try{if(Ue){var kn=function(){throw Error()};if(Object.defineProperty(kn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kn,[])}catch(dn){St=dn}Reflect.construct(se,[],kn)}else{try{kn.call()}catch(dn){St=dn}se.call(kn.prototype)}}else{try{throw Error()}catch(dn){St=dn}se()}}catch(dn){if(dn&&St&&typeof dn.stack=="string"){for(var bn=dn.stack.split(`
`),qr=St.stack.split(`
`),vr=bn.length-1,Tr=qr.length-1;vr>=1&&Tr>=0&&bn[vr]!==qr[Tr];)Tr--;for(;vr>=1&&Tr>=0;vr--,Tr--)if(bn[vr]!==qr[Tr]){if(vr!==1||Tr!==1)do if(vr--,Tr--,Tr<0||bn[vr]!==qr[Tr]){var js=`
`+bn[vr].replace(" at new "," at ");return se.displayName&&js.includes("<anonymous>")&&(js=js.replace("<anonymous>",se.displayName)),typeof se=="function"&&ct.set(se,js),js}while(vr>=1&&Tr>=0);break}}}finally{Xe=!1,Pe.current=an,Fe(),Error.prepareStackTrace=fn}var No=se?se.displayName||se.name:"",$o=No?Ke(No):"";return typeof se=="function"&&ct.set(se,$o),$o}function Xt(se,Ue,ut){return tn(se,!1)}function hn(se){var Ue=se.prototype;return!!(Ue&&Ue.isReactComponent)}function Zt(se,Ue,ut){if(se==null)return"";if(typeof se=="function")return tn(se,hn(se));if(typeof se=="string")return Ke(se);switch(se){case d:return Ke("Suspense");case m:return Ke("SuspenseList")}if(typeof se=="object")switch(se.$$typeof){case c:return Xt(se.render);case g:return Zt(se.type,Ue,ut);case y:{var St=se,fn=St._payload,an=St._init;try{return Zt(an(fn),Ue,ut)}catch{}}}return""}var Ne=Object.prototype.hasOwnProperty,Je={},ht=N.ReactDebugCurrentFrame;function Lt(se){if(se){var Ue=se._owner,ut=Zt(se.type,se._source,Ue?Ue.type:null);ht.setExtraStackFrame(ut)}else ht.setExtraStackFrame(null)}function it(se,Ue,ut,St,fn){{var an=Function.call.bind(Ne);for(var kn in se)if(an(se,kn)){var bn=void 0;try{if(typeof se[kn]!="function"){var qr=Error((St||"React class")+": "+ut+" type `"+kn+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof se[kn]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw qr.name="Invariant Violation",qr}bn=se[kn](Ue,kn,St,ut,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(vr){bn=vr}bn&&!(bn instanceof Error)&&(Lt(fn),$("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",St||"React class",ut,kn,typeof bn),Lt(null)),bn instanceof Error&&!(bn.message in Je)&&(Je[bn.message]=!0,Lt(fn),$("Failed %s type: %s",ut,bn.message),Lt(null))}}}var mt=Array.isArray;function Yt(se){return mt(se)}function jt(se){{var Ue=typeof Symbol=="function"&&Symbol.toStringTag,ut=Ue&&se[Symbol.toStringTag]||se.constructor.name||"Object";return ut}}function Tn(se){try{return nn(se),!1}catch{return!0}}function nn(se){return""+se}function Vn(se){if(Tn(se))return $("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",jt(se)),nn(se)}var tr=N.ReactCurrentOwner,Zn={key:!0,ref:!0,__self:!0,__source:!0},Ir,Ze;function pt(se){if(Ne.call(se,"ref")){var Ue=Object.getOwnPropertyDescriptor(se,"ref").get;if(Ue&&Ue.isReactWarning)return!1}return se.ref!==void 0}function Pt(se){if(Ne.call(se,"key")){var Ue=Object.getOwnPropertyDescriptor(se,"key").get;if(Ue&&Ue.isReactWarning)return!1}return se.key!==void 0}function Vt(se,Ue){typeof se.ref=="string"&&tr.current}function jn(se,Ue){{var ut=function(){Ir||(Ir=!0,$("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ue))};ut.isReactWarning=!0,Object.defineProperty(se,"key",{get:ut,configurable:!0})}}function mr(se,Ue){{var ut=function(){Ze||(Ze=!0,$("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ue))};ut.isReactWarning=!0,Object.defineProperty(se,"ref",{get:ut,configurable:!0})}}var ar=function(se,Ue,ut,St,fn,an,kn){var bn={$$typeof:e,type:se,key:Ue,ref:ut,props:kn,_owner:an};return bn._store={},Object.defineProperty(bn._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(bn,"_self",{configurable:!1,enumerable:!1,writable:!1,value:St}),Object.defineProperty(bn,"_source",{configurable:!1,enumerable:!1,writable:!1,value:fn}),Object.freeze&&(Object.freeze(bn.props),Object.freeze(bn)),bn};function ir(se,Ue,ut,St,fn){{var an,kn={},bn=null,qr=null;ut!==void 0&&(Vn(ut),bn=""+ut),Pt(Ue)&&(Vn(Ue.key),bn=""+Ue.key),pt(Ue)&&(qr=Ue.ref,Vt(Ue,fn));for(an in Ue)Ne.call(Ue,an)&&!Zn.hasOwnProperty(an)&&(kn[an]=Ue[an]);if(se&&se.defaultProps){var vr=se.defaultProps;for(an in vr)kn[an]===void 0&&(kn[an]=vr[an])}if(bn||qr){var Tr=typeof se=="function"?se.displayName||se.name||"Unknown":se;bn&&jn(kn,Tr),qr&&mr(kn,Tr)}return ar(se,bn,qr,fn,St,tr.current,kn)}}var nr=N.ReactCurrentOwner,Bt=N.ReactDebugCurrentFrame;function Un(se){if(se){var Ue=se._owner,ut=Zt(se.type,se._source,Ue?Ue.type:null);Bt.setExtraStackFrame(ut)}else Bt.setExtraStackFrame(null)}var Sa;Sa=!1;function as(se){return typeof se=="object"&&se!==null&&se.$$typeof===e}function Ya(){{if(nr.current){var se=ne(nr.current.type);if(se)return`

Check the render method of \``+se+"`."}return""}}function tl(se){return""}var nl={};function Xl(se){{var Ue=Ya();if(!Ue){var ut=typeof se=="string"?se:se.displayName||se.name;ut&&(Ue=`

Check the top-level render call using <`+ut+">.")}return Ue}}function rl(se,Ue){{if(!se._store||se._store.validated||se.key!=null)return;se._store.validated=!0;var ut=Xl(Ue);if(nl[ut])return;nl[ut]=!0;var St="";se&&se._owner&&se._owner!==nr.current&&(St=" It was passed a child from "+ne(se._owner.type)+"."),Un(se),$('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',ut,St),Un(null)}}function Vu(se,Ue){{if(typeof se!="object")return;if(Yt(se))for(var ut=0;ut<se.length;ut++){var St=se[ut];as(St)&&rl(St,Ue)}else if(as(se))se._store&&(se._store.validated=!0);else if(se){var fn=C(se);if(typeof fn=="function"&&fn!==se.entries)for(var an=fn.call(se),kn;!(kn=an.next()).done;)as(kn.value)&&rl(kn.value,Ue)}}}function Xc(se){{var Ue=se.type;if(Ue==null||typeof Ue=="string")return;var ut;if(typeof Ue=="function")ut=Ue.propTypes;else if(typeof Ue=="object"&&(Ue.$$typeof===c||Ue.$$typeof===g))ut=Ue.propTypes;else return;if(ut){var St=ne(Ue);it(ut,se.props,"prop",St,se)}else if(Ue.PropTypes!==void 0&&!Sa){Sa=!0;var fn=ne(Ue);$("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",fn||"Unknown")}typeof Ue.getDefaultProps=="function"&&!Ue.getDefaultProps.isReactClassApproved&&$("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ca(se){{for(var Ue=Object.keys(se.props),ut=0;ut<Ue.length;ut++){var St=Ue[ut];if(St!=="children"&&St!=="key"){Un(se),$("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",St),Un(null);break}}se.ref!==null&&(Un(se),$("Invalid attribute `ref` supplied to `React.Fragment`."),Un(null))}}var Ta={};function Hs(se,Ue,ut,St,fn,an){{var kn=X(se);if(!kn){var bn="";(se===void 0||typeof se=="object"&&se!==null&&Object.keys(se).length===0)&&(bn+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var qr=tl();qr?bn+=qr:bn+=Ya();var vr;se===null?vr="null":Yt(se)?vr="array":se!==void 0&&se.$$typeof===e?(vr="<"+(ne(se.type)||"Unknown")+" />",bn=" Did you accidentally export a JSX literal instead of a component?"):vr=typeof se,$("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",vr,bn)}var Tr=ir(se,Ue,ut,fn,an);if(Tr==null)return Tr;if(kn){var js=Ue.children;if(js!==void 0)if(St)if(Yt(js)){for(var No=0;No<js.length;No++)Vu(js[No],se);Object.freeze&&Object.freeze(js)}else $("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Vu(js,se)}if(Ne.call(Ue,"key")){var $o=ne(se),dn=Object.keys(Ue).filter(function(Yc){return Yc!=="key"}),mn=dn.length>0?"{key: someKey, "+dn.join(": ..., ")+": ...}":"{key: someKey}";if(!Ta[$o+mn]){var Io=dn.length>0?"{"+dn.join(": ..., ")+": ...}":"{}";$(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,mn,$o,Io,$o),Ta[$o+mn]=!0}}return se===r?Ca(Tr):Xc(Tr),Tr}}function sl(se,Ue,ut){return Hs(se,Ue,ut,!0)}function Eo(se,Ue,ut){return Hs(se,Ue,ut,!1)}var al=Eo,il=sl;lb.Fragment=r,lb.jsx=al,lb.jsxs=il}()),lb}process.env.NODE_ENV==="production"?f$.exports=JG():f$.exports=e6();var tt=f$.exports;function t6(n){return new Worker("/assets/wasmWorker-CRQoSDPa.js",{type:"module",name:n?.name})}class n6{workers=[];workerCount;isReady=!1;hasWasm=!1;constructor(e){this.workerCount=e??Math.max(1,(navigator.hardwareConcurrency||4)-1),console.log(`[PoW]  ${this.workerCount}  Worker`)}async init(){if(this.isReady)return;const e=[];for(let t=0;t<this.workerCount;t++){const r=new t6;this.workers.push(r),e.push(new Promise(s=>{r.onmessage=a=>{a.data.type==="ready"&&(a.data.hasWasm&&(this.hasWasm=!0),s(!0))},r.postMessage({type:"init",data:{workerId:t}})}))}await Promise.all(e),this.isReady=!0,console.log(`[PoW] ${this.workerCount}  Worker , WASM: ${this.hasWasm?"":" (JS)"}`)}async solve(e,t,r,s=5e7){this.isReady||await this.init();const a=performance.now(),o=5e4;let u=0,c=0,d=!1,m="";return new Promise(g=>{const y=S=>{if(d||u>=s)return;const k=u;u+=o,this.workers[S].postMessage({type:"solve",data:{challenge:e,difficulty:t,startNonce:k,batchSize:o,taskId:c++}})},x=(S,k)=>{if(!d){if(k.found){d=!0,m=k.nonce,this.workers.forEach($=>$.postMessage({type:"stop"}));const C=performance.now()-a,N=Math.round(u/(C/1e3));g({nonce:m,elapsed:C,hashRate:N,workerCount:this.workerCount,usedWasm:this.hasWasm})}else if(u<s){if(y(S),r){const C=performance.now()-a;r({searched:u,elapsed:C,hashRate:Math.round(u/(C/1e3))})}}else if(!d){d=!0,this.workers.forEach(N=>N.postMessage({type:"stop"}));const C=performance.now()-a;g({nonce:"",elapsed:C,hashRate:Math.round(u/(C/1e3)),workerCount:this.workerCount,usedWasm:this.hasWasm})}}};this.workers.forEach((S,k)=>{S.onmessage=C=>{C.data.type==="result"&&x(k,C.data)}});for(let S=0;S<this.workerCount;S++)y(S)})}destroy(){this.workers.forEach(e=>e.terminate()),this.workers=[],this.isReady=!1}}let d$=null;function r6(){return d$||(d$=new n6),d$}let Dm=null,yh=null,Cu=null,U1=null;function s6(n){if(!n||n.length<3)return new Array(16).fill(0);const e=n,t=e.length,r=[];for(let B=1;B<t;B++){const G=e[B].x-e[B-1].x,X=e[B].y-e[B-1].y,re=Math.max(e[B].t-e[B-1].t,1);r.push(Math.sqrt(G*G+X*X)/re)}const s=r.reduce((B,G)=>B+G,0)/r.length,a=Math.max(...r),o=r.reduce((B,G)=>B+Math.pow(G-s,2),0)/r.length,u=[];for(let B=1;B<r.length;B++)u.push(Math.abs(r[B]-r[B-1]));const c=u.length>0?u.reduce((B,G)=>B+G,0)/u.length:0,d=u.length>0?Math.max(...u):0,m=[];for(let B=2;B<t;B++){const G=e[B-1].x-e[B-2].x,X=e[B-1].y-e[B-2].y,re=e[B].x-e[B-1].x,ue=e[B].y-e[B-1].y,ne=G*re+X*ue,me=G*ue-X*re;m.push(Math.atan2(me,ne))}const g=m.length>0?m.reduce((B,G)=>B+Math.abs(G),0)/m.length:0,y=m.length>0?m.reduce((B,G)=>B+Math.pow(G,2),0)/m.length:0;let x=0;for(let B=1;B<t;B++)e[B].t-e[B-1].t>100&&x++;const S=x/t,k=[];for(let B=1;B<t;B++)k.push(e[B].t-e[B-1].t);const C=k.reduce((B,G)=>B+G,0)/k.length,N=k.reduce((B,G)=>B+Math.pow(G-C,2),0)/k.length;let $=0;for(let B=1;B<t;B++){const G=e[B].x-e[B-1].x,X=e[B].y-e[B-1].y;$+=Math.sqrt(G*G+X*X)}const A=Math.sqrt(Math.pow(e[t-1].x-e[0].x,2)+Math.pow(e[t-1].y-e[0].y,2)),D=A>0?A/Math.max($,1):0;let L=0;for(let B=2;B<t;B++){const G=e[B-1].x-e[B-2].x,X=e[B-1].y-e[B-2].y,re=e[B].x-e[B-1].x,ue=e[B].y-e[B-1].y;L+=Math.abs(re-G)+Math.abs(ue-X)}L=L/t;const P=e[t-1].t-e[0].t,W=t/Math.max(P,1)*1e3;return[Math.min(s/2,1),Math.min(a/5,1),Math.min(o/2,1),Math.min(c/.5,1),Math.min(d/1,1),Math.min(g/Math.PI,1),Math.min(y/2,1),Math.min(S,1),Math.min(C/100,1),Math.min(N/5e3,1),Math.min(D,1),Math.min(L/10,1),Math.min(P/5e3,1),Math.min(W/100,1),Math.min(t/100,1),Math.min($/2e3,1)]}async function yL(){return Dm&&yh&&Cu?!0:U1||(U1=(async()=>{try{Dm||(console.log("[ML]  TensorFlow.js..."),Dm=await Promise.resolve().then(()=>k0e));const n="/",e=`${n}model/model.json`;return yh=await Dm.loadLayersModel(e),Cu=await(await fetch(`${n}model/meta.json`)).json(),console.log("[ML] :",Cu?.type,":",Cu?.threshold),!0}catch(n){return console.warn("[ML] :",n),yh=null,Cu=null,!1}})(),U1)}async function a6(n){if((!yh||!Cu)&&!await yL()||!yh||!Cu)return null;try{const e=s6(n),t=Dm.tensor2d([e]);if(Cu.type==="autoencoder"){const r=yh.predict(t),s=Dm.losses.meanSquaredError(t,r),a=s.mean().arraySync();t.dispose(),r.dispose(),s.dispose();const o=a/Cu.threshold,u=Math.max(0,Math.min(1,1-o+.5));return console.log(`[ML] : ${a.toFixed(4)}, : ${Cu.threshold.toFixed(4)}, : ${u.toFixed(2)}`),u}else{const r=yh.predict(t),s=r.arraySync()[0][0];return t.dispose(),r.dispose(),s}}catch(e){return console.error("[ML] :",e),null}}const _r=()=>Math.random().toString(36).slice(2,10),_m=n=>{let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t)|0;return Math.abs(e).toString(36)},ub="hv_training_data";function i6(n,e){try{const t=localStorage.getItem(ub),r=t?JSON.parse(t):[];if(r.push(n),localStorage.setItem(ub,JSON.stringify(r)),console.log(`[]  ${r.length}  (${n.isHuman?"":""})`),e){const s=e.replace(/\/verify\/?$/,"").replace(/\/$/,"");fetch(`${s}/training-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"}).then(a=>a.json()).then(a=>a.ok&&console.log("[] ")).catch(()=>{})}}catch(t){console.warn("[] :",t)}}function o6(){try{const n=localStorage.getItem(ub),e=n?JSON.parse(n):[];return{total:e.length,human:e.filter(t=>t.isHuman).length,bot:e.filter(t=>!t.isHuman).length}}catch{return{total:0,human:0,bot:0}}}function l6(){return localStorage.getItem(ub)||"[]"}typeof window<"u"&&(window.hvTrainingData={getCount:o6,export:l6,clear:()=>localStorage.removeItem(ub)});async function u6(n,e){const t=n.replace(/\/verify\/?$/,"").replace(/\/$/,""),r=new URLSearchParams;e?.lowPower&&r.set("lowPower","1"),e?.mobile&&r.set("mobile","1"),e?.honeypotHits&&e.honeypotHits>0&&r.set("hp",String(e.honeypotHits));const s=`${t}/challenge${r.toString()?"?"+r.toString():""}`,a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error(" PoW ");return a.json()}let vL=!1;async function c6(n,e){const{challenge:t,difficulty:r,signature:s}=n,a=r6();vL||(await a.init(),vL=!0);const o=await a.solve(t,r,e);if(!o.nonce)throw new Error("PoW ");return console.log(`[PoW] nonce=${o.nonce}, =${o.elapsed.toFixed(0)}ms, =${(o.hashRate/1e3).toFixed(1)}K/s, Workers=${o.workerCount}`),{challenge:t,nonce:o.nonce,signature:s}}async function f6(n){const e=new Uint8Array(16);for(let t=0;t<16;t++)e[t]=parseInt(n.substr(t*2,2),16);return await crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!1,["encrypt"])}async function d6(n,e){const t=await f6(e),r=crypto.getRandomValues(new Uint8Array(12)),a=new TextEncoder().encode(JSON.stringify(n)),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},t,a),u=new Uint8Array(o),c=u.slice(0,-16),d=u.slice(-16),m=g=>btoa(String.fromCharCode(...g));return{iv:m(r),ciphertext:m(c),tag:m(d)}}function h6(){const n=[],e=window;navigator.webdriver&&n.push("wd"),["_selenium","__webdriver_script_fn","__driver_evaluate","__webdriver_evaluate","__selenium_evaluate","__playwright","__puppeteer","callPhantom","_phantom","__nightmare","domAutomation","domAutomationController","$cdc_"].forEach(a=>{Object.keys(e).some(o=>o.includes(a))&&n.push(a.slice(0,6))}),/HeadlessChrome|PhantomJS/.test(navigator.userAgent)&&n.push("hdls"),navigator.plugins.length===0&&!/Mobile|Android/.test(navigator.userAgent)&&n.push("noplg"),navigator.languages?.length===0&&n.push("nolng"),e.chrome?.runtime===void 0&&/Chrome/.test(navigator.userAgent)&&n.push("nocrt"),(window.outerWidth===0||window.outerHeight===0)&&n.push("0dim");try{const a=new Error;(a.stack?.includes("puppeteer")||a.stack?.includes("playwright"))&&n.push("cdp")}catch{}try{Object.getOwnPropertyDescriptor(Notification,"permission")?.get?.toString().includes("[native code]")===!1&&n.push("pspf")}catch{}["webdriver","plugins","languages"].forEach(a=>{try{const o=Object.getOwnPropertyDescriptor(Navigator.prototype,a);o?.get&&!o.get.toString().includes("[native code]")&&n.push(`${a.slice(0,3)}spf`)}catch{}}),("__playwright"in e||"__pw_digest"in e)&&n.push("pw");try{setTimeout.toString().includes("[native code]")||n.push("sthook")}catch{n.push("sterr")}try{document.createElement("canvas").toDataURL.toString().includes("[native code]")||n.push("cvshook")}catch{}try{const o=document.createElement("canvas").getContext("webgl");o&&(o.getParameter.toString().includes("[native code]")||n.push("glhook"))}catch{}(screen.width<800||screen.height<600)&&n.push("smscr"),(screen.availWidth===0||screen.availHeight===0)&&n.push("0avail");try{Date.now.toString().includes("[native code]")||n.push("datehook")}catch{}if(window.self!==window.top)try{window.top?.location.href}catch{n.push("xframe")}try{Function.prototype.toString.toString().includes("[native code]")||n.push("ftshook")}catch{}try{Object.getPrototypeOf(navigator)?.constructor?.name!=="Navigator"&&n.push("navproxy")}catch{}/Chrome/.test(navigator.userAgent)&&(!("chrome"in e)||!("csi"in e)||!("loadTimes"in e))&&n.push("fakechrome"),/Firefox/.test(navigator.userAgent)&&("InstallTrigger"in e||n.push("fakeff")),/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&("safari"in e||n.push("fakesafari"));try{navigator.__proto__?.webdriver!==void 0&&n.push("wdproto")}catch{}try{navigator.permissions&&(navigator.permissions.query.toString().includes("[native code]")||n.push("permhook"))}catch{}try{const a=Object.getOwnPropertyDescriptor(Navigator.prototype,"hardwareConcurrency");a?.get&&a.get.toString().length<30&&n.push("gettrap")}catch{}try{eval.toString().includes("[native code]")||n.push("evalhook")}catch{}try{MutationObserver.toString().includes("[native code]")||n.push("mohook")}catch{}return{score:Math.max(0,1-n.length*.08),flags:n}}function p6(){let n=0;const e=[];navigator.webdriver&&(n+=.4,e.push("webdriver")),/HeadlessChrome|Puppeteer|Playwright|PhantomJS/i.test(navigator.userAgent)&&(n+=.3,e.push("ua-headless"));const r=window;return(r.__selenium_unwrapped||r.__webdriver_evaluate||r.__driver_evaluate)&&(n+=.3,e.push("selenium")),(r._phantom||r.callPhantom)&&(n+=.3,e.push("phantom")),r._Selenium_IDE_Recorder&&(n+=.2,e.push("selenium-ide")),navigator.languages?.length===0&&(n+=.2,e.push("no-languages")),(screen.width===0||screen.height===0)&&(n+=.3,e.push("zero-screen")),e.length>0&&console.log("[] :",e),{isHeadless:n>.3,isAutomated:n>.5,score:Math.min(n,1)}}async function m6(){const n=navigator,e={},t=p6();e._suspicious=t.score,e._ua=_m(n.userAgent),e._lang=n.language,e._plat=n.platform,e._cores=n.hardwareConcurrency,e._mem=n.deviceMemory,e._scr=`${screen.width}x${screen.height}x${screen.colorDepth}`,e._dpr=devicePixelRatio,e._tz=Intl.DateTimeFormat().resolvedOptions().timeZone,e._touch="ontouchstart"in window,e._maxT=n.maxTouchPoints;try{const c=document.createElement("canvas").getContext("webgl");if(c){const d=c.getExtension("WEBGL_debug_renderer_info");if(d){let m=c.getParameter(d.UNMASKED_VENDOR_WEBGL)||"",g=c.getParameter(d.UNMASKED_RENDERER_WEBGL)||"";if(t.isHeadless){const y=Math.random().toString(36).slice(2,4);m+=y,g+=y,console.log("[] WebGL ")}e._glV=_m(m),e._glR=_m(g)}}}catch{}try{const u=document.createElement("canvas");u.width=200,u.height=50;const c=u.getContext("2d");if(c){if(c.textBaseline="top",c.font="14px Arial",c.fillText("HV",2,2),c.fillStyle="#069",c.fillRect(100,1,62,20),t.isHeadless){const d=c.getImageData(0,0,u.width,u.height);for(let m=0;m<10;m++){const g=Math.floor(Math.random()*d.data.length/4)*4;d.data[g]^=1,d.data[g+1]^=1}c.putImageData(d,0,0),console.log("[] Canvas ")}e._cvs=_m(u.toDataURL())}}catch{}try{const u=new AudioContext,c=u.createOscillator(),d=u.createAnalyser(),m=u.createGain();m.gain.value=0,c.connect(d),d.connect(m),m.connect(u.destination),c.start(0);const g=new Float32Array(d.frequencyBinCount);d.getFloatFrequencyData(g),e._aud=_m(g.slice(0,50).join(",")),c.stop(),u.close()}catch{}e._plg=Array.from(n.plugins).slice(0,10).map(u=>u.name.slice(0,20));const r=["Arial","Helvetica","Times","Courier","Verdana","Georgia","Comic Sans MS","Impact","Monaco","Menlo"],s=document.createElement("span");s.style.cssText="position:absolute;left:-9999px;font-size:72px",s.textContent="mmmmmmmmmmlli",document.body.appendChild(s),s.style.fontFamily="monospace";const a=s.offsetWidth,o=[];r.forEach(u=>{s.style.fontFamily=`"${u}",monospace`,s.offsetWidth!==a&&o.push(u)}),document.body.removeChild(s),e._fonts=o,n.connection&&(e._net=`${n.connection.effectiveType}-${n.connection.rtt}`);try{if(n.getBattery){const u=await n.getBattery();e._bat=`${u.charging}-${Math.round(u.level*100)}`}}catch{}return e}function g6(n){if(n.length<5)return{entropy:0,speed:0,smooth:0,jitter:0,intervalVariance:0,isSuspicious:!0};const e=[],t=[],r=[],s=[];for(let C=1;C<n.length;C++){const N=n[C].x-n[C-1].x,$=n[C].y-n[C-1].y,A=n[C].t-n[C-1].t||1,D=Math.sqrt(N*N+$*$);e.push(D/A),t.push(Math.atan2($,N)),s.push(A)}for(let C=1;C<e.length;C++)r.push(Math.abs(e[C]-e[C-1]));let a=0;for(let C=1;C<t.length;C++){let N=t[C]-t[C-1];for(;N>Math.PI;)N-=2*Math.PI;for(;N<-Math.PI;)N+=2*Math.PI;a+=Math.abs(N)}a=a/t.length/Math.PI||0;let o=0;for(let C=1;C<e.length;C++)o+=Math.abs(e[C]-e[C-1])/(e[C-1]||1);const u=1-Math.min(o/e.length,1),c=r.reduce((C,N)=>C+N,0)/r.length||0,d=Math.min(c*100,1),m=e.reduce((C,N)=>C+N,0)/e.length||0,g=s.reduce((C,N)=>C+N,0)/s.length,y=s.reduce((C,N)=>C+Math.pow(N-g,2),0)/s.length,x=Math.sqrt(y),S=Math.min(x/20,1);let k=!1;return x<3&&(k=!0),n.length>200&&(k=!0),a<.05&&n.length>20&&(k=!0),u>.95&&n.length>30&&(k=!0),{entropy:a,speed:Math.min(m/2,1),smooth:u,jitter:d,intervalVariance:S,isSuspicious:k}}function y6(n){let e=0;const t=n.clickTs-n.enterTs;return t>500&&t<15e3?e+=.25:t>=200&&t<3e4?e+=.15:e-=.1,n.moveCount>=5&&n.moveCount<=50?e+=.25:n.moveCount>0&&n.moveCount<100?e+=.1:n.moveCount>100?e-=.15:e-=.1,n.focused&&(e+=.15),Math.max(e,0)}async function v6(n,e,t,r){console.log("[Verify]  PoW ...");const s=await u6(n,{lowPower:e.isLowPowerMode,mobile:e.isMobile,honeypotHits:e.honeypotHits});console.log(`[Verify]  PoW (: ${s.difficulty})...`),t?.(s.difficulty);const o={...await c6(s),sessionId:s.sessionId};r?.(),console.log("[Verify] PoW ");let u;if(s.keySeed&&s.sessionId){console.log("[Verify] ...");const g=await d6(e,s.keySeed);u={sessionId:s.sessionId,encrypted:g,pow:o}}else u={...e,pow:o};const c=n.replace(/\/challenge\/?$/,"").replace(/\/$/,"")+"/verify",d=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)});if(!d.ok){const g=await d.json().catch(()=>({}));throw new Error(g.message||"")}const m=await d.json();return{success:m.success,score:m.score,token:m.token,timestamp:Date.now(),signals:e.signals}}function b6({children:n}){const e=Kt.useRef(null),t=Kt.useRef(null),[r,s]=Kt.useState(!1);return Kt.useEffect(()=>{e.current&&!t.current&&(t.current=e.current.attachShadow({mode:"closed"}),s(!0))},[]),tt.jsx("div",{ref:e,style:{display:"contents"},children:r&&t.current&&hL.createPortal(n,t.current)})}function W1({onVerify:n,endpoint:e,threshold:t=.55,autoFocus:r=!1}){const[s,a]=Kt.useState("idle"),[o,u]=Kt.useState(null),[c,d]=Kt.useState(0),[m,g]=Kt.useState(0),[y,x]=Kt.useState(0),S=Kt.useRef("idle"),k=Kt.useRef(!1),C=Kt.useRef(null),N=Kt.useRef([]),$=Kt.useRef({enterTs:0,moveCount:0,scrolled:!1,focused:!1,keyPressed:!1}),A=Kt.useRef({}),D=Kt.useRef(0),L=Kt.useRef({pressures:[],radii:[]}),[P,W]=Kt.useState("idle"),B=Kt.useRef({targetDuration:0,targetLetter:"",spaceDownTs:0,actualDuration:0,extraDifficulty:0}),[G,X]=Kt.useState(0),re=Kt.useRef(null),ue=Kt.useCallback(()=>{B.current.targetDuration=1.9+Math.random()*1.2,B.current.targetLetter=String.fromCharCode(65+Math.floor(Math.random()*26)),B.current.spaceDownTs=0,B.current.actualDuration=0,B.current.extraDifficulty=0,W("idle"),X(0),re.current&&(clearInterval(re.current),re.current=null)},[]);Kt.useEffect(()=>{if(P==="holding"){const Ne=B.current.targetDuration;X(Ne),re.current=setInterval(()=>{const Je=(Date.now()-B.current.spaceDownTs)/1e3,ht=Math.max(0,Ne-Je);X(ht)},50)}else re.current&&(clearInterval(re.current),re.current=null);return()=>{re.current&&(clearInterval(re.current),re.current=null)}},[P]),Kt.useEffect(()=>{S.current=s},[s]),Kt.useEffect(()=>{const Ne=document.querySelector(`.${K.root}`);if(!Ne)return;const Je=()=>{const it=Ne.getBoundingClientRect();return it.top<window.innerHeight&&it.bottom>0&&it.left<window.innerWidth&&it.right>0},ht=it=>{if(it.key!==" "||!Je()||S.current!=="idle")return;const mt=document.activeElement;mt&&(mt.tagName==="INPUT"||mt.tagName==="TEXTAREA"||mt.isContentEditable)||(it.preventDefault(),Ne.focus(),P==="idle"&&($.current.enterTs===0&&($.current.enterTs=Date.now()),B.current.targetDuration=1.9+Math.random()*1.2,B.current.targetLetter=String.fromCharCode(65+Math.floor(Math.random()*26)),B.current.spaceDownTs=Date.now(),W("holding")))},Lt=it=>{if(it.key!==" "||P!=="holding")return;it.preventDefault();const mt=(Date.now()-B.current.spaceDownTs)/1e3;B.current.actualDuration=mt;const Yt=B.current.targetDuration;mt<Yt-.3?ue():mt>Yt+.69?(B.current.extraDifficulty+=1,ue()):W("waiting_letter")};return document.addEventListener("keydown",ht),document.addEventListener("keyup",Lt),()=>{document.removeEventListener("keydown",ht),document.removeEventListener("keyup",Lt)}},[P,ue]),Kt.useEffect(()=>()=>{C.current&&(clearInterval(C.current),C.current=null)},[]);const ne=Kt.useMemo(()=>{if(typeof navigator>"u"||typeof window>"u")return!1;const Ne=navigator.userAgent,Je=/Android|iPhone|iPod|webOS|BlackBerry|IEMobile|Opera Mini/i.test(Ne),ht=/Macintosh/i.test(Ne)&&navigator.maxTouchPoints>1,Lt=/iPad/i.test(Ne);return Je||ht||Lt},[]),me=Kt.useMemo(()=>{if(typeof navigator>"u")return!1;const Ne=navigator.userAgent;return!!(/iPhone|iPod/i.test(Ne)||/iPad/i.test(Ne)||/Macintosh/i.test(Ne)&&navigator.maxTouchPoints>1)},[]),[ge,be]=Kt.useState(!1);Kt.useEffect(()=>{me&&navigator.getBattery?.().then(Ne=>{Ne.level<.2&&!Ne.charging&&be(!0)}).catch(()=>{})},[me]);const pe=Kt.useMemo(()=>typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0),[]),[te,ye]=Kt.useState(()=>typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches);Kt.useEffect(()=>{const Ne=window.matchMedia("(prefers-color-scheme: dark)"),Je=ht=>ye(ht.matches);return Ne.addEventListener("change",Je),()=>Ne.removeEventListener("change",Je)},[]);const ce=Kt.useMemo(()=>te?{bg:"#1f2937",border:"#374151",text:"#f3f4f6",textMuted:"#9ca3af",success:"#22c55e",fail:"#ef4444",checkBorder:"#4b5563"}:{bg:"#ffffff",border:"#d1d5db",text:"#1f2937",textMuted:"#6b7280",success:"#166534",fail:"#dc2626",checkBorder:"#d1d5db"},[te]),K=Kt.useMemo(()=>({root:`_${_r()}`,wrap:`_${_r()}`,box:`_${_r()}`,inner:`_${_r()}`,check:`_${_r()}`,label:`_${_r()}`,brand:`_${_r()}`}),[]),Z=Kt.useMemo(()=>{const Ne=ne?32:22,Je=ne?36:26,ht=Ne+Math.random()*(Je-Ne),Lt=7+Math.floor(Math.random()*7),it=7+Math.floor(Math.random()*7),mt=8,Yt=[{left:-(mt+20+Math.random()*10),top:-3+Math.random()*6},{right:-(mt+20+Math.random()*10),top:-3+Math.random()*6},{left:-3+Math.random()*6,top:-(mt+25+Math.random()*8)}],jt=`hp${_r()}`,Tn=Math.floor(Math.random()*3),nn={x:(Math.random()-.5)*1.5,y:(Math.random()-.5)*1.5},Vn={x:(Math.random()-.5)*2,y:(Math.random()-.5)*2},tr={x:Vn.x-nn.x,y:Vn.y-nn.y},Zn=Math.floor(Math.random()*4),Ir=["inset(0)",`inset(${Math.random()}px)`,`polygon(${Math.random()}% 0%, 100% 0%, 100% 100%, 0% 100%, 0% ${Math.random()}%)`,"none"][Zn],Ze={"--hv-r":`${Math.random()*360}deg`,"--hv-s":`${.98+Math.random()*.04}`,"--hv-o":`${(Math.random()-.5)*2}px`,"--hv-t":`${100+Math.floor(Math.random()*200)}ms`,"--hv-x":`${Math.random()}`,"--hv-y":`${Math.random()}`},pt={root:`p${_r()}`,box:`p${_r()}`,check:`p${_r()}`,label:`p${_r()}`},Pt=Math.floor(Math.random()*3),Vt=[{},{maskImage:"linear-gradient(#000, #000)",WebkitMaskImage:"linear-gradient(#000, #000)"},{maskImage:`radial-gradient(circle at ${50+(Math.random()-.5)*10}% ${50+(Math.random()-.5)*10}%, #000 99%, transparent 100%)`}][Pt];return{realSize:ht,realZ:Lt,honeypotZ:it,honeypotOffsets:Yt,dataAttr:jt,decoyIndex:Tn,visualOffset:nn,logicOffset:Vn,expectedDelta:tr,clipPath:Ir,cssVars:Ze,partNames:pt,maskStyles:Vt}},[ne]),De=Kt.useMemo(()=>{const Ne=["captcha-submit","verify-btn","cf-checkbox","hcaptcha-btn","recaptcha-checkbox","submit","confirm","check"],Je=["verify-btn","captcha-checkbox","challenge-btn","human-check","cf-turnstile","hcaptcha","grecaptcha","checkbox"],ht=["Verify","Submit","I am human","Continue","","","Check","Confirm"],Lt=Array.from({length:8},(Yt,jt)=>{const Tn=`cb-${_r()}`;return tt.jsxs("div",{style:{position:"absolute",left:20+jt%4*60+Math.random()*30,top:10+Math.floor(jt/4)*25+Math.random()*10,opacity:.001},children:[tt.jsx("button",{id:Ne[jt],className:Je[jt],type:"button",role:"button",tabIndex:-1,"aria-hidden":"true","data-action":"verify","data-sitekey":"fake",children:ht[jt]}),tt.jsx("input",{type:"checkbox",id:Tn,className:"captcha-input",tabIndex:-1,"aria-hidden":"true"}),tt.jsx("label",{htmlFor:Tn,children:"I'm not a robot"})]},`hp${jt}`)}),it={inert:""},mt=[tt.jsx("dialog",{open:!0,style:{position:"absolute",opacity:.001,pointerEvents:"none",left:Math.random()*200,top:Math.random()*40},...it,children:tt.jsx("form",{method:"dialog",children:tt.jsx("button",{type:"submit",tabIndex:-1,children:"Confirm"})})},"noise-dialog"),tt.jsxs("details",{style:{position:"absolute",opacity:.001,left:Math.random()*200},...it,children:[tt.jsx("summary",{children:"Verification"}),tt.jsx("button",{tabIndex:-1,children:"Click to verify"})]},"noise-details"),tt.jsx("input",{type:"color",tabIndex:-1,style:{position:"absolute",opacity:.001,left:-100},...it},"noise-color"),tt.jsx("input",{type:"range",tabIndex:-1,style:{position:"absolute",opacity:.001,left:-100},...it},"noise-range")];return[...Lt,...mt]},[]),Ae=Kt.useMemo(()=>{const Ne=["div","section","article","aside","main","nav","header","footer"],Je=["span","mark","ins","del","s","u","data","time","code","var","samp","kbd"],ht=Lt=>Lt[Math.floor(Math.random()*Lt.length)];return{root:ht(Ne),wrap:ht(Ne),inner:ht(Ne),box:ht(Ne),click:ht(Je),honeypot:ht(Je)}},[]);Kt.useEffect(()=>{m6().then(Ne=>{A.current=Ne}),ne||yL().catch(()=>{})},[ne]);const Fe=Kt.useRef(_r());Kt.useEffect(()=>{queueMicrotask(()=>{Fe.current=_r()});const Ne=setInterval(()=>{Fe.current=_r()},4e3);return()=>clearInterval(Ne)},[]),Kt.useEffect(()=>{const Ne=it=>{if(S.current==="idle"){if($.current.moveCount++,"touches"in it&&it.touches[0]){const mt=it.touches[0],Yt=mt.force??0,jt=mt.radiusX??0,Tn=mt.radiusY??0;N.current.push({x:mt.clientX,y:mt.clientY,t:Date.now(),type:"touch",pressure:Yt,radiusX:jt,radiusY:Tn}),Yt>0&&L.current.pressures.push(Yt),jt>0&&L.current.radii.push(jt)}else{const mt=it;N.current.push({x:mt.clientX,y:mt.clientY,t:Date.now(),type:"mouse"})}N.current.length>150&&N.current.shift()}},Je=()=>{$.current.scrolled=!0},ht=()=>{$.current.focused=!0},Lt=()=>{$.current.keyPressed=!0};return document.addEventListener("mousemove",Ne,{passive:!0}),document.addEventListener("touchmove",Ne,{passive:!0}),window.addEventListener("scroll",Je,{passive:!0}),window.addEventListener("focus",ht),document.addEventListener("keydown",Lt),()=>{document.removeEventListener("mousemove",Ne),document.removeEventListener("touchmove",Ne),window.removeEventListener("scroll",Je),window.removeEventListener("focus",ht),document.removeEventListener("keydown",Lt)}},[]);const Pe=Kt.useCallback(()=>{$.current.enterTs===0&&($.current.enterTs=Date.now())},[]),He=Kt.useCallback((Ne,Je)=>{const Lt=Ne.slice(-10).map(mt=>`${Math.round(mt.x)},${Math.round(mt.y)},${mt.t%1e4}`).join("|")+Je;let it=0;for(let mt=0;mt<Lt.length;mt++)it=(it<<5)-it+Lt.charCodeAt(mt)|0;return(it>>>0).toString(16).padStart(8,"0")},[]),Ke=Kt.useCallback(async Ne=>{if(Ne&&!Ne.isTrusted||k.current||s!=="idle")return;const Je=Ne&&"key"in Ne;k.current=!0;let ht=1;if(Ne&&"clientX"in Ne){const Lt=Ne.currentTarget;if(Lt){const it=Lt.getBoundingClientRect(),mt=Ne.clientX-it.left-it.width/2,Yt=Ne.clientY-it.top-it.height/2;Math.sqrt(mt*mt+Yt*Yt)<.5&&(ht=.7,console.log("[] "))}}try{a("verifying"),await new Promise(Bt=>setTimeout(Bt,600+Math.random()*500));const Lt=Date.now(),it=h6(),mt=g6(N.current),Yt=y6({...$.current,clickTs:Lt}),jt=A.current;let Tn=.5;jt._glR&&(Tn+=.1),jt._cvs&&(Tn+=.1),jt._aud&&(Tn+=.1),jt._plg?.length>0&&(Tn+=.1),jt._fonts?.length>2&&(Tn+=.1);let nn=.5;const Vn=/Mobile|Android|iPhone|iPad/.test(navigator.userAgent);if(Vn){jt._maxT>0&&(nn+=.15),jt._touch&&(nn+=.1);const{pressures:Bt,radii:Un}=L.current;Bt.length>0&&(nn+=.15,(Bt.length>2?Math.sqrt(Bt.reduce((as,Ya,tl,nl)=>as+Math.pow(Ya-nl.reduce((Xl,rl)=>Xl+rl)/nl.length,2),0)/Bt.length):0)>.05&&(nn+=.1)),Un.length>0&&(nn+=.1,new Set(Un.map(as=>Math.round(as))).size>2&&(nn+=.1))}else jt._cores>=2&&(nn+=.15),jt._mem>=2&&(nn+=.1),jt._plg&&jt._plg.length>0&&(nn+=.15),nn+=.1;let tr=mt.entropy*.25+mt.speed*.15+mt.smooth*.25+mt.jitter*.15+mt.intervalVariance*.2;mt.isSuspicious&&(tr*=.4);let Zn=.5;const Ir=$.current.moveCount;Ir>=5&&Ir<=40?Zn=.85:Ir>0&&Ir<80?Zn=.65:Ir>80?Zn=.3:Zn=.2;const Ze=Lt-$.current.enterTs;let pt=.5;Ze>800&&Ze<12e3?pt=.9:Ze>400&&Ze<2e4?pt=.7:Ze<200?pt=.15:pt=.4;let Pt=null;if(!Vn)try{Pt=await a6(N.current.map(Bt=>({x:Bt.x,y:Bt.y,t:Bt.t})))}catch{}let Vt;if(Pt!==null){const Bt=Zn*.15+tr*.2+Tn*.15+it.score*.2+pt*.15+nn*.08+Yt*.07;Vt=Bt*.75+Pt*.25,Pt<.1?(Vt*=.6,console.warn(`[ML] ML(${Pt.toFixed(2)}): ${Vt.toFixed(3)}`)):Pt<.2&&(Vt*=.85,console.warn(`[ML] ML(${Pt.toFixed(2)}): ${Vt.toFixed(3)}`)),ht<1&&(Vt*=ht,console.warn(`[] : ${Vt.toFixed(3)}`)),console.log(`[] : ${Bt.toFixed(3)}, ML: ${Pt.toFixed(3)}, : ${Vt.toFixed(3)}`)}else Vt=Zn*.12+tr*.18+Tn*.16+it.score*.2+pt*.14+nn*.08+Yt*.12;N.current.length>300&&(Vt*=.7);const jn={interaction:+Zn.toFixed(3),trajectory:+tr.toFixed(3),browser:+Tn.toFixed(3),automation:+it.score.toFixed(3),timing:+pt.toFixed(3),device:+nn.toFixed(3),behavior:+Yt.toFixed(3),total:+Vt.toFixed(3)},mr={t:Lt,s:Vt,f:_m(JSON.stringify(jt)),r:_r(),b:it.flags.join(",")},ar=btoa(JSON.stringify(mr)).replace(/[+/=]/g,Bt=>({"+":"-","/":"_","=":""})[Bt]||Bt);let ir,nr=!1;if(e)try{ir=await v6(e,{signals:jn,fingerprint:jt,trajectory:N.current.slice(-50),behavior:{dwellTime:Lt-$.current.enterTs,moveCount:$.current.moveCount,scrolled:$.current.scrolled,focused:$.current.focused,keyboardTrigger:Je},timestamp:Lt,clientToken:ar,isTouchDevice:pe,isMobile:Vn,isLowPowerMode:ge,mlScore:Pt??void 0,honeypotHits:D.current,clientScore:Vt,trajSig:He(N.current,String(Lt)),clickPrecision:ht},Bt=>{x(Bt),g(0);const Un=Date.now();C.current=setInterval(()=>{g(Math.floor((Date.now()-Un)/1e3))},1e3)},()=>{C.current&&(clearInterval(C.current),C.current=null)})}catch(Bt){console.error("Backend verification failed:",Bt),C.current&&(clearInterval(C.current),C.current=null),u("network"),nr=!0,ir={success:!1,score:0,token:"",timestamp:Lt,signals:jn}}else ir={success:Vt>=t,score:Vt,token:ar,timestamp:Lt,signals:jn},ir.success||u(it.score<.3?"bot":"low_score");a(ir.success?"success":"fail"),n(ir),ir.success&&!nr&&i6({trajectory:N.current.map(Bt=>({x:Bt.x,y:Bt.y,t:Bt.t})),isHuman:!0,timestamp:Date.now(),score:ir.score},e),ir.success||(d(Bt=>Bt+1),setTimeout(()=>{a("idle"),u(null),W("idle"),N.current=[],$.current={enterTs:0,moveCount:0,scrolled:!1,focused:!1,keyPressed:!1},L.current={pressures:[],radii:[]}},3e3))}catch(Lt){console.error("[] :",Lt),a("fail"),u("unknown"),setTimeout(()=>{a("idle"),u(null)},3e3)}finally{k.current=!1}},[s,t,e,n,ne,ge]),Xe=Ae.root,ct=Ae.wrap,Tt=Ae.inner,tn=Ae.box,Xt=Kt.useCallback(Ne=>{if(s==="idle"){if(P==="idle"&&Ne.key===" "){Ne.preventDefault(),$.current.enterTs===0&&($.current.enterTs=Date.now()),B.current.targetDuration=1.9+Math.random()*1.2,B.current.targetLetter=String.fromCharCode(65+Math.floor(Math.random()*26)),B.current.spaceDownTs=Date.now(),W("holding");return}if(P==="waiting_letter"){const Je=Ne.key.toUpperCase();Je>="A"&&Je<="Z"&&(Ne.preventDefault(),Je===B.current.targetLetter?(W("done"),D.current+=B.current.extraDifficulty,Ke(Ne)):(B.current.extraDifficulty+=1,ue()))}}},[s,P,Ke,ue]),hn=Kt.useCallback(Ne=>{if(Ne.key!==" "||P!=="holding")return;Ne.preventDefault();const Je=(Date.now()-B.current.spaceDownTs)/1e3;B.current.actualDuration=Je;const ht=B.current.targetDuration;if(Je<ht-.3){ue();return}if(Je>ht+.69){B.current.extraDifficulty+=1,ue();return}W("waiting_letter")},[P,ue]),Zt=Kt.useCallback(()=>{$.current.enterTs===0&&($.current.enterTs=Date.now()),P!=="idle"&&ue()},[P,ue]);return tt.jsx(b6,{children:tt.jsxs(Xe,{className:K.root,onMouseEnter:Pe,onTouchStart:Pe,onFocus:Zt,onKeyDown:Xt,onKeyUp:hn,tabIndex:0,role:"button","aria-label":" - ","aria-pressed":s==="success","aria-describedby":`${K.root}-desc`,part:Z.partNames.root,style:{width:ne?"min(380px, calc(100vw - 32px))":300,height:ne?72:65,position:"relative",userSelect:"none",WebkitUserSelect:"none",fontFamily:"system-ui, -apple-system, BlinkMacSystemFont, sans-serif",outline:"none",...Z.cssVars,...Z.maskStyles},"data-v":_r(),children:[tt.jsxs(ct,{className:K.wrap,style:{position:"absolute",inset:0,overflow:"hidden",borderRadius:12},children:[tt.jsx("span",{style:{position:"absolute",inset:0,background:te?"rgba(31,41,55,0.85)":"rgba(255,255,255,0.8)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:`1px solid ${te?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)"}`,borderRadius:12,boxShadow:te?"0 2px 8px rgba(0,0,0,0.25)":"0 2px 8px rgba(0,0,0,0.06)",transition:"all 0.3s cubic-bezier(0.4,0,0.2,1)"}}),tt.jsxs("div",{style:{position:"absolute",inset:0,pointerEvents:"none"},"data-decoy":"true",children:[De,tt.jsxs("form",{id:"captcha-form",action:"#",style:{position:"absolute",left:-9999},children:[tt.jsx("input",{type:"hidden",name:"token",value:""}),tt.jsx("input",{type:"checkbox",name:"human",id:"human-checkbox"}),tt.jsx("button",{type:"submit",id:"form-submit",children:"Submit"})]})]}),tt.jsx("div",{role:"checkbox","aria-checked":s==="success"?"true":"false","aria-label":"",tabIndex:-1,style:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",width:26,height:26,cursor:"pointer",zIndex:0,pointerEvents:"auto"},onClick:Ne=>{Ne.stopPropagation(),D.current++,console.log("[]  aria ")}}),tt.jsx("button",{type:"button","aria-label":"",tabIndex:-1,style:{position:"absolute",opacity:.001,left:50,top:20,width:80,height:30,zIndex:0,pointerEvents:"auto"},onClick:Ne=>{Ne.stopPropagation(),D.current++,console.log("[] ")},children:"Verify"}),tt.jsxs(Tt,{className:K.inner,style:{position:"relative",zIndex:1,display:"flex",alignItems:"center",height:"100%",padding:"0 12px 0 16px"},children:[tt.jsxs(tn,{className:K.box,style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",marginRight:ne?14:12,width:ne?32:26,height:ne?32:26},children:[!pe&&tt.jsx(tt.Fragment,{children:[0,1,2].map(Ne=>{const Je=Ne===Z.decoyIndex,ht=Ae.honeypot,Lt=Ne===0?{left:Z.honeypotOffsets[0].left,top:Z.honeypotOffsets[0].top}:Ne===1?{right:Z.honeypotOffsets[1].right,top:Z.honeypotOffsets[1].top}:{left:Z.honeypotOffsets[2].left,top:Z.honeypotOffsets[2].top};return tt.jsx(ht,{onClick:()=>{if(s==="idle"){if(D.current++,D.current===1){console.warn("[] challenge ");return}console.warn("[] "),a("fail"),u("honeypot"),d(it=>it+1),n({success:!1,score:0,token:"",timestamp:Date.now(),signals:{}}),setTimeout(()=>{a("idle"),u(null)},3e3)}},className:K.box,style:{position:"absolute",...Lt,width:Z.realSize,height:Z.realSize,zIndex:Z.honeypotZ,cursor:"default",background:"transparent",pointerEvents:s==="idle"?"auto":"none"},...Je?{role:"button","aria-label":"Click to verify",id:"captcha-verify-btn",tabIndex:0,"data-action":"verify"}:{"aria-hidden":!0,role:"presentation"},"data-hp":Z.dataAttr},`hp-${Ne}`)})}),tt.jsx("div",{style:{position:"absolute",left:(24-Z.realSize)/2,top:(24-Z.realSize)/2,width:Z.realSize,height:Z.realSize,transform:`translate(${Z.visualOffset.x}px, ${Z.visualOffset.y}px)`,clipPath:Z.clipPath,pointerEvents:"none"}}),l$.createElement(Ae.click,{onClick:Ke,onTouchEnd:Ke,style:{position:"absolute",left:(24-Z.realSize)/2+Z.logicOffset.x,top:(24-Z.realSize)/2+Z.logicOffset.y,width:Z.realSize,height:Z.realSize,zIndex:Z.realZ,cursor:"default",background:"transparent",pointerEvents:s==="idle"?"auto":"none"},"data-p":Fe.current,role:"presentation",tabIndex:-1,"data-hp":Z.dataAttr}),(()=>{const Ne=ne?32:26,Je=ne?28:24;return tt.jsxs("div",{className:K.check,style:{width:Ne,height:Ne,borderRadius:s==="idle"&&P==="idle"?ne?9:7:"50%",border:s==="idle"&&P==="idle"?`2px solid ${ce.checkBorder}`:"none",background:s==="idle"&&P==="idle"?ce.bg:"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.25s ease",pointerEvents:"none",position:"relative"},children:[s==="idle"&&P==="idle"&&null,s==="idle"&&P==="holding"&&tt.jsxs("div",{style:{position:"relative",width:Ne,height:Ne,display:"flex",alignItems:"center",justifyContent:"center"},children:[tt.jsxs("svg",{viewBox:"0 0 36 36",width:Ne,height:Ne,style:{position:"absolute"},children:[tt.jsx("circle",{cx:"18",cy:"18",r:"16",fill:"none",stroke:te?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",strokeWidth:"2"}),tt.jsx("circle",{cx:"18",cy:"18",r:"16",fill:"none",stroke:ce.success,strokeWidth:"2.5",strokeLinecap:"round",strokeDasharray:100,strokeDashoffset:100*(G/B.current.targetDuration),transform:"rotate(-90 18 18)",style:{transition:"stroke-dashoffset 0.05s linear"}})]}),tt.jsx("span",{style:{fontSize:ne?11:10,fontWeight:600,fontFamily:"ui-monospace, monospace",color:ce.success,zIndex:1},children:G.toFixed(1)})]}),s==="idle"&&P==="waiting_letter"&&tt.jsx("div",{style:{width:Ne,height:Ne,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",background:`${ce.success}22`,border:`2px solid ${ce.success}`},children:tt.jsx("span",{style:{fontSize:ne?16:14,fontWeight:700,fontFamily:"ui-monospace, monospace",color:ce.success},children:B.current.targetLetter})}),s==="verifying"&&tt.jsx("svg",{viewBox:"0 0 30 30",width:Je,height:Je,style:{animation:"spin 1s linear infinite"},children:tt.jsxs("g",{stroke:ce.success,strokeWidth:"2",strokeLinecap:"round",children:[tt.jsx("line",{x1:"15",x2:"15",y1:"7.5",y2:"2",opacity:"0.125"}),tt.jsx("line",{x1:"20.303",x2:"23.5",y1:"9.697",y2:"6.5",opacity:"0.25"}),tt.jsx("line",{x1:"22.5",x2:"28",y1:"15",y2:"15",opacity:"0.375"}),tt.jsx("line",{x1:"20.303",x2:"23.5",y1:"20.303",y2:"23.5",opacity:"0.5"}),tt.jsx("line",{x1:"15",x2:"15",y1:"22.5",y2:"28",opacity:"0.625"}),tt.jsx("line",{x1:"9.697",x2:"6.5",y1:"20.303",y2:"23.5",opacity:"0.75"}),tt.jsx("line",{x1:"7.5",x2:"2",y1:"15",y2:"15",opacity:"0.875"}),tt.jsx("line",{x1:"9.697",x2:"6.5",y1:"9.697",y2:"6.5",opacity:"1"})]})}),s==="success"&&tt.jsxs("svg",{viewBox:"0 0 52 52",width:Ne,height:Ne,children:[tt.jsx("circle",{cx:"26",cy:"26",r:"25",fill:"none",stroke:ce.success,strokeWidth:"2"}),tt.jsx("path",{d:"m14,27 l8,8 l16,-17",fill:"none",stroke:ce.success,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",style:{strokeDasharray:50,animation:"checkmark 0.4s ease forwards"}})]}),s==="fail"&&tt.jsxs("div",{style:{position:"relative",width:Ne,height:Ne,animation:"shake 0.4s ease-out"},children:[tt.jsx("div",{style:{position:"absolute",inset:-3,borderRadius:"50%",background:`radial-gradient(circle, ${ce.fail}22 0%, transparent 70%)`,animation:"failFlash 0.3s ease-out"}}),tt.jsxs("svg",{viewBox:"0 0 52 52",width:Ne,height:Ne,style:{position:"relative",zIndex:1},children:[tt.jsx("circle",{cx:"26",cy:"26",r:"25",fill:"none",stroke:ce.fail,strokeWidth:"2",style:{strokeDasharray:157,strokeDashoffset:157,animation:"circleIn 0.3s ease-out forwards"}}),tt.jsxs("g",{stroke:ce.fail,strokeWidth:"3",strokeLinecap:"round",children:[tt.jsx("line",{x1:"16",y1:"16",x2:"36",y2:"36",style:{strokeDasharray:28,strokeDashoffset:28,animation:"xLine 0.2s ease-out 0.15s forwards"}}),tt.jsx("line",{x1:"36",y1:"16",x2:"16",y2:"36",style:{strokeDasharray:28,strokeDashoffset:28,animation:"xLine 0.2s ease-out 0.25s forwards"}})]})]})]})]})})()]}),tt.jsxs("div",{className:K.label,style:{flex:1,fontSize:ne?15:14,fontWeight:400,letterSpacing:.2,lineHeight:ne?1.5:1.4,color:ce.text,pointerEvents:"none",transition:"color 0.3s"},children:[s==="idle"&&P==="idle"&&tt.jsxs("span",{"data-x":_r(),children:[[30830,35748,24744,26159,30495,20154].map((Ne,Je)=>tt.jsxs("span",{style:{display:"inline"},"data-v":_r(),children:[String.fromCharCode(Ne),Je%2===1&&tt.jsx("span",{style:{fontSize:0},"aria-hidden":"true",children:""})]},Je)),tt.jsx("span",{style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0,0,0,0)",border:0},children:""})]}),s==="idle"&&P==="holding"&&tt.jsxs("span",{"data-x":_r(),style:{color:ce.success},children:[[32487,32493,25353,20303].map((Ne,Je)=>tt.jsx("span",{"data-v":_r(),children:String.fromCharCode(Ne)},Je)),tt.jsx("span",{style:{animation:"dots 1.5s infinite"},children:"..."})]}),s==="idle"&&P==="waiting_letter"&&tt.jsx("span",{"data-x":_r(),style:{color:ce.success},children:[25353,24038,20391,25353,38190].map((Ne,Je)=>tt.jsx("span",{"data-v":_r(),children:String.fromCharCode(Ne)},Je))}),s==="verifying"&&tt.jsxs("span",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:2},children:[tt.jsxs("span",{children:["".split("").map((Ne,Je)=>tt.jsx("span",{"data-i":_r(),children:Ne},Je)),tt.jsx("span",{style:{animation:"dots 1.5s infinite"},children:"..."})]}),m>=5&&tt.jsx("span",{style:{fontSize:11,color:ce.textMuted,fontWeight:300},children:(()=>{const Je=.3*Math.pow(2,y-14),ht=Math.max(0,Math.ceil(Je-m));return ht>0?` ${ht}s`:"..."})()})]}),s==="success"&&tt.jsxs("span",{style:{color:ce.success},children:["".split("").map((Ne,Je)=>tt.jsx("span",{children:Ne},Je)),"!"]}),s==="fail"&&tt.jsxs("span",{style:{color:ce.fail,display:"flex",flexDirection:"column",gap:2},children:[tt.jsx("span",{children:"".split("").map((Ne,Je)=>tt.jsx("span",{children:Ne},Je))}),tt.jsxs("span",{style:{fontSize:11,opacity:.8,color:ce.textMuted},children:[o==="network"&&"",o==="bot"&&"",o==="honeypot"&&"",c<3?"":""]})]})]}),tt.jsxs("div",{className:K.brand,style:{display:"flex",flexDirection:"column",alignItems:"flex-end",pointerEvents:"none",gap:2},children:[tt.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:ce.textMuted,children:tt.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),tt.jsxs("div",{style:{fontSize:9,color:ce.textMuted,display:"flex",gap:4,transition:"color 0.3s"},children:[tt.jsx("span",{style:{cursor:"pointer"},children:""}),tt.jsx("span",{children:""}),tt.jsx("span",{style:{cursor:"pointer"},children:""})]})]})]})]}),tt.jsxs("div",{"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:1,height:1,overflow:"hidden",clip:"rect(0,0,0,0)"},children:[s==="verifying"&&"",s==="success"&&"",s==="fail"&&`${o==="network"?"":""}${c<3?"":""}`]}),tt.jsx("style",{children:`
        @keyframes spin { to { transform: rotate(360deg) } }
        @keyframes checkmark {
          from { stroke-dashoffset: 50; }
          to { stroke-dashoffset: 0; }
        }
        @keyframes circleIn {
          from { stroke-dashoffset: 157; }
          to { stroke-dashoffset: 0; }
        }
        @keyframes progress {
          from { width: 0%; }
          to { width: 100%; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          20% { transform: translateX(-3px); }
          40% { transform: translateX(3px); }
          60% { transform: translateX(-2px); }
          80% { transform: translateX(2px); }
        }
        @keyframes failFlash {
          0% { opacity: 0; transform: scale(0.8); }
          50% { opacity: 1; transform: scale(1.1); }
          100% { opacity: 0.5; transform: scale(1); }
        }
        @keyframes xLine {
          from { stroke-dashoffset: 28; }
          to { stroke-dashoffset: 0; }
        }
        @keyframes dots {
          0%, 20% { content: '.'; }
          40% { content: '..'; }
          60%, 100% { content: '...'; }
        }
        .${K.root} * { box-sizing: border-box; }
        .${K.root}:focus-visible {
          outline: 2px solid #3b82f6;
          outline-offset: 2px;
          border-radius: 14px;
        }
      `})]})})}const x6="https://human-verify.panyuzepan6.workers.dev",cb=new Map,h$={render(n,e={}){const t=typeof n=="string"?document.querySelector(n):n;if(!t)throw new Error(`[HumanVerify] Container not found: ${n}`);const r=`hv-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;t.setAttribute("data-human-verify-id",r);const s=B1(t);return cb.set(r,s),s.render(l$.createElement(W1,{endpoint:e.endpoint||x6,threshold:e.threshold,autoFocus:e.autoFocus,onVerify:a=>{e.onVerify?.(a),a.success&&a.token?e.onSuccess?.(a.token):a.success||e.onFail?.(a.token||"verification_failed")}})),r},destroy(n){const e=cb.get(n);e&&(e.unmount(),cb.delete(n))},destroyAll(){cb.forEach(n=>n.unmount()),cb.clear()},verify(n,e={}){return new Promise((t,r)=>{try{const s=this.render(n,{...e,onVerify:a=>{this.destroy(s),a.success?t(a):r(a)}})}catch(s){r(s)}})}};function p$(n="human-verify"){if(typeof customElements>"u"){console.warn("[HumanVerify] Custom Elements not supported");return}if(customElements.get(n))return;class e extends HTMLElement{_root=null;static get observedAttributes(){return["endpoint","threshold","auto-focus"]}connectedCallback(){this._render()}disconnectedCallback(){this._root?.unmount(),this._root=null}attributeChangedCallback(){this._render()}_render(){this._root||(this._root=B1(this)),this._root.render(l$.createElement(W1,{endpoint:this.getAttribute("endpoint")||void 0,threshold:parseFloat(this.getAttribute("threshold")||"0.55"),autoFocus:this.hasAttribute("auto-focus"),onVerify:r=>{this.dispatchEvent(new CustomEvent("verify",{detail:r,bubbles:!0,composed:!0})),r.success?this.dispatchEvent(new CustomEvent("success",{detail:{token:r.token},bubbles:!0,composed:!0})):this.dispatchEvent(new CustomEvent("fail",{detail:{reason:r.token},bubbles:!0,composed:!0}))}}))}}customElements.define(n,e)}typeof window<"u"&&p$(),typeof window<"u"&&(window.HumanVerify={...h$,defineWebComponent:p$,Component:W1});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6=1e-7,S6=1e-4;class m${constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class H1{refCount(e){return Mi("refCount")}incRef(e){return Mi("incRef")}timerAvailable(){return!0}time(e){return Mi("time")}read(e){return Mi("read")}readSync(e){return Mi("readSync")}readToGPU(e,t){return Mi("readToGPU")}numDataIds(){return Mi("numDataIds")}disposeData(e,t){return Mi("disposeData")}write(e,t,r){return Mi("write")}move(e,t,r,s,a){return Mi("move")}createTensorFromGPUData(e,t,r){return Mi("createTensorFromGPUData")}memory(){return Mi("memory")}floatPrecision(){return Mi("floatPrecision")}epsilon(){return this.floatPrecision()===32?w6:S6}dispose(){return Mi("dispose")}}function Mi(n){throw new Error(`'${n}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g$(n){let e=n.length,t=0;for(;e>0;)t=Math.random()*e|0,e--,Nc(n,e,t)}function C6(n,e){if(n.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${n.length}Second array length was ${e.length}`);let t=n.length,r=0;for(;t>0;)r=Math.random()*t|0,t--,Nc(n,t,r),Nc(e,t,r)}function Uf(n,e,t){return Math.max(n,Math.min(e,t))}function j1(n){return n%2===0?n:n+1}function Nc(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function bL(n){let e=0;for(let t=0;t<n.length;t++)e+=n[t];return e}function T6(n,e){const t=Math.random();return e*t+(1-t)*n}function k6(n,e){let t=0;for(let r=0;r<n.length;r++){const s=Number(n[r])-Number(e[r]);t+=s*s}return t}function U(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function aa(n,e,t=""){U(Nn(n,e),()=>t+` Shapes ${n} and ${e} must match`)}function vh(n){U(n!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Re(n){if(n.length===0)return 1;let e=n[0];for(let t=1;t<n.length;t++)e*=n[t];return e}function E6(n){return n.length===0}function xL(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==null&&e[t]!==null&&n[t]!==e[t])return!1;return!0}function Nn(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function bh(n){return n%1===0}function N6(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;{const e=Math.exp(2*n);return(e-1)/(e+1)}}function G1(n){const e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function $6(n){const e=new Uint32Array(n);for(let t=0;t<n;++t)e[t]=t;return g$(e),e}function xh(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function y$(n,e=s=>0,t,r){return new Promise((s,a)=>{let o=0;const u=()=>{if(n()){s();return}o++;const c=e(o);if(t!=null&&o>=t){a();return}r!=null?r(u,c):setTimeout(u,c)};u()})}function v$(n,e){let t=1,r=-1;for(let a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(n[a]<0)throw Error(`Shapes can not be < 0. Found ${n[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==t)throw Error(`Size(${e}) must match the product of shape ${n}`);return n}if(t===0)throw Error(`Cannot infer the missing size in [${n}] when there are 0 elements`);if(e%t!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${t}`);const s=n.slice();return s[r]=e/t,s}function wn(n,e){const t=e.length;return n=n==null?e.map((r,s)=>s):[].concat(n),U(n.every(r=>r>=-t&&r<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${n}`),U(n.every(r=>bh(r)),()=>`All values in axis param must be integers but got axis ${n}`),n.map(r=>r<0?t+r:r)}function $c(n,e){const t=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||s?null:wn(e,n).sort();let o=0;for(let u=0;u<n.length;++u){if(a!=null){if(a[o]===u&&n[u]!==1)throw new Error(`Can't squeeze axis ${u} since its dim '${n[u]}' is not 1`);(a[o]==null||a[o]>u)&&n[u]===1&&(t.push(n[u]),r.push(u)),a[o]<=u&&o++}n[u]!==1&&(t.push(n[u]),r.push(u))}return{newShape:t,keptDims:r}}function Ls(n,e){return Gr(n,e)}function Gr(n,e){let t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else if(n==="string")t=new Array(e);else throw new Error(`Unknown data type ${n}`);return t}function wL(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function SL(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function b$(n,e){return!(e==="complex64"||e==="float32"&&n!=="complex64"||e==="int32"&&n!=="float32"&&n!=="complex64"||e==="bool"&&n==="bool")}function fb(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error(`Unknown dtype ${n}`)}function CL(n){if(n==null)return 0;let e=0;return n.forEach(t=>e+=t.length),e}function Tu(n){return typeof n=="string"||n instanceof String}function TL(n){return typeof n=="boolean"}function q1(n){return typeof n=="number"}function wh(n){return Array.isArray(n)?wh(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray?"int32":q1(n)?"float32":Tu(n)?"string":TL(n)?"bool":"float32"}function Wf(n){return!!(n&&n.constructor&&n.call&&n.apply)}function K1(n,e){for(let t=e;t<n;++t)if(n%t===0)return t;return n}function Ot(n){const e=n.length;if(e<2)return[];const t=new Array(e-1);t[e-2]=n[e-1];for(let r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function kL(n,e,t,r=!1){const s=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let o=0;o<a;o++)s[o]=t[n+o]}else{const a=e[0],o=e.slice(1),u=o.reduce((c,d)=>c*d)*(r?2:1);for(let c=0;c<a;c++)s[c]=kL(n+c*u,o,t,r)}return s}function mo(n,e,t=!1){if(n.length===0)return e[0];const r=n.reduce((s,a)=>s*a)*(t?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${n}] does not match the input size ${e.length}${t?" for a complex tensor":""}.`);return kL(0,n,e,t)}function EL(n,e){if(Array.isArray(n))return n;if(e==="float32")return n instanceof Float32Array?n:new Float32Array(n);if(e==="int32")return n instanceof Int32Array?n:new Int32Array(n);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(n));throw new Error(`Unknown dtype ${e}`)}function X1(n,e){const t=ia(n,e);for(let r=0;r<t.length;r++)t[r]=1;return t}function ia(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error(`Unknown data type ${e}`)}function x$(n,e){const t=n.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return mo(n,new Float32Array(t));if(e==="int32")return mo(n,new Int32Array(t));if(e==="bool")return mo(n,new Uint8Array(t));throw new Error(`Unknown data type ${e}`)}function zi(n){n.forEach(e=>{U(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${n}].`)})}function Dl(n,e,t){if(e===0)return 0;if(e===1)return n[0];let r=n[n.length-1];for(let s=0;s<n.length-1;++s)r+=t[s]*n[s];return r}function Sh(n,e,t){if(e===0)return[];if(e===1)return[n];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(n/t[s]),n-=r[s]*t[s];return r[r.length-1]=n,r}function Ic(n){return n&&n.then&&typeof n.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NL="tfjsflags";class $L{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=I6,this.populateURLFlags()}setPlatform(e,t){this.platform!=null&&(xe().getBool("IS_TEST")||xe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];xe().getBool("IS_TEST")||xe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Ic(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);NL in e&&e[NL].split(",").forEach(r=>{const[s,a]=r.split(":");this.urlFlags[s]=D6(s,a)})}}function I6(n){const e={};return n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(R6(e,r[0],r[1]),r.join("="))),e}function R6(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function D6(n,e){const t=e.toLowerCase();return t==="true"||t==="false"?t==="true":`${+t}`===t?+t:e}function xe(){return w$}let w$=null;function _6(n){w$=n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let S$;function IL(){if(S$==null){let n;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else if(typeof self<"u")n=self;else throw new Error("Could not find a global object");S$=n}return S$}function A6(){const n=IL();return n._tfGlobals==null&&(n._tfGlobals=new Map),n._tfGlobals}function C$(n,e){const t=A6();if(t.has(n))return t.get(n);{const r=e();return t.set(n,r),t.get(n)}}const db="Abs",Am="Acos",Om="Acosh",Ch="Add",hb="AddN",Y1="All",Q1="Any",pb="ArgMax",mb="ArgMin",Fm="Asin",Lm="Asinh",Mm="Atan",zm="Atanh",Pm="Atan2",gb="AvgPool",Z1="AvgPoolGrad",yb="AvgPool3D",J1="AvgPool3DGrad",vb="BatchMatMul",bb="BatchToSpaceND",eS="Bincount",xb="BitwiseAnd",RL="BroadcastTo",tS="BroadcastArgs",Bm="Cast",Vm="Ceil",Um="ClipByValue",nS="Complex",wb="ComplexAbs",Sb="Concat",Cb="Conv2D",rS="Conv2DBackpropFilter",Tb="Conv2DBackpropInput",kb="Conv3D",sS="Conv3DBackpropFilterV2",aS="Conv3DBackpropInputV2",Wm="Cos",Hm="Cosh",iS="Cumprod",Eb="Cumsum",oS="CropAndResize",lS="DenseBincount",uS="DepthToSpace",Nb="DepthwiseConv2dNative",cS="DepthwiseConv2dNativeBackpropFilter",fS="DepthwiseConv2dNativeBackpropInput",dS="Diag",$b="Dilation2D",hS="Dilation2DBackpropInput",pS="Dilation2DBackpropFilter",mS="Draw",jm="RealDiv",gS="Einsum",Gm="Elu",yS="EluGrad",qm="Erf",Ib="Equal",Km="Exp",Rb="ExpandDims",Xm="Expm1",vS="FFT",bS="Fill",xS="FlipLeftRight",Ym="Floor",Qm="FloorDiv",Db="FusedBatchNorm",_b="GatherV2",wS="GatherNd",Ab="Greater",Zm="GreaterEqual",Jm="Identity",SS="IFFT",CS="Imag",eg="IsFinite",tg="IsInf",ng="IsNan",Ob="LeakyRelu",Fb="Less",Lb="LessEqual",TS="LinSpace",rg="Log",sg="Log1p",Mb="LogicalAnd",zb="LogicalNot",Pb="LogicalOr",O6="LogicalXor",DL="LogSoftmax",F6="LowerBound",Bb="LRN",kS="LRNGrad",L6="MatrixBandPart",Vb="Max",ag="Maximum",Ub="MaxPool",ES="MaxPoolGrad",Wb="MaxPool3D",NS="MaxPool3DGrad",$S="MaxPoolWithArgmax",Hb="Mean",jb="Min",ig="Minimum",Gb="MirrorPad",og="Mod",IS="Multinomial",lg="Multiply",qb="Neg",Kb="NotEqual",RS="NonMaxSuppressionV3",DS="NonMaxSuppressionV4",_S="NonMaxSuppressionV5",Xb="OnesLike",Yb="OneHot",Qb="Pack",Zb="PadV2",M6="Pool",ug="Pow",Jb="Prelu",ex="Prod",AS="RaggedGather",OS="RaggedRange",FS="RaggedTensorToTensor",LS="Range",MS="Real",cg="Reciprocal",fg="Relu",tx="Reshape",nx="ResizeNearestNeighbor",zS="ResizeNearestNeighborGrad",rx="ResizeBilinear",PS="ResizeBilinearGrad",dg="Relu6",sx="Reverse",hg="Round",pg="Rsqrt",BS="ScatterNd",VS="TensorScatterUpdate",US="SearchSorted",ax="Select",mg="Selu",ix="Slice",gg="Sin",yg="Sinh",vg="Sign",bg="Sigmoid",xg="Softplus",wg="Sqrt",ox="Sum",lx="SpaceToBatchND",ux="SplitV",cx="Softmax",WS="SparseFillEmptyRows",HS="SparseReshape",jS="SparseSegmentMean",GS="SparseSegmentSum",qS="SparseToDense",Sg="SquaredDifference",KS="Square",fx="StaticRegexReplace",XS="StridedSlice",YS="StringNGrams",QS="StringSplit",ZS="StringToHashBucketFast",Cg="Sub",Tg="Tan",kg="Tanh",Eg="Tile",JS="TopK",eC="Transform",Th="Transpose",tC="Unique",dx="Unpack",hx="UnsortedSegmentSum",z6="UpperBound",px="ZerosLike",Ng="Step",nC="FromPixels",rC="RotateWithOffset",mx="_FusedMatMul",gx="FusedConv2D",yx="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function go(...n){xe().getBool("IS_TEST")||xe().getBool("PROD")||console.warn(...n)}function P6(...n){xe().getBool("IS_TEST")||xe().getBool("PROD")||console.log(...n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $g=C$("kernelRegistry",()=>new Map),vx=C$("gradRegistry",()=>new Map);function bx(n,e){const t=k$(n,e);return $g.get(t)}function T$(n){return vx.get(n)}function sC(n){const e=$g.entries(),t=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[a,o]=s,[u]=a.split("_");u===n&&t.push(o)}return t}function aC(n){const{kernelName:e,backendName:t}=n,r=k$(e,t);$g.has(r)&&go(`The kernel '${e}' for backend '${t}' is already registered`),$g.set(r,n)}function _L(n){const{kernelName:e}=n;vx.has(e)&&xe().getBool("DEBUG")&&go(`Overriding the gradient for '${e}'`),vx.set(e,n)}function B6(n,e){const t=k$(n,e);if(!$g.has(t))throw new Error(`The kernel '${n}' for backend '${e}' is not registered`);$g.delete(t)}function V6(n){if(!vx.has(n))throw new Error(`The gradient '${n}' for backend is not registered`);vx.delete(n)}function U6(n,e){sC(n).forEach(r=>{const s=Object.assign({},r,{backendName:e});aC(s)})}function k$(n,e){return`${e}_${n}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AL(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray}var OL=Nr,Wo=null;try{Wo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Nr(n,e,t){this.low=n|0,this.high=e|0,this.unsigned=!!t}Nr.prototype.__isLong__,Object.defineProperty(Nr.prototype,"__isLong__",{value:!0});function Pi(n){return(n&&n.__isLong__)===!0}Nr.isLong=Pi;var FL={},LL={};function kh(n,e){var t,r,s;return e?(n>>>=0,(s=0<=n&&n<256)&&(r=LL[n],r)?r:(t=$r(n,(n|0)<0?-1:0,!0),s&&(LL[n]=t),t)):(n|=0,(s=-128<=n&&n<128)&&(r=FL[n],r)?r:(t=$r(n,n<0?-1:0,!1),s&&(FL[n]=t),t))}Nr.fromInt=kh;function Ho(n,e){if(isNaN(n))return e?Eh:jo;if(e){if(n<0)return Eh;if(n>=zL)return WL}else{if(n<=-PL)return Bi;if(n+1>=PL)return UL}return n<0?Ho(-n,e).neg():$r(n%Ig|0,n/Ig|0,e)}Nr.fromNumber=Ho;function $r(n,e,t){return new Nr(n,e,t)}Nr.fromBits=$r;var iC=Math.pow;function E$(n,e,t){if(n.length===0)throw Error("empty string");if(n==="NaN"||n==="Infinity"||n==="+Infinity"||n==="-Infinity")return jo;if(typeof e=="number"?(t=e,e=!1):e=!!e,t=t||10,t<2||36<t)throw RangeError("radix");var r;if((r=n.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return E$(n.substring(1),e,t).neg();for(var s=Ho(iC(t,8)),a=jo,o=0;o<n.length;o+=8){var u=Math.min(8,n.length-o),c=parseInt(n.substring(o,o+u),t);if(u<8){var d=Ho(iC(t,u));a=a.mul(d).add(Ho(c))}else a=a.mul(s),a=a.add(Ho(c))}return a.unsigned=e,a}Nr.fromString=E$;function _l(n,e){return typeof n=="number"?Ho(n,e):typeof n=="string"?E$(n,e):$r(n.low,n.high,typeof e=="boolean"?e:n.unsigned)}Nr.fromValue=_l;var ML=65536,W6=1<<24,Ig=ML*ML,zL=Ig*Ig,PL=zL/2,BL=kh(W6),jo=kh(0);Nr.ZERO=jo;var Eh=kh(0,!0);Nr.UZERO=Eh;var Rg=kh(1);Nr.ONE=Rg;var VL=kh(1,!0);Nr.UONE=VL;var N$=kh(-1);Nr.NEG_ONE=N$;var UL=$r(-1,2147483647,!1);Nr.MAX_VALUE=UL;var WL=$r(-1,-1,!0);Nr.MAX_UNSIGNED_VALUE=WL;var Bi=$r(0,-2147483648,!1);Nr.MIN_VALUE=Bi;var st=Nr.prototype;st.toInt=function(){return this.unsigned?this.low>>>0:this.low},st.toNumber=function(){return this.unsigned?(this.high>>>0)*Ig+(this.low>>>0):this.high*Ig+(this.low>>>0)},st.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Bi)){var t=Ho(e),r=this.div(t),s=r.mul(t).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var a=Ho(iC(e,6),this.unsigned),o=this,u="";;){var c=o.div(a),d=o.sub(c.mul(a)).toInt()>>>0,m=d.toString(e);if(o=c,o.isZero())return m+u;for(;m.length<6;)m="0"+m;u=""+m+u}},st.getHighBits=function(){return this.high},st.getHighBitsUnsigned=function(){return this.high>>>0},st.getLowBits=function(){return this.low},st.getLowBitsUnsigned=function(){return this.low>>>0},st.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Bi)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1},st.isZero=function(){return this.high===0&&this.low===0},st.eqz=st.isZero,st.isNegative=function(){return!this.unsigned&&this.high<0},st.isPositive=function(){return this.unsigned||this.high>=0},st.isOdd=function(){return(this.low&1)===1},st.isEven=function(){return(this.low&1)===0},st.equals=function(e){return Pi(e)||(e=_l(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},st.eq=st.equals,st.notEquals=function(e){return!this.eq(e)},st.neq=st.notEquals,st.ne=st.notEquals,st.lessThan=function(e){return this.comp(e)<0},st.lt=st.lessThan,st.lessThanOrEqual=function(e){return this.comp(e)<=0},st.lte=st.lessThanOrEqual,st.le=st.lessThanOrEqual,st.greaterThan=function(e){return this.comp(e)>0},st.gt=st.greaterThan,st.greaterThanOrEqual=function(e){return this.comp(e)>=0},st.gte=st.greaterThanOrEqual,st.ge=st.greaterThanOrEqual,st.compare=function(e){if(Pi(e)||(e=_l(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},st.comp=st.compare,st.negate=function(){return!this.unsigned&&this.eq(Bi)?Bi:this.not().add(Rg)},st.neg=st.negate,st.add=function(e){Pi(e)||(e=_l(e));var t=this.high>>>16,r=this.high&65535,s=this.low>>>16,a=this.low&65535,o=e.high>>>16,u=e.high&65535,c=e.low>>>16,d=e.low&65535,m=0,g=0,y=0,x=0;return x+=a+d,y+=x>>>16,x&=65535,y+=s+c,g+=y>>>16,y&=65535,g+=r+u,m+=g>>>16,g&=65535,m+=t+o,m&=65535,$r(y<<16|x,m<<16|g,this.unsigned)},st.subtract=function(e){return Pi(e)||(e=_l(e)),this.add(e.neg())},st.sub=st.subtract,st.multiply=function(e){if(this.isZero())return jo;if(Pi(e)||(e=_l(e)),Wo){var t=Wo.mul(this.low,this.high,e.low,e.high);return $r(t,Wo.get_high(),this.unsigned)}if(e.isZero())return jo;if(this.eq(Bi))return e.isOdd()?Bi:jo;if(e.eq(Bi))return this.isOdd()?Bi:jo;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(BL)&&e.lt(BL))return Ho(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,a=this.low>>>16,o=this.low&65535,u=e.high>>>16,c=e.high&65535,d=e.low>>>16,m=e.low&65535,g=0,y=0,x=0,S=0;return S+=o*m,x+=S>>>16,S&=65535,x+=a*m,y+=x>>>16,x&=65535,x+=o*d,y+=x>>>16,x&=65535,y+=s*m,g+=y>>>16,y&=65535,y+=a*d,g+=y>>>16,y&=65535,y+=o*c,g+=y>>>16,y&=65535,g+=r*m+s*d+a*c+o*u,g&=65535,$r(x<<16|S,g<<16|y,this.unsigned)},st.mul=st.multiply,st.divide=function(e){if(Pi(e)||(e=_l(e)),e.isZero())throw Error("division by zero");if(Wo){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Wo.div_u:Wo.div_s)(this.low,this.high,e.low,e.high);return $r(t,Wo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Eh:jo;var r,s,a;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Eh;if(e.gt(this.shru(1)))return VL;a=Eh}else{if(this.eq(Bi)){if(e.eq(Rg)||e.eq(N$))return Bi;if(e.eq(Bi))return Rg;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(jo)?e.isNegative()?Rg:N$:(s=this.sub(e.mul(r)),a=r.add(s.div(e)),a)}else if(e.eq(Bi))return this.unsigned?Eh:jo;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=jo}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var u=Math.ceil(Math.log(r)/Math.LN2),c=u<=48?1:iC(2,u-48),d=Ho(r),m=d.mul(e);m.isNegative()||m.gt(s);)r-=c,d=Ho(r,this.unsigned),m=d.mul(e);d.isZero()&&(d=Rg),a=a.add(d),s=s.sub(m)}return a},st.div=st.divide,st.modulo=function(e){if(Pi(e)||(e=_l(e)),Wo){var t=(this.unsigned?Wo.rem_u:Wo.rem_s)(this.low,this.high,e.low,e.high);return $r(t,Wo.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},st.mod=st.modulo,st.rem=st.modulo,st.not=function(){return $r(~this.low,~this.high,this.unsigned)},st.and=function(e){return Pi(e)||(e=_l(e)),$r(this.low&e.low,this.high&e.high,this.unsigned)},st.or=function(e){return Pi(e)||(e=_l(e)),$r(this.low|e.low,this.high|e.high,this.unsigned)},st.xor=function(e){return Pi(e)||(e=_l(e)),$r(this.low^e.low,this.high^e.high,this.unsigned)},st.shiftLeft=function(e){return Pi(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?$r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):$r(0,this.low<<e-32,this.unsigned)},st.shl=st.shiftLeft,st.shiftRight=function(e){return Pi(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?$r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):$r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},st.shr=st.shiftRight,st.shiftRightUnsigned=function(e){if(Pi(e)&&(e=e.toInt()),e&=63,e===0)return this;var t=this.high;if(e<32){var r=this.low;return $r(r>>>e|t<<32-e,t>>>e,this.unsigned)}else return e===32?$r(t,0,this.unsigned):$r(t>>>e-32,0,this.unsigned)},st.shru=st.shiftRightUnsigned,st.shr_u=st.shiftRightUnsigned,st.toSigned=function(){return this.unsigned?$r(this.low,this.high,!1):this},st.toUnsigned=function(){return this.unsigned?this:$r(this.low,this.high,!0)},st.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},st.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},st.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]},Nr.fromBytes=function(e,t,r){return r?Nr.fromBytesLE(e,t):Nr.fromBytesBE(e,t)},Nr.fromBytesLE=function(e,t){return new Nr(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Nr.fromBytesBE=function(e,t){return new Nr(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const HL=rL(OL),H6=ab({__proto__:null,default:HL},[OL]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nh=HL||H6;function xx(n){return Nh.fromString(n,!0,16)}const jL=xx("c3a5c85c97cb3127"),$h=xx("b492b66fbe98f273"),Va=xx("9ae16a3b2f90404f");function $$(n){return n.xor(n.shru(47))}function GL(n,e,t){const r=n.slice(e,e+t);return Nh.fromBytes(Array.from(r),!0,!0)}function wr(n,e){return GL(n,e,8)}function qL(n,e){return GL(n,e,4)}function Ms(n,e){return e===0?n:n.shru(e).or(n.shl(64-e))}function Hf(n,e,t=xx("9ddfea08eb382d69")){let r=n.xor(e).mul(t);r=r.xor(r.shru(47));let s=e.xor(r).mul(t);return s=s.xor(s.shru(47)),s=s.mul(t),s}function j6(n,e,t,r,s,a){s=s.add(n),a=Ms(a.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(t),a=a.add(Ms(s,44)),[s.add(r),a.add(o)]}function oC(n,e,t,r){return j6(wr(n,e),wr(n,e+8),wr(n,e+16),wr(n,e+24),t,r)}function G6(n,e=n.length){if(e>=8){const t=Va.add(e*2),r=wr(n,0).add(Va),s=wr(n,e-8),a=Ms(s,37).mul(t).add(r),o=Ms(r,25).add(s).mul(t);return Hf(a,o,t)}if(e>=4){const t=Va.add(e*2),r=qL(n,0);return Hf(r.shl(3).add(e),qL(n,e-4),t)}if(e>0){const t=n[0],r=n[e>>1],s=n[e-1],a=t+(r<<8),o=e+(s<<2);return $$(Va.mul(a).xor(jL.mul(o))).mul(Va)}return Va}function q6(n,e=n.length){const t=Va.add(e*2),r=wr(n,0).mul($h),s=wr(n,8),a=wr(n,e-8).mul(t),o=wr(n,e-16).mul(Va);return Hf(Ms(r.add(s),43).add(Ms(a,30)).add(o),r.add(Ms(s.add(Va),18)).add(a),t)}function K6(n,e=n.length){const t=Va.add(e*2),r=wr(n,0).mul(Va),s=wr(n,8),a=wr(n,e-8).mul(t),o=wr(n,e-16).mul(Va),u=Ms(r.add(s),43).add(Ms(a,30)).add(o),c=Hf(u,r.add(Ms(s.add(Va),18)).add(a),t),d=wr(n,16).mul(t),m=wr(n,24),g=u.add(wr(n,e-32)).mul(t),y=c.add(wr(n,e-24)).mul(t);return Hf(Ms(d.add(m),43).add(Ms(g,30)).add(y),d.add(Ms(m.add(r),18)).add(g),t)}function KL(n,e=n.length){const t=Nh.fromNumber(81,!0);if(e<=32)return e<=16?G6(n,e):q6(n,e);if(e<=64)return K6(n,e);let r=t,s=t.mul($h).add(113),a=$$(s.mul(Va).add(113)).mul(Va),o=[Nh.UZERO,Nh.UZERO],u=[Nh.UZERO,Nh.UZERO];r=r.mul(Va).add(wr(n,0));let c=0;const d=(e-1>>6)*64,m=d+(e-1&63)-63;do r=Ms(r.add(s).add(o[0]).add(wr(n,c+8)),37).mul($h),s=Ms(s.add(o[1]).add(wr(n,c+48)),42).mul($h),r=r.xor(u[1]),s=s.add(o[0]).add(wr(n,c+40)),a=Ms(a.add(u[0]),33).mul($h),o=oC(n,c,o[1].mul($h),r.add(u[0])),u=oC(n,c+32,a.add(u[1]),s.add(wr(n,c+16))),[a,r]=[r,a],c+=64;while(c!==d);const g=$h.add(a.and(255).shl(1));return c=m,u[0]=u[0].add(e-1&63),o[0]=o[0].add(u[0]),u[0]=u[0].add(o[0]),r=Ms(r.add(s).add(o[0]).add(wr(n,c+8)),37).mul(g),s=Ms(s.add(o[1]).add(wr(n,c+48)),42).mul(g),r=r.xor(u[1].mul(9)),s=s.add(o[0].mul(9).add(wr(n,c+40))),a=Ms(a.add(u[0]),33).mul(g),o=oC(n,c,o[1].mul(g),r.add(u[0])),u=oC(n,c+32,a.add(u[1]),s.add(wr(n,c+16))),[a,r]=[r,a],Hf(Hf(o[0],u[0],g).add($$(s).mul(jL)).add(a),Hf(o[1],u[1],g).add(r),g)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rc(n,e){return e==="string"?ku(n):jf([n],e)}function X6(n,e){return n instanceof Float32Array&&e==="float32"||n instanceof Int32Array&&e==="int32"||n instanceof Uint8Array&&e==="bool"}function jf(n,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=Eu(n)),xe().getBool("DEBUG")&&wL(n,e),X6(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){const t=new Uint8Array(n.length);for(let r=0;r<t.length;++r)Math.round(n[r])!==0&&(t[r]=1);return t}else throw new Error(`Unknown data type ${e}`)}function oa(){return xe().platform.now()}function XL(n,e){return xe().platform.fetch(n,e)}function ku(n,e="utf-8"){return e=e||"utf-8",xe().platform.encode(n,e)}function Dc(n,e="utf-8"){return e=e||"utf-8",xe().platform.decode(n,e)}function ks(n){return xe().platform.isTypedArray!=null?xe().platform.isTypedArray(n):AL(n)}function Eu(n,e=[],t=!1){if(e==null&&(e=[]),typeof n=="boolean"||typeof n=="number"||typeof n=="string"||Ic(n)||n==null||ks(n)&&t)e.push(n);else if(Array.isArray(n)||ks(n))for(let r=0;r<n.length;++r)Eu(n[r],e,t);else{let r=-1;for(const s of Object.keys(n))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Eu(n[s],e,t)}return e}const Y6=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Nn,arraysEqualWithNull:xL,assert:U,assertNonNegativeIntegerDimensions:zi,assertNonNull:vh,assertShapesMatch:aa,bytesFromStringArray:CL,bytesPerElement:fb,checkConversionForErrors:wL,clamp:Uf,computeStrides:Ot,convertBackendValuesAndArrayBuffer:EL,createScalarValue:Rc,createShuffledIndices:$6,decodeString:Dc,distSquared:k6,encodeString:ku,fetch:XL,fingerPrint64:KL,flatten:Eu,getArrayFromDType:Gr,getTypedArrayFromDType:Ls,hasEncodingLoss:b$,hexToLong:xx,indexToLoc:Sh,inferDtype:wh,inferFromImplicitShape:v$,isBoolean:TL,isFunction:Wf,isInt:bh,isNumber:q1,isPromise:Ic,isScalarShape:E6,isString:Tu,isTypedArray:ks,isValidDtype:SL,locToIndex:Dl,makeOnesTypedArray:X1,makeZerosNestedTypedArray:x$,makeZerosTypedArray:ia,nearestDivisor:K1,nearestLargerEven:j1,now:oa,parseAxisParam:wn,randUniform:T6,repeatedTry:y$,rightPad:xh,shuffle:g$,shuffleCombo:C6,sizeFromShape:Re,sizeToSquarishShape:G1,squeezeShape:$c,sum:bL,swap:Nc,tanh:N6,toNestedArray:mo,toTypedArray:jf},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q6{constructor(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new J6)}profileKernel(e,t,r){let s;const a=()=>{s=r()};let o;const u=oa();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const d of s)d.dataSync();o=Promise.resolve({kernelMs:oa()-u})}if(xe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let d=0;d<s.length;d++){const m=s[d];m.data().then(g=>{Z6(g,m.dtype,e)})}return{kernelName:e,outputs:s,inputs:t,timeMs:o.then(d=>d.kernelMs),extraInfo:o.then(d=>d.getExtraProfileInfo!=null?d.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:t,outputs:r,timeMs:s,inputs:a,extraInfo:o}=e;r.forEach(u=>{Promise.all([u.data(),s,o]).then(c=>{this.logger.logKernelProfile(t,u,c[0],c[1],a,c[2])})})}}function Z6(n,e,t){if(e!=="float32")return!1;for(let r=0;r<n.length;r++){const s=n[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${t}'`),!0}return!1}class J6{logKernelProfile(e,t,r,s,a,o){const u=typeof s=="number"?xh(`${s}ms`,9):s.error,c=xh(e,25),d=t.rank,m=t.size,g=xh(t.shape.toString(),14);let y="";for(const x in a){const S=a[x];if(S!=null){const k=S.shape||t.shape,C=k.length;y+=`${x}: ${C}D ${C>0?k:""} `}}console.log(`%c${c}	%c${u}	%c${d}D ${g}	%c${m}	%c${y}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5(n,e,t){const r={},s={};for(let c=0;c<e.length;c++)r[e[c].id]=!0;for(let c=0;c<n.length;c++){const d=n[c],m=d.inputs;for(const g in m){const y=m[g];let x=!1;for(let S=0;S<e.length;S++)if(r[y.id]){d.outputs.forEach(k=>r[k.id]=!0),x=!0,s[d.id]=!0;break}if(x)break}}const a={};a[t.id]=!0;const o={};for(let c=n.length-1;c>=0;c--){const d=n[c],m=d.inputs;for(let g=0;g<d.outputs.length;g++)if(a[d.outputs[g].id]){for(const y in m)a[m[y].id]=!0,o[d.id]=!0;break}}const u=[];for(let c=0;c<n.length;c++){const d=n[c];if(s[d.id]&&o[d.id]){const m={};for(const y in d.inputs){const x=d.inputs[y];r[x.id]&&(m[y]=x)}const g=Object.assign({},d);g.inputs=m,g.outputs=d.outputs,u.push(g)}}return u}function t5(n,e,t,r){for(let s=e.length-1;s>=0;s--){const a=e[s],o=[];if(a.outputs.forEach(c=>{const d=n[c.id];d!=null?o.push(d):o.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const u=a.gradient(o);for(const c in a.inputs){if(!(c in u))throw new Error(`Cannot backprop through input ${c}. Available gradients found: ${Object.keys(u)}.`);const d=t(()=>u[c]());if(d.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${c} must have 'float32' dtype, but has '${d.dtype}'`);const m=a.inputs[c];if(!Nn(d.shape,m.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${c}' has shape '${d.shape}', which does not match the shape of the input '${m.shape}'`);if(n[m.id]==null)n[m.id]=d;else{const g=n[m.id];n[m.id]=r(g,d),g.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YL=20,wx=3,I$=7;function n5(n,e,t,r){const s=Ot(e),a=r5(n,e,t,s),o=e.length,u=lC(n,e,t,s,a),c=["Tensor"];return r&&(c.push(`  dtype: ${t}`),c.push(`  rank: ${o}`),c.push(`  shape: [${e}]`),c.push("  values:")),c.push(u.map(d=>"    "+d).join(`
`)),c.join(`
`)}function r5(n,e,t,r){const s=Re(e),a=r[r.length-1],o=new Array(a).fill(0),u=e.length,c=t==="complex64"?Cx(n):n;if(u>1)for(let d=0;d<s/a;d++){const m=d*a;for(let g=0;g<a;g++)o[g]=Math.max(o[g],Sx(c[m+g],0,t).length)}return o}function Sx(n,e,t){let r;return Array.isArray(n)?r=`${parseFloat(n[0].toFixed(I$))} + ${parseFloat(n[1].toFixed(I$))}j`:Tu(n)?r=`'${n}'`:t==="bool"?r=QL(n):r=parseFloat(n.toFixed(I$)).toString(),xh(r,e)}function QL(n){return n===0?"false":"true"}function lC(n,e,t,r,s,a=!0){const o=t==="complex64"?2:1,u=e[0],c=e.length;if(c===0){if(t==="complex64"){const k=Cx(n);return[Sx(k[0],0,t)]}return t==="bool"?[QL(n[0])]:[n[0].toString()]}if(c===1){if(u>YL){const C=wx*o;let N=Array.from(n.slice(0,C)),$=Array.from(n.slice((u-wx)*o,u*o));return t==="complex64"&&(N=Cx(N),$=Cx($)),["["+N.map((A,D)=>Sx(A,s[D],t)).join(", ")+", ..., "+$.map((A,D)=>Sx(A,s[u-wx+D],t)).join(", ")+"]"]}return["["+(t==="complex64"?Cx(n):Array.from(n)).map((C,N)=>Sx(C,s[N],t)).join(", ")+"]"]}const d=e.slice(1),m=r.slice(1),g=r[0]*o,y=[];if(u>YL){for(let k=0;k<wx;k++){const C=k*g,N=C+g;y.push(...lC(n.slice(C,N),d,t,m,s,!1))}y.push("...");for(let k=u-wx;k<u;k++){const C=k*g,N=C+g;y.push(...lC(n.slice(C,N),d,t,m,s,k===u-1))}}else for(let k=0;k<u;k++){const C=k*g,N=C+g;y.push(...lC(n.slice(C,N),d,t,m,s,k===u-1))}const x=c===2?",":"";y[0]="["+(u>0?y[0]+x:"");for(let k=1;k<y.length-1;k++)y[k]=" "+y[k]+x;let S=`,
`;for(let k=2;k<c;k++)S+=`
`;return y[y.length-1]=" "+y[y.length-1]+"]"+(a?"":S),y}function Cx(n){const e=[];for(let t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ms{constructor(e,t,r){if(this.dtype=t,this.shape=e.slice(),this.size=Re(e),r!=null){const s=r.length;U(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Gr(t,this.size),this.strides=Ot(e)}set(e,...t){t.length===0&&(t=[0]),U(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);const r=this.locToIndex(t);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let t=0;for(const s of e){if(s<0||s>=this.shape[t]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}t++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const t=new Array(this.shape.length);for(let r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Al().makeTensor(this.values,this.shape,this.dtype)}}let Al=null,Dg=null;function s5(n){Al=n}function a5(n){Dg=n}class Pn{constructor(e,t,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Re(e),this.strides=Ot(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Dg.buffer(this.shape,this.dtype,e)}bufferSync(){return Dg.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return mo(this.shape,e,this.dtype==="complex64")}arraySync(){return mo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Al().read(this.dataId);if(this.dtype==="string"){const t=await e;try{return t.map(r=>Dc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Al().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Al().readSync(this.dataId);if(this.dtype==="string")try{return e.map(t=>Dc(t))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Al().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Al().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Dg.print(this,e)}clone(){return this.throwIfDisposed(),Dg.clone(this)}toString(e=!1){const t=this.dataSync();return n5(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Dg.cast(this,e)}variable(e=!0,t,r){return this.throwIfDisposed(),Al().makeVariable(this,e,t,r)}}Object.defineProperty(Pn,Symbol.hasInstance,{value:n=>!!n&&n.data!=null&&n.dataSync!=null&&n.throwIfDisposed!=null});function _e(){return C$("Tensor",()=>Pn)}_e();class Tx extends Pn{constructor(e,t,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=t,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Nn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Al().disposeTensor(this),this.dataId=e.dataId,Al().incRef(this,null)}dispose(){Al().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Tx,Symbol.hasInstance,{value:n=>n instanceof Pn&&n.assign!=null&&n.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var R$;(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(R$||(R$={}));var D$;(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(D$||(D$={}));var _$;(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(_$||(_$={}));var A$;(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(A$||(A$={}));var O$;(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(O$||(O$={}));const i5={float32:A$,int32:D$,bool:_$,complex64:O$};function pi(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${n} with ${e}`)}return i5[n][e]}function uC(n){return pi(n,"int32")}function ZL(n){return n!=null&&typeof n=="object"&&"texture"in n&&n.texture instanceof WebGLTexture}function JL(n){return typeof GPUBuffer<"u"&&n!=null&&typeof n=="object"&&"buffer"in n&&n.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Br(n,e){if(n.dtype===e.dtype)return[n,e];const t=pi(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function eM(n,e){U(n.dtype===e.dtype,()=>`The dtypes of the first(${n.dtype}) and second(${e.dtype}) input must match`)}function cC(n,e){return e.some(t=>t.id===n.id)}function _c(n){const e=[];return tM(n,e,new Set),e}function tM(n,e,t){if(n==null)return;if(n instanceof Pn){e.push(n);return}if(!o5(n))return;const r=n;for(const s in r){const a=r[s];t.has(a)||(t.add(a),tM(a,e,t))}}function o5(n){return Array.isArray(n)||typeof n=="object"}const l5=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:eM,getTensorsInContainer:_c,isTensorInList:cC,makeTypesMatch:Br},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$(n){return n.kernelName!=null}class nM{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class _g{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new nM}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:t}=this.initializeBackend(e);if(t)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,r=1){return e in this.registryFactory?(go(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:t,asyncInit:r}=this.initializeBackend(e);if(!(r?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Q6(this.backendInstance),!0}setupRegisteredKernels(){sC(this.backendName).forEach(t=>{t.setupFunc!=null&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){sC(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const t=this.registryFactory[e];if(t==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=t.factory();if(r&&!(r instanceof H1)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,a=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,go(`Initialization of backend ${e} failed`),go(o.stack||o.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return go(`Initialization of backend ${e} failed`),go(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const r=e[t],{success:s,asyncInit:a}=this.initializeBackend(r);if(a||s)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const r=this.state.tensorInfo.get(t),s=r.backend,a=this.readSync(t),o=s.refCount(t);s.disposeData(t,!0),r.backend=e,e.move(t,a,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let r=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=t(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,t,r){e();try{const s=r();return t(),s}catch(s){throw t(),s}}nextTensorId(){return _g.nextTensorId++}nextVariableId(){return _g.nextVariableId++}clone(e){const t=Q.runKernel(Jm,{x:e}),r={x:e},s=o=>({x:()=>{const u="float32",c={x:o},d={dtype:u};return Q.runKernel(Bm,c,d)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[t],s,a,{}),t}runKernel(e,t,r){if(this.backendName==null&&this.backend,!(bx(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,r){const s=this.backend.numDataIds();let a=0;r.forEach(c=>{a+=c.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],u=s-t-a-o;if(u>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${u} data ids) after running '${e}'`)}runKernelFunc(e){let t,r=[];const s=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let u;this.backendName==null&&this.backend;let c;const d=F$(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(F$(e)){const{kernelName:S,inputs:k,attrs:C}=e;this.backendName==null&&this.backend;const N=bx(S,this.backendName);U(N!=null,()=>`Cannot find registered kernel '${S}' for backend '${this.backendName}'`),u=()=>{const $=this.backend.numDataIds();c=N.kernelFunc({inputs:k,attrs:C,backend:this.backend});const A=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(S,$,A);const D=A.map(L=>L.rank!=null?L:this.makeTensorFromTensorInfo(L));if(s){const L=this.getTensorsForGradient(S,k,D);r=this.saveTensorsForBackwardMode(L)}return D}}else{const{forwardFunc:S}=e,k=C=>{s&&(r=C.map(N=>this.keep(this.clone(N))))};u=()=>{const C=this.backend.numDataIds();c=this.tidy(()=>S(this.backend,k));const N=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(d,C,N),N}}const{inputs:m,attrs:g}=e,y=F$(e)?null:e.backwardsFunc;let x;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?t=u():(x=this.profiler.profileKernel(d,m,()=>u()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(x),t=x.outputs)}),s&&this.addTapeNode(d,m,t,y,r,g),this.state.profiling&&this.state.activeProfile.kernels.push({name:d,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(m).map(S=>m[S]!=null?m[S].shape:null),outputShapes:t.map(S=>S.shape),kernelTimeMs:x.timeMs,extraInfo:x.extraInfo}),Array.isArray(c)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,t,r){const s=T$(e);if(s!=null){const a=s.inputsToSave||[],o=s.outputsToSave||[];let u;s.saveAllInputs?(U(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),u=Object.keys(t).map(d=>t[d])):u=a.map(d=>t[d]);const c=r.filter((d,m)=>o[m]);return u.concat(c)}return[]}makeTensor(e,t,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let a=e;r==="string"&&Tu(e[0])&&(a=e.map(c=>ku(c)));const o=s.write(a,t,r),u=new Pn(t,r,o,this.nextTensorId());if(this.trackTensor(u,s),r==="string"){const c=this.state.tensorInfo.get(o),d=CL(a);this.state.numBytes+=d-c.bytes,c.bytes=d}return u}makeTensorFromDataId(e,t,r,s){r=r||"float32";const a={dataId:e,shape:t,dtype:r};return this.makeTensorFromTensorInfo(a,s)}makeTensorFromTensorInfo(e,t){const{dataId:r,shape:s,dtype:a}=e,o=new Pn(s,a,r,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e,t=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const a=new Tx(e,t,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*fb(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Tx||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*fb(e.dtype);this.state.numBytes-=r}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,t,r,s,a,o){const u={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:a},c=T$(e);c!=null&&(s=c.gradFunc),s!=null&&(u.gradient=d=>(d=d.map((m,g)=>{if(m==null){const y=r[g],x=ia(y.size,y.dtype);return this.makeTensor(x,y.shape,y.dtype)}return m}),s(d.length>1?d:d[0],a,o))),this.state.activeTape.push(u)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=_c(e),r=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const o=this.state.activeScope.track[a];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===s.id&&this.track(a)})}gradients(e,t,r,s=!1){if(U(t.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));U(a instanceof Pn,()=>"The result y returned by f() must be a tensor.");const o=e5(this.state.activeTape,t,a);if(!s&&o.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const u={};u[a.id]=r??u5(a.shape),t5(u,o,d=>this.tidy(d),c5);const c=t.map(d=>u[d.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(d=>{for(const m of d.saved)m.dispose()}),this.state.activeTape=null),{value:a,grads:c}})}customGrad(e){return U(Wf(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{U(t.every(u=>u instanceof Pn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};t.forEach((u,c)=>{s[c]=u});const a=(u,c)=>(r=e(...t,c),U(r.value instanceof Pn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),U(Wf(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(u,c)=>{const d=r.gradFunc(u,c),m=Array.isArray(d)?d:[d];U(m.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),U(m.every(y=>y instanceof Pn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const g={};return m.forEach((y,x)=>{g[x]=()=>y}),g};return this.runKernelFunc({forwardFunc:a,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=oa(),r=await this.backend.time(e);return r.wallMs=oa()-t,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new nM;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}_g.nextTensorId=0,_g.nextVariableId=0;function u5(n){const e=X1(Re(n),"float32");return Q.makeTensor(e,n,"float32")}function rM(){const n=IL();if(n._tfengine==null){const e=new $L(n);n._tfengine=new _g(e)}return _6(n._tfengine.ENV),s5(()=>n._tfengine),n._tfengine}const Q=rM();function c5(n,e){const t={a:n,b:e};return Q.runKernel(Ch,t)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5(){return typeof navigator<"u"&&navigator!=null}let L$;function d5(n){L$=n}function M$(n){if(L$!==void 0)return L$;if(n||f5()){if(n||(n=navigator),n.product==="ReactNative")return!0;const e=n.userAgent||n.vendor||(typeof window<"u"?window.opera:"");if(!e){const t=n;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function z$(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const h5=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:z$,isMobile:M$,mockIsMobile:d5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mi=xe();mi.registerFlag("DEBUG",()=>!1,n=>{n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),mi.registerFlag("IS_BROWSER",()=>z$()),mi.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),mi.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),mi.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),mi.registerFlag("PROD",()=>!1),mi.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>mi.getBool("DEBUG")),mi.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),mi.registerFlag("IS_TEST",()=>!1),mi.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>mi.getBool("DEBUG")),mi.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),mi.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),mi.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nu(n,e){let t=n;if(ks(n))return e==="string"?[]:[n.length];if(ZL(n)){const s=n.channels||"RGBA";return[n.height,n.width*s.length]}else if(JL(n))return[n.buffer.size/(e==null?4:fb(e))];if(!Array.isArray(n))return[];const r=[];for(;Array.isArray(t)||ks(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&xe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&sM(n,r,[]),r}function sM(n,e,t){if(t=t||[],!Array.isArray(n)&&!ks(n)){U(e.length===0,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}U(e.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${n.length} elements`),U(n.length===e[0],()=>`Element arr[${t.join("][")}] should have ${e[0]} elements, but has ${n.length} elements`);const r=e.slice(1);for(let s=0;s<n.length;++s)sM(n[s],r,t.concat(s))}function aM(n,e,t,r){if(n!=="string_or_numeric"){if(n==null)throw new Error("Expected dtype cannot be null.");if(n!=="numeric"&&n!==e||n==="numeric"&&e==="string")throw new Error(`Argument '${t}' passed to '${r}' must be ${n} tensor, but got ${e} tensor`)}}function H(n,e,t,r="numeric"){if(n instanceof _e())return aM(r,n.dtype,e,t),n;let s=wh(n);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),aM(r,s,e,t),n==null||!ks(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){const c=n==null?"null":n.constructor.name;throw new Error(`Argument '${e}' passed to '${t}' must be a Tensor or TensorLike, but got '${c}'`)}const a=Nu(n,s);!ks(n)&&!Array.isArray(n)&&(n=[n]);const u=s!=="string"?jf(n,s):Eu(n,[],!0);return Q.makeTensor(u,a,s)}function kx(n,e,t,r="numeric"){if(!Array.isArray(n))throw new Error(`Argument ${e} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return n.map((a,o)=>H(a,`${e}[${o}]`,t,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P$="__op";function J(n){const e=Object.keys(n);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let t=e[0];const r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t=t+P$;const s=(...a)=>{Q.startScope(t);try{const o=r(...a);return Ic(o)&&console.error("Cannot return a Promise inside of tidy."),Q.endScope(o),o}catch(o){throw Q.endScope(null),o}};return Object.defineProperty(s,"name",{value:t,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5(n,e){const t=H(n,"real","complex"),r=H(e,"imag","complex");aa(t.shape,r.shape,`real and imag shapes, ${t.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:t,imag:r};return Q.runKernel(nS,s)}const Ac=J({complex_:p5});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gf(n,e,t,r){if(r==null)r=wh(n);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(JL(n)||ZL(n)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Q.backend.createTensorFromGPUData(n,e||t,r)}if(!ks(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){zi(e);const s=Re(e),a=Re(t);U(s===a,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${a}`);for(let o=0;o<t.length;++o){const u=t[o],c=o===t.length-1?u!==Re(e.slice(o)):!0;U(t[o]===e[o]||!c,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${e}). `)}}return!ks(n)&&!Array.isArray(n)&&(n=[n]),e=e||t,n=r!=="string"?jf(n,r):Eu(n,[],!0),Q.makeTensor(n,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vi(n,e,t){const r=Nu(n,t);return Gf(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ih={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Ol{static join(e){return new Ol(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>ks(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=t+s.byteLength;this.shards.push({buffer:s,start:t,end:a}),t=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=t-e,a=new ArrayBuffer(s),o=new Uint8Array(a);let u=0;for(let c=r;c<this.shards.length;c++){const d=this.shards[c],g=e+u-d.start,y=u,S=Math.min(t,d.end)-d.start,k=new Uint8Array(d.buffer,g,S-g);if(o.set(k,y),u+=k.length,t<d.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(s){return e<s.start?-1:e>=s.end?1:0}if(t(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=m5(this.shards,t);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function m5(n,e){let t=0,r=n.length;for(;t<=r;){const s=Math.floor((r-t)/2)+t,a=e(n[s]);if(a===0)return s;a<0?r=s:t=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5(){xe().set("PROD",!0)}function y5(){xe().set("DEBUG",!0)}function v5(){xe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function b5(n){xe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function x5(){Q.disposeVariables()}function Fl(){return Q}function B$(){return Q.memory()}function w5(n){return Q.profile(n)}function ve(n,e){return Q.tidy(n,e)}function un(n){_c(n).forEach(t=>t.dispose())}function Es(n){return Q.keep(n)}function S5(n){return Q.time(n)}function C5(n){return Q.setBackend(n)}function T5(){return Q.ready()}function iM(){return Q.backendName}function k5(n){Q.removeBackend(n)}function E5(n){return Q.findBackend(n)}function N5(n){return Q.findBackendFactory(n)}function V$(n,e,t=1){return Q.registerBackend(n,e,t)}function U$(){return Q.backend}function $5(n,e){xe().setPlatform(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qf=4;async function W$(n,e){const t=[],r=[],s=Array.isArray(n)?n.map(o=>o.name):Object.keys(n);for(let o=0;o<s.length;++o){const u=s[o],c=Array.isArray(n)?n[o].tensor:n[u];if(c.dtype!=="float32"&&c.dtype!=="int32"&&c.dtype!=="bool"&&c.dtype!=="string"&&c.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${u}': ${c.dtype}`);const d={name:u,shape:c.shape,dtype:c.dtype};if(c.dtype==="string"){const m=new Promise(async g=>{const y=await c.bytes(),x=y.reduce((C,N)=>C+N.length,0)+qf*y.length,S=new Uint8Array(x);let k=0;for(let C=0;C<y.length;C++){const N=y[C],$=new Uint8Array(new Uint32Array([N.length]).buffer);S.set($,k),k+=qf,S.set(N,k),k+=N.length}g(S)});r.push(m)}else r.push(c.data());e!=null&&(d.group=e),t.push(d)}const a=await Promise.all(r);return{data:D5(a),specs:t}}function H$(n,e){const t=new Ol(n),r={};let s=0;for(const a of e){const o=I5(a,(u,c)=>t.slice(s+u,s+c));r[a.name]=oM(a,t.slice(s,s+o)),s+=o}return r}function I5(n,e){const t=Re(n.shape);let r;if("quantization"in n){const s=n.quantization;r=Ih[s.dtype]}else if(n.dtype==="string"){let s=0;for(let a=0;a<t;a++)s+=qf+new Uint32Array(e(s,s+qf))[0];return s}else r=Ih[n.dtype];return t*r}async function R5(n,e){const t=Re(n.shape);let r;if("quantization"in n){const s=n.quantization;r=Ih[s.dtype]}else if(n.dtype==="string"){let s=0;for(let a=0;a<t;a++)s+=qf+new Uint32Array(await e(s,s+qf))[0];return s}else r=Ih[n.dtype];return t*r}function oM(n,e){const t=n.name,r=n.dtype,s=n.shape,a=Re(s);let o,u=0;if("quantization"in n){const c=n.quantization;if(c.dtype==="uint8"||c.dtype==="uint16"){if(!("min"in c&&"scale"in c))throw new Error(`Weight ${n.name} with quantization ${c.dtype} doesn't have corresponding metadata min and scale.`)}else if(c.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${n.name} is quantized with ${c.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${n.name} has unknown quantization dtype ${c.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const d=Ih[c.dtype],m=c.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(c.dtype==="uint8"||c.dtype==="uint16"){o=new Float32Array(m.length);for(let g=0;g<m.length;g++){const y=m[g];o[g]=y*c.scale+c.min}}else if(c.dtype==="float16")o=M5()(m);else throw new Error(`Unsupported quantization type ${c.dtype} for weight type float32.`);else if(r==="int32"){if(c.dtype!=="uint8"&&c.dtype!=="uint16")throw new Error(`Unsupported quantization type ${c.dtype} for weight type int32.`);o=new Int32Array(m.length);for(let g=0;g<m.length;g++){const y=m[g];o[g]=Math.round(y*c.scale+c.min)}}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);u+=a*d}else if(r==="string"){const c=Re(n.shape);o=[];for(let d=0;d<c;d++){const m=new Uint32Array(e.slice(u,u+qf))[0];u+=qf;const g=new Uint8Array(e.slice(u,u+m));o.push(g),u+=m}}else{const c=Ih[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const d=new Float32Array(o.length/2),m=new Float32Array(o.length/2);for(let S=0;S<d.length;S++)d[S]=o[S*2],m[S]=o[S*2+1];const g=Vi(d,s,"float32"),y=Vi(m,s,"float32"),x=Ac(g,y);return g.dispose(),y.dispose(),x}else throw new Error(`Unsupported dtype in weight '${t}': ${r}`);u+=a*c}return Vi(o,s,r)}async function lM(n,e,t){let r=new Uint8Array(e);for(;r.byteLength<t;){const{done:s,value:a}=await n.read();if(s&&a==null){const u=t-r.byteLength;throw new Error(`Reader is done but ${u} bytes are still expected`)}const o=new Uint8Array(r.length+a.byteLength);o.set(r,0),o.set(new Uint8Array(a),r.length),r=o}return r.buffer}async function uM(n,e){const t={},r=n.getReader();let s=new ArrayBuffer(0);for(const a of e){const o=await R5(a,async(d,m)=>(s=await lM(r,s,m),s.slice(d,m)));s=await lM(r,s,o);const u=s.slice(0,o);s=s.slice(o);const c=oM(a,u);if(t[a.name]=c,iM()==="webgpu"){const d=U$();"uploadToGPU"in d&&Re(c.shape)>=xe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&d.uploadToGPU(c.dataId)}}return t}function D5(n){if(n===null)throw new Error(`Invalid input value: ${JSON.stringify(n)}`);let e=0;const t=[];n.forEach(a=>{if(e+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let s=0;return t.forEach(a=>{r.set(new Uint8Array(a.buffer),s),s+=a.byteLength}),r.buffer}const j$=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function cM(n){return j$?Buffer.byteLength(n,"utf8"):new Blob([n]).size}function _5(n){if(j$)return Buffer.from(n).toString("base64");const e=new Uint8Array(n);let t="";for(let r=0,s=e.length;r<s;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function A5(n){if(j$){const r=Buffer.from(n,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(n),t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t.set([e.charCodeAt(r)],r);return t.buffer}function fM(n){return Ol.join(n)}function dM(n){const e="/";for(n=n.trim();n.endsWith(e);)n=n.slice(0,n.length-1);const t=n.split(e);return t[t.length-1]}function hM(n,e){const t={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,weightsManifest:e};return n.signature!=null&&(t.signature=n.signature),n.userDefinedMetadata!=null&&(t.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(t.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(t.initializerSignature=n.initializerSignature),n.trainingConfig!=null&&(t.trainingConfig=n.trainingConfig),t}function G$(n,e,t){const r={modelTopology:n.modelTopology,format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy};if(n.trainingConfig!=null&&(r.trainingConfig=n.trainingConfig),n.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=t}return n.signature!=null&&(r.signature=n.signature),n.userDefinedMetadata!=null&&(r.userDefinedMetadata=n.userDefinedMetadata),n.modelInitializer!=null&&(r.modelInitializer=n.modelInitializer),n.initializerSignature!=null&&(r.initializerSignature=n.initializerSignature),r}async function q$(n,e){let t,r;return n.weightsManifest!=null&&([t,r]=await e(n.weightsManifest)),G$(n,t,r)}function Ex(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:cM(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:cM(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:new Ol(n.weightData).byteLength}}function fC(n){const e=[];for(const t of n)e.push(...t.weights);return e}function O5(){const n=t=>{let r=t<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let t=1;t<1024;t++)e[t]=n(t);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}function F5(){const n=new Uint32Array(64);n[0]=0,n[31]=1199570944,n[32]=2147483648,n[63]=3347054592;for(let e=1;e<31;e++)n[e]=e<<23;for(let e=33;e<63;e++)n[e]=2147483648+(e-32<<23);return n}function L5(){const n=new Uint32Array(64);for(let e=0;e<64;e++)n[e]=1024;return n[0]=n[32]=0,n}function M5(){const n=O5(),e=F5(),t=L5();return r=>{const s=new ArrayBuffer(4*r.length),a=new Uint32Array(s);for(let o=0;o<r.length;o++){const u=r[o],c=n[t[u>>10]+(u&1023)]+e[u>>10];a[o]=c}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Vr.instance==null&&(Vr.instance=new Vr),Vr.instance}static registerSaveRouter(e){Vr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Vr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Vr.getHandlers(e,"save")}static getLoadHandlers(e,t){return Vr.getHandlers(e,"load",t)}static getHandlers(e,t,r){const s=[];return(t==="load"?Vr.getInstance().loadRouters:Vr.getInstance().saveRouters).forEach(o=>{const u=o(e,r);u!==null&&s.push(u)}),s}}const z5=n=>Vr.registerSaveRouter(n),P5=n=>Vr.registerLoadRouter(n),pM=n=>Vr.getSaveHandlers(n),mM=(n,e)=>Vr.getLoadHandlers(n,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K$="tensorflowjs",X$=1,Rh="models_store",Kf="model_info_store";function gM(){if(!xe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const n=typeof window>"u"?self:window,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function Y$(n){const e=n.result;e.createObjectStore(Rh,{keyPath:"modelPath"}),e.createObjectStore(Kf,{keyPath:"modelPath"})}class Dh{constructor(e){if(this.indexedDB=gM(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((r,s)=>{const a=this.indexedDB.open(K$,X$);a.onupgradeneeded=()=>Y$(a),a.onsuccess=()=>{const o=a.result;if(t==null){const u=o.transaction(Rh,"readonly"),d=u.objectStore(Rh).get(this.modelPath);d.onsuccess=()=>{if(d.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(d.result.modelArtifacts)},d.onerror=m=>(o.close(),s(d.error)),u.oncomplete=()=>o.close()}else{t.weightData=Ol.join(t.weightData);const u=Ex(t),c=o.transaction(Kf,"readwrite");let d=c.objectStore(Kf),m;try{m=d.put({modelPath:this.modelPath,modelArtifactsInfo:u})}catch(y){return s(y)}let g;m.onsuccess=()=>{g=o.transaction(Rh,"readwrite");const y=g.objectStore(Rh);let x;try{x=y.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:u})}catch(S){return s(S)}x.onsuccess=()=>r({modelArtifactsInfo:u}),x.onerror=S=>{d=c.objectStore(Kf);const k=d.delete(this.modelPath);k.onsuccess=()=>(o.close(),s(x.error)),k.onerror=C=>(o.close(),s(x.error))}},m.onerror=y=>(o.close(),s(m.error)),c.oncomplete=()=>{g==null?o.close():g.oncomplete=()=>o.close()}}},a.onerror=o=>s(a.error)})}}Dh.URL_SCHEME="indexeddb://";const yM=n=>xe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Dh.URL_SCHEME)?B5(n.slice(Dh.URL_SCHEME.length)):null;Vr.registerSaveRouter(yM),Vr.registerLoadRouter(yM);function B5(n){return new Dh(n)}function V5(n){return n.startsWith(Dh.URL_SCHEME)?n.slice(Dh.URL_SCHEME.length):n}class U5{constructor(){this.indexedDB=gM()}async listModels(){return new Promise((e,t)=>{const r=this.indexedDB.open(K$,X$);r.onupgradeneeded=()=>Y$(r),r.onsuccess=()=>{const s=r.result,a=s.transaction(Kf,"readonly"),u=a.objectStore(Kf).getAll();u.onsuccess=()=>{const c={};for(const d of u.result)c[d.modelPath]=d.modelArtifactsInfo;e(c)},u.onerror=c=>(s.close(),t(u.error)),a.oncomplete=()=>s.close()},r.onerror=s=>t(r.error)})}async removeModel(e){return e=V5(e),new Promise((t,r)=>{const s=this.indexedDB.open(K$,X$);s.onupgradeneeded=()=>Y$(s),s.onsuccess=()=>{const a=s.result,o=a.transaction(Kf,"readwrite"),u=o.objectStore(Kf),c=u.get(e);let d;c.onsuccess=()=>{if(c.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const m=u.delete(e),g=()=>{d=a.transaction(Rh,"readwrite");const x=d.objectStore(Rh).delete(e);x.onsuccess=()=>t(c.result.modelArtifactsInfo),x.onerror=S=>r(c.error)};m.onsuccess=g,m.onerror=y=>(g(),a.close(),r(c.error))}},c.onerror=m=>(a.close(),r(c.error)),o.oncomplete=()=>{d==null?a.close():d.oncomplete=()=>a.close()}},s.onerror=a=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oc="/",Ag="tensorflowjs_models",vM="info",W5="model_topology",H5="weight_specs",j5="weight_data",G5="model_metadata";function bM(n){return{info:[Ag,n,vM].join(Oc),topology:[Ag,n,W5].join(Oc),weightSpecs:[Ag,n,H5].join(Oc),weightData:[Ag,n,j5].join(Oc),modelMetadata:[Ag,n,G5].join(Oc)}}function xM(n){for(const e of Object.values(n))window.localStorage.removeItem(e)}function q5(n){const e=n.split(Oc);if(e.length<3)throw new Error(`Invalid key format: ${n}`);return e.slice(1,e.length-1).join(Oc)}function K5(n){return n.startsWith(_h.URL_SCHEME)?n.slice(_h.URL_SCHEME.length):n}class _h{constructor(e){if(!xe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=bM(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=Ex(e),a=Ol.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,_5(a));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw xM(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=s;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const u=JSON.parse(a);t.format=u.format,t.generatedBy=u.generatedBy,t.convertedBy=u.convertedBy,u.signature!=null&&(t.signature=u.signature),u.userDefinedMetadata!=null&&(t.userDefinedMetadata=u.userDefinedMetadata),u.modelInitializer!=null&&(t.modelInitializer=u.modelInitializer),u.initializerSignature!=null&&(t.initializerSignature=u.initializerSignature),u.trainingConfig!=null&&(t.trainingConfig=u.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=A5(o),t}}_h.URL_SCHEME="localstorage://";const wM=n=>xe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(_h.URL_SCHEME)?X5(n.slice(_h.URL_SCHEME.length)):null;Vr.registerSaveRouter(wM),Vr.registerLoadRouter(wM);function X5(n){return new _h(n)}class Y5{constructor(){U(xe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),U(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},t=Ag+Oc,r=Oc+vM;for(let s=0;s<this.LS.length;++s){const a=this.LS.key(s);if(a.startsWith(t)&&a.endsWith(r)){const o=q5(a);e[o]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=K5(e);const t=bM(e);if(this.LS.getItem(t.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(t.info));return xM(t),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Og="://";class Ua{constructor(){this.managers={}}static getInstance(){return Ua.instance==null&&(Ua.instance=new Ua),Ua.instance}static registerManager(e,t){U(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Og)&&(e=e.slice(0,e.indexOf(Og))),U(e.length>0,()=>"scheme must not be an empty string.");const r=Ua.getInstance();U(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=t}static getManager(e){const t=Ua.getInstance().managers[e];if(t==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Ua.getInstance().managers)}}function dC(n){if(n.indexOf(Og)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ua.getSchemes().join(",")}`);return{scheme:n.split(Og)[0],path:n.split(Og)[1]}}async function SM(n,e,t=!1){U(n!==e,()=>`Old path and new path are the same: '${n}'`);const r=Vr.getLoadHandlers(n);U(r.length>0,()=>`Copying failed because no load handler is found for source URL ${n}.`),U(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${n}.`);const s=r[0],a=Vr.getSaveHandlers(e);U(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),U(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=a[0],u=dC(n).scheme,c=dC(n).path,d=u===dC(n).scheme,m=await s.load();t&&d&&await Ua.getManager(u).removeModel(c);const g=await o.save(m);return t&&!d&&await Ua.getManager(u).removeModel(c),g.modelArtifactsInfo}async function Q5(){const n=Ua.getSchemes(),e={};for(const t of n){const r=await Ua.getManager(t).listModels();for(const s in r){const a=t+Og+s;e[a]=r[s]}}return e}async function Z5(n){const e=dC(n);return Ua.getManager(e.scheme).removeModel(e.path)}async function J5(n,e){return SM(n,e,!1)}async function eq(n,e){return SM(n,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tq{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(typeof window>"u"||!xe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return AL(e)}}if(xe().get("IS_BROWSER")){xe().setPlatform("browser",new tq);try{Ua.registerManager(_h.URL_SCHEME,new Y5)}catch{}try{Ua.registerManager(Dh.URL_SCHEME,new U5)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nq={importFetch:()=>require("node-fetch")};let Q$;class rq{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return xe().global.fetch!=null?xe().global.fetch(e,t):(Q$==null&&(Q$=nq.importFetch()),Q$(e,t))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}xe().get("IS_NODE")&&!xe().get("IS_BROWSER")&&xe().setPlatform("node",new rq);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gn(n,e="float32",t){return e=e||"float32",zi(n),new ms(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sq(n,e){const t=H(n,"x","cast");if(!SL(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:t},s={dtype:e};return Q.runKernel(Bm,r,s)}const nt=J({cast_:sq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aq(n){const t={x:H(n,"x","clone","string_or_numeric")};return Q.runKernel(Jm,t)}const $u=J({clone_:aq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$(n,e=!1){console.log(n.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */rM(),a5({buffer:gn,cast:nt,clone:$u,print:Z$});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iq(n,e){let t=H(n,"a","add"),r=H(e,"b","add");[t,r]=Br(t,r);const s={a:t,b:r};return Q.runKernel(Ch,s)}const Be=J({add_:iq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oq(n,e){let t=H(n,"a","floorDiv"),r=H(e,"b","floorDiv");[t,r]=Br(t,r);const s={a:t,b:r};return Q.runKernel(Qm,s)}const hC=J({floorDiv_:oq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lq(n,e){let t=H(n,"a","div"),r=H(e,"b","div");if([t,r]=Br(t,r),t.dtype==="int32"&&r.dtype==="int32")return hC(t,r);const s={a:t,b:r},a={};return Q.runKernel(jm,s,a)}const It=J({div_:lq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uq(n,e){let t=H(n,"a","mul"),r=H(e,"b","mul");[t,r]=Br(t,r);const s={a:t,b:r};return Q.runKernel(lg,s)}const ae=J({mul_:uq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cq(n){const e=H(n,"x","abs");if(e.dtype==="complex64"){const t={x:e};return Q.runKernel(wb,t)}else{const t={x:e};return Q.runKernel(db,t)}}const gs=J({abs_:cq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fq(n){const t={x:H(n,"x","acos")};return Q.runKernel(Am,t)}const J$=J({acos_:fq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dq(n){const t={x:H(n,"x","acosh")};return Q.runKernel(Om,t)}const eI=J({acosh_:dq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(n){U(Array.isArray(n),()=>"The argument passed to tf.addN() must be a list of tensors"),U(n.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${n.length}`);const e=n.map((s,a)=>H(s,`tensors${a}`,"addN")),t=e[0];e.forEach(s=>{if(s.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!Nn(s.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return Q.runKernel(hb,r)}const CM=J({addN_:hq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pq(n,e=null,t=!1){const s={x:H(n,"x","all","bool")},a={axis:e,keepDims:t};return Q.runKernel(Y1,s,a)}const pC=J({all_:pq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mq(n,e=null,t=!1){const s={x:H(n,"x","any","bool")},a={axis:e,keepDims:t};return Q.runKernel(Q1,s,a)}const Nx=J({any_:mq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gq(n,e=0){const r={x:H(n,"x","argMax")},s={axis:e};return Q.runKernel(pb,r,s)}const Ah=J({argMax_:gq});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yq(n,e=0){const r={x:H(n,"x","argMin")},s={axis:e};return Q.runKernel(mb,r,s)}const tI=J({argMin_:yq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vq(n){const t={x:H(n,"x","asin")};return Q.runKernel(Fm,t)}const nI=J({asin_:vq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bq(n){const t={x:H(n,"x","asinh")};return Q.runKernel(Lm,t)}const rI=J({asinh_:bq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xq(n){const t={x:H(n,"x","atan")};return Q.runKernel(Mm,t)}const sI=J({atan_:xq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wq(n,e){let t=H(n,"a","atan2"),r=H(e,"b","atan2");[t,r]=Br(t,r);const s={a:t,b:r};return Q.runKernel(Pm,s)}const aI=J({atan2_:wq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sq(n){const t={x:H(n,"x","atanh")};return Q.runKernel(zm,t)}const iI=J({atanh_:Sq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $x(n,e,t,r,s="NHWC",a){const o=n[3],u=[...e,o],c=Lc(s);return zs(n,u,t,a,r,null,null,c)}function Go(n,e,t,r,s,a,o="channelsLast"){const[u,c]=Ix(e);let d;if(o==="channelsLast")d=[u,c,n[3],n[3]];else if(o==="channelsFirst")d=[u,c,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return zs(n,d,t,r,s,a,!1,o)}function Fc(n,e,t,r,s,a,o="NDHWC"){const[u,c,d]=lI(e);let m,g;if(o==="NDHWC")g="channelsLast",m=[u,c,d,n[4],n[4]];else if(o==="NCDHW")g="channelsFirst",m=[u,c,d,n[1],n[1]];else throw new Error(`Unknown dataFormat ${o}`);return Xf(n,m,t,r,s,!1,g,a)}function zs(n,e,t,r,s,a,o=!1,u="channelsLast"){let[c,d,m,g]=[-1,-1,-1,-1];if(u==="channelsLast")[c,d,m,g]=n;else if(u==="channelsFirst")[c,g,d,m]=n;else throw new Error(`Unknown dataFormat ${u}`);const[y,x,,S]=e,[k,C]=Ix(t),[N,$]=Ix(r),A=Fg(y,N),D=Fg(x,$),{padInfo:L,outHeight:P,outWidth:W}=kq(s,d,m,k,C,A,D,a,u),B=o?S*g:S;let G;return u==="channelsFirst"?G=[c,B,P,W]:u==="channelsLast"&&(G=[c,P,W,B]),{batchSize:c,dataFormat:u,inHeight:d,inWidth:m,inChannels:g,outHeight:P,outWidth:W,outChannels:B,padInfo:L,strideHeight:k,strideWidth:C,filterHeight:y,filterWidth:x,effectiveFilterHeight:A,effectiveFilterWidth:D,dilationHeight:N,dilationWidth:$,inShape:n,outShape:G,filterShape:e}}function Xf(n,e,t,r,s,a=!1,o="channelsLast",u){let[c,d,m,g,y]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[c,d,m,g,y]=n;else if(o==="channelsFirst")[c,y,d,m,g]=n;else throw new Error(`Unknown dataFormat ${o}`);const[x,S,k,,C]=e,[N,$,A]=lI(t),[D,L,P]=lI(r),W=Fg(x,D),B=Fg(S,L),G=Fg(k,P),{padInfo:X,outDepth:re,outHeight:ue,outWidth:ne}=Eq(s,d,m,g,N,$,A,W,B,G,u),me=a?C*y:C;let ge;return o==="channelsFirst"?ge=[c,me,re,ue,ne]:o==="channelsLast"&&(ge=[c,re,ue,ne,me]),{batchSize:c,dataFormat:o,inDepth:d,inHeight:m,inWidth:g,inChannels:y,outDepth:re,outHeight:ue,outWidth:ne,outChannels:me,padInfo:X,strideDepth:N,strideHeight:$,strideWidth:A,filterDepth:x,filterHeight:S,filterWidth:k,effectiveFilterDepth:W,effectiveFilterHeight:B,effectiveFilterWidth:G,dilationDepth:D,dilationHeight:L,dilationWidth:P,inShape:n,outShape:ge,filterShape:e}}function Cq(n,e,t,r,s){r==null&&(r=oI(n,e,t));const a=n[0],o=n[1],u=Rx((a-e+2*r)/t+1,s),c=Rx((o-e+2*r)/t+1,s);return[u,c]}function Tq(n,e,t,r,s,a){s==null&&(s=oI(n,e[0],r[0]));const o=[0,0,0,t];for(let u=0;u<3;u++)n[u]+2*s>=e[u]&&(o[u]=Rx((n[u]-e[u]+2*s)/r[u]+1,a));return o}function oI(n,e,t,r=1){const s=Fg(e,r);return Math.floor((n[0]*(t-1)-t+s)/2)}function Ix(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function lI(n){return typeof n=="number"?[n,n,n]:n}function Fg(n,e){return e<=1?n:n+(n-1)*(e-1)}function kq(n,e,t,r,s,a,o,u,c){let d,m,g;if(typeof n=="number"){d={top:n,bottom:n,left:n,right:n,type:n===0?"VALID":"NUMBER"};const x=Cq([e,t],a,r,n,u);m=x[0],g=x[1]}else if(n==="same"){m=Math.ceil(e/r),g=Math.ceil(t/s);const y=Math.max(0,(m-1)*r+a-e),x=Math.max(0,(g-1)*s+o-t),S=Math.floor(y/2),k=y-S,C=Math.floor(x/2),N=x-C;d={top:S,bottom:k,left:C,right:N,type:"SAME"}}else if(n==="valid")d={top:0,bottom:0,left:0,right:0,type:"VALID"},m=Math.ceil((e-a+1)/r),g=Math.ceil((t-o+1)/s);else if(typeof n=="object"){const y=c==="channelsLast"?n[1][0]:n[2][0],x=c==="channelsLast"?n[1][1]:n[2][1],S=c==="channelsLast"?n[2][0]:n[3][0],k=c==="channelsLast"?n[2][1]:n[3][1];d={top:y,bottom:x,left:S,right:k,type:y===0&&x===0&&S===0&&k===0?"VALID":"EXPLICIT"},m=Rx((e-a+y+x)/r+1,u),g=Rx((t-o+S+k)/s+1,u)}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:d,outHeight:m,outWidth:g}}function Eq(n,e,t,r,s,a,o,u,c,d,m){let g,y,x,S;if(n==="valid"&&(n=0),typeof n=="number"){g={top:n,bottom:n,left:n,right:n,front:n,back:n,type:n===0?"VALID":"NUMBER"};const C=Tq([e,t,r,1],[u,c,d],1,[s,a,o],n,m);y=C[0],x=C[1],S=C[2]}else if(n==="same"){y=Math.ceil(e/s),x=Math.ceil(t/a),S=Math.ceil(r/o);const k=(y-1)*s+u-e,C=(x-1)*a+c-t,N=(S-1)*o+d-r,$=Math.floor(k/2),A=k-$,D=Math.floor(C/2),L=C-D,P=Math.floor(N/2),W=N-P;g={top:D,bottom:L,left:P,right:W,front:$,back:A,type:"SAME"}}else throw Error(`Unknown padding parameter: ${n}`);return{padInfo:g,outDepth:y,outHeight:x,outWidth:S}}function Rx(n,e){if(!e)return Math.trunc(n);switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error(`Unknown roundingMode ${e}`)}}function Yf(n){const[e,t,r]=Ix(n);return e===1&&t===1&&r===1}function la(n,e){return Yf(n)||Yf(e)}function Oh(n){return Ix(n).every(e=>e>0)}function Lc(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${n}`)}function Wa(n,e,t){if(t!=null){if(typeof e=="string")throw Error(`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);if(typeof e=="number")U(bh(e),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{U(bh(s),()=>`Error in ${n}: pad must be an integer when using dimRoundingMode ${t} but got pad ${s}.`)})});else throw Error(`Error in ${n}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nq(n,e){const r={x:H(n,"x","reshape","string_or_numeric")},s={shape:e};return Q.runKernel(tx,r,s)}const oe=J({reshape_:Nq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $q(n,e,t,r,s){const a=H(n,"x","avgPool","float32"),o=1;U(la(t,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`);let u=a,c=!1;a.rank===3&&(c=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(u.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${u.rank}.`),Wa("avgPool",r,s);const d={x:u},m={filterSize:e,strides:t,pad:r,dimRoundingMode:s};let g=Q.runKernel(gb,d,m);return g=nt(g,a.dtype),c?oe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Dx=J({avgPool_:$q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iq(n,e,t,r,s,a="NDHWC"){const o=H(n,"x","avgPool3d","float32");let u=o,c=!1;o.rank===4&&(c=!0,u=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(u.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${u.rank}.`),U(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),U(typeof t=="number"&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),Wa("avgPool3d",r,s);const d={x:u},m={filterSize:e,strides:t,pad:r,dimRoundingMode:s,dataFormat:a};let g=Q.runKernel(yb,d,m);return g=nt(g,u.dtype),c?oe(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const uI=J({avgPool3d_:Iq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rq(n,e=0){U(n.length>=1,()=>"Pass at least one tensor to concat");const t=kx(n,"tensors","concat","string_or_numeric");if(t[0].dtype==="complex64"&&t.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),t.length===1)return $u(t[0]);const r=t,s={axis:e};return Q.runKernel(Sb,r,s)}const es=J({concat_:Rq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dq(n,e,t=!1,r=!1){let s=H(n,"a","matMul"),a=H(e,"b","matMul");[s,a]=Br(s,a);const o={a:s,b:a},u={transposeA:t,transposeB:r};return Q.runKernel(vb,o,u)}const Sn=J({matMul_:Dq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _q(n){const t={x:H(n,"x","sigmoid","float32")};return Q.runKernel(bg,t)}const Ll=J({sigmoid_:_q});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aq(n,e,t){const r=H(n,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},a={begin:e,size:t};return Q.runKernel(ix,s,a)}const Dn=J({slice_:Aq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oq(n){const t={x:H(n,"x","tanh","float32")};return Q.runKernel(kg,t)}const Qf=J({tanh_:Oq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fq(n,e,t,r,s,a){const o=H(n,"forgetBias","basicLSTMCell"),u=H(e,"lstmKernel","basicLSTMCell"),c=H(t,"lstmBias","basicLSTMCell"),d=H(r,"data","basicLSTMCell"),m=H(s,"c","basicLSTMCell"),g=H(a,"h","basicLSTMCell"),y=es([d,g],1),x=Sn(y,u),S=Be(x,c),k=S.shape[0],C=S.shape[1]/4,N=[k,C],$=Dn(S,[0,0],N),A=Dn(S,[0,C],N),D=Dn(S,[0,C*2],N),L=Dn(S,[0,C*3],N),P=Be(ae(Ll($),Qf(A)),ae(m,Ll(Be(o,D)))),W=ae(Qf(P),Ll(L));return[P,W]}const TM=J({basicLSTMCell_:Fq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lq(n,e,t){const r=H(n,"x","batchToSpaceND"),s=e.reduce((u,c)=>u*c);U(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),U(t.length===e.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${e.length}`),U(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const a={x:r},o={blockShape:e,crops:t};return Q.runKernel(bb,a,o)}const _x=J({batchToSpaceND_:Lq});function Mq(n){let e;return n.rank===0||n.rank===1?e=oe(n,[1,1,1,n.size]):n.rank===2?e=oe(n,[1,1,n.shape[0],n.shape[1]]):n.rank===3?e=oe(n,[1,n.shape[0],n.shape[1],n.shape[2]]):e=n,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zq(n,e,t,r,s,a){a==null&&(a=.001);const o=H(n,"x","batchNorm"),u=H(e,"mean","batchNorm"),c=H(t,"variance","batchNorm");let d;s!=null&&(d=H(s,"scale","batchNorm"));let m;r!=null&&(m=H(r,"offset","batchNorm")),U(u.rank===c.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(m==null||u.rank===m.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(d==null||u.rank===d.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const y={x:Mq(o),scale:d,offset:m,mean:u,variance:c},x={varianceEpsilon:a},S=Q.runKernel(Db,y,x);return oe(S,o.shape)}const Lg=J({batchNorm_:zq});function Pq(n,e,t,r,s,a){const o=H(n,"x","batchNorm"),u=H(e,"mean","batchNorm"),c=H(t,"variance","batchNorm");let d;s!=null&&(d=H(s,"scale","batchNorm"));let m;return r!=null&&(m=H(r,"offset","batchNorm")),U(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),U(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${u.rank}.`),U(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),d!=null&&U(d.rank===2||d.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${d.rank}.`),m!=null&&U(m.rank===2||m.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${m.rank}.`),Lg(o,u,c,m,d,a)}const cI=J({batchNorm2d_:Pq});function Bq(n,e,t,r,s,a){const o=H(n,"x","batchNorm"),u=H(e,"mean","batchNorm"),c=H(t,"variance","batchNorm");let d;s!=null&&(d=H(s,"scale","batchNorm"));let m;return r!=null&&(m=H(r,"offset","batchNorm")),U(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),U(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${u.rank}.`),U(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),d!=null&&U(d.rank===3||d.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${d.rank}.`),m!=null&&U(m.rank===3||m.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${m.rank}.`),Lg(o,u,c,m,d,a)}const fI=J({batchNorm3d_:Bq});function Vq(n,e,t,r,s,a){const o=H(n,"x","batchNorm"),u=H(e,"mean","batchNorm"),c=H(t,"variance","batchNorm");let d;s!=null&&(d=H(s,"scale","batchNorm"));let m;return r!=null&&(m=H(r,"offset","batchNorm")),U(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),U(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${u.rank}.`),U(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),d!=null&&U(d.rank===4||d.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${d.rank}.`),m!=null&&U(m.rank===4||m.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${m.rank}.`),Lg(o,u,c,m,d,a)}const dI=J({batchNorm4d_:Vq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uq(n,e,t){const r=H(n,"x","bincount"),s=H(e,"weights","bincount");U(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),U(t>=0,()=>`size must be non-negative, but got ${t}.`),U(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const a={x:r,weights:s},o={size:t};return Q.runKernel(eS,a,o)}const hI=J({bincount_:Uq});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wq(n,e){const t=H(n,"x","bitwiseAnd"),r=H(e,"y","bitwiseAnd");if(!Nn(t.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${r.shape}`);if(t.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${r.dtype}`);const s={a:t,b:r};return Q.runKernel(xb,s)}const kM=J({bitwiseAnd_:Wq});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hq(n,e){const t=H(n,"s0","broadcastArgs","int32"),r=H(e,"s1","broadcastArgs","int32");if(t.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:t,s1:r};return Q.runKernel(tS,s)}const EM=J({broadcastArgs_:Hq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jq(n,e){let t=H(n,"broadcastTo","x");const r=t.shape;if(zi(e),e.length<t.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${t.rank}.`);if(e.length>t.rank){const d=t.shape.slice();for(;d.length<e.length;)d.unshift(1);t=oe(t,d)}const s=t.shape,a=Array.from(e);for(let d=e.length-1;d>=0;d--)if(s[d]===e[d])a[d]=1;else if(t.shape[d]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((d,m)=>d>1?m:-1).filter(d=>d>=0).length===0)return $u(t);const u={x:t},c={reps:a};return Q.runKernel(Eg,u,c)}const Fh=J({broadcastTo_:jq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gq(n){const t={x:H(n,"x","ceil","float32")};return Q.runKernel(Vm,t)}const pI=J({ceil_:Gq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lh(n,e,t){zi(n),t=t||wh(e);const r={shape:n,value:e,dtype:t};return Q.runKernel(bS,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qq(n,e,t){const r=H(n,"x","clipByValue");if(U(e<=t,()=>`Error in clip: min (${e}) must be less than or equal to max (${t}).`),e===t)return Lh(r.shape,e,r.dtype);const s={x:r},a={clipValueMin:e,clipValueMax:t};return Q.runKernel(Um,s,a)}const gi=J({clipByValue_:qq});function Kq(n){return es(n,0)}const mI=J({concat1d_:Kq});function Xq(n,e){return es(n,e)}const gI=J({concat2d_:Xq});function Yq(n,e){return es(n,e)}const yI=J({concat3d_:Yq});function Qq(n,e){return es(n,e)}const vI=J({concat4d_:Qq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zq(n,e,t,r,s="NHWC",a=[1,1],o){const u=H(n,"x","conv2d","float32"),c=H(e,"filter","conv2d","float32");let d=u,m=!1;u.rank===3&&(m=!0,d=oe(u,[1,u.shape[0],u.shape[1],u.shape[2]])),U(d.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${d.rank}.`),U(c.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${c.rank}.`),Wa("conv2d",r,o);const g=s==="NHWC"?d.shape[3]:d.shape[1];U(g===c.shape[2],()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${c.shape[2]}.`),U(la(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),U(Oh(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),U(Oh(t),()=>"Error in conv2D: Strides should be larger than 0.");const y={x:d,filter:c},x={strides:t,pad:r,dataFormat:s,dilations:a,dimRoundingMode:o},S=Q.runKernel(Cb,y,x);return m?oe(S,[S.shape[1],S.shape[2],S.shape[3]]):S}const Mc=J({conv2d_:Zq});function Jq(n,e,t,r,s="NWC",a=1,o){const u=H(n,"x","conv1d"),c=H(e,"filter","conv1d");let d=u,m=!1;u.rank===2&&(m=!0,d=oe(u,[1,u.shape[0],u.shape[1]])),U(d.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${d.rank}.`),U(c.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${c.rank}.`),Wa("conv1d",r,o),U(d.shape[2]===c.shape[1],()=>`Error in conv1d: depth of input (${d.shape[2]}) must match input depth for filter ${c.shape[1]}.`),U(la(t,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${a}'`),U(Oh(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),U(Oh(t),()=>"Error in conv1D: Stride should be larger than 0."),U(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const g=oe(c,[1,c.shape[0],c.shape[1],c.shape[2]]),y=oe(d,[d.shape[0],1,d.shape[1],d.shape[2]]),C=Mc(y,g,[1,t],r,"NHWC",[1,a],o);return m?oe(C,[C.shape[2],C.shape[3]]):oe(C,[C.shape[0],C.shape[2],C.shape[3]])}const mC=J({conv1d_:Jq});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8(n,e,t,r,s,a="NHWC",o){U(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let u=n,c=e,d=!1;e.rank===3&&(d=!0,c=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),u=[1,n[0],n[1],n[2]]),U(u.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${u.length}.`),U(c.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${c.rank}`),U(t.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);const m=a==="NHWC"?u[3]:u[1],g=a==="NHWC"?c.shape[3]:c.shape[1];U(m===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${m}) must match input depth for filter ${t.shape[2]}.`),U(g===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must match output depth for filter ${t.shape[3]}.`),Wa("conv2dDerInput",s,o);const y={dy:c,filter:t},x={strides:r,pad:s,dataFormat:a,dimRoundingMode:o,inputShape:u},S=Q.runKernel(Tb,y,x);return d?oe(S,[S.shape[1],S.shape[2],S.shape[3]]):S}const bI=J({conv2DBackpropInput_:e8});function t8(n,e,t,r,s,a){const o=H(n,"x","conv2dTranspose"),u=H(e,"filter","conv2dTranspose");return bI(t,o,u,r,s,"NHWC",a)}const gC=J({conv2dTranspose_:t8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8(n,e,t,r,s="NDHWC",a=[1,1,1]){const o=H(n,"x","conv3d"),u=H(e,"filter","conv3d");let c=o,d=!1;o.rank===4&&(d=!0,c=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(c.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${c.rank}.`),U(u.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${u.rank}.`),U(c.shape[4]===u.shape[3],()=>`Error in conv3d: depth of input (${c.shape[4]}) must match input depth for filter ${u.shape[3]}.`),U(la(t,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),U(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),U(Oh(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),U(Oh(t),()=>"Error in conv3D: Strides should be larger than 0.");const m={x:c,filter:u},g={strides:t,pad:r,dataFormat:s,dilations:a},y=Q.runKernel(kb,m,g);return d?oe(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const xI=J({conv3d_:n8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8(n,e,t,r,s){U(n.length===e.rank,()=>`Length of inShape (${n.length}) and rank of dy (${e.rank}) must match`);let a=n,o=e,u=!1;e.rank===4&&(u=!0,o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,n[0],n[1],n[2],n[3]]);const c=a[4],d=o.shape[4];U(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),U(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),U(t.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),U(c===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${c}) must match input depth for filter ${t.shape[3]}.`),U(d===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${d}) must match output depth for filter ${t.shape[4]}.`);const m={dy:o,filter:t},g={pad:s,strides:r,inputShape:a},y=Q.runKernel(aS,m,g);return u?oe(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const NM=J({conv3DBackpropInput_:r8});function s8(n,e,t,r,s){const a=H(n,"x","conv3dTranspose"),o=H(e,"filter","conv3dTranspose");return NM(t,a,o,r,s)}const wI=J({conv3dTranspose_:s8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8(n){const t={x:H(n,"x","cos","float32")};return Q.runKernel(Wm,t)}const Ax=J({cos_:a8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i8(n){const t={x:H(n,"x","cosh","float32")};return Q.runKernel(Hm,t)}const yC=J({cosh_:i8});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o8(n,e=0,t=!1,r=!1){const a={x:H(n,"x","cumprod")},o={axis:e,exclusive:t,reverse:r};return Q.runKernel(iS,a,o)}const Ox=J({cumprod_:o8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8(n,e=0,t=!1,r=!1){const a={x:H(n,"x","cumsum")},o={axis:e,exclusive:t,reverse:r};return Q.runKernel(Eb,a,o)}const vC=J({cumsum_:l8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(n,e,t,r=!1){const s=H(n,"x","denseBincount"),a=H(e,"weights","denseBincount");U(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),U(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),U(t>=0,()=>`size must be non-negative, but got ${t}.`),U(a.size===s.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${a.shape}.`);const o={x:s,weights:a},u={size:t,binaryOutput:r};return Q.runKernel(lS,o,u)}const bC=J({denseBincount_:u8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c8(n,e,t="NHWC"){const r=H(n,"x","depthToSpace","float32"),s=t==="NHWC"?r.shape[1]:r.shape[2],a=t==="NHWC"?r.shape[2]:r.shape[3],o=t==="NHWC"?r.shape[3]:r.shape[1];U(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),U(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),U(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),U(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const u={x:r},c={blockSize:e,dataFormat:t};return Q.runKernel(uS,u,c)}const SI=J({depthToSpace_:c8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8(n,e,t,r,s="NHWC",a=[1,1],o){const u=H(n,"x","depthwiseConv2d","float32"),c=H(e,"filter","depthwiseConv2d","float32");let d=u,m=!1;u.rank===3&&(m=!0,d=oe(u,[1,u.shape[0],u.shape[1],u.shape[2]])),U(d.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${d.rank}.`),U(c.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${c.rank}.`);const g=s==="NHWC"?d.shape[3]:d.shape[1];U(g===c.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${g}) must match the inChannels dimension in filter ${c.shape[2]}.`),Wa("depthwiseConv2d",r,o);const y={x:d,filter:c},x={strides:t,pad:r,dataFormat:s,dilations:a,dimRoundingMode:o},S=Q.runKernel(Nb,y,x);return m?oe(S,[S.shape[1],S.shape[2],S.shape[3]]):S}const Mg=J({depthwiseConv2d_:f8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d8(n){const t={x:H(n,"x","diag")};return Q.runKernel(dS,t)}const $M=J({diag_:d8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h8(n,e,t,r,s=[1,1],a="NHWC"){const o=H(n,"x","dilation2d"),u=H(e,"filter","dilation2d");U(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),U(u.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${u.rank}.`),U(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let c=o,d=!1;o.rank===3&&(c=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),d=!0),U(c.shape[3]===u.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${c.shape[3]} vs ${u.shape[2]}`);const m={x:c,filter:u},g={strides:t,pad:r,dilations:s},y=Q.runKernel($b,m,g);return d?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const CI=J({dilation2d_:h8});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mh(n,e){const t=n.length,r=[];for(let s=0;s<t;s++){const a=t-1-s,o=n[a]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(a)}return r}function ys(n,e){const t=[];for(let r=0;r<e.length;r++){const s=n[n.length-r-1],a=e.length-r-1,o=e[a];(s==null||s===1&&o>1)&&t.unshift(a)}return t}function cn(n,e){const t=Math.max(n.length,e.length),r=new Array(t);for(let s=0;s<t;s++){let a=n[n.length-s-1];a==null&&(a=1);let o=e[e.length-s-1];if(o==null&&(o=1),a===1)r[t-s-1]=o;else if(o===1)r[t-s-1]=a;else if(a!==o){const u=`Operands could not be broadcast together with shapes ${n} and ${e}.`;throw Error(u)}else r[t-s-1]=a}return r}const p8=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:cn,getBroadcastDims:Mh,getReductionAxes:ys},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m8(n,e){let t=H(n,"a","equal","string_or_numeric"),r=H(e,"b","equal","string_or_numeric");[t,r]=Br(t,r),cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(Ib,s)}const Ui=J({equal_:m8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g8(n,e,t){const r=H(e,"a","where"),s=H(t,"b","where"),a=H(n,"condition","where","bool"),o=cn(cn(a.shape,r.shape),s.shape),u=Fh(a,o),c=Fh(r,o),d=Fh(s,o),m={condition:u,t:c,e:d};return Q.runKernel(ax,m)}const Ps=J({where_:g8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y8(n){const t={x:H(n,"x","zerosLike")};return Q.runKernel(px,t)}const _n=J({zerosLike_:y8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8(n,e){let t=H(n,"a","div"),r=H(e,"b","div");[t,r]=Br(t,r);const s=It(t,r),a=_n(s),o=Ui(r,a);return Ps(o,a,s)}const TI=J({divNoNan_:v8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b8(n,e){const t=H(n,"t1","dot"),r=H(e,"t2","dot");U((t.rank===1||t.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${r.rank}.`);const s=t.rank===1?t.size:t.shape[1],a=r.rank===1?r.size:r.shape[0];if(U(s===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${a}.`),t.rank===1&&r.rank===1){const o=oe(t,[1,-1]),u=oe(r,[-1,1]),c=Sn(o,u);return oe(c,[])}else if(t.rank===1&&r.rank===2){const o=oe(t,[1,-1]),u=oe(r,[r.shape[0],r.shape[1]]),c=Sn(o,u);return oe(c,[c.size])}else if(t.rank===2&&r.rank===1){const o=oe(r,[-1,1]),u=Sn(t,o);return oe(u,[u.size])}else{const o=oe(r,[r.shape[0],r.shape[1]]);return Sn(t,o)}}const kI=J({dot_:b8});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x8(n,...e){const t=e.map((s,a)=>H(s,`tensors${a}`,"einsum")),r={equation:n};return Q.runKernel(gS,t,r)}const zh=J({einsum_:x8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w8(n){const t={x:H(n,"x","elu","float32")};return Q.runKernel(Gm,t)}const zg=J({elu_:w8});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8(n,e){const t=H(n,"x","ensureShape","string_or_numeric");if(!xL(t.shape,e))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${e}`);return n}const IM=J({ensureShape_:S8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8(n){let e=H(n,"x","erf");U(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=nt(e,"float32"));const t={x:e};return Q.runKernel(qm,t)}const xC=J({erf_:C8});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EI(n,e){for(let t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function RM(n,e,t){const r=n.length+e.length,s=[];let a=0,o=0;for(let u=0;u<r;u++)t.indexOf(u)===-1?s.push(n[a++]):s.push(e[o++]);return s}function Bs(n,e){const t=[],r=n.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);const s=e.map(a=>n[a]);return[t,s]}function ts(n,e){const t=e.map(r=>1);return RM(n,t,e)}function ua(n,e,t){U(EI(e,t),()=>`${n} supports only inner-most axes for now. Got axes ${e} and rank-${t} input.`)}function Ur(n,e){if(EI(n,e))return null;const t=[];for(let r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach(r=>t.push(r)),t}function Zf(n){return n.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function ns(n,e){const t=[];for(let r=e-n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8(n,e=null,t=!1){const s={x:H(n,"x","max")},a={reductionIndices:e,keepDims:t};return Q.runKernel(Vb,s,a)}const yo=J({max_:T8});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k8(n,e=null,t=!1){const s={x:H(n,"x","min")},a={axis:e,keepDims:t};return Q.runKernel(jb,s,a)}const Pg=J({min_:k8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8(n,e){let t=H(n,"base","pow"),r=H(e,"exp","pow");[t,r]=Br(t,r);const s={a:t,b:r};return Q.runKernel(ug,s)}const Iu=J({pow_:E8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ft(n,e){if((ks(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ks(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Gf(n,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8(n){const t={x:H(n,"x","sqrt","float32")};return Q.runKernel(wg,t)}const Vs=J({sqrt_:N8});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8(n){const e=H(n,"x","square"),t={};return Q.runKernel("Square",{x:e},t)}const hr=J({square_:$8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8(n,e=null,t=!1){let r=H(n,"x","sum");r.dtype==="bool"&&(r=nt(r,"int32"));const s={x:r},a={axis:e,keepDims:t};return Q.runKernel(ox,s,a)}const Ct=J({sum_:I8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8(n,e="euclidean",t=null,r=!1){n=H(n,"x","norm");const s=DM(n,e,t);let a=s.shape;if(r){const o=wn(t,n.shape);a=ts(s.shape,o)}return oe(s,a)}function DM(n,e,t=null){if(n.rank===0)return gs(n);if(n.rank!==1&&t===null)return DM(oe(n,[-1]),e,t);if(n.rank===1||typeof t=="number"||Array.isArray(t)&&t.length===1){if(e===1)return Ct(gs(n),t);if(e===1/0)return yo(gs(n),t);if(e===-1/0)return Pg(gs(n),t);if(e==="euclidean"||e===2)return Vs(Ct(Iu(gs(n),Ft(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(t)&&t.length===2){if(e===1)return yo(Ct(gs(n),t[0]),t[1]-1);if(e===1/0)return yo(Ct(gs(n),t[1]),t[0]);if(e===-1/0)return Pg(Ct(gs(n),t[1]),t[0]);if(e==="fro"||e==="euclidean")return Vs(Ct(hr(n),t));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}const Bg=J({norm_:R8});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(n,e=null,t=!1){return Bg(n,"euclidean",e,t)}const NI=J({euclideanNorm_:D8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8(n){const t={x:H(n,"x","exp")};return Q.runKernel(Km,t)}const yi=J({exp_:_8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8(n,e=0){const t=H(n,"x","expandDims","string_or_numeric");U(e<=t.rank,()=>"Axis must be <= rank of the tensor");const r={input:t},s={dim:e};return Q.runKernel(Rb,r,s)}const ca=J({expandDims_:A8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8(n){const t={x:H(n,"x","expm1")};return Q.runKernel(Xm,t)}const $I=J({expm1_:O8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8(n,e){const t=H(n,"x","tile","string_or_numeric");U(t.rank===e.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${e}.`);const r={x:t},s={reps:e};return Q.runKernel(Eg,r,s)}const vo=J({tile_:F8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8(n,e,t,r="float32"){e==null&&(e=n);const s=gn([n,e],r),a=n<=e?n:e;for(let u=0;u<a;++u)s.set(1,u,u);const o=oe(s.toTensor(),[n,e]);if(t==null)return o;if(t.length===1)return vo(ca(o,0),[t[0],1,1]);if(t.length===2)return vo(ca(ca(o,0),0),[t[0],t[1],1,1]);if(t.length===3)return vo(ca(ca(ca(o,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}const wC=J({eye_:L8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8(n){const t={x:H(n,"x","floor","float32")};return Q.runKernel(Ym,t)}const Vg=J({floor_:M8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z8(n,e,t=0,r=0){const s=H(n,"x","gather"),a=H(e,"indices","gather","int32"),o={x:s,indices:a},u={axis:t,batchDims:r};return Q.runKernel(_b,o,u)}const Ug=J({gather_:z8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(n,e){let t=H(n,"a","greater","string_or_numeric"),r=H(e,"b","greater","string_or_numeric");[t,r]=Br(t,r),cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(Ab,s)}const Ha=J({greater_:P8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B8(n,e){let t=H(n,"a","greaterEqual","string_or_numeric"),r=H(e,"b","greaterEqual","string_or_numeric");[t,r]=Br(t,r),cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(Zm,s)}const zc=J({greaterEqual_:B8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8(n){const t={input:H(n,"input","imag")};return Q.runKernel(CS,t)}const Fx=J({imag_:V8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8(n){const t={x:H(n,"x","isFinite")};return Q.runKernel(eg,t)}const II=J({isFinite_:U8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W8(n){const t={x:H(n,"x","isInf")};return Q.runKernel(tg,t)}const RI=J({isInf_:W8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H8(n){const t={x:H(n,"x","isNaN")};return Q.runKernel(ng,t)}const DI=J({isNaN_:H8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j8(n,e=.2){const r={x:H(n,"x","leakyRelu")},s={alpha:e};return Q.runKernel(Ob,r,s)}const Lx=J({leakyRelu_:j8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8(n,e){let t=H(n,"a","less","string_or_numeric"),r=H(e,"b","less","string_or_numeric");[t,r]=Br(t,r),cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(Fb,s)}const Wg=J({less_:G8});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q8(n,e){let t=H(n,"a","lessEqual","string_or_numeric"),r=H(e,"b","lessEqual","string_or_numeric");[t,r]=Br(t,r),cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(Lb,s)}const Jf=J({lessEqual_:q8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _M(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");const r={start:n,stop:e,num:t};return Q.runKernel(TS,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(n,e=5,t=1,r=1,s=.5){const a=H(n,"x","localResponseNormalization");U(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),U(bh(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=a,u=!1;a.rank===3&&(u=!0,o=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const c={x:o},d={depthRadius:e,bias:t,alpha:r,beta:s},m=Q.runKernel(Bb,c,d);return u?oe(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const _I=J({localResponseNormalization_:K8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X8(n){const t={x:H(n,"x","log","float32")};return Q.runKernel(rg,t)}const Wi=J({log_:X8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8(n){const t={x:H(n,"x","log1p")};return Q.runKernel(sg,t)}const Mx=J({log1p_:Y8});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q8(n){return U(Wf(n),()=>"The f passed in grad(f) must be a function"),(e,t)=>{const r=H(e,"x","tf.grad","string_or_numeric"),s=t!=null?H(t,"dy","tf.grad"):null;return Q.tidy(()=>{const{value:a,grads:o}=Q.gradients(()=>n(r),[r],s);return s!=null&&aa(a.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),SC(o),o[0]})}}function Z8(n){return U(Wf(n),()=>"The f passed in grads(f) must be a function"),(e,t)=>{U(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=kx(e,"args","tf.grads","string_or_numeric"),s=t!=null?H(t,"dy","tf.grads"):null;return Q.tidy(()=>{const{value:a,grads:o}=Q.gradients(()=>n(...r),r,s);return s!=null&&aa(a.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),SC(o),o})}}function J8(n){return U(Wf(n),()=>"The f passed in valueAndGrad(f) must be a function"),(e,t)=>{U(e instanceof Pn,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),U(t==null||t instanceof Pn,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:s}=Q.gradients(()=>n(e),[e],t);return SC(r),{grad:r[0],value:s}}}function eK(n){return U(Wf(n),()=>"The f passed in valueAndGrads(f) must be a function"),(e,t)=>{U(Array.isArray(e)&&e.every(s=>s instanceof Pn),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),U(t==null||t instanceof Pn,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=Q.gradients(()=>n(...e),e,t);return t!=null&&aa(r.value.shape,t.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),SC(r.grads),r}}function AM(n,e){U(Wf(n),()=>"The f passed in variableGrads(f) must be a function"),U(e==null||Array.isArray(e)&&e.every(d=>d instanceof Tx),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const t=e!=null;if(!t){e=[];for(const d in Q.registeredVariables)e.push(Q.registeredVariables[d])}const r=t?e.filter(d=>!d.trainable):null,s=e.length;e=e.filter(d=>d.trainable),U(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const a=!0,{value:o,grads:u}=Q.gradients(n,e,null,a);U(u.some(d=>d!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),U(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const c={};return e.forEach((d,m)=>{u[m]!=null&&(c[d.name]=u[m])}),r?.forEach(d=>c[d.name]=null),{value:o,grads:c}}function Ru(n){return Q.customGrad(n)}function SC(n){if(n.filter(t=>t==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tK(n){const t={x:H(n,"x","neg")};return Q.runKernel(qb,t)}const Sr=J({neg_:tK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nK(n){const t={x:H(n,"x","softplus")};return Q.runKernel(xg,t)}const Ph=J({softplus_:nK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rK(n){const e=H(n,"x","logSigmoid");return Ru(r=>({value:Sr(Ph(Sr(r))),gradFunc:o=>ae(o,Ll(Sr(r)))}))(e)}const AI=J({logSigmoid_:rK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sK(n,e){let t=H(n,"a","sub"),r=H(e,"b","sub");[t,r]=Br(t,r);const s={a:t,b:r};return Q.runKernel(Cg,s)}const bt=J({sub_:sK});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aK(n,e=-1){const t=H(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${e}`);return Ru((s,a)=>{const u=yo(s,e,!0),c=bt(s,u),d=bt(nt(c,"float32"),Wi(Ct(yi(c),e,!0)));return a([d]),{value:d,gradFunc:(g,y)=>{const[x]=y,S=!0,k=yi(x);return bt(g,ae(Ct(g,e,S),k))}}})(t)}const CC=J({logSoftmax_:aK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iK(n,e=null,t=!1){const r=H(n,"x","logSumExp"),s=wn(e,r.shape),a=yo(r,s,!0),o=bt(r,a),u=yi(o),c=Ct(u,s),d=Wi(c),m=Be(oe(a,d.shape),d);if(t){const g=ts(m.shape,s);return oe(m,g)}return m}const zx=J({logSumExp_:iK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oK(n,e){const t=H(n,"a","logicalAnd","bool"),r=H(e,"b","logicalAnd","bool");cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(Mb,s)}const qo=J({logicalAnd_:oK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lK(n){const t={x:H(n,"x","logicalNot","bool")};return Q.runKernel(zb,t)}const Px=J({logicalNot_:lK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uK(n,e){const t=H(n,"a","logicalOr","bool"),r=H(e,"b","logicalOr","bool");cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(Pb,s)}const TC=J({logicalOr_:uK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cK(n,e){const t=H(n,"a","logicalXor","bool"),r=H(e,"b","logicalXor","bool");return cn(t.shape,r.shape),qo(TC(n,e),Px(qo(n,e)))}const OI=J({logicalXor_:cK});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kC=2147483648;function fK(n,e,t="left"){const r=H(n,"sortedSequence","searchSorted"),s=H(e,"values","searchSorted"),a=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],u=oe(r,[-1,a]),c=oe(s,[-1,o]);if(u.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(u.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Re(c.shape)>=kC)throw new Error(`values tensor size must less than ${kC}`);if(u.shape[1]>=kC)throw new Error(`trailing dim_size must less than ${kC} for int32 output type, was ${u.shape[1]}`);const d={sortedSequence:u,values:c},m={side:t};return Q.runKernel(US,d,m)}const EC=J({searchSorted_:fK});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OM(n,e){return EC(n,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dK(n,e,t,r,s){const a=H(n,"x","maxPool"),o=1;let u=a,c=!1;a.rank===3&&(c=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(u.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${u.rank}.`),U(la(t,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '${o}'`),Wa("maxPool",r,s);const d={x:u},m={filterSize:e,strides:t,pad:r,dimRoundingMode:s},g=Q.runKernel(Ub,d,m);return c?oe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Bx=J({maxPool_:dK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hK(n,e=[1,1,1],t,r,s,a="NDHWC"){const o=H(n,"x","maxPool3d");let u=o,c=!1;o.rank===4&&(c=!0,u=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),U(u.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${u.rank}.`),U(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Wa("maxPool3d",r,s);const d={x:u},m={filterSize:e,strides:t,pad:r,dimRoundingMode:s,dataFormat:a},g=Q.runKernel(Wb,d,m);return c?oe(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const FI=J({maxPool3d_:hK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pK(n,e,t,r,s=!1){const o={x:H(n,"x","maxPoolWithArgmax")},u={filterSize:e,strides:t,pad:r,includeBatchInIndex:s},c=Q.runKernel($S,o,u);return{result:c[0],indexes:c[1]}}const FM=J({maxPoolWithArgmax_:pK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mK(n,e){let t=H(n,"a","maximum"),r=H(e,"b","maximum");[t,r]=Br(t,r),t.dtype==="bool"&&(t=nt(t,"int32"),r=nt(r,"int32")),cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(ag,s)}const Du=J({maximum_:mK});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gK(n,e=null,t=!1){const s={x:H(n,"x","mean")},a={axis:e,keepDims:t};return Q.runKernel(Hb,s,a)}const Wr=J({mean_:gK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vs(n,e="float32"){if(zi(n),e==="complex64"){const r=vs(n,"float32"),s=vs(n,"float32");return Ac(r,s)}const t=ia(Re(n),e);return Q.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(n,e="float32"){if(zi(n),e==="complex64"){const r=vi(n,"float32"),s=vs(n,"float32");return Ac(r,s)}const t=X1(Re(n),e);return Q.makeTensor(t,n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LM(n,e,{indexing:t="xy"}={}){if(t!=="xy"&&t!=="ij")throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(n===void 0)return[];let r=H(n,"x","meshgrid",n instanceof Pn?n.dtype:"float32");if(e===void 0)return[r];let s=H(e,"y","meshgrid",e instanceof Pn?e.dtype:"float32");const a=Re(r.shape),o=Re(s.shape);return t==="xy"?(r=oe(r,[1,-1]),s=oe(s,[-1,1]),[Sn(vi([o,1],r.dtype),r),Sn(s,vi([1,a],s.dtype))]):(r=oe(r,[-1,1]),s=oe(s,[1,-1]),[Sn(r,vi([1,o],r.dtype)),Sn(vi([a,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yK(n,e){let t=H(n,"a","minimum"),r=H(e,"b","minimum");[t,r]=Br(t,r),t.dtype==="bool"&&(t=nt(t,"int32"),r=nt(r,"int32")),cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(ig,s)}const ed=J({minimum_:yK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vK(n,e,t){U(t==="reflect"||t==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);const r=H(n,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");U(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=t==="reflect"?1:0;for(let u=0;u<r.rank;u++)U(e[u].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),U(e[u][0]>=0&&e[u][0]<=r.shape[u]-s&&e[u][1]>=0&&e[u][1]<=r.shape[u]-s,()=>`Padding in dimension ${u} cannot be greater than or equal to ${r.shape[u]-s} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:t},o={x:r};return Q.runKernel(Gb,o,a)}const LI=J({mirrorPad_:vK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bK(n,e){let t=H(n,"a","mod"),r=H(e,"b","mod");[t,r]=Br(t,r);const s={a:t,b:r};return Q.runKernel(og,s)}const MI=J({mod_:bK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xK(n,e=null,t=!1){n=H(n,"x","moments");const r=wn(e,n.shape),s=Wr(n,r,t);let a=s.shape;t||(a=ts(s.shape,r));const o=hr(bt(nt(n,"float32"),oe(s,a))),u=Wr(o,r,t);return{mean:s,variance:u}}const Vx=J({moments_:xK});function wK(n,e,t,r){const s=H(e,"data","multiRNNCell"),a=kx(t,"c","multiRNNCell"),o=kx(r,"h","multiRNNCell");let u=s;const c=[];for(let g=0;g<n.length;g++){const y=n[g](u,a[g],o[g]);c.push(y[0]),c.push(y[1]),u=y[1]}const d=[],m=[];for(let g=0;g<c.length;g+=2)d.push(c[g]),m.push(c[g+1]);return[d,m]}const MM=J({multiRNNCell_:wK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SK(n,e,t,r=!1){const s=H(n,"logits","multinomial"),a=s.size,o=s.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);t=t||Math.random();const c={logits:o===1?oe(s,[1,-1]):s},d={numSamples:e,seed:t,normalized:r},m=Q.runKernel(IS,c,d);return o===1?oe(m,[m.size]):m}const zM=J({multinomial_:SK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CK(n,e){let t=H(n,"a","notEqual","string_or_numeric"),r=H(e,"b","notEqual","string_or_numeric");[t,r]=Br(t,r),cn(t.shape,r.shape);const s={a:t,b:r};return Q.runKernel(Kb,s)}const Bh=J({notEqual_:CK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TK(n,e,t=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:H(n,"indices","oneHot","int32")},u={dtype:s,depth:e,onValue:t,offValue:r};return Q.runKernel(Yb,o,u)}const Hg=J({oneHot_:TK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kK(n){const t={x:H(n,"x","onesLike")};return Q.runKernel(Xb,t)}const Hi=J({onesLike_:kK});function EK(n,e){const t=H(n,"v1","outerProduct"),r=H(e,"v2","outerProduct");U(t.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${r.rank}.`);const s=oe(t,[-1,1]),a=oe(r,[1,-1]);return Sn(s,a)}const PM=J({outerProduct_:EK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NK(n,e,t=0){const r=H(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:t},a={x:r};return Q.runKernel(Zb,a,s)}const Pc=J({pad_:NK});function $K(n,e,t=0){return U(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Pc(n,[e],t)}const BM=J({pad1d_:$K});function IK(n,e,t=0){return U(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Pc(n,e,t)}const VM=J({pad2d_:IK});function RK(n,e,t=0){return U(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Pc(n,e,t)}const UM=J({pad3d_:RK});function DK(n,e,t=0){return U(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Pc(n,e,t)}const WM=J({pad4d_:DK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _K(n,e,t){const r=H(n,"x","spaceToBatchND");U(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),U(t.length===e.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${e.length}`),U(r.shape.reduce((o,u,c)=>c>0&&c<=e.length?o&&(u+t[c-1][0]+t[c-1][1])%e[c-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},a={blockShape:e,paddings:t};return Q.runKernel(lx,s,a)}const Ux=J({spaceToBatchND_:_K});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AK(n,e,t,r,s,a,o){s==null&&(s=[1,1]),a==null&&(a=1),r===0&&(r="valid");const u=H(n,"x","maxPool");let c=u,d=!1;u.rank===3&&(d=!0,c=oe(u,[1,u.shape[0],u.shape[1],u.shape[2]])),U(la(a,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${s}'`);const m=Go(c.shape,e,a,s,r),g=[m.dilationHeight,m.dilationWidth];let y;r==="same"?y=FK([m.filterHeight,m.filterWidth],g):y=[[0,0],[0,0]];const x=g[0]===1&&g[1]===1,[S,k]=OK([m.inHeight,m.inWidth],g,y),C=x?r:"valid",N=x?c:Ux(c,g,S),A=(t==="avg"?()=>Dx(N,e,a,C,o):()=>Bx(N,e,a,C,o))(),D=x?A:_x(A,g,k);return d?oe(D,[D.shape[1],D.shape[2],D.shape[3]]):D}function OK(n,e,t){const r=t.map(m=>m[0]),s=t.map(m=>m[1]),a=n.concat(r,s),o=e.map((m,g)=>(m-a[g]%m)%m),u=s.map((m,g)=>m+o[g]),c=e.map((m,g)=>[r[g],u[g]]),d=e.map((m,g)=>[0,o[g]]);return[c,d]}function FK(n,e){const r=n.map((o,u)=>o+(o-1)*(e[u]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),a=r.map((o,u)=>o-s[u]);return r.map((o,u)=>[s[u],a[u]])}const zI=J({pool_:AK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LK(n,e){const t=H(n,"x","prelu"),r=H(e,"alpha","prelu"),s={x:t,alpha:r};return Q.runKernel(Jb,s)}const Wx=J({prelu_:LK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MK(n,e=null,t=!1){let r=H(n,"x","prod");r.dtype==="bool"&&(r=nt(r,"int32"));const s={x:r},a={axis:e,keepDims:t};return Q.runKernel(ex,s,a)}const PI=J({prod_:MK});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zK(n,e,t,r){const s=n.map((m,g)=>H(m,`tensors${g}`,"raggedGather","int32")),a=H(e,"paramsDenseValues","raggedGather"),o=H(t,"indices","raggedGather","int32"),u={paramsNestedSplits:s,paramsDenseValues:a,indices:o},c={outputRaggedRank:r},d=Q.runKernel(AS,u,c);return{outputNestedSplits:d.slice(0,d.length-1),outputDenseValues:d[d.length-1]}}const HM=J({raggedGather_:zK});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PK(n,e,t){const r=H(n,"starts","raggedRange"),s=H(e,"limits","raggedRange",r.dtype),a=H(t,"deltas","raggedRange",r.dtype),o={starts:r,limits:s,deltas:a},u=Q.runKernel(OS,o);return{rtNestedSplits:u[0],rtDenseValues:u[1]}}const jM=J({raggedRange_:PK});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BK(n,e,t,r,s){const a=H(n,"shape","raggedTensorToTensor","int32"),o=H(e,"values","raggedTensorToTensor"),u=H(t,"defaultValue","raggedTensorToTensor",o.dtype),c=r.map((g,y)=>H(g,`tensors${y}`,"raggedTensorToTensor","int32")),d={shape:a,values:o,defaultValue:u,rowPartitionTensors:c},m={rowPartitionTypes:s};return Q.runKernel(FS,d,m)}const GM=J({raggedTensorToTensor_:BK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VK(n,e,t){zi(n);const r=Re(n);let s=null;if(t==null||t==="float32")s=new Float32Array(r);else if(t==="int32")s=new Int32Array(r);else if(t==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${t}`);for(let a=0;a<r;a++)s[a]=e();return Q.makeTensor(s,n,t)}const qM=J({rand_:VK});var BI={exports:{}};BI.exports,function(n){(function(e,t,r){function s(c){var d=this,m=u();d.next=function(){var g=2091639*d.s0+d.c*23283064365386963e-26;return d.s0=d.s1,d.s1=d.s2,d.s2=g-(d.c=g|0)},d.c=1,d.s0=m(" "),d.s1=m(" "),d.s2=m(" "),d.s0-=m(c),d.s0<0&&(d.s0+=1),d.s1-=m(c),d.s1<0&&(d.s1+=1),d.s2-=m(c),d.s2<0&&(d.s2+=1),m=null}function a(c,d){return d.c=c.c,d.s0=c.s0,d.s1=c.s1,d.s2=c.s2,d}function o(c,d){var m=new s(c),g=d&&d.state,y=m.next;return y.int32=function(){return m.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,g&&(typeof g=="object"&&a(g,m),y.state=function(){return a(m,{})}),y}function u(){var c=4022871197,d=function(m){m=String(m);for(var g=0;g<m.length;g++){c+=m.charCodeAt(g);var y=.02519603282416938*c;c=y>>>0,y-=c,y*=c,c=y>>>0,y-=c,c+=y*4294967296}return(c>>>0)*23283064365386963e-26};return d}t&&t.exports?t.exports=o:this.alea=o})(gh,n)}(BI);var UK=BI.exports,VI={exports:{}};VI.exports,function(n){(function(e,t,r){function s(u){var c=this,d="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var g=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^g^g>>>8},u===(u|0)?c.x=u:d+=u;for(var m=0;m<d.length+64;m++)c.x^=d.charCodeAt(m)|0,c.next()}function a(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c}function o(u,c){var d=new s(u),m=c&&c.state,g=function(){return(d.next()>>>0)/4294967296};return g.double=function(){do var y=d.next()>>>11,x=(d.next()>>>0)/4294967296,S=(y+x)/(1<<21);while(S===0);return S},g.int32=d.next,g.quick=g,m&&(typeof m=="object"&&a(m,d),g.state=function(){return a(d,{})}),g}t&&t.exports?t.exports=o:this.xor128=o})(gh,n)}(VI);var WK=VI.exports,UI={exports:{}};UI.exports,function(n){(function(e,t,r){function s(u){var c=this,d="";c.next=function(){var g=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(g^g<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,u===(u|0)?c.x=u:d+=u;for(var m=0;m<d.length+64;m++)c.x^=d.charCodeAt(m)|0,m==d.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function a(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c.v=u.v,c.d=u.d,c}function o(u,c){var d=new s(u),m=c&&c.state,g=function(){return(d.next()>>>0)/4294967296};return g.double=function(){do var y=d.next()>>>11,x=(d.next()>>>0)/4294967296,S=(y+x)/(1<<21);while(S===0);return S},g.int32=d.next,g.quick=g,m&&(typeof m=="object"&&a(m,d),g.state=function(){return a(d,{})}),g}t&&t.exports?t.exports=o:this.xorwow=o})(gh,n)}(UI);var HK=UI.exports,WI={exports:{}};WI.exports,function(n){(function(e,t,r){function s(u){var c=this;c.next=function(){var m=c.x,g=c.i,y,x;return y=m[g],y^=y>>>7,x=y^y<<24,y=m[g+1&7],x^=y^y>>>10,y=m[g+3&7],x^=y^y>>>3,y=m[g+4&7],x^=y^y<<7,y=m[g+7&7],y=y^y<<13,x^=y^y<<9,m[g]=x,c.i=g+1&7,x};function d(m,g){var y,x=[];if(g===(g|0))x[0]=g;else for(g=""+g,y=0;y<g.length;++y)x[y&7]=x[y&7]<<15^g.charCodeAt(y)+x[y+1&7]<<13;for(;x.length<8;)x.push(0);for(y=0;y<8&&x[y]===0;++y);for(y==8?x[7]=-1:x[y],m.x=x,m.i=0,y=256;y>0;--y)m.next()}d(c,u)}function a(u,c){return c.x=u.x.slice(),c.i=u.i,c}function o(u,c){u==null&&(u=+new Date);var d=new s(u),m=c&&c.state,g=function(){return(d.next()>>>0)/4294967296};return g.double=function(){do var y=d.next()>>>11,x=(d.next()>>>0)/4294967296,S=(y+x)/(1<<21);while(S===0);return S},g.int32=d.next,g.quick=g,m&&(m.x&&a(m,d),g.state=function(){return a(d,{})}),g}t&&t.exports?t.exports=o:this.xorshift7=o})(gh,n)}(WI);var jK=WI.exports,HI={exports:{}};HI.exports,function(n){(function(e,t,r){function s(u){var c=this;c.next=function(){var m=c.w,g=c.X,y=c.i,x,S;return c.w=m=m+1640531527|0,S=g[y+34&127],x=g[y=y+1&127],S^=S<<13,x^=x<<17,S^=S>>>15,x^=x>>>12,S=g[y]=S^x,c.i=y,S+(m^m>>>16)|0};function d(m,g){var y,x,S,k,C,N=[],$=128;for(g===(g|0)?(x=g,g=null):(g=g+"\0",x=0,$=Math.max($,g.length)),S=0,k=-32;k<$;++k)g&&(x^=g.charCodeAt((k+32)%g.length)),k===0&&(C=x),x^=x<<10,x^=x>>>15,x^=x<<4,x^=x>>>13,k>=0&&(C=C+1640531527|0,y=N[k&127]^=x+C,S=y==0?S+1:0);for(S>=128&&(N[(g&&g.length||0)&127]=-1),S=127,k=4*128;k>0;--k)x=N[S+34&127],y=N[S=S+1&127],x^=x<<13,y^=y<<17,x^=x>>>15,y^=y>>>12,N[S]=x^y;m.w=C,m.X=N,m.i=S}d(c,u)}function a(u,c){return c.i=u.i,c.w=u.w,c.X=u.X.slice(),c}function o(u,c){u==null&&(u=+new Date);var d=new s(u),m=c&&c.state,g=function(){return(d.next()>>>0)/4294967296};return g.double=function(){do var y=d.next()>>>11,x=(d.next()>>>0)/4294967296,S=(y+x)/(1<<21);while(S===0);return S},g.int32=d.next,g.quick=g,m&&(m.X&&a(m,d),g.state=function(){return a(d,{})}),g}t&&t.exports?t.exports=o:this.xor4096=o})(gh,n)}(HI);var GK=HI.exports,jI={exports:{}};jI.exports,function(n){(function(e,t,r){function s(u){var c=this,d="";c.next=function(){var g=c.b,y=c.c,x=c.d,S=c.a;return g=g<<25^g>>>7^y,y=y-x|0,x=x<<24^x>>>8^S,S=S-g|0,c.b=g=g<<20^g>>>12^y,c.c=y=y-x|0,c.d=x<<16^y>>>16^S,c.a=S-g|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,u===Math.floor(u)?(c.a=u/4294967296|0,c.b=u|0):d+=u;for(var m=0;m<d.length+20;m++)c.b^=d.charCodeAt(m)|0,c.next()}function a(u,c){return c.a=u.a,c.b=u.b,c.c=u.c,c.d=u.d,c}function o(u,c){var d=new s(u),m=c&&c.state,g=function(){return(d.next()>>>0)/4294967296};return g.double=function(){do var y=d.next()>>>11,x=(d.next()>>>0)/4294967296,S=(y+x)/(1<<21);while(S===0);return S},g.int32=d.next,g.quick=g,m&&(typeof m=="object"&&a(m,d),g.state=function(){return a(d,{})}),g}t&&t.exports?t.exports=o:this.tychei=o})(gh,n)}(jI);var qK=jI.exports,KM={exports:{}};const KK=GG(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(n){(function(e,t,r){var s=256,a=6,o=52,u="random",c=r.pow(s,a),d=r.pow(2,o),m=d*2,g=s-1,y;function x(D,L,P){var W=[];L=L==!0?{entropy:!0}:L||{};var B=N(C(L.entropy?[D,A(t)]:D??$(),3),W),G=new S(W),X=function(){for(var re=G.g(a),ue=c,ne=0;re<d;)re=(re+ne)*s,ue*=s,ne=G.g(1);for(;re>=m;)re/=2,ue/=2,ne>>>=1;return(re+ne)/ue};return X.int32=function(){return G.g(4)|0},X.quick=function(){return G.g(4)/4294967296},X.double=X,N(A(G.S),t),(L.pass||P||function(re,ue,ne,me){return me&&(me.S&&k(me,G),re.state=function(){return k(G,{})}),ne?(r[u]=re,ue):re})(X,B,"global"in L?L.global:this==r,L.state)}function S(D){var L,P=D.length,W=this,B=0,G=W.i=W.j=0,X=W.S=[];for(P||(D=[P++]);B<s;)X[B]=B++;for(B=0;B<s;B++)X[B]=X[G=g&G+D[B%P]+(L=X[B])],X[G]=L;(W.g=function(re){for(var ue,ne=0,me=W.i,ge=W.j,be=W.S;re--;)ue=be[me=g&me+1],ne=ne*s+be[g&(be[me]=be[ge=g&ge+ue])+(be[ge]=ue)];return W.i=me,W.j=ge,ne})(s)}function k(D,L){return L.i=D.i,L.j=D.j,L.S=D.S.slice(),L}function C(D,L){var P=[],W=typeof D,B;if(L&&W=="object")for(B in D)try{P.push(C(D[B],L-1))}catch{}return P.length?P:W=="string"?D:D+"\0"}function N(D,L){for(var P=D+"",W,B=0;B<P.length;)L[g&B]=g&(W^=L[g&B]*19)+P.charCodeAt(B++);return A(L)}function $(){try{var D;return y&&(D=y.randomBytes)?D=D(s):(D=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(D)),A(D)}catch{var L=e.navigator,P=L&&L.plugins;return[+new Date,e,P,e.screen,A(t)]}}function A(D){return String.fromCharCode.apply(0,D)}if(N(r.random(),t),n.exports){n.exports=x;try{y=KK}catch{}}else r["seed"+u]=x})(typeof self<"u"?self:gh,[],Math)})(KM);var XK=KM.exports,YK=UK,QK=WK,ZK=HK,JK=jK,eX=GK,tX=qK,Vh=XK;Vh.alea=YK,Vh.xor128=QK,Vh.xorwow=ZK,Vh.xorshift7=JK,Vh.xor4096=eX,Vh.tychei=tX;var jg=Vh;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nX=.001,XM=.1;function rX(n,e,t){return t==null&&(t=GI()),qI(n,e,(r,s)=>KI(r,s,t))}function GI(){return Q.backend.floatPrecision()===32?nX:XM}function qI(n,e,t){let r=!0;if((ks(n)||ks(e))&&(r=!1),ks(n)&&ks(e)&&(r=!0),r){const o=n.constructor.name,u=e.constructor.name;if(o!==u)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${u}`)}if(Array.isArray(n)&&Array.isArray(e)){const o=Nu(n),u=Nu(e);if(!Nn(o,u))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${u}]`)}const s=ks(n)?n:Eu(n),a=ks(e)?e:Eu(e);if(s.length!==a.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${a.length}.
Actual:   ${s}.
Expected: ${a}.`);for(let o=0;o<a.length;++o){const u=s[o],c=a[o];if(!t(u,c))throw new Error(`Arrays differ: actual[${o}] = ${u}, expected[${o}] = ${c}.
Actual:   ${s}.
Expected: ${a}.`)}typeof expect<"u"&&expect().nothing()}function sX(n,e){n().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function aX(n,e){const t=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Tu(n)||Tu(n[0])||Tu(e)||Tu(e[0])?qI(n,t,(r,s)=>r==s):qI(n,e,(r,s)=>KI(r,s,0))}function iX(n,e,t){if(t==null&&(t=GI()),!KI(n,e,t))throw new Error(`Numbers differ: actual === ${n}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function KI(n,e,t){return!isFinite(n)&&!isFinite(e)?!0:!(isNaN(n)||isNaN(e)||Math.abs(n-e)>t)}function oX(n,e,t){for(let r=0;r<n.length;r++)if(n[r]<e||n[r]>t)throw new Error(`Value out of range:${n[r]} low: ${e}, high: ${t}`)}function lX(n,e){const t=new Float32Array(n),r=new Float32Array(e);if(t.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${t.length}`);for(let s=0;s<r.length;s++)if(t[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${t[s]} instead`)}function YM(n){for(let e=0;e<n.length;e++){const t=n[e];Array.isArray(t)?YM(t):n[e]=ku(t)}return n}function uX(n){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(n),new Promise(t=>{e.addEventListener("loadeddata",r=>t(e)),e.load()})}async function cX(n){await n.play(),"requestVideoFrameCallback"in n&&await new Promise(e=>{n.requestVideoFrameCallback(e)})}const fX=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:XM,createVideoElement:uX,encodeStrings:YM,expectArrayBuffersEqual:lX,expectArraysClose:rX,expectArraysEqual:aX,expectNumbersClose:iX,expectPromiseToFail:sX,expectValuesInRange:oX,play:cX,testEpsilon:GI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XI{constructor(e,t,r,s,a){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=a||Math.random();this.random=jg.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,t,r=!1;for(;!r;){let s,a,o;do s=2*this.random()-1,a=2*this.random()-1,o=s*s+a*a;while(o>=1||o===0);const u=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*u,t=this.mean+this.stdDev*a*u,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class dX{constructor(e,t,r,s){this.alpha=e,this.beta=1/t,this.dtype=r;const a=s||Math.random();this.randu=jg.alea(a.toString()),this.randn=new XI(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,r,s,a,o;for(;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,e=s*s,t=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),a=this.randu(),a<t||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class hX{constructor(e=0,t=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=t-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=jg.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pX(n,e,t=1,r="float32",s){if(zi(n),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const a=new dX(e,t,r,s),o=gn(n,r);for(let u=0;u<o.values.length;u++)o.values[u]=a.nextValue();return o.toTensor()}const QM=J({randomGamma_:pX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mX(n,e=0,t=1,r,s){if(zi(n),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new XI(e,t,r,!1,s),o=gn(n,r);for(let u=0;u<o.values.length;u++)o.values[u]=a.nextValue();return o.toTensor()}const NC=J({randomNormal_:mX});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gX(n,e,t){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return NC(n,0,1,e,t)}const ZM=J({randomStandardNormal_:gX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yX(n,e=0,t=1,r="float32",s){zi(n);const a=gn(n,r),o=new hX(e,t,null,s);for(let u=0;u<a.values.length;u++)a.values[u]=o.nextValue();return a.toTensor()}const td=J({randomUniform_:yX});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vX(n,e,t,r){return td(n,e,t,"int32",r)}const JM=J({randomUniformInt_:vX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uh(n,e,t=1,r="float32"){if(t===0)throw new Error("Cannot have a step of zero");const s={start:n,stop:e,step:t,dtype:r};return Q.runKernel(LS,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bX(n){const t={input:H(n,"input","real")};return Q.runKernel(MS,t)}const Gg=J({real_:bX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xX(n){const t={x:H(n,"x","reciprocal")};return Q.runKernel(cg,t)}const YI=J({reciprocal_:xX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wX(n){const t={x:H(n,"x","relu")};return Q.runKernel(fg,t)}const Ml=J({relu_:wX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SX(n){const t={x:H(n,"x","relu6")};return Q.runKernel(dg,t)}const $C=J({relu6_:SX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CX(n,e){const r={x:H(n,"x","reverse")},s={dims:e};return Q.runKernel(sx,r,s)}const bo=J({reverse_:CX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TX(n){const e=H(n,"x","reverse");return U(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),bo(e,0)}const ez=J({reverse1d_:TX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kX(n,e){const t=H(n,"x","reverse");return U(t.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),bo(t,e)}const tz=J({reverse2d_:kX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EX(n,e){const t=H(n,"x","reverse");return U(t.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),bo(t,e)}const nz=J({reverse3d_:EX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NX(n,e){const t=H(n,"x","reverse");return U(t.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),bo(t,e)}const rz=J({reverse4d_:NX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $X(n){const t={x:H(n,"x","round")};return Q.runKernel(hg,t)}const IC=J({round_:$X});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IX(n){const t={x:H(n,"x","rsqrt","float32")};return Q.runKernel(pg,t)}const RC=J({rsqrt_:IX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(n){const t={x:H(n,"x","selu")};return Q.runKernel(mg,t)}const DC=J({selu_:RX});function DX(n,e,t,r,s,a=[1,1],o="NHWC"){const u=H(n,"x","separableConv2d"),c=H(e,"depthwiseFilter","separableConv2d"),d=H(t,"pointwiseFilter","separableConv2d");let m=u,g=!1;if(u.rank===3&&(g=!0,m=oe(u,[1,u.shape[0],u.shape[1],u.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");U(m.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${m.rank}.`),U(c.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${c.rank}.`),U(d.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${c.rank}.`),U(d.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${d.shape[0]}.`),U(d.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${d.shape[1]}.`);const y=c.shape[2],x=c.shape[3];U(d.shape[2]===y*x,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${y*x}, but got ${d.shape[2]}.`);const S=Mg(m,c,r,s,o,a),C=Mc(S,d,1,"valid",o);return g?oe(C,[C.shape[1],C.shape[2],C.shape[3]]):C}const _C=J({separableConv2d_:DX});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _X(n,e){const t=H(n,"x","setdiff1d"),r=H(e,"y","setdiff1d");U(t.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${r.dtype}).`),U(t.rank===1,()=>`x should be 1D tensor, but got x (${t.shape}).`),U(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await t.data(),a=await r.data(),o=new Set(a);let u=0;for(let m=0;m<s.length;m++)o.has(s[m])||u++;const c=new ms([u],t.dtype),d=new ms([u],"int32");for(let m=0,g=0;m<s.length;m++)o.has(s[m])||(c.values[g]=s[m],d.values[g]=m,g++);return[c.toTensor(),d.toTensor()]}const sz=_X;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AX(n){const t={x:H(n,"x","sign")};return Q.runKernel(vg,t)}const QI=J({sign_:AX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OX(n){const t={x:H(n,"x","sin","float32")};return Q.runKernel(gg,t)}const AC=J({sin_:OX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FX(n){const t={x:H(n,"x","sinh")};return Q.runKernel(yg,t)}const OC=J({sinh_:FX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LX(n,e,t){const r=H(n,"x","slice1d");return U(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Dn(r,[e],[t])}const Hx=J({slice1d_:LX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MX(n,e,t){const r=H(n,"x","slice2d");return U(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Dn(r,e,t)}const FC=J({slice2d_:MX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zX(n,e,t){const r=H(n,"x","slice3d");return U(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Dn(r,e,t)}const jx=J({slice3d_:zX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PX(n,e,t){const r=H(n,"x","slice4d");return U(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Dn(r,e,t)}const qg=J({slice4d_:PX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BX(n,e=-1){const t=H(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${e}`);const r={logits:t},s={dim:e};return Q.runKernel(cx,r,s)}const Gx=J({softmax_:BX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VX(n){U(n.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${n.dtype}.`);const e={input:n};return Q.runKernel(vS,e)}const qx=J({fft_:VX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UX(n){U(n.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${n.dtype}.`);const e={input:n};return Q.runKernel(SS,e)}const Kg=J({ifft_:UX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WX(n){const e=n.shape[n.shape.length-1],t=n.size/e;let r;if(e<=2){const s=oe(n,[t,e]);r=Kg(s)}else{const s=[t,2*(e-1)],a=oe(Gg(n),[t,e]),o=oe(Fx(n),[t,e]),u=bo(Dn(a,[0,1],[t,e-2]),1),c=ae(bo(Dn(o,[0,1],[t,e-2]),1),Ft(-1)),d=es([a,u],1),m=es([o,c],1),g=oe(Ac(d,m),[s[0],s[1]]);r=Kg(g)}if(r=Gg(r),n.rank===3&&n.shape[0]!==0){const s=r,a=n.shape[0];r=oe(r,[a,r.shape[0]/a,r.shape[1]]),s.dispose()}return r}const LC=J({irfft_:WX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HX(n,e,t=0){const s={x:H(n,"x","split")},a={numOrSizeSplits:e,axis:t};return Q.runKernel(ux,s,a)}const bi=J({split_:HX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jX(n,e){U(n.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${n.dtype}`);let t=n.shape[n.shape.length-1];const r=n.size/t;let s;if(e!=null&&e<t){const S=n.shape.map(C=>0),k=n.shape.map(C=>C);k[n.shape.length-1]=e,s=Dn(n,S,k),t=e}else if(e!=null&&e>t){const S=n.shape.map(k=>k);S[n.shape.length-1]=e-t,s=es([n,vs(S)],n.shape.length-1),t=e}else s=n;const a=_n(s),o=oe(Ac(s,a),[r,t]),u=qx(o),c=Math.floor(t/2)+1,d=Gg(u),m=Fx(u),g=bi(d,[c,t-c],d.shape.length-1),y=bi(m,[c,t-c],m.shape.length-1),x=s.shape.slice();return x[s.shape.length-1]=c,oe(Ac(g[0],y[0]),x)}const Kx=J({rfft_:jX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GX(n,e){let t=H(n,"a","squaredDifference"),r=H(e,"b","squaredDifference");[t,r]=Br(t,r),cn(t.shape,r.shape);const s={a:t,b:r},a={};return Q.runKernel(Sg,s,a)}const MC=J({squaredDifference_:GX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qX(n,e){const t=H(n,"x","squeeze","string_or_numeric");return oe(t,$c(t.shape,e).newShape)}const nd=J({squeeze_:qX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(n,e=0){const t=kx(n,"tensors","stack","string_or_numeric");U(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&U(e<=t[0].rank,()=>"Axis must be <= rank of the tensor");const r=t,s={axis:e};return Q.runKernel(Qb,r,s)}const ja=J({stack_:KX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XX(n,e=0){const r={x:H(n,"x","step")},s={alpha:e};return Q.runKernel(Ng,r,s)}const Wh=J({step_:XX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YX(n,e,t,r,s=0,a=0,o=0,u=0,c=0){const m={x:H(n,"x","stridedSlice","string_or_numeric")},g={begin:e,end:t,strides:r,beginMask:s,endMask:a,ellipsisMask:o,newAxisMask:u,shrinkAxisMask:c};return Q.runKernel(XS,m,g)}const ZI=J({stridedSlice_:YX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QX(n){const t={x:H(n,"x","tan","float32")};return Q.runKernel(Tg,t)}const JI=J({tan_:QX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fa(n,e){vh(n);const t=Nu(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Gf(n,null,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rd(n,e,t){if(vh(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Nu(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Gf(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2(n,e,t){if(vh(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Nu(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Gf(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function az(n,e,t){if(vh(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Nu(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Gf(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iz(n,e,t){if(vh(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Nu(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Gf(n,e,r,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oz(n,e,t){if(vh(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Nu(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Gf(n,e,r,t)}function t2(n,e,t){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${e.shape}, shape: ${n}, sliceDim: ${r}, and batchDim: ${s}.`;if(t.rank<s)throw new Error(a+` update.rank < ${s}. `);if(n.length<r+(t.rank-s))throw new Error(a+` Output shape length < ${r+(t.rank-s)}`);if(t.rank!==s+n.length-r)throw new Error(a+` update.rank != ${s+n.length-r}`);for(let o=0;o<s;++o)if(t.shape[o]!==e.shape[o])throw new Error(a+` updates.shape[${o}] (${t.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<t.rank-s;++o)if(t.shape[o+s]!==n[o+r])throw new Error(a+` updates.shape[${o+s}] (${t.shape[o+s]}) != shape[${o+s}] (${n[o+s]})`)}function zC(n,e,t){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(n.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(t.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(n.size===0)throw new Error(`Updates specified for empty output. updates shape: ${n.shape}`)}t2(t,e,n)}function sd(n,e,t){const r=e.shape.length,s=r>1?e.shape[r-1]:1,a=t.length;let o=1;for(let g=s;g<a;++g)o*=t[g];const u=s<1?1:s,c=Re(e.shape)/u,d=[...Ot(t.slice(0,s)),1],m=Re(t);return{sliceRank:s,numUpdates:c,sliceSize:o,strides:d,outputSize:m}}const ZX=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:sd,validateInput:zC,validateUpdateShape:t2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JX(n,e,t){const r=H(n,"tensor","tensorScatterupdate"),s=H(e,"indices","tensorScatterupdate","int32"),a=H(t,"updates","tensorScatterupdate");if(zC(a,s,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);const o={tensor:r,indices:s,updates:a},u={};return Q.runKernel(VS,o,u)}const lz=J({tensorScatterUpdate_:JX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(n,e=1,t=!0){const r=H(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const a={x:r},o={k:e,sorted:t},[u,c]=Q.runKernel(JS,a,o);return{values:u,indices:c}}const n2=J({topk_:eY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tY(n,e=0,t=1,r,s){if(zi(n),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new XI(e,t,r,!0,s),o=gn(n,r);for(let u=0;u<o.values.length;u++)o.values[u]=a.nextValue();return o.toTensor()}const PC=J({truncatedNormal_:tY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nY(n,e=0){const t=H(n,"x","unique","string_or_numeric");U(t.rank>0,()=>"The input tensor must be at least 1D");const r={x:t},s={axis:e},[a,o]=Q.runKernel(tC,r,s);return{values:a,indices:o}}const r2=J({unique_:nY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rY(n,e,t){const r=H(n,"x","unsortedSegmentSum"),s=H(e,"segmentIds","unsortedSegmentSum","int32");U(bh(t),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:s},o={numSegments:t};return Q.runKernel(hx,a,o)}const BC=J({unsortedSegmentSum_:rY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sY(n,e=0){const t=H(n,"x","unstack","string_or_numeric");U(e>=-t.shape.length&&e<t.shape.length,()=>`Axis = ${e} is not in [-${t.shape.length}, ${t.shape.length})`);const r={value:t},s={axis:e};return Q.runKernel(dx,r,s)}const xo=J({unstack_:sY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uz(n,e){return EC(n,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s2(n,e=!0,t,r){return Q.makeVariable(n,e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VC(n,e){const t=[];for(let a=0;a<e.length;a++)e[a]&&t.push(a);const r=gn(n,"int32"),s=gn([t.length,n.length],"int32");for(let a=0;a<t.length;a++){const o=r.indexToLoc(t[a]),u=a*n.length;s.values.set(o,u)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function aY(n){const e=H(n,"condition","whereAsync","bool"),t=await e.data(),r=VC(e.shape,t);return n!==e&&e.dispose(),r}const a2=aY;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function iY(n,e,t){const r=H(n,"tensor","boolMask"),s=H(e,"mask","boolMask","bool"),a=t??0,o=s.rank,u=r.shape;U(o>0,()=>"mask cannot be scalar"),aa(u.slice(a,a+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let k=a;k<a+o;k++)c*=u[k];const d=u.slice(0,a).concat([c],u.slice(a+o)),m=oe(r,d),g=oe(s,[-1]),y=await a2(g),x=nd(y,[1]),S=Ug(m,x,a);return n!==r&&r.dispose(),e!==s&&s.dispose(),x.dispose(),m.dispose(),g.dispose(),y.dispose(),S}const cz=iY;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oY(n,e,t){const r=H(n,"x","transpose");if(e==null&&(e=r.shape.map((o,u)=>u).reverse()),U(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{U(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},a={perm:e};return r.dtype==="complex64"?ve(()=>{let o=Gg(r),u=Fx(r);return o=Q.runKernel(Th,{x:o},a),u=Q.runKernel(Th,{x:u},a),t&&(u=Sr(u)),Ac(o,u)}):Q.runKernel(Th,s,a)}const Rn=J({transpose_:oY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lY(n,e,t,r,s=!0){const a=H(n,"v","movingAverage"),o=H(e,"x","movingAverage"),u=H(t,"decay","movingAverage");eM(a,o),U(Nn(a.shape,o.shape),()=>"Shape mismatch in v and x");const c=Ft(1),d=bt(c,u);let m=ae(bt(o,a),d);if(s){U(r!=null,()=>"When using zeroDebias: true, step is required.");const g=H(r,"step","movingAverage");m=It(m,bt(c,Iu(u,g)))}return Be(a,m)}const fz=J({movingAverage_:lY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uY(n,e,t){zi(t);const r=H(n,"indices","scatterND","int32"),s=H(e,"updates","scatterND");zC(s,r,t);const a={indices:r,updates:s},o={shape:t};return Q.runKernel(BS,a,o)}const dz=J({scatterND_:uY});function cY(n,e,t,r){if(n.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${n.shape}.`);const s=n.rank>0?n.shape[0]:1,a=n.rank>1?n.shape[1]:1;if(t.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${a}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fY(n,e,t,r=0){zi(t);const s=H(n,"sparseIndices","sparseToDense","int32"),a=H(e,"sparseValues","sparseToDense","string_or_numeric"),o=H(r,"defaultValue","sparseToDense",a.dtype);cY(s,a,t,o);const u={sparseIndices:s,sparseValues:a,defaultValue:o},c={outputShape:t};return Q.runKernel(qS,u,c)}const hz=J({sparseToDense_:fY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dY(n,e){const t=H(e,"indices","gatherND","int32"),s={params:H(n,"x","gatherND","string_or_numeric"),indices:t};return Q.runKernel(wS,s)}const pz=J({gatherND_:dY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(n,e){if(e==null)return n.shape.slice();if(Nn(n.shape,e))return e;if(n.shape.length===e.length){const t=[];for(let r=0;r<n.shape.length;r++)e[r]==null&&n.shape[r]!=null?t.push(n.shape[r]):t.push(e[r]);return t}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pY(n,e,t,r){const s=H(n,"x","dropout");if(U(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),U(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return n instanceof Pn?s.clone():s;const a=hY(s,t),o=1-e,u=It(Vg(Be(td(a,0,1,"float32",r),o)),o);return ae(s,u)}const i2=J({dropout_:pY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2(n){return Math.floor(Math.pow(2,Math.ceil(Math.log(n)/Math.log(2))))}function UC(n,e,t){const r=1-n%2,s=new Float32Array(n);for(let a=0;a<n;++a){const o=2*Math.PI*a/(n+r-1);s[a]=e-t*Math.cos(o)}return fa(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function mY(n,e,t=1){const r=H(n,"predictions","inTopK"),s=H(e,"targets","inTopK");U(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),U(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),aa(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];U(t>0&&t<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${t}`);const o=await r.data(),u=await s.data(),[c,d]=[o.length/a,a],m=Ls("bool",c);for(let g=0;g<c;g++){const y=g*d,x=o.subarray(y,y+d),S=[];for(let k=0;k<x.length;k++)S.push({value:x[k],index:k});S.sort((k,C)=>C.value-k.value),m[g]=0;for(let k=0;k<t;k++)if(S[k].index===u[g]){m[g]=1;break}}return n!==r&&r.dispose(),e!==s&&s.dispose(),Vi(m,s.shape,"bool")}const mz=mY;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gY(n,e,t,r,s,a="NHWC",o){let u=n;n.rank===3&&(u=oe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c=e;c.rank===3&&(c=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),U(u.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${u.shape}.`),U(c.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`),U(t.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);const d=a==="NHWC"?u.shape[3]:u.shape[1],m=a==="NHWC"?c.shape[3]:c.shape[1];U(d===t[2],()=>`Error in conv2dDerFilter: depth of input ${d}) must match input depth in filter (${t[2]}.`),U(m===t[3],()=>`Error in conv2dDerFilter: depth of dy (${m}) must match output depth for filter (${t[3]}).`),Wa("conv2dDerFilter",s,o);const g={x:u,dy:c},y={strides:r,pad:s,dataFormat:a,dimRoundingMode:o,filterShape:t};return Q.runKernel(rS,g,y)}const l2=J({conv2DBackpropFilter_:gY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WC(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return ae(n,Wh(e));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function HC(n,e){let t=e;const r=ys(n.shape,e.shape);return r.length>0&&(t=Ct(t,r)),oe(t,n.shape)}function jC(n,e,t,r){if(e==="linear")return n;if(e==="relu")return Ml(n);if(e==="elu")return zg(n);if(e==="relu6")return $C(n);if(e==="prelu")return Wx(n,t);if(e==="leakyrelu")return Lx(n,r);if(e==="sigmoid")return Ll(n);throw new Error(`Unknown fused activation ${e}.`)}const GC=(n,e)=>!(n>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yY({x:n,filter:e,strides:t,pad:r,dataFormat:s="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:u,activation:c="linear",preluActivationWeights:d,leakyreluAlpha:m}){if(c=c||"linear",GC(Q.state.gradientDepth,c)===!1){U(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let P=Mc(n,e,t,r,s,a,o);return u!=null&&(P=Be(P,u)),jC(P,c,d,m)}const g=H(n,"x","conv2d","float32"),y=H(e,"filter","conv2d","float32");let x=g,S=!1;g.rank===3&&(S=!0,x=oe(g,[1,g.shape[0],g.shape[1],g.shape[2]])),U(x.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${x.rank}.`),U(y.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${y.rank}.`),Wa("fused conv2d",r,o);const k=s==="NHWC"?x.shape[3]:x.shape[1];U(y.shape[2]===k,()=>`Error in conv2d: depth of input (${k}) must match input depth for filter ${y.shape[2]}.`),U(la(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);const C=zs(x.shape,y.shape,t,a,r,o);let N;u!=null&&(N=H(u,"bias","fused conv2d"),[N]=Br(N,g),s==="NHWC"?cn(C.outShape,N.shape):(U(N.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${N.shape.length}.`),U(N.shape.length===0||N.shape[0]===C.outChannels||N.shape[0]===1,()=>`Error in fused conv2d: bias shape (${N.shape}) is not compatible with the number of output channels (${C.outChannels})`)));let $;if(d!=null){const P=d.shape;if(U(P.length<=1||P.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${P.length}.`),P.length===1)U(P[0]===1||P[0]===C.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${P}) is not compatible with the number of output channels (${C.outChannels}).`);else if(P.length===3)try{cn(P,C.outShape)}catch{const B=`Error in fused conv2d: PReLU activation weights (${P}) is not compatible with the output shape of the conv2d (${C.outShape}).`;throw Error(B)}$=H(d,"prelu weights","fused conv2d")}const A=(P,W)=>{U(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[B,G,X,re]=W,ue=WC(P,X,c);U(Yf(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const ne=bI(G.shape,ue,B,t,r),me=l2(G,ue,B.shape,t,r),ge=[ne,me];if(re!=null){const be=HC(re,ue);ge.push(be)}return ge},D={x,filter:y,bias:N,preluActivationWeights:$},L={strides:t,pad:r,dataFormat:s,dilations:a,dimRoundingMode:o,activation:c,leakyreluAlpha:m};return u==null?Ru((W,B,G)=>{let X=Q.runKernel(gx,D,L);return G([B,W,X]),S&&(X=oe(X,[X.shape[1],X.shape[2],X.shape[3]])),{value:X,gradFunc:A}})(x,y):Ru((W,B,G,X)=>{let re=Q.runKernel(gx,D,L);return X([B,W,re,G]),S&&(re=oe(re,[re.shape[1],re.shape[2],re.shape[3]])),{value:re,gradFunc:A}})(x,y,N)}const gz=J({fusedConv2d_:yY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vY(n,e,t,r,s,a=[1,1],o){let u=n;n.rank===3&&(u=oe(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c=e;c.rank===3&&(c=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const d={x:u,dy:c},m={strides:r,pad:s,dimRoundingMode:o,dilations:a,filterShape:t};return Q.runKernel(cS,d,m)}const yz=J({depthwiseConv2dNativeBackpropFilter_:vY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(n,e,t,r,s,a=[1,1],o){let u=e,c=!1;e.rank===3&&(c=!0,u=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const d={dy:u,filter:t},m={strides:r,pad:s,dimRoundingMode:o,dilations:a,inputShape:n},g=Q.runKernel(fS,d,m);return c?oe(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const vz=J({depthwiseConv2dNativeBackpropInput_:bY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xY({x:n,filter:e,strides:t,pad:r,dataFormat:s="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:u,activation:c="linear",preluActivationWeights:d,leakyreluAlpha:m}){if(GC(Q.state.gradientDepth,c)===!1){let L=Mg(n,e,t,r,s,a,o);return u!=null&&(L=Be(L,u)),jC(L,c,d,m)}const g=H(n,"x","depthwiseConv2d","float32"),y=H(e,"filter","depthwiseConv2d","float32");let x=g,S=!1;g.rank===3&&(S=!0,x=oe(g,[1,g.shape[0],g.shape[1],g.shape[2]])),U(x.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${x.rank}.`),U(y.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${y.rank}.`),U(x.shape[3]===y.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${x.shape[3]}) must match the inChannels dimension in filter ${y.shape[2]}.`),a==null&&(a=[1,1]),U(la(t,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),Wa("fused depthwiseConv2d",r,o);const k=zs(x.shape,y.shape,t,a,r,o,!0);let C;u!=null&&(C=H(u,"bias","fused conv2d"),[C]=Br(C,g),cn(k.outShape,C.shape));let N;d!=null&&(N=H(d,"prelu weights","fused depthwiseConv2d"));const $=(L,P)=>{U(Yf(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[W,B,G,X]=P,re=WC(L,G,c),ue=vz(B.shape,re,W,t,r,a,o),ne=yz(B,re,W.shape,t,r,a,o);if(X!=null){const me=HC(C,re);return[ue,ne,me]}return[ue,ne]},A={x,filter:y,bias:C,preluActivationWeights:N},D={strides:t,pad:r,dataFormat:s,dilations:a,dimRoundingMode:o,activation:c,leakyreluAlpha:m};return u==null?Ru((P,W,B)=>{let G=Q.runKernel(yx,A,D);return B([W,P,G]),S&&(G=oe(G,[G.shape[1],G.shape[2],G.shape[3]])),{value:G,gradFunc:$}})(x,y):Ru((P,W,B,G)=>{let X=Q.runKernel(yx,A,D);return G([W,P,X,B]),S&&(X=oe(X,[X.shape[1],X.shape[2],X.shape[3]])),{value:X,gradFunc:$}})(x,y,C)}const wY=J({fusedDepthwiseConv2d_:xY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SY({a:n,b:e,transposeA:t=!1,transposeB:r=!1,bias:s,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:u=.2}){if(GC(Q.state.gradientDepth,a)===!1){let re=Sn(n,e,t,r);return s!=null&&(re=Be(re,s)),jC(re,a,o,u)}let c=H(n,"a","fused matMul"),d=H(e,"b","fused matMul");[c,d]=Br(c,d);const m=t?c.shape[c.rank-2]:c.shape[c.rank-1],g=r?d.shape[d.rank-1]:d.shape[d.rank-2],y=t?c.shape[c.rank-1]:c.shape[c.rank-2],x=r?d.shape[d.rank-2]:d.shape[d.rank-1],S=c.shape.slice(0,-2),k=d.shape.slice(0,-2),C=Re(S),N=Re(k);U(m===g,()=>`Error in fused matMul: inner shapes (${m}) and (${g}) of Tensors with shapes ${c.shape} and ${d.shape} and transposeA=${t} and transposeB=${r} must match.`);const A=cn(c.shape.slice(0,-2),d.shape.slice(0,-2)).concat([y,x]),D=t?oe(c,[C,m,y]):oe(c,[C,y,m]),L=r?oe(d,[N,x,g]):oe(d,[N,g,x]);let P;s!=null&&(P=H(s,"bias","fused matMul"),[P]=Br(P,c),cn(A,P.shape));let W;o!=null&&(W=H(o,"prelu weights","fused matMul"));const B=(re,ue)=>{const[ne,me,ge,be]=ue,pe=WC(oe(re,ge.shape),ge,a);let te,ye;if(!t&&!r?(te=Sn(pe,me,!1,!0),ye=Sn(ne,pe,!0,!1)):!t&&r?(te=Sn(pe,me,!1,!1),ye=Sn(pe,ne,!0,!1)):t&&!r?(te=Sn(me,pe,!1,!0),ye=Sn(ne,pe,!1,!1)):(te=Sn(me,pe,!0,!0),ye=Sn(pe,ne,!0,!0)),s!=null){const ce=HC(be,pe);return[te,ye,ce]}else return[te,ye]},G={a:D,b:L,bias:P,preluActivationWeights:W},X={transposeA:t,transposeB:r,activation:a,leakyreluAlpha:u};return s==null?Ru((ue,ne,me)=>{const ge=Q.runKernel(mx,G,X);return me([ue,ne,ge]),{value:oe(ge,A),gradFunc:B}})(D,L):Ru((ue,ne,me,ge)=>{const be=Q.runKernel(mx,G,X);return ge([ue,ne,be,me]),{value:oe(be,A),gradFunc:B}})(D,L,P)}const u2=J({fusedMatMul_:SY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bz=Object.freeze(Object.defineProperty({__proto__:null,conv2d:gz,depthwiseConv2d:wY,matMul:u2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CY(n){return UC(n,.54,.46)}const TY=J({hammingWindow_:CY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kY(n){return UC(n,.5,.5)}const xz=J({hannWindow_:kY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EY(n,e,t,r=!1,s=0){let a=0;const o=[];for(;a+e<=n.size;)o.push(Dn(n,a,e)),a+=t;if(r)for(;a<n.size;){const u=a+e-n.size,c=es([Dn(n,a,e-u),Lh([u],s)]);o.push(c),a+=t}return o.length===0?rd([],[0,e]):oe(es(o),[o.length,e])}const wz=J({frame_:EY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NY(n,e,t,r,s=xz){r==null&&(r=o2(e));const a=wz(n,e,t),o=ae(a,s(e));return Kx(o,r)}const $Y=J({stft_:NY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IY(n,e,t,r,s="bilinear",a=0){const o=H(n,"image","cropAndResize"),u=H(e,"boxes","cropAndResize","float32"),c=H(t,"boxInd","cropAndResize","int32"),d=u.shape[0];U(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),U(u.rank===2&&u.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${d},4] but had shape ${u.shape}.`),U(c.rank===1&&c.shape[0]===d,()=>`Error in cropAndResize: boxInd must be have size [${d}] but had shape ${u.shape}.`),U(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),U(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),U(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const m={image:o,boxes:u,boxInd:c},g={method:s,extrapolationValue:a,cropSize:r};return Q.runKernel(oS,m,g)}const RY=J({cropAndResize_:IY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DY(n){const e=H(n,"image","flipLeftRight","float32");U(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const t={image:e};return Q.runKernel(xS,t,{})}const _Y=J({flipLeftRight_:DY});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AY(n){const e=H(n,"image","grayscaleToRGB"),t=e.rank-1,r=e.shape[t];U(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),U(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,t),s[t]=3,vo(e,s)}const OY=J({grayscaleToRGB_:AY});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FY(n){const e=H(n,"image","RGBToGrayscale"),t=e.rank-1,r=e.shape[t];U(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),U(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,a=nt(e,"float32"),o=fa([.2989,.587,.114]);let u;switch(e.rank){case 2:u=zh("ij,j->i",a,o);break;case 3:u=zh("ijk,k->ij",a,o);break;case 4:u=zh("ijkl,l->ijk",a,o);break;case 5:u=zh("ijklm,m->ijkl",a,o);break;case 6:u=zh("ijklmn,n->ijklm",a,o);break;default:throw new Error("Not a valid tensor rank.")}return u=ca(u,-1),nt(u,s)}const LY=J({rgbToGrayscale_:FY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(n,e,t=0,r=.5){const s=H(n,"image","rotateWithOffset","float32");U(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const a={image:s},o={radians:e,fillValue:t,center:r};return Q.runKernel(rC,a,o)}const zY=J({rotateWithOffset_:MY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xg(n,e,t,r,s,a){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),a==null&&(a=0);const o=n.shape[0];return t=Math.min(t,o),U(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),U(n.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${n.rank}'`),U(n.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${n.shape[1]}`),U(e.rank===1,()=>"scores must be a 1D tensor"),U(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),U(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:t,iouThreshold:r,scoreThreshold:s,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY){const a=H(n,"boxes","nonMaxSuppression","float32"),o=H(e,"scores","nonMaxSuppression","float32"),u=Xg(a,o,t,r,s);t=u.maxOutputSize,r=u.iouThreshold,s=u.scoreThreshold;const c={maxOutputSize:t,iouThreshold:r,scoreThreshold:s};return Q.runKernel(RS,{boxes:a,scores:o},c)}const BY=J({nonMaxSuppression_:PY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VY(n,e,t){const r=UY(n,e,t),s=r<0?-(r+1):r;n.splice(s,0,e)}function UY(n,e,t){return HY(n,e,t||WY)}function WY(n,e){return n>e?1:n<e?-1:0}function HY(n,e,t){let r=0,s=n.length,a=0,o=!1;for(;r<s;){a=r+(s-r>>>1);const u=t(e,n[a]);u>0?r=a+1:(s=a,o=!u)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qC(n,e,t,r,s){return c2(n,e,t,r,s,0)}function KC(n,e,t,r,s,a){return c2(n,e,t,r,s,0,!1,a,!0)}function XC(n,e,t,r,s,a){return c2(n,e,t,r,s,a,!0)}function c2(n,e,t,r,s,a,o=!1,u=!1,c=!1){const d=[];for(let C=0;C<e.length;C++)e[C]>s&&d.push({score:e[C],boxIndex:C,suppressBeginIndex:0});d.sort(Sz);const m=a>0?-.5/a:0,g=[],y=[];for(;g.length<t&&d.length>0;){const C=d.pop(),{score:N,boxIndex:$,suppressBeginIndex:A}=C;if(N<s)break;let D=!1;for(let L=g.length-1;L>=A;--L){const P=jY(n,$,g[L]);if(P>=r){D=!0;break}if(C.score=C.score*GY(r,m,P),C.score<=s)break}C.suppressBeginIndex=g.length,D||(C.score===N?(g.push($),y.push(C.score)):C.score>s&&VY(d,C,Sz))}const x=g.length,S=t-x;u&&S>0&&(g.push(...new Array(S).fill(0)),y.push(...new Array(S).fill(0)));const k={selectedIndices:g};return o&&(k.selectedScores=y),c&&(k.validOutputs=x),k}function jY(n,e,t){const r=n.subarray(e*4,e*4+4),s=n.subarray(t*4,t*4+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),d=Math.min(s[0],s[2]),m=Math.min(s[1],s[3]),g=Math.max(s[0],s[2]),y=Math.max(s[1],s[3]),x=(u-a)*(c-o),S=(g-d)*(y-m);if(x<=0||S<=0)return 0;const k=Math.max(a,d),C=Math.max(o,m),N=Math.min(u,g),$=Math.min(c,y),A=Math.max(N-k,0)*Math.max($-C,0);return A/(x+S-A)}function GY(n,e,t){const r=Math.exp(e*t*t);return t<=n?r:0}function Sz(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function qY(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY){const a=H(n,"boxes","nonMaxSuppressionAsync"),o=H(e,"scores","nonMaxSuppressionAsync"),u=Xg(a,o,t,r,s);t=u.maxOutputSize,r=u.iouThreshold,s=u.scoreThreshold;const c=await Promise.all([a.data(),o.data()]),d=c[0],m=c[1],{selectedIndices:g}=qC(d,m,t,r,s);return a!==n&&a.dispose(),o!==e&&o.dispose(),fa(g,"int32")}const KY=qY;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XY(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,a=0){const o=H(n,"boxes","nonMaxSuppression"),u=H(e,"scores","nonMaxSuppression"),c=Xg(o,u,t,r,s,a);t=c.maxOutputSize,r=c.iouThreshold,s=c.scoreThreshold,a=c.softNmsSigma;const d={boxes:o,scores:u},m={maxOutputSize:t,iouThreshold:r,scoreThreshold:s,softNmsSigma:a},g=Q.runKernel(_S,d,m);return{selectedIndices:g[0],selectedScores:g[1]}}const YY=J({nonMaxSuppressionWithScore_:XY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function QY(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,a=0){const o=H(n,"boxes","nonMaxSuppressionAsync"),u=H(e,"scores","nonMaxSuppressionAsync"),c=Xg(o,u,t,r,s,a);t=c.maxOutputSize,r=c.iouThreshold,s=c.scoreThreshold,a=c.softNmsSigma;const d=await Promise.all([o.data(),u.data()]),m=d[0],g=d[1],{selectedIndices:y,selectedScores:x}=XC(m,g,t,r,s,a);return o!==n&&o.dispose(),u!==e&&u.dispose(),{selectedIndices:fa(y,"int32"),selectedScores:fa(x)}}const ZY=QY;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JY(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,a=!1){const o=H(n,"boxes","nonMaxSuppression"),u=H(e,"scores","nonMaxSuppression"),c=Xg(o,u,t,r,s,null),d=c.maxOutputSize,m=c.iouThreshold,g=c.scoreThreshold,y={boxes:o,scores:u},x={maxOutputSize:d,iouThreshold:m,scoreThreshold:g,padToMaxOutputSize:a},S=Q.runKernel(DS,y,x);return{selectedIndices:S[0],validOutputs:S[1]}}const e7=J({nonMaxSuppressionPadded_:JY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function t7(n,e,t,r=.5,s=Number.NEGATIVE_INFINITY,a=!1){const o=H(n,"boxes","nonMaxSuppressionAsync"),u=H(e,"scores","nonMaxSuppressionAsync"),c=Xg(o,u,t,r,s,null),d=c.maxOutputSize,m=c.iouThreshold,g=c.scoreThreshold,[y,x]=await Promise.all([o.data(),u.data()]),{selectedIndices:S,validOutputs:k}=KC(y,x,d,m,g,a);return o!==n&&o.dispose(),u!==e&&u.dispose(),{selectedIndices:fa(S,"int32"),validOutputs:Ft(k,"int32")}}const n7=t7;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7(n,e,t=!1,r=!1){const s=H(n,"images","resizeBilinear");U(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),U(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),U(r===!1||t===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=s,o=!1;s.rank===3&&(o=!0,a=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const u={images:a},c={alignCorners:t,halfPixelCenters:r,size:e},d=Q.runKernel(rx,u,c);return o?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Cz=J({resizeBilinear_:r7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7(n,e,t=!1,r=!1){const s=H(n,"images","resizeNearestNeighbor");U(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),U(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),U(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),U(r===!1||t===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=s,o=!1;s.rank===3&&(o=!0,a=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const u={images:a},c={alignCorners:t,halfPixelCenters:r,size:e},d=Q.runKernel(nx,u,c);return o?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Tz=J({resizeNearestNeighbor_:s7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7(n,e="binary",t=!1,r=.5){const s=H(n,"image","threshold"),a=.2989,o=.587,u=.114,c=s.shape[0]*s.shape[1];let d=ae(fa([r]),255),m,g,y,x;if(U(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),U(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),U(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),U(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[m,g,y]=bi(s,[1,1,1],-1);const C=ae(m,a),N=ae(g,o),$=ae(y,u);x=Be(Be(C,N),$)}else x=n;if(e==="otsu"){const C=hI(nt(IC(x),"int32"),Vi([]),256);d=i7(C,c)}const S=t?Jf(x,d):Ha(x,d);return nt(ae(S,255),"int32")}function i7(n,e){let t=fa([-1]),r=fa([0]),s=fa([0]),a,o,u,c,d,m;for(let g=0;g<n.size-1;g++){a=Dn(n,0,g+1),o=Dn(n,g+1),d=It(Ct(a),e),m=It(Ct(o),e);const y=Ct(ae(a,Uh(0,a.size)));u=It(y,Ct(a));const x=Lh(o.shape,a.size),S=Be(Uh(0,o.size),x),k=ae(o,S);c=It(Ct(k),Ct(o));const C=bt(u,c),N=bt(u,c),$=ae(d,m);s=ae(ae($,C),N);const A=Ha(s,r);r=Ps(A,s,r),t=Ps(A,fa([g]),t)}return t}const o7=J({threshold_:a7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7(n,e,t="nearest",r="constant",s=0,a){const o=H(n,"image","transform","float32"),u=H(e,"transforms","transform","float32");U(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),U(u.rank===2&&(u.shape[0]===o.shape[0]||u.shape[0]===1)&&u.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),U(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const c={image:o,transforms:u},d={interpolation:t,fillMode:r,fillValue:s,outputShape:a};return Q.runKernel(eC,c,d)}const u7=J({transform_:l7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7(n,e,t){const r=H(n,"a","bandPart");U(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[a,o]=r.shape.slice(-2);let u,c;typeof e=="number"?(U(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),U(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),u=H(e<0?a:e,"numLower","bandPart")):(U(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),u=Ps(Wg(e,0),a,ed(e,a))),typeof t=="number"?(U(t%1===0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),U(t<=o,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${o}).`),c=H(t<0?o:t,"numUpper","bandPart")):(U(t.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),c=Ps(Wg(t,0),o,ed(t,o)));const d=oe(Uh(0,a,1,"int32"),[-1,1]),m=Uh(0,o,1,"int32"),g=bt(d,m),y=qo(Jf(g,u),zc(g,Sr(c))),x=vs([a,o],r.dtype);return oe(ja(xo(oe(r,[-1,a,o])).map(S=>Ps(y,S,x))),s)}const f7=J({bandPart_:c7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d7(n){let e;if(Array.isArray(n)){e=!1,U(n!=null&&n.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=n[0].shape[0];for(let a=1;a<n.length;++a)U(n[a].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${n[a].shape[0]} vs. ${s})`)}else e=!0,n=bi(n,n.shape[0],0).map(s=>nd(s,[0]));U(n.length<=n[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${n.length}) exceeds number of dimensions (${n[0].shape[0]}).`);const t=[],r=n;for(let s=0;s<n.length;++s)t.push(Q.tidy(()=>{let a=r[s];if(s>0)for(let o=0;o<s;++o){const u=ae(Ct(ae(t[o],a)),t[o]);a=bt(a,u)}return It(a,Bg(a,"euclidean"))}));return e?ja(t,0):t}const h7=J({gramSchmidt_:d7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7(n,e=!1){if(U(n.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${n.rank}`),n.rank===2)return kz(n,e);{const t=n.shape.slice(0,n.shape.length-2).reduce((c,d)=>c*d),r=xo(oe(n,[t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),s=[],a=[];r.forEach(c=>{const[d,m]=kz(c,e);s.push(d),a.push(m)});const o=oe(ja(s,0),n.shape),u=oe(ja(a,0),n.shape);return[o,u]}}function kz(n,e=!1){return Q.tidy(()=>{U(n.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${n.shape.length}D Tensor.`);const t=n.shape[0],r=n.shape[1];let s=wC(t),a=$u(n);const o=rd([[1]],[1,1]);let u=$u(o);const c=t>=r?r:t;for(let d=0;d<c;++d){const m=a,g=u,y=s;[u,a,s]=Q.tidy(()=>{const x=Dn(a,[d,d],[t-d,1]),S=Bg(x),k=Dn(a,[d,d],[1,1]),C=Ps(Ha(k,0),rd([[-1]]),rd([[1]])),N=bt(k,ae(C,S)),$=It(x,N);$.shape[0]===1?u=$u(o):u=es([o,Dn($,[1,0],[$.shape[0]-1,$.shape[1]])],0);const A=Sr(It(Sn(C,N),S)),D=Dn(a,[d,0],[t-d,r]),L=ae(A,u),P=Rn(u);if(d===0)a=bt(D,Sn(L,Sn(P,D)));else{const G=bt(D,Sn(L,Sn(P,D)));a=es([Dn(a,[0,0],[d,r]),G],0)}const W=Rn(L),B=Dn(s,[0,d],[t,s.shape[1]-d]);if(d===0)s=bt(B,Sn(Sn(B,u),W));else{const G=bt(B,Sn(Sn(B,u),W));s=es([Dn(s,[0,0],[t,d]),G],1)}return[u,a,s]}),un([m,g,y])}return!e&&t>r&&(s=Dn(s,[0,0],[t,r]),a=Dn(a,[0,0],[r,r])),[s,a]})}const m7=J({qr_:p7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ga;(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ga||(Ga={}));function g7(n,e,t=Ga.SUM_BY_NONZERO_WEIGHTS){const r=H(n,"losses","computeWeightedLoss");let s=null;e!=null&&(s=H(e,"weights","computeWeightedLoss"));const a=s==null?r:ae(r,s);if(t===Ga.NONE)return a;if(t===Ga.SUM)return Ct(a);if(t===Ga.MEAN){if(s==null)return Wr(a);{const o=r.size/s.size,u=It(Ct(a),Ct(s));return o>1?It(u,Ft(o)):u}}if(t===Ga.SUM_BY_NONZERO_WEIGHTS){if(s==null)return It(Ct(a),Ft(r.size));{const o=ae(s,vi(r.shape)),u=nt(Ct(Bh(o,Ft(0))),"float32");return It(Ct(a),u)}}throw Error(`Unknown reduction: ${t}`)}const Bc=J({computeWeightedLoss_:g7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7(n,e,t,r=Ga.SUM_BY_NONZERO_WEIGHTS){const s=H(n,"labels","absoluteDifference"),a=H(e,"predictions","absoluteDifference");let o=null;t!=null&&(o=H(t,"weights","absoluteDifference")),aa(s.shape,a.shape,"Error in absoluteDifference: ");const u=gs(bt(s,a));return Bc(u,o,r)}const v7=J({absoluteDifference_:y7});function b7(n,e,t,r,s=Ga.SUM_BY_NONZERO_WEIGHTS){const a=H(n,"labels","cosineDistance"),o=H(e,"predictions","cosineDistance");let u=null;r!=null&&(u=H(r,"weights","cosineDistance")),aa(a.shape,o.shape,"Error in cosineDistance: ");const c=Ft(1),d=bt(c,Ct(ae(a,o),t,!0));return Bc(d,u,s)}const x7=J({cosineDistance_:b7});function w7(n,e,t,r=Ga.SUM_BY_NONZERO_WEIGHTS){let s=H(n,"labels","hingeLoss");const a=H(e,"predictions","hingeLoss");let o=null;t!=null&&(o=H(t,"weights","hingeLoss")),aa(s.shape,a.shape,"Error in hingeLoss: ");const u=Ft(1);s=bt(ae(Ft(2),s),u);const c=Ml(bt(u,ae(s,a)));return Bc(c,o,r)}const S7=J({hingeLoss_:w7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C7(n,e,t,r=1,s=Ga.SUM_BY_NONZERO_WEIGHTS){const a=H(n,"labels","huberLoss"),o=H(e,"predictions","huberLoss");let u=null;t!=null&&(u=H(t,"weights","huberLoss")),aa(a.shape,o.shape,"Error in huberLoss: ");const c=Ft(r),d=gs(bt(o,a)),m=ed(d,c),g=bt(d,m),y=Be(ae(Ft(.5),hr(m)),ae(c,g));return Bc(y,u,s)}const T7=J({huberLoss_:C7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k7(n,e,t,r=1e-7,s=Ga.SUM_BY_NONZERO_WEIGHTS){const a=H(n,"labels","logLoss"),o=H(e,"predictions","logLoss");let u=null;t!=null&&(u=H(t,"weights","logLoss")),aa(a.shape,o.shape,"Error in logLoss: ");const c=Ft(1),d=Ft(r),m=Sr(ae(a,Wi(Be(o,d)))),g=ae(bt(c,a),Wi(Be(bt(c,o),d))),y=bt(m,g);return Bc(y,u,s)}const E7=J({logLoss_:k7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N7(n,e,t,r=Ga.SUM_BY_NONZERO_WEIGHTS){const s=H(n,"labels","meanSquaredError"),a=H(e,"predictions","meanSquaredError");let o=null;t!=null&&(o=H(t,"weights","meanSquaredError")),aa(s.shape,a.shape,"Error in meanSquaredError: ");const u=MC(s,a);return Bc(u,o,r)}const $7=J({meanSquaredError_:N7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I7(n,e){const t=H(n,"labels","sigmoidCrossEntropyWithLogits"),r=H(e,"logits","sigmoidCrossEntropyWithLogits");aa(t.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=Ml(r),a=ae(r,t),o=Mx(yi(Sr(gs(r))));return Be(bt(s,a),o)}function R7(n,e,t,r=0,s=Ga.SUM_BY_NONZERO_WEIGHTS){let a=H(n,"multiClassLabels","sigmoidCrossEntropy");const o=H(e,"logits","sigmoidCrossEntropy");let u=null;if(t!=null&&(u=H(t,"weights","sigmoidCrossEntropy")),aa(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const d=Ft(r),m=Ft(1),g=Ft(.5);a=Be(ae(a,bt(m,d)),ae(g,d))}const c=I7(a,o);return Bc(c,u,s)}const D7=J({sigmoidCrossEntropy_:R7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _7(n,e,t=-1){if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${t}`);return Ru((s,a,o)=>{const c=zx(a,[t],!0),d=bt(nt(a,"float32"),c);o([s,d]);const m=Sr(ae(d,s));return{value:Ct(m,[t]),gradFunc:(x,S)=>{const[k,C]=S,N=ts(x.shape,[t]);return[ae(oe(x,N),bt(nt(k,"float32"),yi(C))),ae(oe(x,N),bt(yi(C),nt(k,"float32")))]}}})(n,e)}function A7(n,e,t,r=0,s=Ga.SUM_BY_NONZERO_WEIGHTS){let a=H(n,"onehotLabels","softmaxCrossEntropy");const o=H(e,"logits","softmaxCrossEntropy");let u=null;if(t!=null&&(u=H(t,"weights","softmaxCrossEntropy")),aa(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const d=Ft(r),m=Ft(1),g=Ft(a.shape[1]);a=Be(ae(a,bt(m,d)),It(d,g))}const c=_7(a,o);return Bc(c,u,s)}const O7=J({softmaxCrossEntropy_:A7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F7(n,e,t,r){const s=H(n,"indices","sparseFillEmptyRows","int32"),a=H(e,"values","sparseFillEmptyRows"),o=H(t,"denseShape","sparseFillEmptyRows","int32"),u=H(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(u.rank!==0)throw new Error(`Default value should be a scalar but received shape ${u.shape}`);const c={indices:s,values:a,denseShape:o,defaultValue:u},d=Q.runKernel(WS,c);return{outputIndices:d[0],outputValues:d[1],emptyRowIndicator:d[2],reverseIndexMap:d[3]}}const L7=J({sparseFillEmptyRows_:F7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7(n,e,t){const r=H(n,"inputIndices","sparseReshape","int32"),s=H(e,"inputShape","sparseReshape","int32"),a=H(t,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const o={inputIndices:r,inputShape:s,newShape:a},u=Q.runKernel(HS,o);return{outputIndices:u[0],outputShape:u[1]}}const z7=J({sparseReshape_:M7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P7(n,e,t){const r=H(n,"data","sparseSegmentMean"),s=H(e,"indices","sparseSegmentMean","int32"),a=H(t,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const o={data:r,indices:s,segmentIds:a};return Q.runKernel(jS,o)}const B7=J({sparseSegmentMean_:P7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7(n,e,t){const r=H(n,"data","sparseSegmentSum"),s=H(e,"indices","sparseSegmentSum","int32"),a=H(t,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const o={data:r,indices:s,segmentIds:a};return Q.runKernel(GS,o)}const U7=J({sparseSegmentSum_:V7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7(n,e,t,r,s,a,o,u){const c=H(n,"data","stringNGrams","string");if(c.dtype!=="string")throw new Error("Data must be of datatype string");if(c.shape.length!==1)throw new Error(`Data must be a vector, saw: ${c.shape}`);const d=H(e,"dataSplits","stringNGrams");if(d.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const m={separator:t,nGramWidths:r,leftPad:s,rightPad:a,padWidth:o,preserveShortSequences:u},g={data:c,dataSplits:d},y=Q.runKernel(YS,g,m);return{nGrams:y[0],nGramsSplits:y[1]}}const H7=J({stringNGrams_:W7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j7(n,e,t=!0){const r=H(n,"input","stringSplit","string"),s=H(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const a={skipEmpty:t},o={input:r,delimiter:s},u=Q.runKernel(QS,o,a);return{indices:u[0],values:u[1],shape:u[2]}}const G7=J({stringSplit_:j7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q7(n,e){const t=H(n,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:t};return Q.runKernel(ZS,s,r)}const K7=J({stringToHashBucketFast_:q7});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7(n,e,t,r=!0){const s=H(n,"input","staticRegexReplace","string"),a={pattern:e,rewrite:t,replaceGlobal:r};return Q.runKernel(fx,{x:s},a)}const Y7=J({staticRegexReplace_:X7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ez={fft:qx,ifft:Kg,rfft:Kx,irfft:LC},Nz={hammingWindow:TY,hannWindow:xz,frame:wz,stft:$Y},Ko={flipLeftRight:_Y,grayscaleToRGB:OY,resizeNearestNeighbor:Tz,resizeBilinear:Cz,rgbToGrayscale:LY,rotateWithOffset:zY,cropAndResize:RY,nonMaxSuppression:BY,nonMaxSuppressionAsync:KY,nonMaxSuppressionWithScore:YY,nonMaxSuppressionWithScoreAsync:ZY,nonMaxSuppressionPadded:e7,nonMaxSuppressionPaddedAsync:n7,threshold:o7,transform:u7},f2={bandPart:f7,gramSchmidt:h7,qr:m7},$z={absoluteDifference:v7,computeWeightedLoss:Bc,cosineDistance:x7,hingeLoss:S7,huberLoss:T7,logLoss:E7,meanSquaredError:$7,sigmoidCrossEntropy:D7,softmaxCrossEntropy:O7},Iz={sparseFillEmptyRows:L7,sparseReshape:z7,sparseSegmentMean:B7,sparseSegmentSum:U7},Rz={stringNGrams:H7,stringSplit:G7,stringToHashBucketFast:K7,staticRegexReplace:Y7};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q7=new Map,d2=new Map;class Hh{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class wo{constructor(){this.classNameMap={}}static getMap(){return wo.instance==null&&(wo.instance=new wo),wo.instance}static register(e){wo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ve(n,e,t){U(n.className!=null,()=>"Class being registered does not have the static className property defined."),U(typeof n.className=="string",()=>"className is required to be a string, but got type "+typeof n.className),U(n.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof t>"u"&&(t=n.className);const r=t,s=e+">"+r;return wo.register(n),Q7.set(s,n),d2.set(n,s),n}function Z7(n){return d2.has(n)?d2.get(n):n.className}const J7=Object.freeze(Object.defineProperty({__proto__:null,Serializable:Hh,SerializationMap:wo,getRegisteredName:Z7,registerClass:Ve},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vc extends Hh{minimize(e,t=!1,r){const{value:s,grads:a}=this.computeGradients(e,r);if(r!=null){const o=r.map(u=>({name:u.name,tensor:a[u.name]}));this.applyGradients(o)}else this.applyGradients(a);return un(a),t?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return AM(e,t)}dispose(){this.iterations_!=null&&un(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ft(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Vc,Symbol.hasInstance,{value:n=>n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h2 extends Vc{static get className(){return"Adadelta"}constructor(e,t,r=null){super(),this.learningRate=e,this.rho=t,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=Q.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:ve(()=>_n(a).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:ve(()=>_n(a).variable(o))});const u=Array.isArray(e)?e[s].tensor:e[r];if(u==null)return;const c=this.accumulatedGrads[s].variable,d=this.accumulatedUpdates[s].variable;ve(()=>{const m=Be(ae(c,this.rho),ae(hr(u),1-this.rho)),g=ae(It(Vs(Be(d,this.epsilon)),Vs(Be(c,this.epsilon))),u),y=Be(ae(d,this.rho),ae(hr(g),1-this.rho));c.assign(m),d.assign(y);const x=Be(ae(g,-this.learningRate),a);a.assign(x)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(un(this.accumulatedGrads.map(e=>e.variable)),un(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p2 extends Vc{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=Q.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:ve(()=>Lh(a.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const u=this.accumulatedGrads[s].variable;ve(()=>{const c=Be(u,hr(o));u.assign(c);const d=Be(ae(It(o,Vs(Be(c,Q.backend.epsilon()))),-this.learningRate),a);a.assign(d)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&un(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m2 extends Vc{static get className(){return"Adam"}constructor(e,t,r,s=null){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ve(()=>{this.accBeta1=Ft(t).variable(),this.accBeta2=Ft(r).variable()}),s==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ve(()=>{const r=bt(1,this.accBeta1),s=bt(1,this.accBeta2);t.forEach((a,o)=>{const u=Q.registeredVariables[a],c=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:ve(()=>_n(u).variable(c))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${a}/v`,variable:ve(()=>_n(u).variable(c))});const d=Array.isArray(e)?e[o].tensor:e[a];if(d==null)return;const m=this.accumulatedFirstMoment[o].variable,g=this.accumulatedSecondMoment[o].variable,y=Be(ae(m,this.beta1),ae(d,1-this.beta1)),x=Be(ae(g,this.beta2),ae(hr(d),1-this.beta2)),S=It(y,r),k=It(x,s);m.assign(y),g.assign(x);const C=Be(ae(It(S,Be(Vs(k),this.epsilon)),-this.learningRate),u);u.assign(C)}),this.accBeta1.assign(ae(this.accBeta1,this.beta1)),this.accBeta2.assign(ae(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&un(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&un(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e),ve(()=>{this.accBeta1.assign(Iu(this.beta1,this.iterations_+1)),this.accBeta2.assign(Iu(this.beta2,this.iterations_+1))});const t=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g2 extends Vc{static get className(){return"Adamax"}constructor(e,t,r,s=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=r,this.epsilon=s,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ve(()=>{this.iteration=Ft(0).variable(),this.accBeta1=Ft(t).variable()}),s==null&&(this.epsilon=Q.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ve(()=>{const r=bt(1,this.accBeta1),s=It(-this.learningRate,Be(ae(this.iteration,this.decay),1));t.forEach((a,o)=>{const u=Q.registeredVariables[a],c=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:_n(u).variable(c)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${a}/v`,variable:_n(u).variable(c)});const d=Array.isArray(e)?e[o].tensor:e[a];if(d==null)return;const m=this.accumulatedFirstMoment[o].variable,g=this.accumulatedWeightedInfNorm[o].variable,y=Be(ae(m,this.beta1),ae(d,1-this.beta1)),x=ae(g,this.beta2),S=gs(d),k=Du(x,S);m.assign(y),g.assign(k);const C=Be(ae(It(s,r),It(y,Be(k,this.epsilon))),u);u.assign(C)}),this.iteration.assign(Be(this.iteration,1)),this.accBeta1.assign(ae(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&un(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&un(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YC extends Vc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const o=Q.registeredVariables[r];ve(()=>{const u=Be(ae(this.c,a),o);o.assign(u)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Es(Ft(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y2 extends YC{static get className(){return"Momentum"}constructor(e,t,r=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=r,this.accumulations=[],this.m=Ft(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=Q.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:ve(()=>_n(a).variable(!1))});const o=this.accumulations[s].variable,u=Array.isArray(e)?e[s].tensor:e[r];u!=null&&ve(()=>{let c;const d=Be(ae(this.m,o),u);this.useNesterov?c=Be(ae(this.c,Be(u,ae(d,this.m))),a):c=Be(ae(this.c,d),a),o.assign(d),a.assign(c)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&un(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(t)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v2 extends Vc{static get className(){return"RMSProp"}constructor(e,t=.9,r=0,s=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,s==null&&(this.epsilon=Q.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=Q.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:ve(()=>_n(a).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:ve(()=>_n(a).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:ve(()=>_n(a).variable(o))});const u=Array.isArray(e)?e[s].tensor:e[r];if(u==null)return;const c=this.accumulatedMeanSquares[s].variable,d=this.accumulatedMoments[s].variable;ve(()=>{const m=Be(ae(c,this.decay),ae(hr(u),1-this.decay));if(this.centered){const g=this.accumulatedMeanGrads[s].variable,y=Be(ae(g,this.decay),ae(u,1-this.decay)),x=It(ae(u,this.learningRate),Vs(bt(m,Be(hr(y),this.epsilon)))),S=Be(ae(d,this.momentum),x);c.assign(m),g.assign(y),d.assign(S);const k=bt(a,S);a.assign(k)}else{const g=Be(ae(c,this.decay),ae(hr(u),1-this.decay)),y=Be(ae(d,this.momentum),It(ae(u,this.learningRate),Vs(Be(g,this.epsilon))));c.assign(g),d.assign(y);const x=bt(a,y);a.assign(x)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&un(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&un(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&un(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,t).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(t,t*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(t*2,t*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e9=[h2,p2,m2,g2,y2,v2,YC];function t9(){for(const n of e9)Ve(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n9="model",r9=".json",s9=".weights.bin";function Dz(n){return new Promise(e=>setTimeout(e)).then(n)}class jh{constructor(e){if(!xe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(jh.URL_SCHEME)&&(e=e.slice(jh.URL_SCHEME.length)),(e==null||e.length===0)&&(e=n9),this.modelJsonFileName=e+r9,this.weightDataFileName=e+s9}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=Ol.join(e.weightData),r=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=hM(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),u=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(u.download=this.modelJsonFileName,u.href=o,await Dz(()=>u.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=r,await Dz(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Ex(e)}}}}jh.URL_SCHEME="downloads://";class a9{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{const r=new FileReader;r.onload=s=>{const a=JSON.parse(s.target.result),o=a.modelTopology;if(o==null){t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const c=q$(a,d=>this.loadWeights(d));e(c)},r.onerror=s=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const t=[],r=[];for(const o of e)t.push(...o.weights),r.push(...o.paths);const s=this.checkManifestAndWeightFiles(e),a=r.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(a).then(o=>[t,o])}loadWeightsFile(e,t){return new Promise((r,s)=>{const a=new FileReader;a.onload=o=>{const u=o.target.result;r(u)},a.onerror=o=>s(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){const t=[],r=this.weightsFiles.map(a=>dM(a.name)),s={};for(const a of e)a.paths.forEach(o=>{const u=dM(o);if(t.indexOf(u)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${u}'`);if(t.push(u),r.indexOf(u)===-1)throw new Error(`Weight file with basename '${u}' is not provided.`);s[o]=this.weightsFiles[r.indexOf(u)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const i9=n=>xe().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(jh.URL_SCHEME)?o9(n.slice(jh.URL_SCHEME.length)):null;Vr.registerSaveRouter(i9);function o9(n="model"){return new jh(n)}function l9(n){return new a9(n)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _z(n,e,t,r){o(n),t=t??0,r=r??1,u(t,r);let s=0;const a=c=>(c.then(d=>{const m=t+ ++s/n.length*(r-t);return e(m),d}),c);function o(c){U(c!=null&&Array.isArray(c)&&c.length>0,()=>"promises must be a none empty array")}function u(c,d){U(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${c}`),U(d>=0&&d<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${d}`),U(d>=c,()=>`startFraction must be no more than endFraction, but got startFraction ${c} and endFraction ${d}`)}return Promise.all(n.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Az(n,e){e==null&&(e={});const t=e.fetchFunc==null?xe().platform.fetch:e.fetchFunc,r=n.map(g=>t(g,e.requestInit,{isBinary:!0})),u=(e.onProgress==null?await Promise.all(r):await _z(r,e.onProgress,0,.5)).map(g=>g.arrayBuffer());return e.onProgress==null?await Promise.all(u):await _z(u,e.onProgress,.5,1)}function u9(n,e){var t;const r=e.fetchFunc==null?xe().platform.fetch:e.fetchFunc;let s=0,a;return(t=e.onProgress)===null||t===void 0||t.call(e,0),new ReadableStream({pull:async o=>{for(var u;s<n.length;){a||(a=(await r(n[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:c,value:d}=await a.read();if(c){s++,a=void 0,(u=e.onProgress)===null||u===void 0||u.call(e,s/n.length);continue}o.enqueue(d);return}o.close()}})}async function Oz(n,e="",t,r){return Fz(o=>Az(o,{requestInit:r}))(n,e,t)}function Fz(n){return async(e,t="",r)=>{const s=e.map(()=>!1),a={},o=r!=null?r.map(()=>!1):[],u=[];if(e.forEach((x,S)=>{let k=0;x.weights.forEach(C=>{const N="quantization"in C?C.quantization.dtype:C.dtype,$=Ih[N]*Re(C.shape),A=()=>{s[S]=!0,a[S]==null&&(a[S]=[]),a[S].push({manifestEntry:C,groupOffset:k,sizeBytes:$})};r!=null?r.forEach((D,L)=>{D===C.name&&(A(),o[L]=!0)}):A(),u.push(C.name),k+=$})}),!o.every(x=>x)){const x=r.filter((S,k)=>!o[k]);throw new Error(`Could not find weights in manifest with names: ${x.join(", ")}. 
Manifest JSON has weights with names: ${u.join(", ")}.`)}const c=s.reduce((x,S,k)=>(S&&x.push(k),x),[]),d=[];c.forEach(x=>{e[x].paths.forEach(S=>{const k=t+(t.endsWith("/")?"":"/")+S;d.push(k)})});const m=await n(d),g={};let y=0;return c.forEach(x=>{const S=e[x].paths.length,k=new Ol(m.slice(y,y+S));a[x].forEach(N=>{const $=k.slice(N.groupOffset,N.groupOffset+N.sizeBytes),A=H$($,[N.manifestEntry]);for(const D in A)g[D]=A[D]}),y+=S}),g}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c9="application/octet-stream",f9="application/json";class b2{constructor(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,t.fetchFunc!=null?(U(typeof t.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=xe().platform.fetch,U(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&U(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=hM(e,r);if(t.body.append("model.json",new Blob([JSON.stringify(s)],{type:f9}),"model.json"),e.weightData!=null){const o=Ol.join(e.weightData);t.body.append("model.weights.bin",new Blob([o],{type:c9}),"model.weights.bin")}const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:Ex(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=t.modelTopology,s=t.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return q$(e,t=>this.loadWeights(t))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),r=fC(e.weightsManifest),s=()=>u9(t,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=d9(t),a=this.weightPathPrefix||r,o=[],u=[];for(const c of e)for(const d of c.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(d)):o.push(a+d+s);return this.weightUrlConverter&&o.push(...await Promise.all(u)),o}async loadWeights(e){const t=await this.getWeightUrls(e),r=fC(e),s=await Az(t,this.loadOptions);return[r,s]}}b2.URL_SCHEME_REGEX=/^https?:\/\//;function d9(n){const e=n.lastIndexOf("/"),t=n.lastIndexOf("?"),r=n.substring(0,e),s=t>e?n.substring(t):"";return[r+"/",s]}function x2(n){return n.match(b2.URL_SCHEME_REGEX)!=null}const Lz=(n,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let t=!0;if(Array.isArray(n)?t=n.every(r=>x2(r)):t=x2(n),t)return w2(n,e)}return null};Vr.registerSaveRouter(Lz),Vr.registerLoadRouter(Lz);function w2(n,e){return new b2(n,e)}function Mz(n,e){return w2(n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S2{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class zz{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class h9{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function p9(n,e,t,r){const s=arguments;return new h9(QC(...s))}function QC(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new S2(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new S2({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new S2({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))}function m9(n){return new zz(n)}function g9(n){return new zz(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C2=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Ol,browserFiles:l9,browserHTTPRequest:Mz,concatenateArrayBuffers:fM,copyModel:J5,decodeWeights:H$,decodeWeightsStream:uM,encodeWeights:W$,fromMemory:p9,fromMemorySync:QC,getLoadHandlers:mM,getModelArtifactsForJSON:q$,getModelArtifactsForJSONSync:G$,getModelArtifactsInfoForJSON:Ex,getSaveHandlers:pM,getWeightSpecs:fC,http:w2,isHTTPScheme:x2,listModels:Q5,loadWeights:Oz,moveModel:eq,registerLoadRouter:P5,registerSaveRouter:z5,removeModel:Z5,weightsLoaderFactory:Fz,withSaveHandler:m9,withSaveHandlerSync:g9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9(n,e,t){const r=H(n,"labels","confusionMatrix"),s=H(e,"predictions","confusionMatrix");U(t==null||t>0&&Number.isInteger(t),()=>`If provided, numClasses must be a positive integer, but got ${t}`),U(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),U(s.rank===1,()=>`Expected the rank of predictions to be 1, but got ${s.rank}`),U(r.shape[0]===s.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`),U(t>0&&Number.isInteger(t),()=>`numClasses is required to be a positive integer, but got ${t}`);const a=Hg(nt(r,"int32"),t),o=Hg(nt(s,"int32"),t),u=Rn(a),c=Sn(u,o);return nt(c,"int32")}const v9=J({confusionMatrix_:y9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b9=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:v9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Gh,Pz=!1;function Bz(n,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,s=!1,a=!1,o=!1,u=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)a=!0;else if(n.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&n instanceof ImageBitmap)u=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${n.constructor.name}`);if(bx(nC,Q.backendName)!=null){const S={pixels:n},k={numChannels:e};return Q.runKernel(nC,S,k)}const[d,m]=s?[n.videoWidth,n.videoHeight]:[n.width,n.height];let g;if(o)g=n.getContext("2d").getImageData(0,0,d,m).data;else if(r||t)g=n.data;else if(a||s||u){if(Gh==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Gh=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Gh=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Gh.canvas.width=d,Gh.canvas.height=m,Gh.drawImage(n,0,0,d,m),g=Gh.getImageData(0,0,d,m).data}let y;if(e===4)y=new Int32Array(g);else{const S=d*m;y=new Int32Array(S*e);for(let k=0;k<S;k++)for(let C=0;C<e;++C)y[k*e+C]=g[k*4+C]}return e2(y,[m,d,e],"int32")}function x9(n){return n!=null&&n.data instanceof Uint8Array}function w9(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function S9(n){return n!=null&&n.width!==0&&n.height!==0}function C9(n){return w9()&&!(n instanceof ImageBitmap)&&S9(n)&&!x9(n)}async function T9(n,e=3){let t=null;if(xe().getBool("WRAP_TO_IMAGEBITMAP")&&C9(n)){let r;try{r=await createImageBitmap(n,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===n.width&&r.height===n.height?t=r:t=n}else t=n;return Bz(t,e)}function Vz(n){if(n.rank!==2&&n.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const e=n.rank===2?1:n.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(n.dtype!=="float32"&&n.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`)}function k9(n){const e=n?.alpha||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function E9(n,e){let t=H(n,"img","toPixels");if(!(n instanceof Pn)){const d=t;t=nt(d,"int32"),d.dispose()}Vz(t);const[r,s]=t.shape.slice(0,2),a=t.rank===2?1:t.shape[2],o=await t.data(),u=t.dtype==="float32"?255:1,c=new Uint8ClampedArray(s*r*4);for(let d=0;d<r*s;++d){const m=[0,0,0,255];for(let y=0;y<a;y++){const x=o[d*a+y];if(t.dtype==="float32"){if(x<0||x>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${x}.`)}else if(t.dtype==="int32"&&(x<0||x>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${x}.`);a===1?(m[0]=x*u,m[1]=x*u,m[2]=x*u):m[y]=x*u}const g=d*4;c[g+0]=Math.round(m[0]),c[g+1]=Math.round(m[1]),c[g+2]=Math.round(m[2]),c[g+3]=Math.round(m[3])}if(e!=null){Pz||bx(mS,Q.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),Pz=!0),e.width=s,e.height=r;const d=e.getContext("2d"),m=new ImageData(c,s,r);d.putImageData(m,0,0)}return t!==n&&t.dispose(),c}function N9(n,e,t){let r=H(n,"img","draw");if(!(n instanceof Pn)){const o=r;r=nt(o,"int32"),o.dispose()}Vz(r),k9(t?.imageOptions);const s={image:r},a={canvas:e,options:t};Q.runKernel(mS,s,a)}const Uz=J({fromPixels_:Bz}),$9=Object.freeze(Object.defineProperty({__proto__:null,draw:N9,fromPixels:Uz,fromPixelsAsync:T9,toPixels:E9},Symbol.toStringTag,{value:"Module"}));function ZC(n,e){const t=n.shape.length,r=e.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${t}`);if(Re(n.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${n.shape}.`);const s=e.shape,a=s[s.length-1];let o=1;for(let g=0;g<s.length-1;++g)o*=s[g];const u=n.shape,c=s.slice();c.pop();let d=1;for(let g=a;g<t;++g)d*=u[g],c.push(u[g]);const m=[...Ot(n.shape).map(g=>g/d),1].slice(0,a);return[c,o,d,m]}const I9=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:ZC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T2=-2,R9=-1;function k2(n,e,t){const r=n.shape.length;U(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),U(r===t.length,()=>`Error in slice${r}D: Length of size ${t} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)U(e[s]+t[s]<=n.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+t[s]}) would overflow input.shape[${s}] (${n.shape[s]})`)}function D9(n){const e=[];let t=0;for(;n>0;)n&1&&e.push(t),n/=2,t++;return e}function E2(n,e,t){const r=[];for(let s=0;s<n.length;s++)r[s]=Math.ceil((e[s]-n[s])/t[s]);return r}function Wz(n,e,t,r){const s=[...n];for(let a=s.length;a<r.length;a++)s.push(1);for(let a=0;a<t;a++)a===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function Hz(n,e,t){return t<=n?t:t-(e-1)}function jz(n,e){const t=[];for(let r=0;r<n;r++)t.push(e+r);return t}function _9(n,e,t,r,s,a,o,u,c){const d=n.length;let m=new Array(d),g=new Array(d),y=new Array(d);if(e.length&&t>0){const x=e[0],S=t+1;m=Gz(o,x,S,r,n),g=qz(u,x,S,s,n),y=Wz(a,x,S,n)}else for(let x=0;x<d;x++)m[x]=Xz(o,r,a,n,x,c),g[x]=Yz(u,s,a,n,x,c),y[x]=Kz(a,x,c);return{begin:m,end:g,strides:y}}function Gz(n,e,t,r,s){const a=[...s],o=jz(t,e);for(let u=0;u<a.length;u++)if(o.indexOf(u)>-1)a[u]=0;else{const c=Hz(e,t,u);let d=r[c];n&1<<c&&(d=0),a[u]=d}return a}function qz(n,e,t,r,s){const a=[...s],o=jz(t,e);for(let u=0;u<a.length;u++)if(o.indexOf(u)>-1)a[u]=Number.MAX_SAFE_INTEGER;else{const c=Hz(e,t,u);let d=r[c];n&1<<c&&(d=Number.MAX_SAFE_INTEGER),a[u]=d}for(let u=0;u<a.length;u++){const c=s[u];a[u]<0&&(a[u]+=c),a[u]=Uf(0,a[u],s[u])}return a}function Kz(n,e,t){let r=n[e];return(t&1<<e||r==null)&&(r=1),r}function Xz(n,e,t,r,s,a){let o=e[s];const u=t[s]||1;(n&1<<s||a&1<<s||o==null)&&(u>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const c=r[s];return o<0&&(o+=c),o=Uf(0,o,c-1),o}function Yz(n,e,t,r,s,a){let o=e[s];const u=t[s]||1;(n&1<<s||a&1<<s||o==null)&&(u>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const c=r[s];return o<0&&(o+=c),u>0?o=Uf(0,o,c):o=Uf(-1,o,c-1),o}function N2(n,e,t){let r=t.length;for(let s=0;s<t.length;s++)if(t[s]>1){r=s;break}for(let s=r+1;s<t.length;s++)if(e[s]>0||t[s]!==n[s])return!1;return!0}function $2(n,e){let t=n.length>0?n[n.length-1]:1;for(let r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function JC(n,e,t){let r;const s=n.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{U(o!==-1,()=>"slice() does not support negative begin indexing.")});let a;return t==null?a=new Array(s).fill(-1):typeof t=="number"?a=[t,...new Array(s-1).fill(-1)]:t.length<s?a=t.concat(new Array(s-t.length).fill(-1)):a=t,a=a.map((o,u)=>o>=0?o:(U(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${u}.`),n.shape[u]-r[u])),[r,a]}function I2(n,e,t,r,s,a,o,u,c){let d;if(r==null?(d=new Array(e.length),d.fill(1)):d=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let m=!1;const g={dims:d.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:t.slice(),strides:d.slice(),beginMask:s,endMask:a,ellipsisMask:o,newAxisMask:u,shrinkAxisMask:c};for(let A=0;A<g.dims;A++)m&&1<<A&u&&g.numAddAxisAfterEllipsis++,1<<A&o&&(m=!0);m||(g.ellipsisMask|=1<<g.dims,g.dims++);const y={dims:n.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};A9(g,y);let x=!0,S=!0,k=!0;const C=[],N=[];for(let A=0;A<n.length;++A){if(y.strides[A]===0)throw Error(`strides[${A}] must be non-zero`);const D=!!(y.shrinkAxisMask&1<<A),L=n[A];if(L===-1){C.push(D?1:-1);continue}const P=[y.beginMask&1<<A,y.endMask&1<<A],W=[y.strides[A]>0?0:-1,y.strides[A]>0?L:L-1];if(D&&y.strides[A]<=0)throw Error("only stride 1 allowed on non-range indexing.");k=k&&y.strides[A]===1;const B=!!(y.beginMask&1<<A&&y.endMask&1<<A);if(y.beginValid&&y.endValid){if(D){const ue=y.begin[A]<0?L+y.begin[A]:y.begin[A];if(y.begin[A]=ue,y.end[A]=y.begin[A]+1,ue<0||ue>=L)throw Error(`slice index ${y.begin[A]} of dimension ${A} out of bounds.`)}else y.begin[A]=Qz(y.begin[A],0,y.strides[A],L,P,W),y.end[A]=Qz(y.end[A],1,y.strides[A],L,P,W);const re=y.strides[A]===1&&y.begin[A]===0&&y.end[A]===L;x=x&&re,S=S&&(A===0&&y.strides[A]===1||re)}else x=x&&y.strides[A]===1&&B,S=S&&(A===0&&y.strides[A]===1||B);let G,X=!1;if(y.beginValid&&y.endValid?(G=y.end[A]-y.begin[A],X=!0):D?(G=1,X=!0):B&&L>=0&&(y.strides[A]<0?G=-L:G=L,X=!0),X){let re;G===0||G<0!=y.strides[A]<0?re=0:re=Math.trunc(G/y.strides[A])+(G%y.strides[A]!==0?1:0),C.push(re)}else C.push(-1)}for(let A=0;A<y.finalShapeGatherIndices.length;++A){const D=y.finalShapeGatherIndices[A];D>=0?N.push(C[D]):D===T2&&N.push(1)}return{finalShapeSparse:N.filter((A,D)=>y.finalShapeGatherIndices[D]!==T2),finalShape:N,isIdentity:x,sliceDim0:S,isSimpleSlice:k,begin:y.begin,end:y.end,strides:y.strides}}function A9(n,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let t=0;e.beginValid=n.begin!=null,e.endValid=n.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<n.dims;r++)if(1<<r&n.ellipsisMask){const s=Math.min(e.dims-(n.dims-r)+1+n.numAddAxisAfterEllipsis,e.dims);for(;t<s;t++)e.begin[t]=0,e.end[t]=0,e.strides[t]=1,e.beginMask|=1<<t,e.endMask|=1<<t,e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&n.newAxisMask)e.finalShapeGatherIndices.push(T2),e.finalShapeGatherIndicesSparse.push(-1);else{if(t===e.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${e.dims} dims, ${e.begin.length}.`);n.begin!=null&&(e.begin[t]=n.begin[r]),n.end!=null&&(e.end[t]=n.end[r]),e.strides[t]=n.strides[r],n.beginMask&1<<r&&(e.beginMask|=1<<t),n.endMask&1<<r&&(e.endMask|=1<<t),n.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(R9),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<t):(e.finalShapeGatherIndices.push(t),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[t]=r,t++}}function Qz(n,e,t,r,s,a){if(s[e])return t>0?a[e]:a[e+1&1];{const o=n<0?r+n:n;return o<a[0]?a[0]:o>a[1]?a[1]:o}}const Zz=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:k2,computeFlatOffset:$2,computeOutShape:E2,getNormalizedAxes:_9,isSliceContinous:N2,maskToAxes:D9,parseSliceParams:JC,sliceInfo:I2,startForAxis:Xz,startIndicesWithElidedDims:Gz,stopForAxis:Yz,stopIndicesWithElidedDims:qz,stridesForAxis:Kz,stridesWithElidedDims:Wz},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const Jz="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e3{static sgd(e){return new YC(e)}static momentum(e,t,r=!1){return new y2(e,t,r)}static rmsprop(e,t=.9,r=0,s=null,a=!1){return new v2(e,t,r,s,a)}static adam(e=.001,t=.9,r=.999,s=null){return new m2(e,t,r,s)}static adadelta(e=.001,t=.95,r=null){return new h2(e,t,r)}static adamax(e=.002,t=.9,r=.999,s=null,a=0){return new g2(e,t,r,s,a)}static adagrad(e,t=.1){return new p2(e,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qh=e3;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O9=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:n=>n();function R2(){return new Promise(n=>O9(()=>n()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2(n,e){const t=n[0].length;n.forEach((s,a)=>{U(s.length===t,()=>`Error in concat${t}D: rank of tensors[${a}] must be the same as the rank of the rest (${t})`)}),U(e>=0&&e<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);const r=n[0];n.forEach((s,a)=>{for(let o=0;o<t;o++)U(o===e||s[o]===r[o],()=>`Error in concat${t}D: Shape of tensors[${a}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function _u(n,e){const t=n[0].slice();for(let r=1;r<n.length;r++)t[e]+=n[r][e];return t}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zl;(function(n){n[n.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",n[n.VALUE_ROWIDS=1]="VALUE_ROWIDS",n[n.ROW_LENGTHS=2]="ROW_LENGTHS",n[n.ROW_SPLITS=3]="ROW_SPLITS",n[n.ROW_LIMITS=4]="ROW_LIMITS",n[n.ROW_STARTS=5]="ROW_STARTS"})(zl||(zl={}));function t3(n,e,t){let r=new Array;if(t==null&&e==null)return r;if(e==null)for(;r.length<n+t.length;)r.push(-1);else r=e.slice();if(t==null)return r;if(n+t.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${n+t.length}, but shape.rank = ${r.length}`);for(let s=1;s<t.length;++s){const a=t[s],o=r[r.length-t.length+s],u=r[o];if(a>=0)if(u>=0){if(u!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+n}] = ${a} but shape[${s+n}] = ${u}`)}else r[o]=a}return r}function n3(n){const e={FIRST_DIM_SIZE:zl.FIRST_DIM_SIZE,VALUE_ROWIDS:zl.VALUE_ROWIDS,ROW_LENGTHS:zl.ROW_LENGTHS,ROW_SPLITS:zl.ROW_SPLITS,ROW_LIMITS:zl.ROW_LIMITS,ROW_STARTS:zl.ROW_STARTS},t=[];for(const r of n)if(r in e)t.push(e[r]);else break;return t}function r3(n){return n.length===0?0:n[0]===zl.FIRST_DIM_SIZE?n.length-1:n.length}function s3(n,e){if(n==null||e==null)return;const t=n.length,r=e.length;if(t>=r)throw new Error(`defaultValue.shape=${n} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(t,r-1);++s){const a=n[s],o=e[s+1];if(a>=0&&o>=0&&a!==1&&a!==o)throw new Error(`defaultValue.shape=${n}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-n.length}] = ${a} but ragged tensor input.flatValues.shape[${s-n.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _2=30;function eT(n){return n<=_2?n:K1(n,Math.floor(Math.sqrt(n)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2(n,e,t){const r=t*(typeof n=="number"?n:n[0]),s=e*(typeof n=="number"?n:n[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xx(n,e,t,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(n[0]/t),s=s.concat(n.slice(1));else{s=s.concat(n[0]);const a=e.length;for(let o=0;o<a;++o)s=s.concat([n[o+1]/e[o],e[o]]);s=s.concat(n.slice(a+1))}return s}function Yx(n,e,t=!0){const r=[];if(t){r.push(e);for(let s=e+1;s<n;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],a=[];for(let o=1;o<n;++o)o>=e*2+1||o%2===1?a.push(o):s.push(o);r.push(...s),r.push(0),r.push(...a)}return r}function Qx(n,e,t,r=!0){const s=[];r?s.push(n[0]/t):s.push(n[0]*t);for(let a=1;a<n.length;++a)a<=e.length?r?s.push(e[a-1]*n[a]):s.push(n[a]/e[a-1]):s.push(n[a]);return s}function O2(n,e){const t=[0];for(let r=0;r<e;++r)t.push(n[r][0]);return t}function F2(n,e,t){const r=n.slice(0,1);for(let s=0;s<t;++s)r.push(n[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tT=1.7580993408473768,nT=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2=.3275911,M2=.254829592,z2=-.284496736,P2=1.421413741,B2=-1.453152027,V2=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uc(n,e){if(n.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${n.length}, imag: ${e.length}.`);const t=new Float32Array(n.length*2);for(let r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function a3(n){const e=new Float32Array(n.length/2),t=new Float32Array(n.length/2);for(let r=0;r<n.length;r+=2)e[r/2]=n[r],t[r/2]=n[r+1];return{real:e,imag:t}}function i3(n){const e=Math.ceil(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<n.length;s+=4)t[Math.floor(s/4)]=n[s],r[Math.floor(s/4)]=n[s+1];return{real:t,imag:r}}function o3(n){const e=Math.floor(n.length/4),t=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<n.length;s+=4)t[Math.floor(s/4)]=n[s],r[Math.floor(s/4)]=n[s+1];return{real:t,imag:r}}function U2(n,e){const t=n[e*2],r=n[e*2+1];return{real:t,imag:r}}function l3(n,e,t,r){n[r*2]=e,n[r*2+1]=t}function u3(n,e){const t=new Float32Array(n/2),r=new Float32Array(n/2);for(let s=0;s<Math.ceil(n/2);s++){const a=(e?2:-2)*Math.PI*(s/n);t[s]=Math.cos(a),r[s]=Math.sin(a)}return{real:t,imag:r}}function c3(n,e,t){const r=(t?2:-2)*Math.PI*(n/e),s=Math.cos(r),a=Math.sin(r);return{real:s,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W2="->",F9=/->/g,f3=",",d3="...";function H2(n,e){n=n.replace(/\s/g,"");const t=(n.length-n.replace(F9,"").length)/W2.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${W2}").`);const[r,s]=n.split(W2);U(r.indexOf(d3)===-1,()=>`The ellipsis notation ("${d3}") is not supported yet.`);const a=r.split(f3),o=a.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const u=[];for(let y=0;y<s.length;++y){const x=s[y];if(!a.some(S=>S.indexOf(x)!==-1))throw new Error(`Output subscripts contain the label ${x} not present in the input subscripts.`);u.indexOf(x)===-1&&u.push(x)}for(let y=0;y<r.length;++y){const x=r[y];u.indexOf(x)===-1&&x!==f3&&u.push(x)}const c=new Array(a.length);for(let y=0;y<o;++y){if(new Set(a[y].split("")).size!==a[y].length)throw new Error(`Found duplicate axes in input component ${a[y]}. Support for duplicate axes in input is not implemented yet.`);c[y]=[];for(let x=0;x<a[y].length;++x)c[y].push(u.indexOf(a[y][x]))}const d=u.length,m=s.length,g=[];for(let y=m;y<d;++y)g.push(y);return{allDims:u,summedDims:g,idDims:c}}function j2(n,e){let t=new Array(n);t.fill(-1);for(let s=0;s<e.length;++s)t[e[s]]=s;const r=[];for(let s=0;s<n;++s)t[s]===-1&&r.push(s);return t=t.filter(s=>s!==-1),{permutationIndices:t,expandDims:r}}function G2(n,e,t){const r=new Array(n);for(let s=0;s<t.length;++s){const a=t[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=a[o]:U(r[e[s][o]]===a[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(a)}, but got dimension ${a[o]}`)}}function q2(n,e){const t=n,r=[];let s=0;n.length===0&&t.push(-1),s=n.length+1;for(let o=0;o<s;++o)r.push([]);const a=[];for(let o=0;o<t.length;++o){const u=t[o],c=L9(e,u);for(const d of c)a.indexOf(d)===-1&&(r[o].push(d),a.push(d))}return{path:t,steps:r}}function K2(n){return n.every((e,t)=>e===t)}function L9(n,e){const t=[];for(let r=0;r<n.length;++r)(n[r].length===0||n[r].indexOf(e)!==-1||e===-1)&&t.push(r);return t}function X2(n,e,t=0){let r=[];if(typeof e=="number")U(n.shape[t]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(n.shape[t]/e);else{const s=e.reduce((o,u)=>(u===-1&&(o+=1),o),0);U(s<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const o=e.reduce((u,c)=>c>0?u+c:u);e[a]=n.shape[t]-o}U(n.shape[t]===e.reduce((o,u)=>o+u),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3(n){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${n}`}function p3(n,e){return`indices(${n}, 0) is invalid: ${e} < 0`}function m3(n,e,t){return`indices(${n}, 0) is invalid: ${e} >= ${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3(n,e){return`only one output dimension may be -1, not both ${n} and ${e}`}function y3(n,e){return`size ${n} must be non-negative, not ${e}`}function v3(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function b3(n,e){const t=Re(n),r=Re(e);return`Input to reshape is a SparseTensor with ${t}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${n} outputShape= ${e}`}function x3(n,e){const t=Re(n),r=Re(e);return`Input to reshape is a tensor with ${t} dense values, but the requested shape has ${r}. inputShape=${n} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y2(){return"segment ids must be >= 0"}function w3(){return"segment ids are not increasing"}function S3(n,e){return`Segment id ${n} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function C3(n,e,t){return`Bad: indices[${n}] == ${e} out of range [0, ${t})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3(n,e){let t=!1,r;for(n<=_2?(r=n,t=!0):r=K1(n,Math.floor(Math.sqrt(n)));!t;)r>e||r===n?t=!0:r=K1(n,r+1);return r}function k3(n,e,t){const r=[],s=n.length;for(let a=0;a<s;a++)a!==e?r.push(n[a]):r.push(t);return r}function Q2(n,e,t,r){const s=e.shape.length,a=n.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(t<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${t}).`);for(let g=0;g<r;++g)if(n.shape[g]!==e.shape[g])throw new Error(`x.shape[${g}]: ${n.shape[g]} should be equal to indices.shape[${g}]: ${e.shape[g]}.`);const o=n.shape[t],u=[];let c=1,d=1,m=1;for(let g=0;g<r;++g)u.push(n.shape[g]),c*=n.shape[g];for(let g=r;g<t;g++)u.push(n.shape[g]),d*=n.shape[g];for(let g=r;g<s;g++)u.push(e.shape[g]);for(let g=t+1;g<a;g++)u.push(n.shape[g]),m*=n.shape[g];return{batchSize:c,sliceSize:m,outerSize:d,dimSize:o,outputShape:u}}const M9=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:Q2,computeOutShape:k3,segOpComputeOptimalWindowSize:T3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wc(n){try{return n.map(e=>Dc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function E3(n){return n.map(e=>ku(e))}const N3=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:M2,ERF_A2:z2,ERF_A3:P2,ERF_A4:B2,ERF_A5:V2,ERF_P:L2,PARALLELIZE_THRESHOLD:_2,get RowPartitionType(){return zl},SELU_SCALE:nT,SELU_SCALEALPHA:tT,applyActivation:jC,assertAndGetBroadcastShape:cn,assertAxesAreInnerMostDims:ua,assertParamsConsistent:D2,assignToTypedArray:l3,axesAreInnerMostDims:EI,calculateShapes:sd,checkEinsumDimSizes:G2,checkPadOnDimRoundingMode:Wa,combineLocations:RM,combineRaggedTensorToTensorShapes:t3,complexWithEvenIndex:i3,complexWithOddIndex:o3,computeConv2DInfo:zs,computeConv3DInfo:Xf,computeDefaultPad:oI,computeDilation2DInfo:$x,computeOptimalWindowSize:eT,computeOutAndReduceShapes:Bs,computeOutShape:_u,computePool2DInfo:Go,computePool3DInfo:Fc,convertConv2DDataFormat:Lc,decodeEinsumEquation:H2,eitherStridesOrDilationsAreOne:la,expandShapeToKeepDim:ts,exponent:c3,exponents:u3,fromStringArrayToUint8:E3,fromUint8ToStringArray:Wc,getAxesPermutation:Ur,getBroadcastDims:Mh,getComplexWithIndex:U2,getEinsumComputePath:q2,getEinsumPermutation:j2,getFusedBiasGradient:HC,getFusedDyActivation:WC,getImageCenter:A2,getInnerMostAxes:ns,getPermuted:Yx,getRaggedRank:r3,getReductionAxes:ys,getReshaped:Xx,getReshapedPermuted:Qx,getRowPartitionTypesHelper:n3,getSliceBeginCoords:O2,getSliceSize:F2,getSparseFillEmptyRowsIndicesDenseShapeMismatch:h3,getSparseFillEmptyRowsNegativeIndexErrorMessage:p3,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:m3,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:v3,getSparseReshapeInputOutputMismatchErrorMessage:x3,getSparseReshapeInputOutputMultipleErrorMessage:b3,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:g3,getSparseReshapeNegativeOutputDimErrorMessage:y3,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:C3,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Y2,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:w3,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:S3,getUndoAxesPermutation:Zf,isIdentityPermutation:K2,log:P6,mergeRealAndImagArrays:Uc,prepareAndValidate:ZC,prepareSplitSize:X2,segment_util:M9,shouldFuse:GC,slice_util:Zz,splitRealAndImagArrays:a3,stridesOrDilationsArePositive:Oh,tupleValuesAreOne:Yf,upcastType:pi,validateDefaultValueShape:s3,validateInput:zC,validateUpdateShape:t2,warn:go},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z9=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:qC,nonMaxSuppressionV4Impl:KC,nonMaxSuppressionV5Impl:XC,whereImpl:VC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */t9();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $3={kernelName:db,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(n,Wh(nt(t,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P9={kernelName:Am,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=hr(nt(t,"float32")),s=Vs(bt(Ft(1),r));return Sr(It(n,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B9={kernelName:Om,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Vs(bt(hr(nt(t,"float32")),1));return It(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V9={kernelName:Ch,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=cn(t.shape,r.shape);return{a:()=>{let u=n;const c=ys(t.shape,s);return c.length>0&&(u=Ct(u,c)),oe(u,t.shape)},b:()=>{let u=n;const c=ys(r.shape,s);return c.length>0&&(u=Ct(u,c)),oe(u,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U9={kernelName:hb,saveAllInputs:!0,gradFunc:(n,e)=>{const t={};return e.forEach((r,s)=>{t[s]=()=>n.clone()}),t}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W9={kernelName:pb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>_n(t)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H9={kernelName:mb,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>_n(t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j9={kernelName:Fm,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,Vs(bt(Ft(1),hr(nt(t,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G9={kernelName:Lm,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Vs(Be(Ft(1),hr(nt(t,"float32"))));return It(n,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q9={kernelName:Pm,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=cn(t.shape,r.shape);return{a:()=>{const u=Be(hr(t),hr(r));let c=ae(n,It(r,u));const d=ys(t.shape,s);return d.length>0&&(c=Ct(c,d)),oe(c,t.shape)},b:()=>{const u=Be(hr(t),hr(r));let c=Sr(ae(n,It(t,u)));const d=ys(r.shape,s);return d.length>0&&(c=Ct(c,d)),oe(c,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K9={kernelName:Mm,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,Be(hr(nt(t,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X9={kernelName:zm,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,bt(Ft(1),hr(nt(t,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y9(n,e,t,r,s,a){const o=H(n,"dy","avgPool3dGrad"),u=H(e,"input","avgPool3dGrad");let c=o,d=u,m=!1;u.rank===4&&(m=!0,c=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=oe(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),U(c.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),U(d.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),Wa("avgPool3dGrad",s,a);const g={dy:c,input:d},y={filterSize:t,strides:r,pad:s,dimRoundingMode:a},x=Q.runKernel(J1,g,y);return m?oe(x,[x.shape[1],x.shape[2],x.shape[3],x.shape[4]]):x}const Q9=J({avgPool3dGrad_:Y9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z9={kernelName:yb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:s,strides:a,pad:o,dimRoundingMode:u}=t;return{x:()=>Q9(n,r,s,a,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(n,e,t,r,s){const a=H(n,"dy","avgPoolGrad"),o=H(e,"input","avgPoolGrad");U(o.rank===a.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${a.rank})`);let u=o,c=a,d=!1;o.rank===3&&(d=!0,u=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),U(c.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${c.rank}.`),U(u.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${u.rank}.`);const m={dy:c,input:u},g={filterSize:t,strides:r,pad:s},y=Q.runKernel(Z1,m,g);return d?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const eQ=J({avgPoolGrad_:J9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tQ={kernelName:gb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{filterSize:s,strides:a,pad:o}=t;return{x:()=>eQ(n,r,s,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nQ={kernelName:vb,inputsToSave:["a","b"],gradFunc:(n,e,t)=>{const[r,s]=e,{transposeA:a,transposeB:o}=t;return!a&&!o?{a:()=>Sn(n,s,!1,!0),b:()=>Sn(r,n,!0,!1)}:!a&&o?{a:()=>Sn(n,s,!1,!1),b:()=>Sn(n,r,!0,!1)}:a&&!o?{a:()=>Sn(s,n,!1,!0),b:()=>Sn(r,n,!1,!1)}:{a:()=>Sn(s,n,!0,!0),b:()=>Sn(n,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rQ={kernelName:bb,gradFunc:(n,e,t)=>{const{blockShape:r,crops:s}=t;return{x:()=>Ux(n,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQ={kernelName:RL,gradFunc:(n,e,t)=>{const r=t,s=r.inputShape,a=r.shape,o=Array.from(a);for(let c=s.length-1;c>=0;c--)if(s[c]===a[c])o[c]=1;else if(s[c]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${a}].`);const u=[];for(let c=0;c<o.length;c++)o[c]>1&&u.push(c);return{x:()=>Ct(n,u,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aQ={kernelName:Bm,gradFunc:n=>({x:()=>n.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iQ={kernelName:Vm,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oQ={kernelName:Um,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{clipValueMin:s,clipValueMax:a}=t;return{x:()=>Ps(qo(zc(r,s),Jf(r,a)),n,_n(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lQ={kernelName:wb,inputsToSave:["x"],gradFunc:$3.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uQ={kernelName:Sb,saveAllInputs:!0,gradFunc:(n,e,t)=>{const r=e.map(c=>c.shape),{axis:s}=t,a=wn(s,e[0].shape)[0],o=r.map(c=>c[a]);return bi(n,o,a).map(c=>()=>c)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cQ={kernelName:Cb,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,{dilations:a,strides:o,pad:u,dataFormat:c}=t;return U(Yf(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>bI(r.shape,n,s,o,u,c),filter:()=>l2(r,n,s.shape,o,u,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fQ={kernelName:Tb,inputsToSave:["dy","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,{strides:a,pad:o,dataFormat:u,dimRoundingMode:c}=t;return{dy:()=>Mc(n,s,a,o,u,1,c),filter:()=>l2(n,r,s.shape,a,o,u,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dQ(n,e,t,r,s){let a=n;n.rank===4&&(a=oe(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]));let o=e;o.rank===4&&(o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),U(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),U(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),U(t.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),U(a.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${t[3]}.`),U(o.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${t[4]}).`);const u={x:a,dy:o},c={strides:r,pad:s,filterShape:t};return Q.runKernel(sS,u,c)}const hQ=J({conv3DBackpropFilter_:dQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pQ={kernelName:kb,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:s,pad:a}=t;U(Yf(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,u]=e;return{x:()=>NM(o.shape,n,u,s,a),filter:()=>hQ(o,n,u.shape,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mQ={kernelName:Wm,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(Sr(AC(nt(t,"float32"))),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gQ={kernelName:Hm,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(OC(nt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yQ={kernelName:Eb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s,exclusive:a,reverse:o}=t;return{x:()=>{const u=Ur([s],r.rank);let c=vC(n,s,a,!o);return u!=null&&(c=Rn(c,u)),c}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vQ={kernelName:Nb,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const{dilations:r,strides:s,pad:a,dimRoundingMode:o}=t,u=r??[1,1];U(Yf(u),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${u}'`);const[c,d]=e;return U(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${c.rank}.`),U(d.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${d.rank}.`),U(c.shape[3]===d.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${c.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),U(la(s,u),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${u}'.`),Wa("depthwiseConv2d",a,o),{x:()=>vz(c.shape,n,d,s,a,u,o),filter:()=>yz(c,n,d.shape,s,a,u,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bQ={kernelName:$b,inputsToSave:["x","filter"],gradFunc:(n,e,t)=>{const[r,s]=e,a={x:r,filter:s,dy:n},o={x:r,filter:s,dy:n};return{x:()=>Q.runKernel(hS,a,t),filter:()=>Q.runKernel(pS,o,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xQ={kernelName:Gm,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e,r={dy:n,y:t};return{x:()=>Q.runKernel(yS,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wQ={kernelName:qm,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=ae(yi(Sr(hr(t))),2/Math.sqrt(Math.PI));return{x:()=>ae(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQ={kernelName:Km,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(n,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CQ={kernelName:Rb,inputsToSave:["input"],gradFunc:(n,e)=>{const[t]=e;return{input:()=>oe(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TQ={kernelName:Xm,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(n,yi(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kQ={kernelName:Ym,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EQ={kernelName:Qm,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=cn(t.shape,r.shape);return{a:()=>{const u=It(n,nt(r,"float32")),c=ys(t.shape,s);return c.length>0?oe(Ct(u,c),t.shape):u},b:()=>{let u=ae(n,nt(t,"float32"));const c=ys(r.shape,s);c.length>0&&(u=oe(Ct(u,c),r.shape));const d=hr(r);return Sr(It(u,nt(d,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NQ={kernelName:Db,inputsToSave:["x","mean","variance","scale"],gradFunc:(n,e,t)=>{const{varianceEpsilon:r}=t,[s,a,o,u]=e,c=u??Ft(1),d=ys(a.shape,s.shape),m=[];if(a.rank===1){for(let D=0;D<s.shape.length-1;++D)m.push(s.shape[D]);m.push(1)}const g=bt(s,a),y=ae(n,c),x=RC(Be(o,Ft(r))),S=ae(ae(ae(x,x),x),Ft(-.5));return{x:()=>a.rank===1?oe(ae(ae(n,vo(oe(x,[1,1,1,a.shape[0]]),m)),c),s.shape):oe(ae(ae(n,x),c),s.shape),mean:()=>{let D=ae(ae(x,Ft(-1)),y);return a.rank===1&&(D=Ct(D,d)),oe(D,a.shape)},variance:()=>{let D=ae(ae(S,g),y);return a.rank===1&&(D=Ct(D,d)),oe(D,a.shape)},scale:()=>{const D=ae(g,x);let L=ae(n,D);return a.rank===1&&(L=Ct(L,d)),oe(L,a.shape)},offset:()=>{let D=n;return a.rank===1&&(D=Ct(D,d)),oe(D,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Q={kernelName:_b,inputsToSave:["x","indices"],gradFunc:(n,e,t)=>{const[r,s]=e,{axis:a,batchDims:o}=t,u=wn(a,r.shape)[0],c=(d,m,g)=>()=>{const y=d.shape,x=m.size,S=y.slice(0,u),k=S.length,C=y.slice(a,y.length).slice(1),N=C.length,$=I3(0,k),A=I3(k+1,k+1+N),D=R3([S,[x],C]),L=oe(g,D),P=oe(m,[x]),W=R3([[k],$,A]),B=Rn(L,W);let G=BC(B,P,d.shape[u]);const X=Zf(W);return G=Rn(G,X),G};if(o===1){const d=r.shape[0],m=r.split(d,0);return{x:()=>ja(m.map((x,S)=>c(x,s.slice(S,1),n.slice(S,1))())).reshape(r.shape),indices:()=>s}}else return{x:c(r,s,n),indices:()=>s}}};function I3(n,e){const t=[];for(let r=n;r<e;++r)t.push(r);return t}function R3(n){const e=[];for(let t=0;t<n.length;++t)for(let r=0;r<n[t].length;++r)e.push(n[t][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IQ={kernelName:Zm,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>_n(t),b:()=>_n(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RQ={kernelName:Jm,gradFunc:n=>({x:()=>nt(n,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DQ={kernelName:eg,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Q={kernelName:tg,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AQ={kernelName:ng,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OQ={kernelName:Ob,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{alpha:s}=t,a=Ha(r,0);return{x:()=>Ps(a,n,ae(n,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FQ={kernelName:sg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,Be(t,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LQ={kernelName:rg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,nt(t,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MQ={kernelName:DL,inputsToSave:[],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t;return{logits:()=>{const o=yi(r);return bt(n,ae(Ct(n,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zQ(n,e,t,r=5,s=1,a=1,o=.5){const u={x:n,y:e,dy:t},c={depthRadius:r,bias:s,alpha:a,beta:o};return Q.runKernel(kS,u,c)}const PQ=J({localResponseNormalizationBackprop_:zQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BQ={kernelName:Bb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{depthRadius:a,bias:o,alpha:u,beta:c}=t;return{x:()=>PQ(r,s,n,a,o,u,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3(n,e,t,r){return e.rank<t.rank&&(e=oe(e,ts(e.shape,r))),n.rank<t.rank&&(n=oe(n,ts(n.shape,r))),{x:()=>ae(n,nt(Ui(t,e),n.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _3={kernelName:Vb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{reductionIndices:s}=r,a=e[0],o=e[1],u=wn(s,a.shape),c=D3(n,o,a,u);return{x:()=>c.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VQ={kernelName:ag,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>ae(n,nt(zc(t,r),"float32")),b:()=>ae(n,nt(Wg(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UQ(n,e,t,r,s,a,o){const u=H(n,"dy","maxPool3dGrad"),c=H(e,"input","maxPool3dGrad"),d=H(t,"output","maxPool3dGrad");let m=u,g=c,y=d,x=!1;c.rank===4&&(x=!0,m=oe(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),g=oe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]]),y=oe(d,[1,d.shape[0],d.shape[1],d.shape[2],d.shape[3]])),U(m.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${m.rank}.`),U(g.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${g.rank}.`),U(y.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${y.rank}.`),Wa("maxPool3dGrad",a,o);const S={dy:m,input:g,output:y},k={filterSize:r,strides:s,pad:a,dimRoundingMode:o},C=Q.runKernel(NS,S,k);return x?oe(C,[C.shape[1],C.shape[2],C.shape[3],C.shape[4]]):C}const WQ=J({maxPool3dGrad_:UQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HQ={kernelName:Wb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{filterSize:a,strides:o,pad:u,dimRoundingMode:c}=t;return{x:()=>WQ(n,r,s,a,o,u,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQ(n,e,t,r,s,a,o){const u=H(n,"dy","maxPoolGrad"),c=H(e,"input","maxPoolGrad"),d=H(t,"output","maxPoolGrad");U(c.rank===u.rank,()=>`Rank of input (${c.rank}) does not match rank of dy (${u.rank})`),U(u.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),U(c.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${c.rank}.`),Wa("maxPoolGrad",a,o);const m={dy:u,input:c,output:d},g={filterSize:r,strides:s,pad:a,dimRoundingMode:o};return Q.runKernel(ES,m,g)}const GQ=J({maxPoolGrad_:jQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qQ={kernelName:Ub,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r,s]=e,{filterSize:a,strides:o,pad:u}=t;return{x:()=>GQ(n,r,s,a,o,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KQ={kernelName:Hb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t,a=wn(s,r.shape),u=Bs(r.shape,a)[1],c=Re(u);return{x:()=>{const m=r.shape.slice();a.forEach(x=>{m[x]=1});const g=oe(n,m);return It(ae(g,vi(r.shape,"float32")),c)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XQ={kernelName:jb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(n,e,t)=>{const r=t,{axis:s}=r,[a,o]=e,u=wn(s,a.shape),c=D3(n,o,a,u);return{x:()=>c.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQ={kernelName:ig,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e;return{a:()=>ae(n,nt(Jf(t,r),"float32")),b:()=>ae(n,nt(Ha(t,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QQ={kernelName:Gb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:s}=t,a=s.map(o=>o[0]);return{x:()=>Dn(n,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZQ={kernelName:og,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=cn(t.shape,r.shape);return{a:()=>{const u=ys(t.shape,s);return u.length>0?oe(Ct(n,u),t.shape):n},b:()=>{const u=ae(n,Sr(Vg(It(t,r)))),c=ys(r.shape,s);return c.length>0?oe(Ct(u,c),r.shape):u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JQ={kernelName:lg,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=cn(t.shape,r.shape);return{a:()=>{const u=ae(n,nt(r,"float32")),c=ys(t.shape,s);return c.length>0?oe(Ct(u,c),t.shape):u},b:()=>{const u=ae(n,nt(t,"float32")),c=ys(r.shape,s);return c.length>0?oe(Ct(u,c),r.shape):u}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eZ={kernelName:qb,gradFunc:n=>({x:()=>Sr(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tZ={kernelName:Yb,inputsToSave:["indices"],gradFunc:(n,e)=>{const t=e[0];return{indices:()=>vs(t.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nZ={kernelName:Xb,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rZ={kernelName:Qb,saveAllInputs:!0,gradFunc:(n,e,t)=>{const{axis:r}=t;return xo(n,r).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A3={kernelName:Zb,inputsToSave:["x"],gradFunc:(n,e,t)=>{const r=e[0],{paddings:s}=t,a=s.map(o=>o[0]);return{x:()=>Dn(n,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sZ={kernelName:ug,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(n,e)=>{const[t,r,s]=e,a=t,o=r,u=cn(a.shape,o.shape);return{a:()=>{const m=nt(o,"float32");let g=ae(n,ae(m,Iu(a,bt(m,Ft(1)))));const y=ys(a.shape,u);return y.length>0&&(g=Ct(g,y)),oe(g,a.shape)},b:()=>{const m=Ha(a,0),g=Ps(m,Wi(a),_n(a));let y=ae(n,ae(s,g));const x=ys(o.shape,u);return x.length>0&&(y=Ct(y,x)),oe(y,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aZ={kernelName:Jb,inputsToSave:["x","alpha"],gradFunc:(n,e)=>{const[t,r]=e,s=Ha(t,0);return{x:()=>Ps(s,n,ae(n,r)),alpha:()=>{let a=Ps(s,_n(n),ae(n,t));const o=ys(r.shape,n.shape);return o.length>0&&(a=Ct(a,o)),oe(a,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZ(n,e,t){const r=n.shape.slice();r[t]=1;const s=oe(e,r),a=Ox(n,t,!0,!1),o=Ox(n,t,!0,!0),u=ae(a,o);return ae(s,u)}function oZ(n,e,t){const r=n.shape.length,s=r-t.length,a=Ur(t,r);let o=n;a!=null&&(o=Rn(n,a));const u=o.shape.slice(),d=u.splice(r-t.length,t.length).reduce((y,x)=>y*x,1);u.push(d);const m=o.reshape(u);let g=iZ(m,e,s);if(g=g.reshape(o.shape),a!=null){const y=Zf(a);g=Rn(g,y)}return g}const lZ={kernelName:ex,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{axis:s}=t;let a=[];return s==null?a=r.shape.map((o,u)=>u):typeof s=="number"?a=[s]:a=s,{x:()=>oZ(r,n,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uZ={kernelName:jm,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=cn(t.shape,r.shape);return{a:()=>{const u=It(n,nt(r,"float32")),c=ys(t.shape,s);return c.length>0?oe(Ct(u,c),t.shape):u},b:()=>{let u=ae(n,nt(t,"float32"));const c=ys(r.shape,s);c.length>0&&(u=oe(Ct(u,c),r.shape));const d=hr(r);return Sr(It(u,nt(d,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cZ={kernelName:cg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,Sr(hr(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fZ={kernelName:dg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e,r=ae(Jf(t,6),Wh(t));return{x:()=>ae(n,nt(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dZ={kernelName:fg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(n,nt(Wh(t),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hZ={kernelName:tx,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>oe(n,t.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pZ={kernelName:rx,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,s={dy:n,images:r};return{images:()=>Q.runKernel(PS,s,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mZ={kernelName:nx,inputsToSave:["images"],gradFunc:(n,e,t)=>{const[r]=e,s={dy:n,images:r};return{images:()=>Q.runKernel(zS,s,t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gZ={kernelName:sx,gradFunc:(n,e,t)=>{const{dims:r}=t,s=wn(r,n.shape);return{x:()=>bo(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yZ={kernelName:hg,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vZ={kernelName:pg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>Sr(It(n,ae(Iu(t,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bZ={kernelName:ax,inputsToSave:["condition"],gradFunc:(n,e)=>{const[t]=e;return{condition:()=>nt(_n(t),"float32"),t:()=>ae(n,nt(t,n.dtype)),e:()=>ae(n,nt(Px(t),n.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xZ={kernelName:mg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>{const r=Ha(t,Ft(0)),s=Ft(tT),a=Ft(nT),o=ae(n,a),u=ae(ae(n,s),yi(nt(t,"float32")));return Ps(r,o,u)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wZ={kernelName:bg,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(n,ae(t,bt(Ft(1),t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SZ={kernelName:vg,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CZ={kernelName:gg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(Ax(nt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TZ={kernelName:yg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(yC(nt(t,"float32")),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kZ={kernelName:ix,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{begin:s,size:a}=t,o=r.shape,[u,c]=JC(r,s,a),d=[];for(let m=0;m<n.rank;m++)d.push([u[m],o[m]-u[m]-c[m]]);return{x:()=>Pc(n,d)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EZ={kernelName:cx,outputsToSave:[!0],gradFunc:(n,e,t)=>{const[r]=e,{dim:s}=t,a=!0,o=ae(n,r);return{logits:()=>bt(o,ae(Ct(o,[s],a),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NZ={kernelName:xg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(n,Ll(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3={kernelName:lx,gradFunc:(n,e,t)=>{const{blockShape:r,paddings:s}=t;return{x:()=>_x(n,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3={kernelName:ux,gradFunc:(n,e,t)=>{const{axis:r}=t;return{x:()=>es(n,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Z={kernelName:wg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,ae(Vs(nt(t,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IZ={kernelName:KS,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(n,ae(nt(t,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RZ={kernelName:Sg,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=Ft(2);return{a:()=>ae(n,ae(s,bt(t,r))),b:()=>ae(n,ae(s,bt(r,t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DZ={kernelName:Ng,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Z={kernelName:Cg,inputsToSave:["a","b"],gradFunc:(n,e)=>{const[t,r]=e,s=cn(t.shape,r.shape);return{a:()=>{let u=n;const c=ys(t.shape,s);return c.length>0&&(u=Ct(u,c)),oe(u,t.shape)},b:()=>{let u=n;const c=ys(r.shape,s);return c.length>0&&(u=Ct(u,c)),oe(Sr(u),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AZ={kernelName:ox,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,s=r.shape.slice(),{axis:a}=t;wn(a,r.shape).forEach(d=>{s[d]=1});const u=oe(n,s),c=ae(u,vi(r.shape,"float32"));return{x:()=>c}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OZ={kernelName:Tg,inputsToSave:["x"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>It(n,hr(Ax(t)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FZ={kernelName:kg,outputsToSave:[!0],gradFunc:(n,e)=>{const[t]=e;return{x:()=>ae(bt(Ft(1),hr(t)),n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LZ={kernelName:Eg,inputsToSave:["x"],gradFunc:(n,e,t)=>{const[r]=e,{reps:s}=t;return{x:()=>{let o=_n(r);if(r.rank===1)for(let u=0;u<s[0];++u)o=Be(o,Dn(n,[u*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let u=0;u<s[0];++u)for(let c=0;c<s[1];++c)o=Be(o,Dn(n,[u*r.shape[0],c*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let u=0;u<s[0];++u)for(let c=0;c<s[1];++c)for(let d=0;d<s[2];++d)o=Be(o,Dn(n,[u*r.shape[0],c*r.shape[1],d*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let u=0;u<s[0];++u)for(let c=0;c<s[1];++c)for(let d=0;d<s[2];++d)for(let m=0;m<s[3];++m)o=Be(o,Dn(n,[u*r.shape[0],c*r.shape[1],d*r.shape[2],m*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MZ={kernelName:Th,gradFunc:(n,e,t)=>{const r=t,{perm:s}=r,a=Zf(s);return{x:()=>Rn(n,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zZ={kernelName:dx,gradFunc:(n,e,t)=>{const r=t,{axis:s}=r;return{value:()=>ja(n,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PZ={kernelName:hx,inputsToSave:["segmentIds"],gradFunc:(n,e)=>{const[t]=e;return{x:()=>BZ(n,t)}}};function BZ(n,e){const t=Du(e,_n(e)),r=Ug(n,t);let s=zc(e,Ft(0,"int32"));const a=r.rank-s.rank;for(let u=0;u<a;++u)s=ca(s,u+1);s=qo(s,vi(r.shape,"bool"));const o=_n(r);return Ps(s,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VZ={kernelName:px,gradFunc:n=>({x:()=>_n(n)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UZ=[$3,P9,B9,V9,U9,W9,H9,j9,G9,q9,K9,X9,Z9,tQ,nQ,rQ,sQ,aQ,iQ,oQ,lQ,uQ,fQ,cQ,pQ,mQ,gQ,yQ,vQ,bQ,uZ,xQ,wQ,SQ,CQ,TQ,EQ,kQ,NQ,$Q,IQ,RQ,DQ,_Q,AQ,OQ,FQ,LQ,MQ,BQ,_3,_3,VQ,HQ,qQ,KQ,XQ,YQ,QQ,ZQ,JQ,eZ,tZ,nZ,rZ,A3,A3,sZ,aZ,lZ,cZ,fZ,dZ,hZ,pZ,mZ,gZ,yZ,vZ,bZ,xZ,wZ,SZ,CZ,TZ,kZ,EZ,NZ,O3,O3,F3,F3,$Z,RZ,IZ,DZ,_Z,AZ,OZ,FZ,LZ,MZ,zZ,PZ,VZ];for(const n of UZ)_L(n);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.abs=function(){return this.throwIfDisposed(),gs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.acos=function(){return this.throwIfDisposed(),J$(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.acosh=function(){return this.throwIfDisposed(),eI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.add=function(n){return this.throwIfDisposed(),Be(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.all=function(n,e){return this.throwIfDisposed(),pC(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.any=function(n,e){return this.throwIfDisposed(),Nx(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.argMax=function(n){return this.throwIfDisposed(),Ah(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.argMin=function(n){return this.throwIfDisposed(),tI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.asScalar=function(){return this.throwIfDisposed(),U(this.size===1,()=>"The array must have only 1 element."),oe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.asType=function(n){return this.throwIfDisposed(),nt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.as1D=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.as2D=function(n,e){return this.throwIfDisposed(),oe(this,[n,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.as3D=function(n,e,t){return this.throwIfDisposed(),oe(this,[n,e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.as4D=function(n,e,t,r){return this.throwIfDisposed(),oe(this,[n,e,t,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.as5D=function(n,e,t,r,s){return this.throwIfDisposed(),oe(this,[n,e,t,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.asin=function(){return this.throwIfDisposed(),nI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.asinh=function(){return this.throwIfDisposed(),rI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.atan=function(){return this.throwIfDisposed(),sI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.atan2=function(n){return this.throwIfDisposed(),aI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.atanh=function(){return this.throwIfDisposed(),iI(this)},_e().prototype.avgPool=function(n,e,t,r){return this.throwIfDisposed(),Dx(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.batchToSpaceND=function(n,e){return this.throwIfDisposed(),_x(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.batchNorm=function(n,e,t,r,s){return this.throwIfDisposed(),Lg(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.broadcastTo=function(n){return this.throwIfDisposed(),Fh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.cast=function(n){return this.throwIfDisposed(),nt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.ceil=function(){return this.throwIfDisposed(),pI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.clipByValue=function(n,e){return this.throwIfDisposed(),gi(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.concat=function(n,e){return this.throwIfDisposed(),n instanceof Pn&&(n=[n]),es([this,...n],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.conv1d=function(n,e,t,r,s,a){return this.throwIfDisposed(),mC(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.conv2dTranspose=function(n,e,t,r,s){return this.throwIfDisposed(),gC(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.conv2d=function(n,e,t,r,s,a){return this.throwIfDisposed(),Mc(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.cos=function(){return this.throwIfDisposed(),Ax(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.cosh=function(){return this.throwIfDisposed(),yC(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.cumprod=function(n,e,t){return this.throwIfDisposed(),Ox(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.cumsum=function(n,e,t){return this.throwIfDisposed(),vC(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.depthToSpace=function(n,e){return this.throwIfDisposed(),SI(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.depthwiseConv2d=function(n,e,t,r,s,a){return this.throwIfDisposed(),Mg(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.dilation2d=function(n,e,t,r,s){return this.throwIfDisposed(),CI(this,n,e,t,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.divNoNan=function(n){return this.throwIfDisposed(),TI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.div=function(n){return this.throwIfDisposed(),It(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.dot=function(n){return this.throwIfDisposed(),kI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.elu=function(){return this.throwIfDisposed(),zg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.equal=function(n){return this.throwIfDisposed(),Ui(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.erf=function(){return this.throwIfDisposed(),xC(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.euclideanNorm=function(n,e){return this.throwIfDisposed(),NI(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.exp=function(){return this.throwIfDisposed(),yi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.expandDims=function(n){return this.throwIfDisposed(),ca(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.expm1=function(){return this.throwIfDisposed(),$I(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.fft=function(){return this.throwIfDisposed(),qx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.flatten=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.floor=function(){return this.throwIfDisposed(),Vg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.floorDiv=function(n){return this.throwIfDisposed(),hC(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.gather=function(n,e,t){return this.throwIfDisposed(),Ug(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.greaterEqual=function(n){return this.throwIfDisposed(),zc(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.greater=function(n){return this.throwIfDisposed(),Ha(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.ifft=function(){return this.throwIfDisposed(),Kg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.irfft=function(){return this.throwIfDisposed(),LC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.isFinite=function(){return this.throwIfDisposed(),II(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.isInf=function(){return this.throwIfDisposed(),RI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.isNaN=function(){return this.throwIfDisposed(),DI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.leakyRelu=function(n){return this.throwIfDisposed(),Lx(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.lessEqual=function(n){return this.throwIfDisposed(),Jf(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.less=function(n){return this.throwIfDisposed(),Wg(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.localResponseNormalization=function(n,e,t,r){return this.throwIfDisposed(),_I(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.logSigmoid=function(){return this.throwIfDisposed(),AI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.logSoftmax=function(n){return this.throwIfDisposed(),CC(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.logSumExp=function(n,e){return this.throwIfDisposed(),zx(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.log=function(){return this.throwIfDisposed(),Wi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.log1p=function(){return this.throwIfDisposed(),Mx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.logicalAnd=function(n){return this.throwIfDisposed(),qo(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.logicalNot=function(){return this.throwIfDisposed(),Px(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.logicalOr=function(n){return this.throwIfDisposed(),TC(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.logicalXor=function(n){return this.throwIfDisposed(),OI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.matMul=function(n,e,t){return this.throwIfDisposed(),Sn(this,n,e,t)},_e().prototype.maxPool=function(n,e,t,r){return this.throwIfDisposed(),Bx(this,n,e,t,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.max=function(n,e){return this.throwIfDisposed(),yo(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.maximum=function(n){return this.throwIfDisposed(),Du(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.mean=function(n,e){return this.throwIfDisposed(),Wr(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.min=function(n,e){return this.throwIfDisposed(),Pg(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.minimum=function(n){return this.throwIfDisposed(),ed(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.mirrorPad=function(n,e){return this.throwIfDisposed(),LI(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.mod=function(n){return this.throwIfDisposed(),MI(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.mul=function(n){return this.throwIfDisposed(),ae(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.neg=function(){return this.throwIfDisposed(),Sr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.norm=function(n,e,t){return this.throwIfDisposed(),Bg(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.notEqual=function(n){return this.throwIfDisposed(),Bh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.oneHot=function(n,e=1,t=0){return this.throwIfDisposed(),Hg(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.onesLike=function(){return this.throwIfDisposed(),Hi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.pad=function(n,e){return this.throwIfDisposed(),Pc(this,n,e)},_e().prototype.pool=function(n,e,t,r,s,a){return this.throwIfDisposed(),zI(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.pow=function(n){return this.throwIfDisposed(),Iu(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.prelu=function(n){return this.throwIfDisposed(),Wx(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.prod=function(n,e){return this.throwIfDisposed(),PI(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.reciprocal=function(){return this.throwIfDisposed(),YI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.relu=function(){return this.throwIfDisposed(),Ml(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.relu6=function(){return this.throwIfDisposed(),$C(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.reshapeAs=function(n){return this.throwIfDisposed(),oe(this,n.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.reshape=function(n){return this.throwIfDisposed(),oe(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.resizeBilinear=function(n,e,t){return this.throwIfDisposed(),Cz(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.resizeNearestNeighbor=function(n,e,t){return this.throwIfDisposed(),Tz(this,n,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.reverse=function(n){return this.throwIfDisposed(),bo(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.rfft=function(){return this.throwIfDisposed(),Kx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.round=function(){return this.throwIfDisposed(),IC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.rsqrt=function(){return this.throwIfDisposed(),RC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.selu=function(){return this.throwIfDisposed(),DC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.separableConv2d=function(n,e,t,r,s,a){return this.throwIfDisposed(),_C(this,n,e,t,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.sigmoid=function(){return this.throwIfDisposed(),Ll(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.sign=function(){return this.throwIfDisposed(),QI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.sin=function(){return this.throwIfDisposed(),AC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.sinh=function(){return this.throwIfDisposed(),OC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.slice=function(n,e){return this.throwIfDisposed(),Dn(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.softmax=function(n){return this.throwIfDisposed(),Gx(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.softplus=function(){return this.throwIfDisposed(),Ph(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.spaceToBatchND=function(n,e){return this.throwIfDisposed(),Ux(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.split=function(n,e){return this.throwIfDisposed(),bi(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.sqrt=function(){return this.throwIfDisposed(),Vs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.square=function(){return this.throwIfDisposed(),hr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.squaredDifference=function(n){return this.throwIfDisposed(),MC(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.squeeze=function(n){return this.throwIfDisposed(),nd(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.stack=function(n,e){this.throwIfDisposed();const t=n instanceof Pn?[this,n]:[this,...n];return ja(t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.step=function(n){return this.throwIfDisposed(),Wh(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.stridedSlice=function(n,e,t,r,s,a,o,u){return this.throwIfDisposed(),ZI(this,n,e,t,r,s,a,o,u)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.sub=function(n){return this.throwIfDisposed(),bt(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.sum=function(n,e){return this.throwIfDisposed(),Ct(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.tan=function(){return this.throwIfDisposed(),JI(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.tanh=function(){return this.throwIfDisposed(),Qf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.tile=function(n){return this.throwIfDisposed(),vo(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.toBool=function(){return this.throwIfDisposed(),nt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.toFloat=function(){return this.throwIfDisposed(),nt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.toInt=function(){return this.throwIfDisposed(),nt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.topk=function(n,e){return this.throwIfDisposed(),n2(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.transpose=function(n){return this.throwIfDisposed(),Rn(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.unique=function(n){return this.throwIfDisposed(),r2(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.unsortedSegmentSum=function(n,e){return this.throwIfDisposed(),BC(this,n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.unstack=function(n){return this.throwIfDisposed(),xo(this,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.where=function(n,e){return this.throwIfDisposed(),Ps(n,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */_e().prototype.zerosLike=function(){return this.throwIfDisposed(),_n(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Au extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Au.prototype)}}class Xo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Xo.prototype)}}class le extends Error{constructor(e){super(e),Object.setPrototypeOf(this,le.prototype)}}class yn extends Error{constructor(e){super(e),Object.setPrototypeOf(this,yn.prototype)}}class Z2 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Z2.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class L3{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kh(n,e){if(Array.isArray(n)){let t=[];for(let r=0;r<e;r++)t=t.concat(n);return t}else{const t=new Array(e);return t.fill(n),t}}function Ou(n,e){if(!n)throw new Z2(e)}function M3(n,e){let t=0;for(const r of n)r===e&&t++;return t}function xi(n){return n.length===1?n[0]:n}function rr(n){return Array.isArray(n)?n:[n]}function Hc(n){const t=n.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return t[0]!=="_"?t:"private"+t}function Xh(n){return n.length<=1||n.indexOf("_")===-1?n:n.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let Yo={};function J2(n){if(n==null)return null;const e={};return e.className=n.getClassName(),e.config=n.getConfig(),e}function eR(n){if(!(n==null||typeof n!="object"))if(Array.isArray(n))n.forEach(e=>eR(e));else{const e=Object.keys(n);for(const t of e){const r=n[t];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?n[t]=r.value:eR(r))}}}function Zx(n,e={},t={},r="object",s=!1){if(typeof n=="string"){const a=n;let o;if(a in t)o=t[a];else if(a in Yo)o=Yo[a];else if(o=e[a],o==null)throw new le(`Unknown ${r}: ${n}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const a=n;if(a.className==null||a.config==null)throw new le(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const o=a.className;let u,c;if(o in t?[u,c]=t[o]:o in Yo?[u,c]=Yo.className:o in e&&([u,c]=e[o]),u==null)throw new le(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(c!=null){const d={};for(const x of Object.keys(Yo))d[x]=Yo[x];for(const x of Object.keys(t))d[x]=t[x];const m=a.config;m.customObjects=d;const g=Object.assign({},Yo);for(const x of Object.keys(t))Yo[x]=t[x];eR(a.config);const y=c(u,a.config,t,s);return Yo=Object.assign({},g),y}else{const d=Object.assign({},Yo);for(const g of Object.keys(t))Yo[g]=t[g];const m=new u(a.config);return Yo=Object.assign({},d),m}}}function WZ(n,e){return n<e?-1:n>e?1:0}function rT(n,e){return-1*WZ(n,e)}function ad(n){if(n==null)return n;const e=[];for(const t of n)e.indexOf(t)===-1&&e.push(t);return e}function HZ(n){if(n==null)throw new le(`Invalid value in obj: ${JSON.stringify(n)}`);for(const e in n)if(n.hasOwnProperty(e))return!1;return!0}function Yh(n,e,t){if(t!=null&&n.indexOf(t)<0)throw new le(`${t} is not a valid ${e}.  Valid values are ${n} or null/undefined.`)}function tR(n,e,t=0,r=1/0){return Ou(t>=0),Ou(r>=t),Array.isArray(n)&&n.length>=t&&n.length<=r&&n.every(s=>typeof s===e)}function Us(n,e){Array.isArray(n)?(U(n.length>0,()=>`${e} is unexpectedly an empty array.`),n.forEach((t,r)=>Us(t,`element ${r+1} of ${e}`))):U(Number.isInteger(n)&&n>0,()=>`Expected ${e} to be a positive integer, but got ${z3(n)}.`)}function z3(n){return n===null?"null":Array.isArray(n)?"["+n.map(e=>z3(e)).join(",")+"]":typeof n=="string"?`"${n}"`:`${n}`}function jZ(n,e,t){let r=t!=null?t():oa(),s;return(...o)=>{const u=t!=null?t():oa();return u-r<e||(r=u,s=n(...o)),s}}function P3(n){return n==="relu"?"relu":n==="linear"?"linear":n==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let GZ=0;function B3(){return GZ++}const sT={};function aT(n=""){return n in sT||(sT[n]=0),sT[n]+=1,n+sT[n].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const qZ=["channelsFirst","channelsLast"],KZ=["nearest","bilinear"],XZ=["valid","same","causal"],YZ=["max","avg"],QZ=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Yg=new Map;function rs(n){Yh(qZ,"DataFormat",n)}function ZZ(n){Yh(KZ,"InterpolationFormat",n)}function So(n){Yh(XZ,"PaddingMode",n)}function V3(n){Yh(YZ,"PoolMode",n)}const Jx=[],U3="/";function Qh(n,e){Jx.push(n);try{const t=e();return Jx.pop(),t}catch(t){throw Jx.pop(),t}}function JZ(){return Jx.length===0?"":Jx.join(U3)+U3}function W3(n){if(!j3(n))throw new Error("Not a valid tensor name: '"+n+"'");return JZ()+n}function H3(n){if(!j3(n))throw new Error("Not a valid tensor name: '"+n+"'");Yg.has(n)||Yg.set(n,0);const e=Yg.get(n);if(Yg.set(n,Yg.get(n)+1),e>0){const t=`${n}_${e}`;return Yg.set(t,1),t}else return n}const eJ=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function j3(n){return!!n.match(eJ)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tJ(n){return n===parseInt(n.toString(),10)}function id(n,e,t){e==null&&(e=0),t==null&&(t=n.length);let r=1;for(let s=e;s<t;++s)r*=n[s];return r}function Qg(n){if(n.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r<e&&(e=r)}return e}function od(n){if(n.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let t=0;t<n.length;t++){const r=n[t];r>e&&(e=r)}return e}function Pl(n,e){if(e<n)throw new le(`end (${e}) < begin (${n}) is forbidden.`);const t=[];for(let r=n;r<e;++r)t.push(r);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let nR;function Ns(){return nR==null&&(nR=U$().epsilon()),nR}function Bl(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fu(n,e){return nt(n,e)}function e0(n,e=-1){const t=n.shape.slice();return e<0&&(e=t.length+e+1),t.splice(e,0,1),oe(n,t)}function nJ(n,e){return ve(()=>{if(n.shape.length!==2)throw new le(`repeat() expects a rank-2 tensor, but received a rank-${n.shape.length} tensor.`);const t=e0(n,1);return aR(t,[1,e,1])})}function rJ(n){const e=[id(n.shape)];return oe(n,e)}function sJ(n){if(n.rank<=1)throw new le(`batchFlatten requires a minimum rank of 2. Got rank: ${n.rank}.`);const e=[n.shape[0],id(n.shape,1)];return oe(n,e)}function Zh(n,e,t){return ve(()=>{switch(n.rank){case 1:return Hx(n,e,t);case 2:return FC(n,[e,0],[t,n.shape[1]]);case 3:return jx(n,[e,0,0],[t,n.shape[1],n.shape[2]]);case 4:return qg(n,[e,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3]]);case 5:return Dn(n,[e,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4]]);case 6:return Dn(n,[e,0,0,0,0,0],[t,n.shape[1],n.shape[2],n.shape[3],n.shape[4],n.shape[5]]);default:throw new le(`sliceAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}})}function rR(n,e,t){return ve(()=>{switch(n.rank){case 1:return Hx(n,e,t);case 2:return FC(n,[0,e],[n.shape[0],t]);case 3:return jx(n,[0,0,e],[n.shape[0],n.shape[1],t]);case 4:return qg(n,[0,0,0,e],[n.shape[0],n.shape[1],n.shape[2],t]);default:throw new le(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function iT(n,e,t,r){return ve(()=>{switch(n.rank){case 1:return Hx(n,e,t);case 2:switch(r){case 1:return Zh(n,e,t);case 2:return rR(n,e,t);default:throw new le(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Zh(n,e,t);case 2:return jx(n,[0,e,0],[n.shape[0],t,n.shape[2]]);case 3:return rR(n,e,t);default:throw new le(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Zh(n,e,t);case 2:return qg(n,[0,e,0,0],[n.shape[0],t,n.shape[2],n.shape[3]]);case 3:return qg(n,[0,0,e,0],[n.shape[0],n.shape[1],t,n.shape[3]]);case 4:return rR(n,e,t);default:throw new le(`The axis is not within the rank of the tensor ${r}`)}default:throw new le(`sliceAlongLastAxis() received an unsupported tensor rank: ${n.rank}`)}})}function sR(n,e=-1){let t;return e<0&&(t=n[0].rank,t!==0?e=t:e=0),e===n[0].rank&&(e=-1),es(n,e)}function G3(n,e){switch(n.rank){case 1:return mI([n,e]);case 2:return gI([n,e],0);case 3:return yI([n,e],0);case 4:return vI([n,e],0);default:throw new le(`concatAlongFirstAxis() received an unsupported tensor rank: ${n.rank}`)}}function aR(n,e){if(Array.isArray(e)||(e=[e]),n.rank!==e.length)throw new le(`The length of input n (${e.length}) does not match the number of dimensions in input x (${n.rank})`);return vo(n,e)}function oT(n,e=0,t=1,r,s){return NC(n,e,t,r,s)}function Lu(n,e,t,r){if(n.rank<2||e.rank<2)throw new yn(`dot requires both inputs to be rank >= 2 but got x shape = ${n.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=n.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(s!==a)throw new yn(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${n.shape} and  y shape = ${e.shape}`)}if(n.rank===2&&e.rank===2)return u2({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?iR(n.rank,r,Bl()):null,activation:t});{const s=n.shape.slice(),a=s.pop();n=oe(n,[-1,a]);const o=e.shape.slice(),u=o.pop(),c=o.pop(),d=[...o,u],m=Array.from({length:e.rank},(S,k)=>k===0?e.rank-2:k<=e.rank-2?k-1:k);e=oe(Rn(e,m),[c,-1]);const g=[...s,...d];return oe(u2({a:n,b:e,transposeA:!1,transposeB:!1,bias:r?iR(n.rank,r,Bl()):null,activation:t}),g)}}function q3(n,e,t){return ve(()=>(Array.isArray(e)?e=fa(e,"int32"):e=nt(e,"int32"),Ug(n,e,t)))}function t0(n){return ae(n,n)}function iR(n,e,t){const r=e.shape;if(e.rank!==1&&e.rank!==n)throw new le(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${n}`);if(n===5){if(t==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1,1]):oe(e,[1,r[3],r[0],r[1],r[2]]);if(t==="channelsLast")return r.length===1?oe(e,[1,1,1,1,r[0]]):oe(e,[1].concat(r))}else if(n===4){if(t==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1]):oe(e,[1,r[2],r[0],r[1]]);if(t==="channelsLast")return r.length===1?oe(e,[1,1,1,r[0]]):oe(e,[1].concat(r))}else if(n===3){if(t==="channelsFirst")return r.length===1?oe(e,[1,r[0],1]):oe(e,[1,r[1],r[0]]);if(t==="channelsLast")return r.length===1?oe(e,[1,1,r[0]]):oe(e,[1].concat(r))}else if(n<3)return e;throw new le(`Unsupported input rank by biasAdd: ${e.rank}`)}function Vl(n,e,t){return ve(()=>(t==null&&(t=Bl()),rs(t),Be(n,iR(n.rank,e,t))))}function aJ(n,e=1){if(e!==1)throw new yn(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return zg(n)}function iJ(n){return ve(()=>It(n,Be(gs(n),1)))}function K3(n,e,t,r){return ve(()=>i2(n,e,t,r))}function oJ(n){return ve(()=>{const e=Be(.5,ae(.2,n));return gi(e,0,1)})}function n0(n,e,t=!1){return t?n():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lJ=["fanIn","fanOut","fanAvg"],uJ=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cJ(n){Yh(lJ,"FanMode",n)}function fJ(n){Yh(uJ,"Distribution",n)}class Qo extends Hh{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class oR extends Qo{apply(e,t){return vs(e,t)}}oR.className="Zeros",Ve(oR);class lT extends Qo{apply(e,t){return vi(e,t)}}lT.className="Ones",Ve(lT);class lR extends Qo{constructor(e){if(super(),typeof e!="object")throw new le(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new le(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return ve(()=>ae(Ft(this.value),vi(e,t)))}getConfig(){return{value:this.value}}}lR.className="Constant",Ve(lR);class uR extends Qo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return td(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}uR.className="RandomUniform",Ve(uR);class cR extends Qo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new yn(`randomNormal does not support dType ${t}.`);return oT(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}cR.className="RandomNormal",Ve(cR);class fR extends Qo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if(t=t||"float32",t!=="float32"&&t!=="int32")throw new yn(`truncatedNormal does not support dType ${t}.`);return PC(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}fR.className="TruncatedNormal",Ve(fR);class dR extends Qo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,t){return ve(()=>{if(e.length!==2||e[0]!==e[1])throw new le("Identity matrix initializer can only be used for 2D square matrices.");return ae(this.gain,wC(e[0]))})}getConfig(){return{gain:this.gain}}}dR.className="Identity",Ve(dR);function dJ(n,e="channelsLast"){let t,r;if(rs(e),n.length===2)t=n[0],r=n[1];else if([3,4,5].indexOf(n.length)!==-1){if(e==="channelsFirst"){const s=id(n,2);t=n[1]*s,r=n[0]*s}else if(e==="channelsLast"){const s=id(n,0,n.length-2);t=n[n.length-2]*s,r=n[n.length-1]*s}}else{const s=id(n);t=Math.sqrt(s),r=Math.sqrt(s)}return[t,r]}class wi extends Qo{constructor(e){if(super(),e.scale<0)throw new le(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,cJ(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,fJ(this.distribution),this.seed=e.seed}apply(e,t){const r=dJ(e),s=r[0],a=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,a):o/=Math.max(1,(s+a)/2),this.distribution==="normal"){const u=Math.sqrt(o);if(t=t||"float32",t!=="float32"&&t!=="int32")throw new yn(`${this.getClassName()} does not support dType ${t}.`);return PC(e,0,u,t,this.seed)}else{const u=Math.sqrt(3*o);return td(e,-u,u,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}wi.className="VarianceScaling",Ve(wi);class uT extends wi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return wi.className}}uT.className="GlorotUniform",Ve(uT);class cT extends wi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return wi.className}}cT.className="GlorotNormal",Ve(cT);class fT extends wi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return wi.className}}fT.className="HeNormal",Ve(fT);class dT extends wi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return wi.className}}dT.className="HeUniform",Ve(dT);class hT extends wi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return wi.className}}hT.className="LeCunNormal",Ve(hT);class pT extends wi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return wi.className}}pT.className="LeCunUniform",Ve(pT);class hR extends Qo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return ve(()=>{if(e.length<2)throw new yn("Shape must be at least 2D.");if(t!=="int32"&&t!=="float32"&&t!==void 0)throw new TypeError(`Unsupported data type ${t}.`);t=t;const r=Re(e.slice(0,-1)),s=e[e.length-1],a=r*s;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const o=[Math.max(s,r),Math.min(s,r)],u=oT(o,0,1,t,this.seed),c=f2.qr(u,!1);let d=c[0];const g=c[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return d=ae(d,g.sign()),r<s&&(d=d.transpose()),ae(Ft(this.gain),d.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}hR.className="Orthogonal",Ve(hR);const X3={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Y3(n,e={}){return Zx(n,wo.getMap().classNameMap,e,"initializer")}function Hr(n){return J2(n)}function Ar(n){if(typeof n=="string"){const e=n in X3?X3[n]:n;if(e==="GlorotNormal")return new cT;if(e==="GlorotUniform")return new uT;if(e==="HeNormal")return new fT;if(e==="HeUniform")return new dT;if(e==="LeCunNormal")return new hT;if(e==="LeCunUniform")return new pT;{const t={};return t.className=e,t.config={},Y3(t)}}else return n instanceof Qo?n:Y3(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pR(n){return Array.isArray(n)&&Array.isArray(n[0])}function mT(n){return n.length===0?[]:Array.isArray(n[0])?n:[n]}function en(n){let e;if(Array.isArray(n)){if(n.length!==1)throw new le(`Expected Tensor length to be 1; got ${n.length}`);e=n[0]}else e=n;return e}function Hn(n){if(Array.isArray(n)&&Array.isArray(n[0])){if(n.length===1)return n=n,n[0];throw new le(`Expected exactly 1 Shape; got ${n.length}`)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gT(n){let e=0;for(const t of n)t.shape.length===0?e+=1:e+=t.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Q3="Variable";class Z3{constructor(e,t="float32",r=Q3,s=!0,a=null){this.dtype=t??"float32",this.shape=e.shape,this.id=B3(),r=r??Q3,this.originalName=W3(r),this.name=H3(this.originalName),this.trainable_=s,this.constraint=a,this.val=s2(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),hJ(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function hJ(n,e){if(n.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(n.shape)+" vs. "+JSON.stringify(e.shape))}function mR(n){return n.map(e=>e.read())}function gR(n){n.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bs{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class Ul{constructor(e,t,r,s,a,o,u){this.dtype=e,this.shape=t,this.sourceLayer=r,this.inputs=s,this.callArgs=a,this.outputTensorIndex=u,this.id=B3(),o!=null&&(this.originalName=W3(o),this.name=H3(this.originalName)),this.rank=t.length}}let pJ=0;class yT{constructor(e,t){this.callArgs=t,this.id=pJ++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)t!=null?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let mJ=0;class Cn extends Hh{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=mJ++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const r=this.getClassName();t=Hc(r)+"_"+aT(r)}if(this.name=t,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),r=[a].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(this.inboundNodes.length===0)throw new Xo(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new le(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return xi(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return xi(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Au(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Au(`Layer ${this.name} is not connected, no input to return.`);return xi(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Au(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Au(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return xi(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const t=rr(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=rr(this.inputSpec);if(t.length!==r.length)throw new le(`Layer ${this.name} expects ${r.length} inputs, but it received ${t.length} input tensors. Input received: ${e}`);for(let s=0;s<t.length;s++){const a=t[s],o=r[s];if(o==null)continue;const u=a.rank;if(o.ndim!=null&&u!==o.ndim)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${u}`);if(o.maxNDim!=null&&u>o.maxNDim)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${u}`);if(o.minNDim!=null&&u<o.minNDim)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${u}.`);if(o.dtype!=null&&a.dtype!==o.dtype)throw new le(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${a.dtype}.`);if(o.axes){const c=a.shape;for(const d in o.axes){const m=Number(d),g=o.axes[d],y=m>=0?c[m]:c[c.length+m];if(g!=null&&[g,null].indexOf(y)===-1)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected axis ${m} of input shape to have value ${g} but got shape ${c}.`)}}if(o.shape!=null)for(let c=0;c<o.shape.length;++c){const d=o.shape[c],m=a.shape[c];if(d!=null&&m!=null&&d!==m)throw new le(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${a.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){this._callHook!=null&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const r=rr(e),s=vJ(e),a=bJ(e);if(s===a)throw new le("Arguments to apply() must be all SymbolicTensors or all Tensors");return Qh(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const u of rr(e))o.push(u.shape);this.build(xi(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let o=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,o);const u=rr(o),c=[];for(let d of u)r.indexOf(d)!==-1&&(d=d.clone()),c.push(d);if(o=xi(c),this.activityRegularizer!=null)throw new yn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=gJ(e),u=this.computeOutputShape(o);let c;const d=yJ(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),u!=null&&u.length>0&&Array.isArray(u[0])?c=u.map((m,g)=>new Ul(d,m,this,rr(e),t,this.name,g)):c=new Ul(d,u,this,rr(e),t,this.name),this.addInboundNode(e,c,null,null,o,u,t),this._refCount++,this.activityRegularizer!=null)throw new yn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Au(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const r=JSON.stringify(t.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&t.length===1?t[0]:t}else throw new Au(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Xo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return gT(this.weights)}build(e){this.built=!0}getWeights(e=!1){return mR(e?this.trainableWeights:this.weights)}setWeights(e){ve(()=>{const t=this.weights;if(t.length!==e.length)throw new le(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(t.length===0)return;const r=[],s=mR(t);for(let a=0;a<s.length;++a){const o=s[a],u=t[a],c=e[a];if(!Nn(o.shape,c.shape))throw new le(`Layer weight shape ${o.shape} not compatible with provided weight shape ${c.shape}`);r.push([u,c])}gR(r)})}addWeight(e,t,r,s,a,o,u,c){if(this._addedWeightNames.indexOf(e)!==-1)throw new le(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=c!=null?c():Ar("zeros"));const d=s.apply(t,r),m=new Z3(d,r,e,o,u);return d.dispose(),a!=null&&this.addLoss(()=>a.apply(m.read())),o==null&&(o=!0),o?this._trainableWeights.push(m):this._nonTrainableWeights.push(m),m}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=rr(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(t!=null)if(Array.isArray(t))t.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return t}setMaskMetadata(e,t,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),a=rr(t),o=rr(s);if(a.length!==o.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let u=0;u<a.length;u++)a[u].kerasMask=o[u]}addInboundNode(e,t,r,s,a,o,u=null){const c=rr(e);t=rr(t),r=rr(r),s=rr(s),a=mT(a),o=mT(o);const d=[],m=[],g=[];for(const y of c)d.push(y.sourceLayer),m.push(y.nodeIndex),g.push(y.tensorIndex);new yT({outboundLayer:this,inboundLayers:d,nodeIndices:m,tensorIndices:g,inputTensors:c,outputTensors:t,inputMasks:r,outputMasks:s,inputShapes:a,outputShapes:o},u);for(let y=0;y<t.length;y++)t[y].sourceLayer=this,t[y].nodeIndex=this.inboundNodes.length-1,t[y].tensorIndex=y}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function gJ(n){n=rr(n);const e=[];for(const t of n)e.push(t.shape);return xi(e)}function yJ(n){return"float32"}function J3(n,e,t){if((e==null||t!=null&&t>0)&&(e=n.sourceLayer,t=n.nodeIndex),e.inboundNodes.length===0)return[n];{const r=e.inboundNodes[t];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let a=0;a<r.inboundLayers.length;a++){const o=r.inputTensors[a],u=r.inboundLayers[a],c=r.nodeIndices[a],d=J3(o,u,c);for(const m of d)s.indexOf(m)===-1&&s.push(m)}return s}}}function vJ(n){let e=!0;for(const t of rr(n))if(!(t instanceof Ul)){e=!1;break}return e}function bJ(n){let e=!0;for(const t of rr(n))if(t instanceof Ul){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Zg extends Cn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:aT("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new le("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(t==null){if(e.inputShape==null)throw new le("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new le("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=t,this.dtype=r,this.inputSpec=[{shape:t}];const s=new Ul(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new yT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new le(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Zg.className="InputLayer",Ve(Zg);function eP(n){if(n.batchShape==null&&n.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(n.batchShape!=null&&n.shape!=null)throw new le("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=n.batchShape;n.shape!=null&&e==null&&(e=[null].concat(n.shape));let t=n.dtype;return t==null&&(t="float32"),new Zg({batchInputShape:e,name:n.name,dtype:t,sparse:n.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xJ(n,e){if(n.dtype==null||n.dtype===e.dtype)return e;try{return nt(e,n.dtype)}catch{throw new le(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${n.name}' (${n.dtype}).`)}}class ld{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof ld)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(e==null)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=xJ(e,t),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new le(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Ul){if(this.id2Value[e.id]==null)throw new le(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const t=this.name2Id[e];if(t==null)throw new le(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof Ul){if(this.id2Value[e.id]==null)throw new le(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const t=this.name2Id[e];if(t==null)throw new le(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){this.id2Mask!=null&&un(this.id2Mask)}}const vT=new L3,bT=new L3;function wJ(n){vT?.setMaxEntries(n),bT?.setMaxEntries(n)}function r0(n,e,t,r){const s=t==null?!1:t.training,a=Array.isArray(n),o=a?n:[n],u=o.map(S=>S.name),c=[],d=e.names();for(const S of u)d.indexOf(S)!==-1?c.push(e.getValue(S)):c.push(null);const m=u.join(",")+"|"+e.names().sort().join(",");let g=vT.get(m),y;if(g==null){const S=SJ(o,e);g=S.sorted,y=S.recipientCounts,vT.put(m,g),bT.put(m,y)}y={},s||Object.assign(y,bT.get(m));const x=new ld(e);for(let S=0;S<g.length;++S){const k=g[S],C=k.sourceLayer;if(C instanceof Zg)continue;const N=[],$=[],A=[];let D=!1;for(const G of k.inputs){const X=x.getValue(G),re=x.getMask(G);N.push(X),$.push(re),re!=null&&(D=!0),s||(y[G.name]--,y[G.name]===0&&!e.hasKey(G)&&u.indexOf(G.name)===-1&&!X.isDisposed&&G.sourceLayer.stateful!==!0&&A.push(X))}D&&(t=t||{},t.mask=$[0]);const L=rr(C.apply(N,t));let P=null;C.supportsMasking&&(P=C.computeMask(N,$));const W=TJ(k),B=Array.isArray(W)?W:[W];for(let G=0;G<B.length;++G){x.hasKey(B[G])||x.add(B[G],L[G],Array.isArray(P)?P[0]:P);const X=u.indexOf(B[G].name);X!==-1&&(c[X]=L[G])}s||un(A)}return x.disposeMasks(),a?c:c[0]}function SJ(n,e){U(n!=null&&n.length>0,()=>"Expected at least one fetch, got none");let t=[],r={};if(n.length===1){const s=tP(n[0],e);t=s.sorted,r=s.recipientMap}else{const s=new Set;for(const a of n){const{sorted:o,recipientMap:u}=tP(a,e);for(const c of o)s.has(c.name)||(t.push(c),s.add(c.name));for(const c in u)r[c]==null&&(r[c]=new Set),u[c].forEach(d=>r[c].add(d))}}return{sorted:t,recipientCounts:CJ(r)}}function CJ(n){const e={};for(const t in n)e[t]=n[t].size;return e}function tP(n,e){const t=new Set,r=[],s={};for(const u of e.names())t.add(u);const a=[],o=[];for(a.push(n);a.length>0;){const u=a[a.length-1];if(t.has(u.name)){a.pop();continue}const c=o[o.length-1]===a.length-1;if(u.inputs.length===0||c)a.pop(),r.push(u),t.add(u.name),c&&o.pop();else{o.push(a.length-1);for(const d of u.inputs)s[d.name]==null&&(s[d.name]=new Set),s[d.name].add(u.name),!t.has(d.name)&&a.push(d)}}return{sorted:r,recipientMap:s}}function TJ(n){let e;if(n.sourceLayer.inboundNodes.length===1)e=n.sourceLayer.output;else{let t=null;for(let r=0;r<n.sourceLayer.inboundNodes.length;++r)for(const s of n.sourceLayer.inboundNodes[r].outputTensors)if(s.id===n.id){t=r;break}e=n.sourceLayer.getOutputAt(t)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,wJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yR(n,e){return ve(()=>Vs(Ct(ae(n,n),e,!0)))}class s0 extends Hh{getConfig(){return{}}}class vR extends s0{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ve(()=>{const t=yR(e,this.axis),r=gi(t,0,this.maxValue);return ae(e,It(r,Be(Ns(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}vR.className="MaxNorm",Ve(vR);class bR extends s0{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ve(()=>It(e,Be(Ns(),yR(e,this.axis))))}getConfig(){return{axis:this.axis}}}bR.className="UnitNorm",Ve(bR);class xR extends s0{apply(e){return Ml(e)}}xR.className="NonNeg",Ve(xR);class wR extends s0{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ve(()=>{const t=yR(e,this.axis),r=Be(ae(this.rate,gi(t,this.minValue,this.maxValue)),ae(1-this.rate,t));return ae(e,It(r,Be(Ns(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}wR.className="MinMaxNorm",Ve(wR);const nP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function $s(n){return J2(n)}function rP(n,e={}){return Zx(n,wo.getMap().classNameMap,e,"constraint")}function Is(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in nP?nP[n]:n,config:{}};return rP(t)}else return n instanceof s0?n:rP(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function kJ(n){return new vR(n)}function EJ(n){return new bR(n)}function NJ(){return new xR}function $J(n){return new wR(n)}const IJ=Object.freeze(Object.defineProperty({__proto__:null,maxNorm:kJ,minMaxNorm:$J,nonNeg:NJ,unitNorm:EJ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RJ(){return new oR}function DJ(){return new lT}function _J(n){return new lR(n)}function AJ(n){return new uR(n)}function OJ(n){return new cR(n)}function FJ(n){return new fR(n)}function LJ(n){return new dR(n)}function MJ(n){return new wi(n)}function zJ(n){return new uT(n)}function PJ(n){return new cT(n)}function BJ(n){return new fT(n)}function VJ(n){return new dT(n)}function UJ(n){return new hT(n)}function WJ(n){return new pT(n)}function HJ(n){return new hR(n)}const jJ=Object.freeze(Object.defineProperty({__proto__:null,constant:_J,glorotNormal:PJ,glorotUniform:zJ,heNormal:BJ,heUniform:VJ,identity:LJ,leCunNormal:UJ,leCunUniform:WJ,ones:DJ,orthogonal:HJ,randomNormal:OJ,randomUniform:AJ,truncatedNormal:FJ,varianceScaling:MJ,zeros:RJ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function ud(n){if(n==null)return;const e=[],t=[],r=[];for(const s in n){const a=n[s];if(typeof a!="number"){const o=a;e.push(o.data()),t.push(s),r.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let a=0;a<s.length;++a)n[t[a]]=s[a][0];un(r)}}function sP(n){if(n!=null)for(const e in n){const t=n[e];typeof t!="number"&&t.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var aP;(function(n){n[n.SILENT=0]="SILENT",n[n.VERBOSE=1]="VERBOSE"})(aP||(aP={}));const GJ=125;class Jg{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class iP{constructor(e,t=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochBegin(e,t)}async onEpochEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onEpochEnd(e,t)}async onBatchBegin(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchBegin(e,t)}async onBatchEnd(e,t){t==null&&(t={});for(const r of this.callbacks)await r.onBatchEnd(e,t)}async onTrainBegin(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class qJ extends Jg{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){t==null&&(t={});const r=t.size==null?0:t.size;this.seen+=r;for(const s in t){const a=t[s];if(typeof a=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+a*r;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const u=ve(()=>Be(this.totals[s],ae(a,r)));this.totals[s]=u,o?.dispose()}}}async onEpochEnd(e,t){if(t!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?t[r]=this.totals[r]/this.seen:ve(()=>{const s=ae(It(1,this.seen),this.totals[r]);t[r]=s,this.totals[r].dispose(),Es(t[r])}))}}class oP extends Jg{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){t==null&&(t={}),this.epoch.push(e);for(const r in t)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(t[r])}async syncData(){const e=[],t=[],r=[];for(const a in this.history){const o=this.history[a];for(let u=0;u<o.length;++u)if(typeof o[u]!="number"){const c=o[u];e.push(c.data()),t.push(a),r.push(u)}}const s=await Promise.all(e);for(let a=0;a<s.length;++a)this.history[t[a]][r[a]].dispose(),this.history[t[a]][r[a]]=s[a][0]}}class lP extends Jg{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||R2,this.yieldEvery=t||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=GJ),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");q1(this.yieldEvery)&&(this.maybeWait=jZ(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,r){const s=[];this.yield!=null&&(await ud(r),s.push(this.yield(e,t,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,t){this.currentEpoch=e,this.epochBegin!=null&&(await ud(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const r=[];this.epochEnd!=null&&(await ud(t),r.push(this.epochEnd(e,t))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,t){this.batchBegin!=null&&(await ud(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const r=[];this.batchEnd!=null&&(await ud(t),r.push(this.batchEnd(e,t))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):q1(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await ud(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await ud(e),await this.trainEnd(e))}}function uP(n,e){return n==null&&(n={}),n instanceof Jg?[n]:Array.isArray(n)&&n[0]instanceof Jg?n:rr(n).map(r=>new lP(r,e))}class Co{constructor(){}static registerCallbackConstructor(e,t){U(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Co.checkForDuplicate(t),Co.constructors[e]==null&&(Co.constructors[e]=[]),Co.constructors[e].push(t)}static checkForDuplicate(e){for(const t in Co.constructors)Co.constructors[+t].forEach(s=>{if(s===e)throw new le("Duplicate callback constructor.")})}static clear(){Co.constructors={}}static createCallbacks(e){const t=[];for(const r in Co.constructors){const s=+r;e>=s&&t.push(...Co.constructors[s])}return t.map(r=>new r)}}Co.constructors={};function cP(n,e,t,r,s,a,o,u,c){const d=new oP,m=[new qJ,...Co.createCallbacks(e)];n!=null&&m.push(...n),m.push(d);const g=new iP(m);return g.setParams({epochs:t,initialEpoch:r,samples:s,steps:a,batchSize:o,verbose:e,doValidation:u,metrics:c}),{callbackList:g,history:d}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wl(n,e={},t=!1){return Zx(n,wo.getMap().classNameMap,e,"layer",t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xT(n,e){return ve(()=>{n.dtype!=="float32"&&(n=nt(n,"float32"));const t=Ct(t0(n),e,!0),r=Lh(t.shape,Ns()),s=Vs(Du(t,r));return It(n,s)})}function Jh(n,e){return ve(()=>Wr(t0(bt(e,n)),-1))}function wT(n,e){return ve(()=>Wr(gs(bt(e,n)),-1))}function ey(n,e){return ve(()=>{const t=bt(n,e),r=gi(gs(n),Ns(),Number.MAX_VALUE),s=gs(It(t,r));return ae(100,Wr(s,-1))})}function KJ(n,e){return ve(()=>{const t=gi(e,Ns(),Number.MAX_VALUE),r=Wi(Be(1,t)),s=gi(n,Ns(),Number.MAX_VALUE),a=Wi(Be(1,s));return Wr(t0(bt(r,a)),-1)})}function XJ(n,e){return ve(()=>{const t=Du(0,bt(1,ae(n,e)));return Wr(t0(t),-1)})}function YJ(n,e){return ve(()=>{const t=Du(0,bt(1,ae(n,e)));return Wr(t,-1)})}function QJ(n,e){return ve(()=>{const t=Ct(ae(n,e),-1),r=yo(ae(bt(1,n),e),-1);return Du(0,Be(1,bt(r,t)))})}function ZJ(n,e){return ve(()=>{const t=Math.log(2),r=bt(e,n),s=bt(Be(r,Ph(ae(-2,r))),t);return Wr(s,-1)})}function a0(n,e,t=!1){return ve(()=>{if(t)e=Gx(e);else{const r=Ct(e,e.shape.length-1,!0);e=It(e,r)}return e=gi(e,Ns(),1-Ns()),Sr(Ct(ae(nt(n,"float32"),Wi(e)),e.shape.length-1))})}function ST(n,e,t=!1){return ve(()=>{const r=nt(Vg(rJ(n)),"int32");e=gi(e,Ns(),1-Ns());const s=e.shape,a=oe(Hg(r,s[s.length-1]),s);return a0(a,e,t)})}function JJ(n,e){if(!Nn(n.shape,e.shape))throw new le(`logits and labels must have the same shape, but got shapes ${JSON.stringify(n.shape)} and ${JSON.stringify(e.shape)}`);return ve(()=>{const t=Ml(e),r=Sr(gs(e));return Be(bt(t,ae(e,n)),Mx(yi(r)))})}function CT(n,e){return ve(()=>{let t;return t=gi(e,Ns(),1-Ns()),t=Wi(It(t,bt(1,t))),Wr(JJ(n,t),-1)})}function eee(n,e){return ve(()=>{const t=gi(n,Ns(),1),r=gi(e,Ns(),1);return Ct(ae(n,Wi(It(t,r))),-1)})}function tee(n,e){return ve(()=>{const t=Wi(Be(Ns(),e));return Wr(bt(e,ae(n,t)),-1)})}function SR(n,e){return ve(()=>{const t=xT(n,-1),r=xT(e,-1),s=ae(t,r);return Sr(Ct(s,-1))})}const TT={meanSquaredError:Jh,meanAbsoluteError:wT,meanAbsolutePercentageError:ey,meanSquaredLogarithmicError:KJ,squaredHinge:XJ,hinge:YJ,categoricalHinge:QJ,logcosh:ZJ,categoricalCrossentropy:a0,sparseCategoricalCrossentropy:ST,binaryCrossentropy:CT,kullbackLeiblerDivergence:eee,poisson:tee,cosineProximity:SR};function CR(n){if(typeof n=="string"){if(n in TT)return TT[n];let e=`Unknown loss ${n}`;throw n.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${n}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new le(e)}else return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TR(n,e){return ve(()=>{const t=ae(.5,Hi(e)),r=Fu(Ha(e,t),n.dtype);return Wr(Ui(n,r),-1)})}function kR(n,e){return ve(()=>Fu(Ui(Ah(n,-1),Ah(e,-1)),"float32"))}function fP(n,e){return ve(()=>nt(Ct(qo(Ui(n,1),Ui(e,1))),"float32"))}function nee(n,e){return ve(()=>nt(Ct(qo(Ui(n,1),Ui(e,0))),"float32"))}function ree(n,e){return ve(()=>nt(Ct(qo(Ui(n,0),Ui(e,1))),"float32"))}function dP(n,e){return ve(()=>{const t=fP(n,e),r=ree(n,e),s=Be(t,r);return nt(Ps(Ha(s,0),It(t,s),0),"float32")})}function see(n,e){return ve(()=>{const t=fP(n,e),r=nee(n,e),s=Be(t,r);return nt(Ps(Ha(s,0),It(t,s),0),"float32")})}function hP(n,e){return CT(n,e)}function pP(n,e){return n.rank===e.rank&&(n=nd(n,[n.rank-1])),e=Ah(e,-1),e.dtype!==n.dtype&&(e=nt(e,n.dtype)),nt(Ui(n,e),"float32")}function aee(n,e){return ve(()=>{const t=n.sub(e).square().sum(),r=n.sub(n.mean()).square().sum();return Ft(1).sub(t.div(r))})}const iee=Jh,oee=Jh,lee=wT,uee=wT,cee=ey,fee=ey,ER=a0,dee=SR,mP=ST,kT={binaryAccuracy:TR,categoricalAccuracy:kR,precision:dP,categoricalCrossentropy:ER,sparseCategoricalCrossentropy:mP,mse:iee,MSE:oee,mae:lee,MAE:uee,mape:cee,MAPE:fee,cosine:dee};function hee(n){if(typeof n=="string"&&n in kT)return kT[n];if(typeof n!="string"&&n!=null)return n;throw new le(`Unknown metric ${n}`)}function ET(n){if(Ou(n!==null,`Unknown LossOrMetricFn ${n}`),typeof n=="string")return n;{let e;for(const t of Object.keys(TT))if(TT[t]===n){e=t;break}if(e!==void 0)return e;for(const t of Object.keys(kT))if(kT[t]===n){e=t;break}return e!==void 0?e:n.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pee(n){const e={Adagrad:()=>qh.adagrad(.01),Adadelta:()=>qh.adadelta(1,.95,Ns()),Adam:()=>qh.adam(.001,.9,.999,Ns()),Adamax:()=>qh.adamax(.002,.9,.999,Ns(),0),RMSProp:()=>qh.rmsprop(.001,.9,0,Ns()),SGD:()=>qh.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,n in e)return e[n]();throw new le(`Unknown Optimizer ${n}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const gP=1*1024*1024;function yP(n,e,t=!1){if(n==null||typeof n!="object"||Object.getPrototypeOf(n)!==Object.prototype||!NR(n))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){const r=JSON.stringify(n);r.length>gP&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${gP}.`)}}function NR(n){if(n===null)return!0;if(typeof n=="object")if(Object.getPrototypeOf(n)===Object.prototype){const e=Object.keys(n);for(const t of e)if(typeof t!="string"||!NR(n[t]))return!1;return!0}else if(Array.isArray(n)){for(const e of n)if(!NR(e))return!1;return!0}else return!1;else{const e=typeof n;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mee(n,e,t,r=console.log){const s=yee(n),a=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,t=t||[.32,.61,.89,1]):(e=e||115,t=t||[.24,.48,.7,.8,1]),t[t.length-1]<=1&&(t=t.map(m=>Math.floor(e*m)));let o;if(!s){a.push("Receives inputs"),o=[];for(const m in n.nodesByDepth)o.push(...n.nodesByDepth[m])}r("_".repeat(e)),NT(a,t,r),r("=".repeat(e));const u=n.layers;for(let m=0;m<u.length;++m)s?vee(u[m],t,r):bee(u[m],t,o,r),r((m===u.length-1?"=":"_").repeat(e));n.checkTrainableWeightsConsistency();const c=gee(n),d=gT(n.nonTrainableWeights);r(`Total params: ${c+d}`),r(`Trainable params: ${c}`),r(`Non-trainable params: ${d}`),r("_".repeat(e))}function gee(n){let e;return n.collectedTrainableWeights!=null?e=gT(n.collectedTrainableWeights):e=gT(n.trainableWeights),e}function yee(n){let e=!0;const t=[],r=[];for(const s in n.nodesByDepth)t.push(n.nodesByDepth[s]);for(const s of t){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of n.layers){let a=!1;for(const o of s.inboundNodes)if(r.indexOf(o)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function NT(n,e,t=console.log){let r="";for(let s=0;s<n.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=n[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);t(r)}function vee(n,e,t){let r,s;try{s=n.inboundNodes.map(c=>JSON.stringify(c.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(n.outputShape)}catch{r="multiple"}const a=n.name,o=n.getClassName(),u=[`${a} (${o})`,s,r,n.countParams().toString()];NT(u,e,t)}function bee(n,e,t,r){let s,a;try{a=n.inboundNodes.map(g=>JSON.stringify(g.inputShapes)).join(",")}catch{a="multiple"}try{s=JSON.stringify(n.outputShape)}catch{s="multiple"}const o=[];for(const g of n.inboundNodes)if(!(t!=null&&t.length>0&&t.indexOf(g)===-1))for(let y=0;y<g.inboundLayers.length;++y){const x=g.inboundLayers[y].name,S=g.nodeIndices[y],k=g.tensorIndices[y];o.push(`${x}[${S}][${k}]`)}const u=n.name,c=n.getClassName(),d=o.length===0?"":o[0],m=[`${u} (${c})`,a,s,n.countParams().toString(),d];NT(m,e,r);for(let g=1;g<o.length;++g)NT(["","","","",o[g]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vP(n,e,t){return(n==="inboundNodes"||n==="outputLayers"||n==="inputLayers")&&e===0&&typeof t=="string"}function i0(n,e){if(n===null)return null;if(typeof n=="string")return Xh(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let s=0;s<r;++s){const a=n[s];vP(e,s,a)?t.push(a):t.push(i0(a,e))}return t}else{const t={};for(const r of Object.keys(n)){const s=n[r];if(r==="name"&&typeof s=="string")t[r]=s;else{const a=Xh(r);t[a]=i0(s,a)}}return t}}function $R(n,e){if(n==null)return null;if(typeof n=="string")return Hc(n);if(typeof n=="number"||typeof n=="boolean")return n;if(n instanceof Array){const t=[],r=n.length;for(let s=0;s<r;++s){const a=n[s];vP(e,s,a)?t.push(a):t.push($R(a,e))}return t}else{const t={};for(const r of Object.keys(n)){const s=n[r],a=Hc(r);(r==="name"||r==="className")&&typeof s=="string"?t[a]=s:t[a]=$R(s,r)}return t}}/** @license See the LICENSE file. */const $T="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const xee=n=>{const e=Object.keys(n);if(e.length===0)return!1;const t=e[0].split("/");return!isNaN(parseInt(t[t.length-1],10))};class Hl extends Cn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const $=this.getClassName().toLowerCase();this.name=aT($)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ad(this.inputs).length!==this.inputs.length)throw new le(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map($=>$.name)}`);ad(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map($=>$.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const $ of this.outputs){const A=$.sourceLayer,D=$.nodeIndex,L=$.tensorIndex;this.outputLayers.push(A),this.outputLayersNodeIndices.push(D),this.outputLayersTensorIndices.push(L)}for(const $ of this.inputs){const A=$.sourceLayer,D=$.nodeIndex,L=$.tensorIndex;Ou(D===0,"input layer has >1 nodes"),Ou(L===0,"input layer has >1 tensors"),this.inputLayers.push(A),this.inputLayersNodeIndices.push(D),this.inputLayersTensorIndices.push(L)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let $=0;$<this.inputLayers.length;$++){const A=this.inputLayers[$];if(!(A instanceof Zg))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${$} (0-based) originates from layer type ${A.getClassName()}.`);this.inputNames.push(A.name),this.feedInputShapes.push(A.batchInputShape),this.feedInputNames.push(A.name)}for(const $ of this.outputLayers)this.outputNames.push($.name);this.internalInputShapes=this.inputs.map($=>$.shape),this.internalOutputShapes=this.outputs.map($=>$.shape);const t={},r={},s={},a={},o={},u=[],c=($,A,D,L,P,W)=>{(L==null||P==null||W==null)&&(L=$.sourceLayer,P=$.nodeIndex,W=$.tensorIndex);const B=L.inboundNodes[P];if(D.indexOf(B)!==-1)throw new Xo(`The tensor ${$.name} at layer "${L.name}" is part of a cycle.`);if(A.indexOf(B)!==-1)return;this.containerNodes.add(Hl.nodeKey(L,P)),L.id in o||(o[L.id]=Object.keys(o).length),D.indexOf(B)===-1&&D.push(B);const G=B.inboundLayers.length;for(let X=0;X<G;X++){const re=B.inputTensors[X],ue=B.inboundLayers[X],ne=B.nodeIndices[X],me=B.tensorIndices[X];c(re,A,D,ue,ne,me)}for(A.push(B);D.indexOf(B)>=0;)D.splice(D.indexOf(B),1);u.push(B)},d=[],m=[];for(const $ of this.outputs)c($,d,m);const g=u.slice().reverse();for(const $ of g){r[$.id]=$,$.id in t||(t[$.id]=0);let A=t[$.id];const D=s[$.outboundLayer.id]==null?0:s[$.outboundLayer.id];A=Math.max(A,D),s[$.outboundLayer.id]=A,a[$.outboundLayer.id]=$.outboundLayer,t[$.id]=A;for(let L=0;L<$.inboundLayers.length;L++){const P=$.inboundLayers[L],W=$.nodeIndices[L],B=P.inboundNodes[W],G=t[B.id]==null?0:t[B.id];t[B.id]=Math.max(A+1,G),r[B.id]=B}}const y={};for(const $ in t){const A=t[$];A in y||(y[A]=[]),y[A].push(r[$])}const x={};for(const $ in s){const A=s[$];A in x||(x[A]=[]),x[A].push(a[$])}let S=Object.keys(x).map($=>parseInt($,10)).sort(rT);this.layers=[];for(const $ of S){const A=x[$];A.sort((D,L)=>{const P=o[D.id],W=o[L.id];return P<W?-1:P>W?1:0});for(const D of A)D instanceof Hl&&this.internalContainerRefs.push(D),this.layers.push(D)}this.layersByDepth=x,S=Object.keys(y).map($=>parseInt($,10)).sort(rT);const k=this.inputs.slice(),C=[];for(const $ of S)for(const A of y[$]){const D=A.outboundLayer;if(D!=null){for(const L of A.inputTensors)if(k.indexOf(L)===-1)throw new Xo(`Graph disconnected: cannot obtain value for tensor ${L} at layer "${D.name}". The following previous layers were accessed without issue: ${C}`);for(const L of A.outputTensors)k.push(L);C.push(D.name)}}this.nodesByDepth=y;const N=this.layers.map($=>$.name);for(const $ of N){const A=N.filter(D=>D===$).length;if(A!==1)throw new Xo(`The name "${$}" is used ${A} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(N))}this.outboundNodes=[],this.inboundNodes=[],new yT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map($=>null),outputMasks:this.outputs.map($=>null),inputShapes:this.inputs.map($=>$.shape),outputShapes:this.outputs.map($=>$.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new le("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.layers)t.push(...r.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const r={};let s=0;const a=xee(e);a&&this.parseWeights(e);for(const u of this.layers)for(const[c,d]of u.weights.entries()){const m=a?`${d.name.split("/").slice(0,-1).join("/")+"/"}${c}`:d.originalName;if(r[m]!=null)throw new le(`Duplicate weight name: ${m}`);r[m]=d,s++}const o=[];for(const u in e){let c=u;if(r[u]==null){const d=u.split("/");c=d.slice(0,-2).concat([d[d.length-1]]).join("/")}if(r[c]!=null)o.push([r[c],e[u]]);else if(t)throw new le(`Provided weight data has no target variable: ${u}`);delete r[c]}if(t){const u=[];for(const c in r)u.push(c);if(u.length>0)throw new le(`${u.length} of ${s} weights are not set: ${u}`)}gR(o)}parseWeights(e){for(const t in Object.keys(e)){const r=t.split("/"),s=["vars","layer_checkpoint_dependencies"],a=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");a!==t&&(e[a]=e[t],delete e[t])}}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion=`tfjs-layers ${$T}`,t.backend="TensorFlow.js",t}toJSON(e,t=!0){const r=$R(this.updatedConfig());return t?JSON.stringify(r):r}call(e,t){return ve(()=>{e=rr(e);const r=new ld;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return r0(this.outputs,r,t)})}computeMask(e,t){return ve(()=>{e=rr(e);let r;return t==null?r=Kh(null,e.length):r=rr(t),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const t=mT(e);if(t.length!==this.inputLayers.length)throw new le(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let u=0;u<t.length;u++){const c=this.inputLayers[u],d=t[u],m=c.name+"_0_0";r[m]=d}const s=Object.keys(this.nodesByDepth).map(u=>parseInt(u,10)).sort(rT);if(s.length>1)for(const u of s){const c=this.nodesByDepth[u];for(const d of c){const m=d.outboundLayer;if(this.inputLayers.map(k=>k.id).indexOf(m.id)!==-1)continue;const g=[];for(let k=0;k<d.inboundLayers.length;k++){const C=d.inboundLayers[k],N=d.nodeIndices[k],$=d.tensorIndices[k],A=`${C.name}_${N}_${$}`,D=r[A];g.push(D)}const y=m.computeOutputShape(xi(g)),x=mT(y),S=m.inboundNodes.indexOf(d);for(let k=0;k<x.length;k++){const C=`${m.name}_${S}_${k}`;r[C]=x[k]}}}const a=[],o=[];for(let u=0;u<this.outputLayers.length;u++){const c=this.outputLayers[u],d=this.outputLayersNodeIndices[u],m=this.outputLayersTensorIndices[u],g=`${c.name}_${d}_${m}`;o.push(g)}for(let u=0;u<o.length;u++){const c=o[u];Ou(c in r),a.push(r[c])}return xi(a)}runInternalGraph(e,t){t==null&&(t=Kh(null,e.length));const r={};for(let c=0;c<this.inputs.length;++c){const d=this.inputs[c],m=e[c],g=t[c];r[d.id]=[m,g]}const s=Object.keys(this.nodesByDepth).map(c=>parseInt(c,10)).sort(rT);for(const c of s){const d=this.nodesByDepth[c];for(const m of d){const g=m.outboundLayer,y=m.inputTensors,x=m.outputTensors,S=new Array;for(const k of y)k.id in r&&S.push(r[k.id]);if(S.length===y.length){let k={},C,N,$,A;if(m.callArgs!=null&&(k=m.callArgs),S.length===1){const[D,L]=S[0];k.mask==null&&(k.mask=L),$=rr(g.call(D,k)),A=rr(g.computeMask(D,L)),C=[D],N=[L]}else C=S.map(D=>D[0]),N=S.map(D=>D[1]),k.mask==null&&(k.mask=N),$=rr(g.call(C,k)),A=rr(g.computeMask(C,N));if(g.activityRegularizer)throw new yn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let D=0;D<x.length;++D){const L=x[D],P=$[D],W=A[D];r[L.id]=[P,W]}}}}const a=[],o=[],u=[];for(const c of this.outputs){Ou(c.id in r,`Could not compute output ${c.name} : ${c.id}`);const[d,m]=r[c.id];u.push(d.shape),a.push(d),o.push(m)}return[a,o,u]}buildNodeConversionMap(e){const t={};let r;for(const s of this.layers){r=s instanceof Hl?1:0;for(let a=0;a<s.inboundNodes.length;a++){const o=Hl.nodeKey(s,a);this.containerNodes.has(o)&&(t[o]=r,r+=1)}}return t}getLayer(e,t){if(t!=null)return this.findLayer(t);if(e==null)throw new le("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new le(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new le(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ve(()=>{const e=[];for(const t of this.layers)for(let r=0;r<t.inboundNodes.length;++r){const s=Hl.nodeKey(t,r);this.containerNodes.has(s)&&e.push(...t.calculateLosses())}return e})}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const u=o.getClassName(),c=o.getConfig(),d=[];for(let g=0;g<o.inboundNodes.length;g++){const y=o.inboundNodes[g],x=Hl.nodeKey(o,g);let S={};if(this.containerNodes.has(x)){if(y.callArgs)try{JSON.stringify(y.callArgs),S=y.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${y.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),S={}}if(y.inboundLayers.length>0){const k=[];for(let C=0;C<y.inboundLayers.length;C++){const N=y.inboundLayers[C],$=y.nodeIndices[C],A=y.tensorIndices[C],D=Hl.nodeKey(N,$);let L=t[D];L==null&&(L=0),k.push([N.name,L,A,S])}d.push(k)}}}const m={};m.name=o.name,m.className=u,m.config=c,m.inboundNodes=d,r.push(m)}e.layers=r;const s=[];for(let o=0;o<this.inputLayers.length;o++){const u=this.inputLayers[o],c=this.inputLayersNodeIndices[o],d=Hl.nodeKey(u,c);if(!this.containerNodes.has(d))continue;let m=t[d];m==null&&(m=0);const g=this.inputLayersTensorIndices[o];s.push([u.name,m,g])}e.inputLayers=s;const a=[];for(let o=0;o<this.outputLayers.length;o++){const u=this.outputLayers[o],c=this.outputLayersNodeIndices[o],d=Hl.nodeKey(u,c);if(!this.containerNodes.has(d))continue;let m=t[d];m==null&&(m=0);const g=this.outputLayersTensorIndices[o];a.push([u.name,m,g])}return e.outputLayers=a,e}static fromConfig(e,t,r={},s=!1){const a={},o={};function u(C,N){C.name in o?o[C.name].push(N):o[C.name]=[N]}function c(C,N){const $=[];let A;for(const D of N){const L=D[0],P=D[1],W=D[2];if(A=D[3]==null?{}:D[3],!(L in a)){u(C,N);return}const B=a[L];if(B.inboundNodes.length<=P){u(C,N);return}const G=B.inboundNodes[P];$.push(G.outputTensors[W])}$.length>0&&C.apply(xi($),A)}function d(C){const N=C.name,$=Wl(C,t.customObjects!=null?t.customObjects:{});$.setFastWeightInitDuringBuild(s),a[N]=$,C.inboundNodes.forEach(D=>{if(!(D instanceof Array))throw new le(`Corrupted configuration, expected array for nodeData: ${D}`);u($,D)})}const m=t.name,g=t.layers;for(const C of g)d(C);for(;!HZ(o);)for(const C of g){const N=a[C.name];if(N.name in o){const $=o[N.name];delete o[N.name];for(const A of $)c(N,A)}}const y=[],x=[],S=t.inputLayers;for(const C of S){const N=C[0],$=C[1],A=C[2];Ou(N in a);const L=a[N].inboundNodes[$].outputTensors;y.push(L[A])}const k=t.outputLayers;for(const C of k){const N=C[0],$=C[1],A=C[2];Ou(N in a);const L=a[N].inboundNodes[$].outputTensors;x.push(L[A])}return new e({inputs:y,outputs:x,name:m})}get stateful(){if(this._stateful)throw new le("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ve(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wee(n,e,t){const r=e.length;if(n==null||Array.isArray(n)&&n.length===0)return e.map(s=>null);if(r===1)return Array.isArray(n)&&n.length===1?n:typeof n=="object"&&e[0]in n?[n[e[0]]]:[n];if(Array.isArray(n)){if(n.length!==r)throw new Error(`Provided ${t} is an array of ${n.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return n}else if(typeof n=="object"&&Object.keys(n).length>0&&typeof n[Object.keys(n)[0]]=="object"){const s=[];return e.forEach(a=>{a in n?s.push(n[a]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${t} must be either an array with ${r} elements or an object with ${e} keys. Provided ${t} not understood: ${JSON.stringify(n)}`)}function bP(n,e){return wee(n,e,"classWeight")}async function xP(n,e,t,r){if(t!=null){const s=ve(()=>{if(n.shape.length===1)return $u(n);if(n.shape.length===2){if(n.shape[1]>1)return Ah(n,1);if(n.shape[1]===1)return oe(n,[n.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${n.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${n.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await s.data());un(s);const o=[];return a.forEach(u=>{if(t[u]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${u} exists in the data but not in classWeight`);o.push(t[u])}),fa(o,"float32")}else return null}function See(n,e){return ae(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Cee=32;function wP(n,e){let t,r;const s=e;t=s.xs,r=s.ys,U(t!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=SP("input",n.inputNames,t),o=SP("output",n.outputNames,r),u=a[0].shape[0];U(a.length===n.inputs.length,()=>`LayersModel has ${n.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(n.inputNames)})`),U(o.length===n.outputs.length,()=>`LayersModel has ${n.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(n.outputNames)})`);for(let c=0;c<a.length;c++)U(a[c].shape[0]===u,()=>`Batch size mismatch: input ${n.inputNames[c]} has ${a[c].shape[0]}; expected  ${u} based on input ${n.inputNames[0]}.`);for(let c=0;c<o.length;c++)U(o[c].shape[0]===u,()=>`Batch size mismatch: output ${n.outputNames[c]} has ${o[c].shape[0]}; expected  ${u} based on input ${n.inputNames[0]}.`);return{xs:a,ys:o}}function SP(n,e,t){if(t instanceof Pn)return[t];if(Array.isArray(t))return U(t.length===e.length,()=>`Received an array of ${t.length} Tensors, but expected ${e.length} to match the ${n} keys ${e}.`),t;{const r=[];for(const s of e){if(t[s]==null)throw new le(`The feature data generated by the dataset lacks the required ${n} key '${s}'.`);r.push(t[s])}return r}}function Tee(n){if(n.length===3)throw new yn("Validation with sample weights is not implemented yet.");return{xs:n[0],ys:n[1]}}async function kee(n,e,t){const r=t.batchesPerEpoch!=null;if(U(n.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),U(t!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),U(t.epochs!=null&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),U(!r||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),U(t.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),n.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");n.isTraining=!0;try{const s=t.validationData!=null;let a,o;if(s)if(CP(t.validationData))U(t.validationBatches==null||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{const C=Tee(t.validationData);a=C.xs,o=C.ys}const u=n.makeTrainFunction(),c=n.getDedupedMetricsNames();let d;s?d=c.slice().concat(c.map(C=>"val_"+C)):d=c.slice();const m=uP(t.callbacks,t.yieldEvery),g=t.verbose==null?1:t.verbose,{callbackList:y,history:x}=cP(m,g,t.epochs,null,null,Eee(e,t),null,s,d);y.setModel(n),n.history=x,await y.onTrainBegin(),n.stopTraining_=!1;let S=t.initialEpoch==null?0:t.initialEpoch,k=await e.iterator();for(;S<t.epochs;){const C={};await y.onEpochBegin(S);let N=0,$=0;for(r||(k=await e.iterator());!r||N<t.batchesPerEpoch;){const A=await k.next();if(r&&A.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${N} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(A.value!=null){const{xs:D,ys:L}=wP(n,A.value),P={};P.batch=$,P.size=D[0].shape[0],await y.onBatchBegin($,P);const W=[];if(t.classWeight!=null){const X=bP(t.classWeight,n.outputNames);for(let re=0;re<X.length;++re)W.push(await xP(L[re],null,X[re]))}const B=D.concat(L).concat(W),G=u(B);un(B);for(let X=0;X<c.length;++X){const re=c[X],ue=G[X];P[re]=ue,Es(ue)}await y.onBatchEnd($,P),sP(P),$++,N++}if(r?N>=t.batchesPerEpoch:A.done){if(s){let D;CP(t.validationData)?D=rr(await n.evaluateDataset(t.validationData,{batches:t.validationBatches})):D=rr(n.evaluate(a,o,{batchSize:t.validationBatchSize==null?Cee:t.validationBatchSize,verbose:0}));for(let L=0;L<n.metricsNames.length;++L)C[`val_${n.metricsNames[L]}`]=D[L]}break}if(n.stopTraining_)break}if(await y.onEpochEnd(S,C),S++,n.stopTraining_)break}return await y.onTrainEnd(),await n.history.syncData(),n.history}finally{n.isTraining=!1}}function Eee(n,e){let t=null;return e.batchesPerEpoch!=null?t=e.batchesPerEpoch:Number.isFinite(n.size)&&(t=n.size),t}function CP(n){return typeof n.iterator=="function"}function Nee(n){return typeof n.next=="function"}async function $ee(n,e,t){t=t||{};const r=t.batches!=null,s=n.testFunction;let a=[];if(t.verbose>0)throw new yn("Verbose mode is not implemented yet.");U(!r||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);const o=Nee(e)?e:await e.iterator();let u=0,c=0;for(;!r||c<t.batches;){const d=await o.next();if(a=ve(()=>{if(d.value){const{xs:m,ys:g}=wP(n,d.value),y=m.concat(g),x=ve(()=>s(y));if(un(y),c===0)for(let k=0;k<x.length;++k)a.push(Ft(0));const S=y[0].shape[0];for(let k=0;k<x.length;++k){const C=x[k],N=a[k];a[k]=ve(()=>Be(a[k],ae(S,C))),c>0&&un(N)}un(x),u+=S,++c}return a}),d.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let d=0;d<a.length;++d){const m=a[d];a[d]=It(a[d],u),un(m)}return xi(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IR(n){U(n>0&&Number.isInteger(n),()=>`batchSize is required to be a positive integer, but got ${n}`)}function o0(n,e,t){return n==null?[null]:Array.isArray(n)?n.map(r=>Zh(r,e,t-e)):Zh(n,e,t-e)}function RR(n,e){return ve(()=>n==null?null:Array.isArray(n)?n.map(t=>RR(t,e)):q3(n,e.dtype==="int32"?e:nt(e,"int32")))}function DR(n,e){const t=[];let r=0,s=null;for(;r<n;)s=r+e,s>=n&&(s=n),t.push([r,s]),r=s;return t}function TP(n){const e=[];n instanceof Pn&&(n=[n]);for(let t=0;t<n.length;++t){const r=n[t];if(r.rank===1)e.push(e0(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function jl(n,e){if(n==null)return;const t=[];if(e instanceof Pn)t.push(e.id);else if(Array.isArray(e))e.forEach(s=>t.push(s.id));else if(e!=null)for(const s in e){const a=e[s];t.push(a.id)}const r=[];if(n instanceof Pn)t.indexOf(n.id)===-1&&r.push(n);else if(Array.isArray(n))n.forEach(s=>{t.indexOf(s.id)===-1&&r.push(s)});else if(n!=null)for(const s in n){const a=n[s];t.indexOf(a.id)===-1&&r.push(a)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Iee(n){return n instanceof Pn}function _R(n){return Array.isArray(n)}function kP(n){return!Iee(n)&&!_R(n)}function EP(n,e,t,r=!0,s=""){if(e==null||e.length===0){if(n!=null){let o=!1;if(_R(n)&&n.length>0)o=!0;else if(kP(n)){for(const u in n)if(n.hasOwnProperty(u)){o=!0;break}}else o=!0;if(o)throw new le(`Error when checking model ${s} expected no data, but got ${n}`)}return[]}if(n==null)return e.map(o=>null);let a;if(kP(n)){n=n,a=[];for(const o of e){if(n[o]==null)throw new le(`No data provided for "${o}". Need data for each key in: ${e}`);a.push(n[o])}}else if(_R(n)){if(n=n,n.length!==e.length)throw new le(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${n}`);a=n}else{if(n=n,e.length>1)throw new le(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${n.shape}`);a=[n]}if(a=TP(a),t!=null)for(let o=0;o<e.length;++o){if(t[o]==null)continue;const u=a[o];if(u.shape.length!==t[o].length)throw new le(`Error when checking ${s}: expected ${e[o]} to have ${t[o].length} dimension(s). but got array with shape ${u.shape}`);for(let c=0;c<t[o].length;++c){if(c===0&&!r)continue;const d=u.shape[c],m=t[o][c];if(m!=null&&m>=0&&d!==m)throw new le(`${s} expected a batch of elements where each example has shape [${t[o].slice(1,t[o].length)}] (i.e.,tensor shape [*,${t[o].slice(1,t[o].length)}]) but the ${s} received an input with ${u.shape[0]} examples, each with shape [${u.shape.slice(1,u.shape.length)}] (tensor shape [${u.shape}])`)}}return a}function Ree(n,e,t){const r=ad(n.map(a=>a.shape[0]));r.sort();const s=ad(e.map(a=>a.shape[0]));if(s.sort(),r.length>1)throw new le(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(a=>a.shape))}`);if(s.length>1)throw new le(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(r.length>0&&s.length>0&&!Nn(r,s))throw new le(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function Dee(n,e,t){const r=[Jh,CT,a0];for(let s=0;s<n.length;++s){const a=n[s],o=e[s],u=t[s];if(o!=null){if(o===a0&&a.shape[a.shape.length-1]===1)throw new le(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const c=a.shape.slice(1),d=u.slice(1);for(let m=0;m<c.length;++m){const g=c[m],y=d[m];if(y!=null&&g!==y)throw new le(`A target Tensor with shape ${a.shape} was passed for an output of shape ${u}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function NP(n,e,t,r=!0,s=""){let a;if(Array.isArray(n)){if(n.length!==e.length)throw new le(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${n.length} Tensors(s).`);a=n}else{if(e.length>1)throw new le(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(n.shape)}.`);a=[n]}if(t!=null)for(let o=0;o<e.length;++o){if(t[o]==null)continue;const u=a[o];if(u.shape.length!==t[o].length)throw new le(`Error when checking ${s}: expected ${e[o]} to have ${t[o].length} dimension(s), but got array with shape ${JSON.stringify(u.shape)}`);for(let c=0;c<t[o].length;++c){if(c===0&&!r)continue;const d=u.shape[c],m=t[o][c];if(m!=null&&m!==d)throw new le(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(t[o])} but got array with shape ${JSON.stringify(u.shape)}.`)}}}function _ee(n,e){if(n==null||Array.isArray(n)&&n.length===0)return e.map(r=>[]);let t;if(typeof n=="string"||typeof n=="function")t=[n];else if(Array.isArray(n)||typeof n=="object")t=n;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${n}`);if(Array.isArray(t))return e.map(r=>t);{const r=[];for(const s of e){let a=t.hasOwnProperty(s)?t[s]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const Aee="layers-model";class jc extends Hl{constructor(e){super(e),this.isTraining=!1}summary(e,t,r=console.log){if(!this.built)throw new le("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");mee(this,e,t,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=pee(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Vc))throw new le("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new le(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),t.push(CR(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new le(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(u=>CR(u))}else{const o=CR(e.loss);this.outputs.forEach(u=>{t.push(o)})}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const u=this.internalOutputShapes[o],c=this.outputNames[o];this.feedOutputNames.push(c),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Qh("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const u=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([u,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=_ee(e.metrics,this.outputNames),a=(o,u,c)=>{this.outputNames.length>1&&(u=this.outputNames[o]+"_"+u),this.metricsNames.push(u),this.metricsTensors.push([c,o])};Qh("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const u=s[o];(d=>{const m="";let g,y,x;for(const S of d){if(typeof S=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(S)!==-1){const C=this.internalOutputShapes[o];C[C.length-1]===1||this.lossFunctions[o]===CT?["accuracy","acc"].indexOf(S)!==-1?y=TR:["crossentropy","ce"].indexOf(S)!==-1&&(y=hP):this.lossFunctions[o]===ST?["accuracy","acc"].indexOf(S)!==-1?y=pP:["crossentropy","ce"].indexOf(S)!==-1&&(y=mP):["accuracy","acc"].indexOf(S)!==-1?y=kR:["crossentropy","ce"].indexOf(S)!==-1&&(y=ER);let N;["accuracy","acc"].indexOf(S)!==-1?N="acc":["crossentropy","ce"].indexOf(S)!==-1&&(N="ce"),x=y,g=m+N}else x=hee(S),g=m+ET(S);let k;Qh(g,()=>{k=x}),a(o,g,k)}})(u)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,r={}){const s=r.batchSize==null?32:r.batchSize;IR(s);const o=this.standardizeUserDataXY(e,t,!0,s);try{const u=o[0].concat(o[1]);this.makeTestFunction();const c=this.testFunction,d=this.testLoop(c,u,s,r.verbose,r.steps);return xi(d)}finally{jl(o[0],e),jl(o[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),$ee(this,e,t)}checkNumSamples(e,t,r,s="steps"){let a;if(r!=null){if(a=null,t!=null)throw new le(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new le(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return a}execute(e,t){if(Array.isArray(t)&&t.length===0)throw new le("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(t),s=r?t:[t],a=this.retrieveSymbolicTensors(s),o=new ld;if(e instanceof Pn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new le(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)o.add(this.inputs[c],e[c])}else for(const c of this.inputs){const d=e[c.name];if(d==null)throw new le(`No value is provided for the model's input ${c.name}`);o.add(c,d)}const u=r0(a,o);return r?u:u[0]}retrieveSymbolicTensors(e){const t=Kh(null,e.length);let r=e.length;for(const s of this.layers){const a=Array.isArray(s.output)?s.output:[s.output],o=a.map(u=>u.name);for(let u=0;u<e.length;++u){const c=o.indexOf(e[u]);if(c!==-1&&(t[u]=a[c],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw t.forEach((a,o)=>{a==null&&s.push(e[o])}),new le(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return t}predictLoop(e,t=32,r=!1){return ve(()=>{const s=this.checkNumSamples(e);if(r)throw new yn("Verbose predictLoop() is not implemented yet.");const a=DR(s,t),o=this.outputs.map(u=>[]);for(let u=0;u<a.length;++u)ve(()=>{const d=a[u][0],m=a[u][1],g=o0(e,d,m),y=[];if(Array.isArray(g))for(let S=0;S<g.length;++S)y.push({key:this.inputs[S],value:g[S]});else y.push({key:this.inputs[0],value:g});const x=new ld(y);return r0(this.outputs,x)}).forEach((d,m)=>o[m].push(d));return xi(o.map(u=>es(u,0)))})}predict(e,t={}){const r=TP(e);NP(r,this.inputNames,this.feedInputShapes,!1);try{const s=t.batchSize==null?32:t.batchSize;return IR(s),this.predictLoop(r,s)}finally{jl(r,e)}}predictOnBatch(e){NP(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,r=!0,s){if(this.optimizer_==null)throw new Xo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let o=0;o<this.feedOutputShapes.length;++o){const u=this.feedOutputShapes[o];this.feedLossFns[o]===ST?a.push(u.slice(0,u.length-1).concat([1])):a.push(u)}if(e=EP(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=EP(t,this.feedOutputNames,a,!1,"target"),Ree(e,t),Dee(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new le(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,r,s,a=!0,o){const[u,c]=this.standardizeUserDataXY(e,t,a,o);if(r!=null)throw new Error("sample weight is not supported yet.");let d=null;if(s!=null){const m=bP(s,this.outputNames);d=[];for(let g=0;g<m.length;++g)d.push(await xP(c[g],null,m[g]))}return[u,c,d]}testLoop(e,t,r,s=0,a){return ve(()=>{const o=this.checkNumSamples(t,r,a,"steps"),u=[];if(s>0)throw new yn("Verbose mode is not implemented yet.");if(a!=null)throw new yn("steps mode in testLoop() is not implemented yet");{const c=DR(o,r),d=fa(Pl(0,o));for(let m=0;m<c.length;++m){const g=c[m][0],y=c[m][1],x=Zh(d,g,y-g),S=RR(t,x),k=e(S);if(m===0)for(let C=0;C<k.length;++C)u.push(Ft(0));for(let C=0;C<k.length;++C){const N=k[C];u[C]=Be(u[C],ae(y-g,N))}}for(let m=0;m<u.length;++m)u[m]=It(u[m],o)}return u})}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let r=0;r<e.length;++r){const s=e[r];let a=s;if(M3(e,s)>1){const o=M3(e.slice(0,r),s);a+=`_${o}`}t.push(a)}return t}makeTrainFunction(){return e=>{const t=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],u=()=>{const g=[];for(let k=0;k<this.inputs.length;++k)g.push({key:this.inputs[k],value:r[k]});const y=new ld(g),x=r0(this.outputs,y,{training:!0});let S;for(let k=0;k<this.lossFunctions.length;++k){const C=this.lossFunctions[k];let N=C(s[k],x[k]);a[k]!=null&&(N=See(N,a[k]));const $=Wr(N);t.push($),k===0?S=N:S=Be(S,N)}for(let k=0;k<this.metricsTensors.length;++k){let C;if(this.outputs.length>1&&k<this.outputs.length)C=t[k];else{const N=this.metricsTensors[k][0],$=this.metricsTensors[k][1];C=Wr(N(s[$],x[$]))}Es(C),o.push(C)}return S=Wr(S),this.calculateLosses().forEach(k=>{S=Be(S,k)}),S},c=this.collectedTrainableWeights.map(g=>g.read());return[this.optimizer_.minimize(u,!0,c)].concat(o)}}makeTestFunction(){this.testFunction=e=>ve(()=>{const t=[];let r;const s=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let d=0;d<this.inputs.length;++d)o.push({key:this.inputs[d],value:s[d]});const u=new ld(o),c=r0(this.outputs,u);for(let d=0;d<this.lossFunctions.length;++d){const m=this.lossFunctions[d],g=Wr(m(a[d],c[d]));d===0?r=g:r=Be(r,g),t.push(r)}for(let d=0;d<this.metricsTensors.length;++d){const m=this.metricsTensors[d][0],g=this.metricsTensors[d][1],y=Wr(m(a[g],c[g]));t.push(y)}return t})}async fit(e,t,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,a,o,u,c,d,m,g,y;try{const x=r.batchSize==null?32:r.batchSize;IR(x);const k=await this.standardizeUserData(e,t,r.sampleWeight,r.classWeight,!1,x);s=k[0],a=k[1],y=k[2];let C=!1,N;if(r.validationData!=null&&r.validationData.length>0){if(C=!0,r.validationData.length===2)c=r.validationData[0],d=r.validationData[1];else throw r.validationData.length===3?new yn("validationData including sample weights is not supported yet."):new le(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const X=await this.standardizeUserData(c,d,null,null,!0,x);m=X[0],g=X[1],N=m.concat(g)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){C=!0;const G=Math.floor(s[0].shape[0]*(1-r.validationSplit)),X=s[0].shape[0];m=o0(s,G,X),o=s,s=o0(s,0,G),g=o0(a,G,X),u=a,a=o0(a,0,G),N=m.concat(g)}else r.validationSteps!=null&&(C=!0);const $=s.concat(a).concat(y);this.checkTrainableWeightsConsistency();const A=this.makeTrainFunction(),D=this.getDedupedMetricsNames();let L,P;C?(this.makeTestFunction(),L=this.testFunction,P=D.slice().concat(D.map(G=>"val_"+G))):(L=null,N=[],P=D.slice());const W=uP(r.callbacks,r.yieldEvery);return await this.fitLoop(A,$,D,x,r.epochs,r.verbose,W,L,N,r.shuffle,P,r.initialEpoch,null,null)}finally{this.isTraining=!1,jl(s,e),jl(a,t),jl(o,e),jl(u,t),jl(m,c),jl(g,d),y!=null&&un(y)}}async fitLoop(e,t,r,s,a,o,u,c,d,m,g,y,x,S){s==null&&(s=32),a==null&&(a=1),m==null&&(m=!0),y==null&&(y=0);let k=!1;if(c!=null&&d!=null&&(k=!0),S!=null&&(k=!0,x==null))throw new le("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const C=this.checkNumSamples(t,s,x,"steps_per_epoch");let N;C!=null&&(N=Pl(0,C)),o==null&&(o=1);const{callbackList:$,history:A}=cP(u,o,a,y,C,x,s,k,g);$.setModel(this),this.history=A,await $.onTrainBegin(),this.stopTraining_=!1;for(let D=y;D<a;++D){await $.onEpochBegin(D);const L={};if(x!=null)throw new yn("stepsPerEpoch mode is not implemented yet.");{if(m==="batch")throw new yn("batch shuffling is not implemneted yet");m&&g$(N);const P=fa(N),W=DR(C,s);for(let B=0;B<W.length;++B){const G={};if(await $.onBatchBegin(B,G),ve(()=>{const X=W[B][0],re=W[B][1],ue=Zh(P,X,re-X);G.batch=B,G.size=re-X;const ne=RR(t,ue),me=e(ne);for(let ge=0;ge<r.length;++ge){const be=r[ge],pe=me[ge];G[be]=pe,Es(pe)}if(B===W.length-1&&k){const ge=this.testLoop(c,d,s);for(let be=0;be<r.length;++be){const pe=r[be],te=ge[be];Es(te),L["val_"+pe]=te}}}),await $.onBatchEnd(B,G),sP(G),this.stopTraining_)break}P.dispose()}if(await $.onEpochEnd(D,L),this.stopTraining_)break}return await $.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return kee(this,e,t)}async trainOnBatch(e,t){const r=await this.standardizeUserData(e,t),s=r[0],a=r[1],u=this.makeTrainFunction()(s.concat(a)),c=[];for(const d of u){const m=await d.data();c.push(m[0])}return un(u),jl(r[0],e),jl(r[1],t),xi(c)}getNamedWeights(e){const t=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let o=0;o<s.length;++o)r&&!s[o].trainable||t.push({name:s[o].originalName,tensor:a[o]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const t=B$().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-B$().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Hc(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if(typeof t!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(t=>Hc(t))}else{const t=Object.keys(this.loss);e={};const r=this.loss;for(const s of t)if(typeof r[s]=="string")e[s]=Hc(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Hc(ET(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Hc(ET(e)));{const e={};for(const t in this.metrics)e[t]=Hc(ET(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const t=i0(e.optimizer_config),r=Wl(t);let s;if(typeof e.loss=="string")s=Xh(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>Xh(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=Xh(e.loss[o])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(o=>Xh(o));else if(e.metrics!=null){a={};for(const o in e.metrics)a[o]=Xh(e.metrics[o])}this.compile({loss:s,metrics:a,optimizer:r})}async save(e,t){if(typeof e=="string"){const d=pM(e);if(d.length===0)throw new le(`Cannot find any save handlers for URL '${e}'`);if(d.length>1)throw new le(`Found more than one (${d.length}) save handlers for URL '${e}'`);e=d[0]}if(e.save==null)throw new le("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await W$(this.getNamedWeights(t)),u={modelTopology:this.toJSON(null,!1),format:Aee,generatedBy:`TensorFlow.js tfjs-layers v${$T}`,convertedBy:null};if((t==null?!1:t.includeOptimizer)&&this.optimizer!=null){u.trainingConfig=this.getTrainingConfig();const d="optimizer",{data:m,specs:g}=await W$(await this.optimizer.getWeights(),d);r.specs.push(...g),r.data=fM([r.data,m])}return this.userDefinedMetadata!=null&&(yP(this.userDefinedMetadata,this.name,!0),u.userDefinedMetadata=this.userDefinedMetadata),u.weightData=r.data,u.weightSpecs=r.specs,e.save(u)}setUserDefinedMetadata(e){yP(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}jc.className="Model",Ve(jc);class $P extends jc{}$P.className="Functional",Ve($P);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Oee(n,e){"modelTopology"in n||(n={modelTopology:n}),n=n;let t=n.modelTopology;t.model_config!=null&&(t=t.model_config);const r=i0(t),s=Wl(r,e);if(n.weightsManifest!=null){const a=await Oz(n.weightsManifest,n.pathPrefix,s.weights.map(u=>u.originalName)),o={};for(const u of s.weights)o[u.originalName]=a[u.originalName];s.loadWeights(o),un(a)}return s}async function Fee(n,e){if(e==null&&(e={}),typeof n=="string"){const t=mM(n,e);if(t.length===0)t.push(Mz(n,e));else if(t.length>1)throw new le(`Found more than one (${t.length}) load handlers for URL '${n}'`);n=t[0]}return Lee(n,void 0,e)}async function Lee(n,e,t){if(t==null&&(t={}),n.load==null)throw new le("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const r=await n.load();let s=r.modelTopology;s.model_config!=null&&(s=s.model_config);const a=t.strict==null?!0:t.strict,o=r.weightData!=null&&r.weightSpecs!=null&&a,u=Wl(i0(s),e,o),c=r.trainingConfig;if(c!=null&&u.loadTrainingConfig(c),r.userDefinedMetadata!=null&&u.setUserDefinedMetadata(r.userDefinedMetadata),r.weightData!=null){if(r.weightSpecs==null)throw new le("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:d,optimizerWeights:m}=Mee(r.weightData,r.weightSpecs);u.loadWeights(d,a),u.optimizer!=null&&m.length>0&&await u.optimizer.setWeights(m),un(d),un(m.map(g=>g.tensor))}return u}function Mee(n,e){const t=H$(n,e),r={},s=[];return e.forEach(a=>{a.group==="optimizer"?s.push({name:a.name,tensor:t[a.name]}):r[a.name]=t[a.name]}),{modelWeights:r,optimizerWeights:s}}class ep extends jc{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:aT("sequential_"),e.layers!=null)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new le(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof ep||e instanceof jc;let r;if(t){if(r=e,r.outputs.length!==1)throw new le("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new le("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new le("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=eP({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new le(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new le("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=J3(this.outputs[0])}this.inboundNodes=[],new yT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Kh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return this.model==null&&this.build(),this.model.call(e,t)}build(e){if(Hn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new jc({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,r=console.log){this.built||this.build(),super.summary(e,t,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,t,r={}){if(!this.built)throw new Xo("The model needs to be compiled before being used.");return this.model.evaluate(e,t,r)}async evaluateDataset(e,t){if(!this.built)throw new Xo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return this.model==null&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,r={}){if(!this.built)throw new Xo("The model needs to be compiled before being used.");return this.model.fit(e,t,r)}async fitDataset(e,t){if(!this.built)throw new Xo("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,r={},s=!1){let a,o={};if(t instanceof Array){if(t[0].className==null||t[0].className==="Merge")throw new le("Legacy serialization format not supported yet.");a=t}else U(t.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,o=t;const u=new e(o);if(!(u instanceof ep))throw new yn(`Sequential.fromConfig called on non-Sequential input: ${u}`);for(const c of a){const m=Wl(c,void 0,s);s&&m.setFastWeightInitDuringBuild(!0),u.add(m)}return u}set stopTraining(e){if(this.model==null)throw new le("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new le("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const r={};r.className=t.getClassName(),r.config=t.getConfig(),e.push(r)}return{name:this.name,layers:e}}}ep.className="Sequential",Ve(ep);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zee(n){return new jc(n)}function Pee(n){return new ep(n)}function IP(n){return eP(n)}function Bee(n,e){Co.registerCallbackConstructor(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let xa=class extends Hh{getConfig(){return{}}};class RP extends xa{apply(e,t=1){return aJ(e,t)}}RP.className="elu",Ve(RP);class DP extends xa{apply(e){return DC(e)}}DP.className="selu",Ve(DP);class _P extends xa{apply(e){return Ml(e)}}_P.className="relu",Ve(_P);class AP extends xa{apply(e){return ve(()=>ed(6,Ml(e)))}}AP.className="relu6",Ve(AP);class OP extends xa{apply(e){return e}}OP.className="linear",Ve(OP);class FP extends xa{apply(e){return Ll(e)}}FP.className="sigmoid",Ve(FP);class LP extends xa{apply(e){return oJ(e)}}LP.className="hardSigmoid",Ve(LP);class MP extends xa{apply(e){return Ph(e)}}MP.className="softplus",Ve(MP);class zP extends xa{apply(e){return iJ(e)}}zP.className="softsign",Ve(zP);class PP extends xa{apply(e){return Qf(e)}}PP.className="tanh",Ve(PP);let AR=class extends xa{apply(e,t=-1){return Gx(e,t)}};AR.className="softmax",Ve(AR);class BP extends xa{apply(e,t=-1){return CC(e,t)}}BP.className="logSoftmax",Ve(BP);class VP extends xa{apply(e){return ve(()=>ve(()=>{const t=Math.sqrt(2),r=ae(.5,Be(1,xC(It(e,t))));return ae(e,r)}))}}VP.className="gelu",Ve(VP);class UP extends xa{apply(e){return ve(()=>ae(.5,ae(e,Be(1,Qf(ae(Vs(It(2,Math.PI)),Be(e,ae(.044715,Iu(e,3)))))))))}}UP.className="gelu_new",Ve(UP);class WP extends xa{apply(e){return ve(()=>ae(e,Qf(Ph(e))))}}WP.className="mish",Ve(WP);class HP extends xa{apply(e,t=1){return ve(()=>ae(Ll(ae(e,t)),e))}}HP.className="swish",Ve(HP);function cd(n){return n.getClassName()}function OR(n,e={}){return Zx(n,wo.getMap().classNameMap,e,"activation")}function fd(n){if(n==null){const e={};return e.className="linear",e.config={},OR(e)}if(typeof n=="string"){const e={};return e.className=n,e.config={},OR(e)}else return n instanceof xa?n:OR(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FR(n){if(n!=null&&typeof n!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${n}`)}class jP extends Hh{}class l0 extends jP{constructor(e){super(),FR(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ve(()=>{let t=vs([1]);return this.hasL1&&(t=Be(t,Ct(ae(this.l1,gs(e))))),this.hasL2&&(t=Be(t,Ct(ae(this.l2,t0(e))))),oe(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}l0.className="L1L2",Ve(l0);function Vee(n){return FR(n),new l0({l1:n!=null?n.l1:null,l2:0})}function Uee(n){return FR(n),new l0({l2:n!=null?n.l2:null,l1:0})}const GP={l1l2:"L1L2"};function yr(n){return J2(n)}function qP(n,e={}){return Zx(n,wo.getMap().classNameMap,e,"regularizer")}function Or(n){if(n==null)return null;if(typeof n=="string"){const t={className:n in GP?GP[n]:n,config:{}};return qP(t)}else return n instanceof jP?n:qP(n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class LR extends Cn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,t){e=en(e);let r=Ml(e);return this.maxValue!=null&&(r=gi(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}LR.className="ReLU",Ve(LR);class MR extends Cn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=en(e);return Lx(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}MR.className="LeakyReLU",Ve(MR);class zR extends Cn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Ar(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Or(e.alphaRegularizer),this.alphaConstraint=Is(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new le(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Hn(e);const t=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)t[s-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new bs({ndim:e.length,axes:r})],this.built=!0}call(e,t){return e=en(e),Wx(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Hr(this.alphaInitializer),alphaRegularizer:yr(this.alphaRegularizer),alphaConstraint:$s(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}zR.className="PReLU",Ve(zR);let PR=class extends Cn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new yn(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,t){const r=en(e);return zg(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};PR.className="ELU",Ve(PR);class BR extends Cn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,t){const r=en(e);return ae(r,nt(Ha(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}BR.className="ThresholdedReLU",Ve(BR);class VR extends Cn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new AR().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,t){return ve(()=>{let r=en(e);const s=t.mask;if(s!=null){const a=ae(bt(vi(r.shape),nt(s,r.dtype)),Ft(-1e9));r=Be(r,a)}return this.axis instanceof Array?this.axis.length>1?yi(bt(r,zx(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}VR.className="Softmax",Ve(VR);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ty(n,e,t){if(typeof n=="number")return Kh(n,e);if(n.length!==e)throw new le(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${n.length} elements.`);for(let r=0;r<e;++r){const s=n[r];if(!tJ(s))throw new le(`The ${t} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(n)} including a non-integer number ${s}`)}return n}function Gl(n,e,t,r,s=1){if(n==null)return n;const a=e+(e-1)*(s-1);let o;return t==="same"?o=n:o=n-a+1,Math.floor((o+r-1)/r)}function Mu(n,e,t,r){if(n==null)return null;if(r==="valid")n=n*e+od([t-e,0]);else if(r==="same")n=n*e;else throw new le(`Unsupport padding mode: ${r}.`);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UR(n,e){return ve(()=>(rs(e),e==="channelsFirst"?Rn(n,[0,2,3,1]):n))}function KP(n,e){return ve(()=>(rs(e),e==="channelsFirst"?Rn(n,[0,2,3,4,1]):n))}function Wee(n,e,t,r=1,s="valid",a,o=1){return ve(()=>{if(a==null&&(a=Bl()),rs(a),n.shape.length!==3)throw new le(`The input of a conv1dWithBias operation should be 3, but is ${n.shape.length} instead.`);if(e.shape.length!==3)throw new le(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(t!=null&&t.shape.length!==1)throw new le(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(a==="channelsFirst"&&(n=Rn(n,[0,2,1])),s==="causal")throw new yn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let u=mC(n,e,r,s==="same"?"same":"valid","NWC",o);return t!=null&&(u=Vl(u,t)),u})}function XP(n,e,t,r=[1,1],s="valid",a,o,u=null){return ve(()=>{if(a==null&&(a=Bl()),rs(a),n.rank!==3&&n.rank!==4)throw new le(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${n.rank}.`);if(e.rank!==3&&e.rank!==4)throw new le(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${n.rank}.`);let c=UR(n,a);if(s==="causal")throw new yn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=gz({x:c,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:t,activation:u}),a==="channelsFirst"&&(c=Rn(c,[0,3,1,2])),c})}function Hee(n,e,t,r=[1,1,1],s="valid",a,o){return ve(()=>{if(a==null&&(a=Bl()),rs(a),n.rank!==4&&n.rank!==5)throw new le(`conv3dWithBias expects input to be of rank 4 or 5, but received ${n.rank}.`);if(e.rank!==4&&e.rank!==5)throw new le(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${n.rank}.`);let u=KP(n,a);if(s==="causal")throw new yn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return u=xI(u,e,r,s==="same"?"same":"valid","NDHWC",o),t!=null&&(u=Vl(u,t)),a==="channelsFirst"&&(u=Rn(u,[0,4,1,2,3])),u})}class IT extends Cn{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",IT.verifyArgs(t),this.rank=e,Us(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new yn(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=ty(t.kernelSize,e,"kernelSize"),this.strides=ty(t.strides==null?1:t.strides,e,"strides"),this.padding=t.padding==null?"valid":t.padding,So(this.padding),this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,rs(this.dataFormat),this.activation=fd(t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.biasInitializer=Ar(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Is(t.biasConstraint),this.biasRegularizer=Or(t.biasRegularizer),this.activityRegularizer=Or(t.activityRegularizer),this.dilationRate=ty(t.dilationRate==null?1:t.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new le(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new le(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new le(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Ou("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!tR(e.kernelSize,"number",1,3))throw new le(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:cd(this.activation),useBias:this.useBias,biasInitializer:Hr(this.biasInitializer),biasRegularizer:yr(this.biasRegularizer),activityRegularizer:yr(this.activityRegularizer),biasConstraint:$s(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class ny extends IT{constructor(e,t){super(e,t),this.kernel=null,ny.verifyArgs(t),this.filters=t.filters,Us(this.filters,"filters"),this.kernelInitializer=Ar(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Is(t.kernelConstraint),this.kernelRegularizer=Or(t.kernelRegularizer)}build(e){e=Hn(e);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new le(`The channel dimension of the input should be defined. Found ${e[t]}`);const r=e[t],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:r}}],this.built=!0}call(e,t){return ve(()=>{e=en(e);let r;const s=this.bias==null?null:this.bias.read(),a=P3(this.activation.getClassName());if(a!=null&&this.rank===2)r=XP(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=Wee(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=XP(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=Hee(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new yn("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Hn(e);const t=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<r.length;++a){const o=Gl(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);t.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(t),s.push(this.filters)):(s.push(this.filters),s=s.concat(t)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Hr(this.kernelInitializer),kernelRegularizer:yr(this.kernelRegularizer),kernelConstraint:$s(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new le(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class ry extends ny{constructor(e){super(2,e),ry.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!tR(e.kernelSize,"number",1,2))throw new le(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}ry.className="Conv2D",Ve(ry);class sy extends ny{constructor(e){super(3,e),sy.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new le(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}sy.className="Conv3D",Ve(sy);class WR extends ry{constructor(e){if(super(e),this.inputSpec=[new bs({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new le(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Hn(e),e.length!==4)throw new le("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new le("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new bs({ndim:4,axes:{[t]:r}})],this.built=!0}call(e,t){return ve(()=>{let r=en(e);if(r.shape.length!==4)throw new le(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,a=s[0];let o,u;this.dataFormat==="channelsFirst"?(o=2,u=3):(o=1,u=2);const c=s[o],d=s[u],m=this.kernelSize[0],g=this.kernelSize[1],y=this.strides[0],x=this.strides[1],S=Mu(c,y,m,this.padding),k=Mu(d,x,g,this.padding),C=[a,S,k,this.filters];this.dataFormat!=="channelsLast"&&(r=Rn(r,[0,2,3,1]));let N=gC(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(N=Rn(N,[0,3,1,2])),this.bias!=null&&(N=Vl(N,this.bias.read(),this.dataFormat)),this.activation!=null&&(N=this.activation.apply(N)),N})}computeOutputShape(e){e=Hn(e);const t=e.slice();let r,s,a;this.dataFormat==="channelsFirst"?(r=1,s=2,a=3):(r=3,s=1,a=2);const o=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],d=this.strides[1];return t[r]=this.filters,t[s]=Mu(t[s],c,o,this.padding),t[a]=Mu(t[a],d,u,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}WR.className="Conv2DTranspose",Ve(WR);class HR extends sy{constructor(e){if(super(e),this.inputSpec=[new bs({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new le(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Hn(e),e.length!==5)throw new le("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null)throw new le("The channel dimension of the inputs should be defined. Found `None`.");const r=e[t],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new bs({ndim:5,axes:{[t]:r}})],this.built=!0}call(e,t){return ve(()=>{let r=en(e);if(r.shape.length!==5)throw new le(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,a=s[0];let o,u,c;this.dataFormat==="channelsFirst"?(c=2,o=3,u=4):(c=1,o=2,u=3);const d=s[c],m=s[o],g=s[u],y=this.kernelSize[0],x=this.kernelSize[1],S=this.kernelSize[2],k=this.strides[0],C=this.strides[1],N=this.strides[2],$=Mu(d,k,y,this.padding),A=Mu(m,C,x,this.padding),D=Mu(g,N,S,this.padding),L=[a,$,A,D,this.filters];this.dataFormat!=="channelsLast"&&(r=Rn(r,[0,2,3,4,1]));let P=wI(r,this.kernel.read(),L,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(P=Rn(P,[0,4,1,2,3])),this.bias!==null&&(P=Vl(P,this.bias.read(),this.dataFormat)),this.activation!==null&&(P=this.activation.apply(P)),P})}computeOutputShape(e){e=Hn(e);const t=e.slice();let r,s,a,o;this.dataFormat==="channelsFirst"?(r=1,s=2,a=3,o=4):(r=4,s=1,a=2,o=3);const u=this.kernelSize[0],c=this.kernelSize[1],d=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2];return t[r]=this.filters,t[s]=Mu(t[s],m,u,this.padding),t[a]=Mu(t[a],g,c,this.padding),t[o]=Mu(t[o],y,d,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}HR.className="Conv3DTranspose",Ve(HR);class YP extends ny{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,t.filters==null)throw new le("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(t.kernelInitializer!=null||t.kernelRegularizer!=null||t.kernelConstraint!=null)throw new le("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(t.padding!=null&&t.padding!=="same"&&t.padding!=="valid")throw new le(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=Ar(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Or(t.depthwiseRegularizer),this.depthwiseConstraint=Is(t.depthwiseConstraint),this.pointwiseInitializer=Ar(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Or(t.pointwiseRegularizer),this.pointwiseConstraint=Is(t.pointwiseConstraint)}build(e){if(e=Hn(e),e.length<this.rank+2)throw new le(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[t]==null||e[t]<0)throw new le(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const r=e[t],s=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let u=0;u<this.rank;++u)a.push(1);a.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new bs({ndim:this.rank+2,axes:{[t]:r}})],this.built=!0}call(e,t){return ve(()=>{e=en(e);let r;if(this.rank===1)throw new yn("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=Rn(e,[0,2,3,1])),r=_C(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Vl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=Rn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Hr(this.depthwiseInitializer),e.pointwiseInitializer=Hr(this.pointwiseInitializer),e.depthwiseRegularizer=yr(this.depthwiseRegularizer),e.pointwiseRegularizer=yr(this.pointwiseRegularizer),e.depthwiseConstraint=$s(this.depthwiseConstraint),e.pointwiseConstraint=$s(this.pointwiseConstraint),e}}YP.className="SeparableConv";class jR extends YP{constructor(e){super(2,e)}}jR.className="SeparableConv2D",Ve(jR);class u0 extends ny{constructor(e){super(1,e),u0.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!tR(e.kernelSize,"number",1,1))throw new le(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}u0.className="Conv1D",Ve(u0);class GR extends Cn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return ve(()=>{if(e=en(e),this.dataFormat==="channelsLast"){const r=iT(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return iT(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=iT(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return iT(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}GR.className="Cropping2D",Ve(GR);class qR extends Cn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rs(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,ZZ(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const t=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],t,r]}else{const t=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],t,r,e[3]]}}call(e,t){return ve(()=>{let r=en(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=Rn(r,[0,2,3,1]);const a=this.size[0]*s[2],o=this.size[1]*s[3],u=this.interpolation==="nearest"?Ko.resizeNearestNeighbor(r,[a,o]):Ko.resizeBilinear(r,[a,o]);return Rn(u,[0,3,1,2])}else{const a=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?Ko.resizeNearestNeighbor(r,[a,o]):Ko.resizeBilinear(r,[a,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}}qR.className="UpSampling2D",Ve(qR);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jee(n,e,t=[1,1],r="valid",s,a){return ve(()=>{s==null&&(s=Bl()),rs(s);let o=UR(n,s);if(n.rank!==4)throw new le(`Input for depthwiseConv2d is required to be 4-D, but is instead ${n.rank}-D`);if(e.rank!==4)throw new le(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=Mg(o,e,t,r==="same"?"same":"valid","NHWC",a),s==="channelsFirst"&&(o=Rn(o,[0,3,1,2])),o})}class KR extends IT{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Ar(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Is(e.depthwiseConstraint),this.depthwiseRegularizer=Or(e.depthwiseRegularizer)}build(e){if(e=Hn(e),e.length<4)throw new le(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t=this.dataFormat==="channelsFirst"?1:3;if(e[t]==null||e[t]<0)throw new le(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const r=e[t],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ve(()=>{e=en(e);let r=jee(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Vl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Hn(e);const t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Gl(t,this.kernelSize[0],this.padding,this.strides[0]),o=Gl(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,a,o]:[e[0],a,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Hr(this.depthwiseInitializer),e.depthwiseRegularizer=yr(this.depthwiseRegularizer),e.depthwiseConstraint=$s(this.depthwiseRegularizer),e}}KR.className="DepthwiseConv2D",Ve(KR);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QP(n,e,t,r){if(Array.isArray(n)){if(e!=null||t!=null)throw new le("When inputs is an array, neither initialState or constants should be provided");r!=null&&(t=n.slice(n.length-r,n.length),n=n.slice(0,n.length-r)),n.length>1&&(e=n.slice(1,n.length)),n=n[0]}function s(a){return a==null||Array.isArray(a)?a:[a]}return e=s(e),t=s(t),{inputs:n,initialState:e,constants:t}}function ZP(n,e,t,r=!1,s,a,o=!1,u=!1){return ve(()=>{const c=e.shape.length;if(c<3)throw new le(`Input should be at least 3D, but is ${c}D.`);const d=[1,0].concat(Pl(2,c));e=Rn(e,d),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=nt(nt(s,"bool"),"float32"),s.rank===c-1&&(s=ca(s,-1)),s=Rn(s,d)),r&&(e=bo(e,0),s!=null&&(s=bo(s,0)));const m=[];let g,y=t;const x=e.shape[0],S=xo(e);let k;s!=null&&(k=xo(s));for(let N=0;N<x;++N){const $=S[N],A=ve(()=>n($,y));if(s==null)g=A[0],y=A[1];else{const D=ve(()=>{const L=k[N],P=bt(Hi(L),L),W=Be(ae(A[0],L),ae(y[0],P)),B=y.map((G,X)=>Be(ae(A[1][X],L),ae(G,P)));return{output:W,newStates:B}});g=D.output,y=D.newStates}u&&m.push(g)}let C;return u&&(C=ja(m,1)),[g,C,y]})}class ql extends Cn{constructor(e){super(e);let t;if(e.cell==null)throw new le("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?t=new _T({cells:e.cell}):t=e.cell,t.stateSize==null)throw new le("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new bs({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Pl(0,e).map(t=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){pR(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const r=t[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const a=[];for(const o of t)a.push([e[0],o]);return[s].concat(a)}else return s}computeMask(e,t){return ve(()=>{Array.isArray(t)&&(t=t[0]);const r=this.returnSequences?t:null;if(this.returnState){const s=this.states.map(a=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let r=0;r<e;++r)t.push(null);return t}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new yn("Constants support is not implemented in RNN yet.");pR(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new bs({shape:[t,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!Nn(this.stateSpec.map(o=>o.shape[o.shape.length-1]),a))throw new le(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(o=>new bs({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){ve(()=>{if(!this.stateful)throw new Au("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new le("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>vs([r,s])):this.states_=[vs([r,this.cell.stateSize])];else if(e==null)un(this.states_),this.keptStates!=null&&(un(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>vs([r,s])):this.states_[0]=vs([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new le(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t===!0?this.keptStates.push(this.states_.slice()):un(this.states_);for(let s=0;s<this.states_.length;++s){const a=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,u=[r,o];if(!Nn(a.shape,u))throw new le(`State ${s} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${a.shape}`);this.states_[s]=a}}this.states_=this.states_.map(s=>Es(s.clone()))})}apply(e,t){let r=t==null?null:t.initialState,s=t==null?null:t.constants;t==null&&(t={});const a=QP(e,r,s,this.numConstants);e=a.inputs,r=a.initialState,s=a.constants;let o=[],u=[];if(r!=null){t.initialState=r,o=o.concat(r),this.stateSpec=[];for(const d of r)this.stateSpec.push(new bs({shape:d.shape}));u=u.concat(this.stateSpec)}if(s!=null&&(t.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof Ul){const d=[e].concat(o),m=this.inputSpec.concat(u),g=this.inputSpec;this.inputSpec=m;const y=super.apply(d,t);return this.inputSpec=g,y}else return super.apply(e,t)}call(e,t){return ve(()=>{const r=t==null?null:t.mask,s=t==null?null:t.training;let a=t==null?null:t.initialState;e=en(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==o)throw new le(`RNN Layer has ${o} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const u={training:s},d=ZP((S,k)=>{const C=this.cell.call([S].concat(k),u);return[C[0],C.slice(1)]},e,a,this.goBackwards,r,null,this.unroll,this.returnSequences),m=d[0],g=d[1],y=d[2];this.stateful&&this.resetStates(y,s);const x=this.returnSequences?g:m;return this.returnState?[x].concat(y):x})}getInitialState(e){return ve(()=>{let t=vs(e.shape);return t=Ct(t,[1,2]),t=e0(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?aR(t,[1,r]):t):this.cell.stateSize>1?[aR(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(t.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===ql.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}static fromConfig(e,t,r={}){const s=t.cell,a=Wl(s,r);return new e(Object.assign(t,{cell:a}))}}ql.className="RNN",Ve(ql);class c0 extends Cn{}class RT extends c0{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Us(this.units,"units"),this.activation=fd(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ar(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ar(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ar(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Or(e.kernelRegularizer),this.recurrentRegularizer=Or(e.recurrentRegularizer),this.biasRegularizer=Or(e.biasRegularizer),this.kernelConstraint=Is(e.kernelConstraint),this.recurrentConstraint=Is(e.recurrentConstraint),this.biasConstraint=Is(e.biasConstraint),this.dropout=Qg([1,od([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Qg([1,od([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Hn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ve(()=>{if(e=e,e.length!==2)throw new le(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=t.training==null?!1:t.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=dd({ones:()=>Hi(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=dd({ones:()=>Hi(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let a;const o=this.dropoutMask,u=this.recurrentDropoutMask;o!=null?a=Lu(ae(e,o),this.kernel.read()):a=Lu(e,this.kernel.read()),this.bias!=null&&(a=Vl(a,this.bias.read())),u!=null&&(r=ae(r,u));let c=Be(a,Lu(r,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:cd(this.activation),useBias:this.useBias,kernelInitializer:Hr(this.kernelInitializer),recurrentInitializer:Hr(this.recurrentInitializer),biasInitializer:Hr(this.biasInitializer),kernelRegularizer:yr(this.kernelRegularizer),recurrentRegularizer:yr(this.recurrentRegularizer),biasRegularizer:yr(this.biasRegularizer),activityRegularizer:yr(this.activityRegularizer),kernelConstraint:$s(this.kernelConstraint),recurrentConstraint:$s(this.recurrentConstraint),biasConstraint:$s(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}RT.className="SimpleRNNCell",Ve(RT);class XR extends ql{constructor(e){e.cell=new RT(e),super(e)}call(e,t){return ve(()=>{this.cell.dropoutMask!=null&&(un(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(un(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,t){return new e(t)}}XR.className="SimpleRNN",Ve(XR);class DT extends c0{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new le("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Us(this.units,"units"),this.activation=fd(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=fd(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ar(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ar(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ar(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Or(e.kernelRegularizer),this.recurrentRegularizer=Or(e.recurrentRegularizer),this.biasRegularizer=Or(e.biasRegularizer),this.kernelConstraint=Is(e.kernelConstraint),this.recurrentConstraint=Is(e.recurrentConstraint),this.biasConstraint=Is(e.biasConstraint),this.dropout=Qg([1,od([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Qg([1,od([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Hn(e);const t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return ve(()=>{if(e=e,e.length!==2)throw new le(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training==null?!1:t.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=dd({ones:()=>Hi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=dd({ones:()=>Hi(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let u,c,d;0<this.dropout&&this.dropout<1&&(e=ae(e,a[0]));let m=Lu(e,this.kernel.read());this.useBias&&(m=Vl(m,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ae(s,o[0]));const g=this.recurrentKernel.read(),[y,x]=bi(g,[2*this.units,this.units],g.rank-1),S=Lu(s,y),[k,C,N]=bi(m,3,m.rank-1),[$,A]=bi(S,2,S.rank-1);u=this.recurrentActivation.apply(Be(k,$)),c=this.recurrentActivation.apply(Be(C,A));const D=Lu(ae(c,s),x);d=this.activation.apply(Be(N,D));const L=Be(ae(u,s),ae(Be(1,Sr(u)),d));return[L,L]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:cd(this.activation),recurrentActivation:cd(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Hr(this.kernelInitializer),recurrentInitializer:Hr(this.recurrentInitializer),biasInitializer:Hr(this.biasInitializer),kernelRegularizer:yr(this.kernelRegularizer),recurrentRegularizer:yr(this.recurrentRegularizer),biasRegularizer:yr(this.biasRegularizer),activityRegularizer:yr(this.activityRegularizer),kernelConstraint:$s(this.kernelConstraint),recurrentConstraint:$s(this.recurrentConstraint),biasConstraint:$s(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}DT.className="GRUCell",Ve(DT);class YR extends ql{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new DT(e),super(e)}call(e,t){return ve(()=>{this.cell.dropoutMask!=null&&(un(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(un(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}YR.className="GRU",Ve(YR);class f0 extends c0{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Us(this.units,"units"),this.activation=fd(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=fd(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Ar(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ar(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ar(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Or(e.kernelRegularizer),this.recurrentRegularizer=Or(e.recurrentRegularizer),this.biasRegularizer=Or(e.biasRegularizer),this.kernelConstraint=Is(e.kernelConstraint),this.recurrentConstraint=Is(e.recurrentConstraint),this.biasConstraint=Is(e.biasConstraint),this.dropout=Qg([1,od([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Qg([1,od([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;e=Hn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,o=this.units;s=new(t=class extends Qo{apply(c,d){const m=a.apply([o]),g=new lT().apply([o]),y=a.apply([o*2]);return G3(G3(m,g),y)}},t.className="CustomInit",t)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return ve(()=>{const r=t.training==null?!1:t.training;if(e=e,e.length!==3)throw new le(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=dd({ones:()=>Hi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=dd({ones:()=>Hi(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,u=this.recurrentDropoutMask;let c,d,m,g;0<this.dropout&&this.dropout<1&&(e=ae(e,o[0]));let y=Lu(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ae(s,u[0])),y=Be(y,Lu(s,this.recurrentKernel.read())),this.useBias&&(y=Vl(y,this.bias.read()));const[x,S,k,C]=bi(y,4,y.rank-1);c=this.recurrentActivation.apply(x),d=this.recurrentActivation.apply(S),m=Be(ae(d,a),ae(c,this.activation.apply(k))),g=this.recurrentActivation.apply(C);const N=ae(g,this.activation.apply(m));return[N,N,m]})}getConfig(){const e=super.getConfig(),t={units:this.units,activation:cd(this.activation),recurrentActivation:cd(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Hr(this.kernelInitializer),recurrentInitializer:Hr(this.recurrentInitializer),biasInitializer:Hr(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:yr(this.kernelRegularizer),recurrentRegularizer:yr(this.recurrentRegularizer),biasRegularizer:yr(this.biasRegularizer),activityRegularizer:yr(this.activityRegularizer),kernelConstraint:$s(this.kernelConstraint),recurrentConstraint:$s(this.recurrentConstraint),biasConstraint:$s(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}f0.className="LSTMCell",Ve(f0);class QR extends ql{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new f0(e),super(e)}call(e,t){return ve(()=>{this.cell.dropoutMask!=null&&(un(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(un(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=t==null?null:t.mask,s=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,t){return t.implmentation===0&&(t.implementation=1),new e(t)}}QR.className="LSTM",Ve(QR);class _T extends c0{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return ve(()=>{e=e;let r=e.slice(1);const s=[];for(const u of this.cells.slice().reverse())Array.isArray(u.stateSize)?s.push(r.splice(0,u.stateSize.length)):s.push(r.splice(0,1));s.reverse();const a=[];let o;for(let u=0;u<this.cells.length;++u){const c=this.cells[u];r=s[u],u===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=c.call(o,t),a.push(o.slice(1))}r=[];for(const u of a.slice().reverse())r.push(...u);return[o[0]].concat(r)})}build(e){pR(e)&&(e=e[0]),e=e;let t;this.cells.forEach((r,s)=>{Qh(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?t=r.stateSize[0]:t=r.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){const e=super.getConfig(),t=a=>({className:a.getClassName(),config:a.getConfig()}),s={cells:this.cells.map(t)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,t,r={}){const s=[];for(const a of t.cells)s.push(Wl(a,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const r of this.cells)t.push(...r.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return mR(e)}setWeights(e){const t=[];for(const r of this.cells){const s=r.weights.length,a=e.splice(s);for(let o=0;o<r.weights.length;++o)t.push([r.weights[o],a[o]])}gR(t)}}_T.className="StackedRNNCells",Ve(_T);function dd(n){const{ones:e,rate:t,training:r=!1,count:s=1,dropoutFunc:a}=n,o=()=>a!=null?a(e(),t):K3(e(),t),u=()=>n0(o,e,r);return!s||s<=1?Es(u().clone()):Array(s).fill(void 0).map(u).map(d=>Es(d.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Gee=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class JP extends ql{constructor(e){if(e.unroll)throw new yn("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new yn("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new bs({ndim:5})]}call(e,t){return ve(()=>{if(this.cell.dropoutMask!=null&&(un(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(un(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new le("ConvRNN2D cell does not support constants");const r=t==null?null:t.mask,s=t==null?null:t.training,a=t==null?null:t.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return ve(()=>{const{stateSize:t}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),a=[s[0],...s.slice(2)],o=vs(a);return Array.isArray(t)?Array(t.length).fill(o):[o]})}resetStates(e,t=!1){ve(()=>{if(!this.stateful)throw new Au("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),a=[s[0],...s.slice(2)];if(r[0]==null)throw new le("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>vs(a)):this.states_=[vs(a)];else if(e==null)un(this.states_),this.keptStates!=null&&(un(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>vs(a)):this.states_[0]=vs(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new le(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):un(this.states_);for(let u=0;u<this.states_.length;++u){const c=e[u],d=a;if(!Nn(c.shape,d))throw new le(`State ${u} is incompatible with layer ${this.name}: expected shape=${d}, received shape=${c.shape}`);this.states_[u]=c}}this.states_=this.states_.map(u=>Es(u.clone()))})}computeSingleOutputShape(e){const{dataFormat:t,filters:r,kernelSize:s,padding:a,strides:o,dilationRate:u}=this.cell,c=t==="channelsFirst",d=e[c?3:2],m=e[c?4:3],g=Gl(d,s[0],a,o[0],u[0]),y=Gl(m,s[1],a,o[1],u[1]);return[...e.slice(0,2),...c?[r,g,y]:[g,y,r]]}}JP.className="ConvRNN2D";class AT extends f0{constructor(e){const{filters:t,kernelSize:r,strides:s,padding:a,dataFormat:o,dilationRate:u}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Us(this.filters,"filters"),this.kernelSize=ty(r,2,"kernelSize"),this.kernelSize.forEach(c=>Us(c,"kernelSize")),this.strides=ty(s||1,2,"strides"),this.strides.forEach(c=>Us(c,"strides")),this.padding=a||"valid",So(this.padding),this.dataFormat=o||"channelsLast",rs(this.dataFormat),this.dilationRate=ty(u||1,2,"dilationRate"),this.dilationRate.forEach(c=>Us(c,"dilationRate"))}build(e){var t;e=Hn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new le(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],a=4,o=this.kernelSize.concat([s,this.filters*a]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const u=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",u,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){const d=this.biasInitializer,m=this.filters;c=new(t=class extends Qo{apply(y,x){const S=d.apply([m]),k=vi([m]),C=d.apply([m*2]);return sR([S,k,C])}},t.className="CustomInit",t)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return ve(()=>{if(e.length!==3)throw new le(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=t.training||!1,s=e[0],a=e[1],o=e[2],u=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=dd({ones:()=>Hi(s),rate:this.dropout,training:r,count:u,dropoutFunc:this.dropoutFunc}));const c=this.dropoutMask,d=(ce,K,Z)=>!K||!K[Z]?ce:ae(K[Z],ce);let m=d(s,c,0),g=d(s,c,1),y=d(s,c,2),x=d(s,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=dd({ones:()=>Hi(a),rate:this.recurrentDropout,training:r,count:u,dropoutFunc:this.dropoutFunc}));const S=this.recurrentDropoutMask;let k=d(a,S,0),C=d(a,S,1),N=d(a,S,2),$=d(a,S,3);const A=3,[D,L,P,W]=bi(this.kernel.read(),u,A),[B,G,X,re]=this.useBias?bi(this.bias.read(),u):[null,null,null,null];m=this.inputConv(m,D,B,this.padding),g=this.inputConv(g,L,G,this.padding),y=this.inputConv(y,P,X,this.padding),x=this.inputConv(x,W,re,this.padding);const[ue,ne,me,ge]=bi(this.recurrentKernel.read(),u,A);k=this.recurrentConv(k,ue),C=this.recurrentConv(C,ne),N=this.recurrentConv(N,me),$=this.recurrentConv($,ge);const be=this.recurrentActivation.apply(Be(m,k)),pe=this.recurrentActivation.apply(Be(g,C)),te=Be(ae(pe,o),ae(be,this.activation.apply(Be(y,N)))),ye=ae(this.recurrentActivation.apply(Be(x,$)),this.activation.apply(te));return[ye,ye,te]})}getConfig(){const e=super.getConfig(),{units:t}=e,r=Gee(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,t,r,s){const a=Mc(e,t,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Vl(a,r,this.dataFormat):a}recurrentConv(e,t){return Mc(e,t,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}AT.className="ConvLSTM2DCell",Ve(AT);class ZR extends JP{constructor(e){const t=new AT(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}}ZR.className="ConvLSTM2D",Ve(ZR);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class OT extends Cn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const t=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?t[s]:this.noiseShape[s]);return r}call(e,t){return ve(()=>{this.invokeCallHook(e,t);const r=en(e);if(0<this.rate&&this.rate<1){const s=t.training==null?!1:t.training,a=this.getNoiseShape(r);return n0(()=>K3(r,this.rate,a,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}OT.className="Dropout",Ve(OT);class JR extends OT{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}JR.className="SpatialDropout1D",Ve(JR);class eD extends Cn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let t=null;e.batchSize!=null&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Us(this.units,"units"),this.activation=fd(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Ar(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Ar(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Is(e.kernelConstraint),this.biasConstraint=Is(e.biasConstraint),this.kernelRegularizer=Or(e.kernelRegularizer),this.biasRegularizer=Or(e.biasRegularizer),this.activityRegularizer=Or(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Hn(e);const t=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=Hn(e);const t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return ve(()=>{this.invokeCallHook(e,t);const r=en(e),s=P3(this.activation.getClassName());let a;return s!=null?a=Lu(r,this.kernel.read(),s,this.bias?this.bias.read():null):(a=Lu(r,this.kernel.read()),this.bias!=null&&(a=Vl(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:cd(this.activation),useBias:this.useBias,kernelInitializer:Hr(this.kernelInitializer),biasInitializer:Hr(this.biasInitializer),kernelRegularizer:yr(this.kernelRegularizer),biasRegularizer:yr(this.biasRegularizer),activityRegularizer:yr(this.activityRegularizer),kernelConstraint:$s(this.kernelConstraint),biasConstraint:$s(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}eD.className="Dense",Ve(eD);class tD extends Cn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Hn(e);for(const t of e.slice(1))if(t==null)throw new le(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],id(e,1)]}call(e,t){return ve(()=>{this.invokeCallHook(e,t);let r=en(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let a=2;a<r.rank;++a)s.push(a);s.push(1),r=Rn(r,s)}return sJ(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}tD.className="Flatten",Ve(tD);class nD extends Cn{constructor(e){super(e),this.supportsMasking=!0,this.activation=fd(e.activation)}call(e,t){return ve(()=>{this.invokeCallHook(e,t);const r=en(e);return this.activation.apply(r)})}getConfig(){const e={activation:cd(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}nD.className="Activation",Ve(nD);class rD extends Cn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return ve(()=>(e=en(e),nJ(e,this.n)))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}rD.className="RepeatVector",Ve(rD);class sD extends Cn{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,t){const r="Total size of new array must be unchanged.",s=t.slice();let a=1,o=null;for(let c=0;c<s.length;++c){const d=s[c];if(this.isUnknown(d))if(o===null)o=c;else throw new le("Can only specifiy one unknown dimension.");else a*=d}const u=id(e);if(o!==null){if(a===0||u%a!==0)throw new le(r);s[o]=u/a}else if(u!==a)throw new le(r);return s}computeOutputShape(e){let t=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return ve(()=>{this.invokeCallHook(e,t);const r=en(e),s=r.shape,a=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return oe(r,a)})}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}sD.className="Reshape",Ve(sD);class aD extends Cn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=Pl(1,e.dims.length+1);if(!Nn(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new bs({ndim:this.dims.length+1})]}computeOutputShape(e){e=Hn(e);const t=e.slice();return this.dims.forEach((r,s)=>{t[s+1]=e[r]}),t}call(e,t){return Rn(en(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}aD.className="Permute",Ve(aD);class iD extends Cn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const r=en(e);return Nx(Bh(r,this.maskValue),-1)}call(e,t){return ve(()=>{this.invokeCallHook(e,t);const r=en(e),o=Nx(Bh(r,this.maskValue),-1,!0);return ae(r,nt(o,r.dtype))})}}iD.className="Masking",Ve(iD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class oD extends Cn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let t=null;e.batchSize!=null&&(t=e.batchSize),e.inputLength==null?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(rr(e.inputLength))}this.inputDim=e.inputDim,Us(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Us(this.outputDim,"outputDim"),this.embeddingsInitializer=Ar(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Or(e.embeddingsRegularizer),this.activityRegularizer=Or(e.activityRegularizer),this.embeddingsConstraint=Is(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return ve(()=>this.maskZero?(e=en(e),Bh(e,_n(e))):null)}computeOutputShape(e){if(e=Hn(e),this.inputLength==null)return[...e,this.outputDim];const t=rr(this.inputLength);if(t.length!==e.length-1)throw new le(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<t.length;++s){const a=t[s],o=e[s+1];if(a!=null&&o!=null&&a!==o)throw new le(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(t[r]=o),r++}}return[e[0],...t,this.outputDim]}call(e,t){return ve(()=>{this.invokeCallHook(e,t);let r=en(e);r.dtype!=="int32"&&(r=Fu(r,"int32"));const s=q3(this.embeddings.read(),oe(r,[r.size]));return oe(s,Hn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Hr(this.embeddingsInitializer),embeddingsRegularizer:yr(this.embeddingsRegularizer),activityRegularizer:yr(this.activityRegularizer),embeddingsConstraint:$s(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}oD.className="Embedding",Ve(oD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tp extends Cn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new yn}computeElementwiseOpOutputShape(e,t){if(e==null||t==null)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(t.length===0)return e;const r=e.slice(0,e.length-t.length);for(let s=0;s<t.length;++s){const a=e[e.length-t.length+s],o=t[s];if(a==null||o==null||a<0||o<0)r.push(null);else if(a===1)r.push(o);else if(o===1)r.push(a);else{if(a!==o)throw new le("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));r.push(a)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Hn(e)]),e=e,e.length<2)throw new le(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const a of e)a!=null&&a[0]!==null&&t.push(a[0]);if(t=ad(t),t.length>1)throw new le(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const o=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const s=e.map(a=>a.length);e.indexOf(null)===-1&&ad(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return ve(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(a=>a.rank);if(s.indexOf(null)===-1){const a=od(s);for(let o of e){const u=o.rank;for(let c=0;c<a-u;++c)o=e0(o,1);r.push(o)}return this.mergeFunction(r)}else{let a=!1;for(const c of e){const d=c.rank;if(d==null){const m=c.shape,g=m[0],y=m.slice(1).concat([g]);let x=oe(c,[g].concat(id(m.slice(1))));x=Rn(x,[1,0]),x=oe(x,y),r.push(x),a=!0}else if(d>1){const m=Pl(1,d).concat([0]);r.push(Rn(c,m)),a=!0}else r.push(c)}let o=this.mergeFunction(r);const u=o.rank;if(a){if(u==null){const c=o.shape,d=c.length,m=c[d-1],g=[m].concat(c.slice(0,c.length-1));o=oe(Rn(oe(o,[-1,m]),[1,0]),g)}else if(u>1){const c=[u-1].concat(Pl(0,u-1));o=Rn(o,c)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let t;e[0]==null?t=null:t=e[0].slice(1);for(let s=1;s<e.length;++s){const a=e[s]==null?null:e[s].slice(1);t=this.computeElementwiseOpOutputShape(t,a)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=ad(r),r.length===1?t=r.concat(t):t=[null].concat(t),t}computeMask(e,t){return ve(()=>{if(t==null)return null;if(!Array.isArray(t))throw new le("`mask` should be an Array");if(!Array.isArray(e))throw new le("`inputs` should be an Array");if(t.length!==e.length)throw new le(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(s=>s==null))return null;t=t.map(s=>s==null?s:ca(s,0));let r=t[0];for(let s=1;s<t.length-1;++s)r=qo(r,t[s]);return r})}}class lD extends tp{constructor(e){super(e)}mergeFunction(e){return ve(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=Be(t,e[r]);return t})}}lD.className="Add",Ve(lD);class uD extends tp{constructor(e){super(e)}mergeFunction(e){return ve(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=ae(t,e[r]);return t})}}uD.className="Multiply",Ve(uD);class cD extends tp{constructor(e){super(e)}mergeFunction(e){return ve(()=>{let t=e[0].clone();for(let r=1;r<e.length;++r)t=Be(t,e[r]);return ae(1/e.length,t)})}}cD.className="Average",Ve(cD);class fD extends tp{constructor(e){super(e)}mergeFunction(e){return ve(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=Du(t,e[r]);return t})}}fD.className="Maximum",Ve(fD);class dD extends tp{constructor(e){super(e)}mergeFunction(e){return ve(()=>{let t=e[0];for(let r=1;r<e.length;++r)t=ed(t,e[r]);return t})}}dD.className="Minimum",Ve(dD);class hD extends tp{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new le("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const s of e)if(s!=null){t=!1;break}if(t)return;const r=[];for(let s=0;s<e.length;++s){const a=e[s].slice();a.splice(this.axis,1);let o=!1;for(const u of r)if(Nn(u,a)){o=!0;break}o||r.push(a)}if(r.length>1)throw new le("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ve(()=>sR(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new le("A `Concatenate` layer should be called on a list of inputs.");const t=e,r=t[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const a of t.slice(1)){if(r[s]==null||a[s]==null){r[s]=null;break}r[s]+=a[s]}return r}computeMask(e,t){if(t==null)return null;if(!Array.isArray(t))throw new le("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new le("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new le(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return ve(()=>{let r=!0;if(t.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const s=[];for(let o=0;o<e.length;++o)t[o]==null?s.push(nt(Hi(e[o]),"bool")):t[o].rank<e[o].rank?s.push(ca(t[o],-1)):s.push(t[o]);const a=es(s,this.axis);return pC(a,-1,!1)})}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}hD.className="Concatenate",Ve(hD);function d0(n,e){for(;n<0;)n+=e;return n}function qee(n,e,t){if(n.shape.length>3||e.shape.length>3)throw new yn("batchDot is not implemented for tensors of 4D or higher rank yet");if(U(n.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${n.shape.length}`),U(n.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof t=="number"&&(t=[t,t]),n.dtype==="complex64"||e.dtype==="complex64")throw new yn("batchDot is not implemented for complex64-type Tensors yet.");const r=n.shape.length,s=e.shape.length;t==null&&(t=[r-1,s-2]);const a=t;return ve(()=>{let o;if(r>s){o=r-s;const c=[];for(let d=0;d<o;++d)c.push(1);e=oe(e,e.shape.concat(c))}else if(s>r){o=s-r;const c=[];for(let d=0;d<o;++d)c.push(1);n=oe(n,n.shape.concat(c))}else o=0;let u;if(n.shape.length===2&&e.shape.length===2)a[0]===a[1]?u=Ct(ae(n,e),a[0]):u=Ct(ae(Rn(n,[1,0]),e),a[1]);else{const c=a[0]!==n.shape.length-1,d=a[1]===e.shape.length-1;u=Sn(n,e,c,d)}if(o>0){let c;r>s?c=r+s-3:c=r-1;const d=[];for(let m=c;m<c+o;++m)d.push(m);u=nd(u,d)}return u.shape.length===1&&(u=ca(u,1)),u})}class pD extends tp{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){U(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0],r=e[1];if(t.length>3||r.length>3)throw new yn("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(t,r);if(t[s[0]]!==r[s[1]])throw new le(`Dimension incompatibility: ${t[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new le(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((a,o)=>d0(a,e[o].shape.length)):s=[d0(this.axes,t.shape.length),d0(this.axes,r.shape.length)],this.normalize&&(t=xT(t,s[0]),r=xT(r,s[1])),qee(t,r,s)}interpretAxes(e,t){let r;return Array.isArray(this.axes)?r=this.axes:r=[d0(this.axes,e.length),d0(this.axes,t.length)],r}computeOutputShape(e){U(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const t=e[0].slice(),r=e[1].slice();if(t.length>3||r.length>3)throw new yn("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(t,r);t.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const a=t.concat(r);return a.length===1&&a.push(1),a}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}pD.className="Dot",Ve(pD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mD extends Cn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return ve(()=>{this.invokeCallHook(e,t);const r=en(e);return n0(()=>Be(oT(r.shape,0,this.stddev),r),()=>r,t.training||!1)})}}mD.className="GaussianNoise",Ve(mD);class gD extends Cn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return ve(()=>{this.invokeCallHook(e,t);const r=en(e);return this.rate>0&&this.rate<1?n0(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return ae(r,oT(r.shape,1,a))},()=>r,t.training||!1):r})}}gD.className="GaussianDropout",Ve(gD);class yD extends Cn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||en(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return ve(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return n0(()=>{const a=en(e),u=-1.6732632423543772*1.0507009873554805;let c=zc(td(r),this.rate);c=Fu(c,"float32");const d=((1-this.rate)*(1+this.rate*u**2))**-.5,m=-d*u*this.rate,g=Be(ae(a,c),ae(Be(c,-1),u));return Be(ae(g,d),m)},()=>en(e),t.training||!1)}return e})}}yD.className="AlphaDropout",Ve(yD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h0(n,e,t,r,s,a=.001){let o;if(n.rank===2)o=cI(n,e,t,r,s,a);else if(n.rank===3)o=fI(n,e,t,r,s,a);else if(n.rank===4)o=dI(n,e,t,r,s,a);else throw new yn(`batchNormalization is not implemented for array of rank ${n.rank} yet`);return o}function Kee(n,e,t,r,s=.001){return ve(()=>{const a=Vx(n,r),o=a.mean,u=a.variance;return[h0(n,o,u,t,e,s),o,u]})}function Xee(n,e,t,r,s=.001){return ve(()=>{const a=Vx(n,r),o=a.mean,u=a.variance,c=[];for(const S of Pl(0,n.rank))r.indexOf(S)!==-1?c.push(1):c.push(n.shape[S]);const d=oe(o,c),m=oe(u,c),g=e==null?null:oe(e,c),y=t==null?null:oe(t,c);return[h0(n,d,m,y,g,s),o,u]})}function Yee(n,e,t,r,s=.001){return Nn(r.slice().sort(),Pl(0,n.rank-1))?Kee(n,e,t,r,s):Xee(n,e,t,r,s)}class vD extends Cn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Ar(e.betaInitializer||"zeros"),this.gammaInitializer=Ar(e.gammaInitializer||"ones"),this.movingMeanInitializer=Ar(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Ar(e.movingVarianceInitializer||"ones"),this.betaConstraint=Is(e.betaConstraint),this.gammaConstraint=Is(e.gammaConstraint),this.betaRegularizer=Or(e.betaRegularizer),this.gammaRegularizer=Or(e.gammaRegularizer)}build(e){e=Hn(e);const t=this.axis>=0?this.axis:this.axis+e.length,r=e[t];if(r==null)throw new le(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new bs({ndim:e.length,axes:{[t]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return ve(()=>{const r=t.training==null?!1:t.training,s=en(e),a=s.shape,o=a.length,u=Pl(0,o),c=this.axis>=0?this.axis:this.axis+o;u.splice(c,1);const d=Kh(1,o);d[c]=a[c];const m=u.slice();m.sort();const g=!Nn(m,Pl(0,o).slice(0,o-1)),y=()=>{if(g){const $=oe(this.movingMean.read(),d),A=oe(this.movingVariance.read(),d),D=this.center?oe(this.beta.read(),d):null,L=this.scale?oe(this.gamma.read(),d):null;return h0(s,$,A,D,L,this.epsilon)}else return h0(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return y();const[x,S,k]=Yee(s,this.gamma.read(),this.beta.read(),u,this.epsilon),C=($,A,D)=>{ve(()=>{const L=1-D,P=$.read(),W=ae(bt(P,A),L);$.write(bt(P,W))})};return(()=>{C(this.movingMean,S,this.momentum),C(this.movingVariance,k,this.momentum)})(),x})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Hr(this.betaInitializer),gammaInitializer:Hr(this.gammaInitializer),movingMeanInitializer:Hr(this.movingMeanInitializer),movingVarianceInitializer:Hr(this.movingVarianceInitializer),betaRegularizer:yr(this.betaRegularizer),gammaRegularizer:yr(this.gammaRegularizer),betaConstraint:$s(this.betaConstraint),gammaConstraint:$s(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}vD.className="BatchNormalization",Ve(vD);class bD extends Cn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const t of this.axis)if(!Number.isInteger(t))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Ar(e.betaInitializer||"zeros"),this.gammaInitializer=Ar(e.gammaInitializer||"ones"),this.betaRegularizer=Or(e.betaRegularizer),this.gammaRegularizer=Or(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Hn(e);const t=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(const a of this.axis)if(a<0||a>=t)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==ad(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>e[a]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,t){const r=en(e),s=r.shape,a=s.length;return ve(()=>{let{mean:u,variance:c}=Vx(r,this.axis,!0);const d=Kh(1,a);for(const k of this.axis)d[k]=s[k];const m=k=>k!=null&&k.shape.length!==a?oe(k,d):k;let g=this.scale?m(this.gamma.read()):null,y=this.center?m(this.beta.read()):null;const x=[],S=[];for(let k=0;k<a;++k)this.axis.indexOf(k)!==-1?(x.push(s[k]),S.push(1)):(x.push(1),S.push(s[k]));return u=vo(u,x),c=vo(c,x),g!=null&&(g=vo(g,S)),y!=null&&(y=vo(y,S)),h0(r,u,c,y,g,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Hr(this.betaInitializer),gammaInitializer:Hr(this.gammaInitializer),betaRegularizer:yr(this.betaRegularizer),gammaRegularizer:yr(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}bD.className="LayerNormalization",Ve(bD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qee(n,e,t){return ve(()=>{if(n.rank!==4)throw new le(`temporalPadding expects input tensor to be 4-D, but received a ${n.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new le("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(t==null&&(t=Bl()),t!=="channelsLast"&&t!=="channelsFirst")throw new le(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return t==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],Pc(n,r)})}class xD extends Cn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Bl():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new le(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,r;if(typeof e.padding[0]=="number")t=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new le(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],e.padding[1].length!==2)throw new le(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[t,r]}this.inputSpec=[new bs({ndim:4})]}computeOutputShape(e){e=Hn(e);let t,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?t=e[2]+this.padding[0][0]+this.padding[0][1]:t=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],t,r]):(e[1]!=null&&e[1]>=0?t=e[1]+this.padding[0][0]+this.padding[0][1]:t=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],t,r,e[3]])}call(e,t){return ve(()=>Qee(en(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}xD.className="ZeroPadding2D",Ve(xD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function FT(n,e,t,r,s,a){return ve(()=>{rs(s),V3(a),So(r),t==null&&(t=[1,1]),r==null&&(r="valid"),s==null&&(s=Bl()),a==null&&(a="max"),n=UR(n,s);let o;const u=r==="same"?"same":"valid";return a==="max"?o=Bx(n,e,t,u):o=Dx(n,e,t,u),s==="channelsFirst"&&(o=Rn(o,[0,3,1,2])),o})}function eB(n,e,t,r,s,a){return ve(()=>{rs(s),V3(a),So(r),t==null&&(t=[1,1,1]),r==null&&(r="valid"),s==null&&(s=Bl()),a==null&&(a="max"),n=KP(n,s);let o;const u=r==="same"?"same":"valid";return a==="max"?o=FI(n,e,t,u):o=uI(n,e,t,u),s==="channelsFirst"&&(o=Rn(o,[0,4,1,2,3])),o})}class tB extends Cn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new le(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Us(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new le(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Us(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,So(this.padding),this.inputSpec=[new bs({ndim:3})]}computeOutputShape(e){e=Hn(e);const t=Gl(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return ve(()=>{this.invokeCallHook(e,t),e=e0(en(e),2);const r=this.poolingFunction(en(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return nd(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class wD extends tB{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return rs(a),So(s),FT(e,t,r,s,a,"max")}}wD.className="MaxPooling1D",Ve(wD);class SD extends tB{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return rs(a),So(s),FT(e,t,r,s,a,"avg")}}SD.className="AveragePooling1D",Ve(SD);class nB extends Cn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new le(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Us(this.poolSize,"poolSize"),Us(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rs(this.dataFormat),So(this.padding),this.inputSpec=[new bs({ndim:4})]}computeOutputShape(e){e=Hn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return t=Gl(t,this.poolSize[0],this.padding,this.strides[0]),r=Gl(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r]:[e[0],t,r,e[3]]}call(e,t){return ve(()=>(this.invokeCallHook(e,t),this.poolingFunction(en(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class CD extends nB{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return rs(a),So(s),FT(e,t,r,s,a,"max")}}CD.className="MaxPooling2D",Ve(CD);class TD extends nB{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return rs(a),So(s),FT(e,t,r,s,a,"avg")}}TD.className="AveragePooling2D",Ve(TD);class rB extends Cn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new le(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Us(this.poolSize,"poolSize"),Us(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rs(this.dataFormat),So(this.padding),this.inputSpec=[new bs({ndim:5})]}computeOutputShape(e){e=Hn(e);let t=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return t=Gl(t,this.poolSize[0],this.padding,this.strides[0]),r=Gl(r,this.poolSize[1],this.padding,this.strides[1]),s=Gl(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],t,r,s]:[e[0],t,r,s,e[4]]}call(e,t){return ve(()=>(this.invokeCallHook(e,t),this.poolingFunction(en(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class kD extends rB{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return rs(a),So(s),eB(e,t,r,s,a,"max")}}kD.className="MaxPooling3D",Ve(kD);class ED extends rB{constructor(e){super(e)}poolingFunction(e,t,r,s,a){return rs(a),So(s),eB(e,t,r,s,a,"avg")}}ED.className="AveragePooling3D",Ve(ED);class sB extends Cn{constructor(e){super(e),this.inputSpec=[new bs({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new yn}}class ND extends sB{constructor(e){super(e||{})}call(e,t){return ve(()=>{const r=en(e);return Wr(r,1)})}}ND.className="GlobalAveragePooling1D",Ve(ND);class $D extends sB{constructor(e){super(e||{})}call(e,t){return ve(()=>{const r=en(e);return yo(r,1)})}}$D.className="GlobalMaxPooling1D",Ve($D);class aB extends Cn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rs(this.dataFormat),this.inputSpec=[new bs({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new yn}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class ID extends aB{call(e,t){return ve(()=>{const r=en(e);return this.dataFormat==="channelsLast"?Wr(r,[1,2]):Wr(r,[2,3])})}}ID.className="GlobalAveragePooling2D",Ve(ID);class RD extends aB{call(e,t){return ve(()=>{const r=en(e);return this.dataFormat==="channelsLast"?yo(r,[1,2]):yo(r,[2,3])})}}RD.className="GlobalMaxPooling2D",Ve(RD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iB extends Cn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,r={}){const s=t.layer,a=Wl(s,r);delete t.layer;const o={layer:a};return Object.assign(o,t),new e(o)}}class DD extends iB{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Hn(e),e.length<3)throw new le(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Hn(e);const t=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(t),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,t){return ve(()=>(e=en(e),ZP((o,u)=>[en(this.layer.call(o,t)),[]],e,[],!1,null,null,!1,!0)[1]))}}DD.className="TimeDistributed",Ve(DD);function Zee(n){Yh(QZ,"BidirectionalMergeMode",n)}const Jee="concat";class _D extends iB{constructor(e){super(e);const t=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=t,this.forwardLayer=Wl(r),t.goBackwards=t.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=t,this.backwardLayer=Wl(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?Jee:e.mergeMode,Zee(this.mergeMode),e.weights)throw new yn("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,r=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;let r,s,a;return this.returnState&&(a=t.slice(1)),r=t[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):xi(s)}apply(e,t){let r=t==null?null:t.initialState,s=t==null?null:t.constants;t==null&&(t={});const a=QP(e,r,s,this.numConstants);if(e=a.inputs,r=a.initialState,s=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,t);const o=[],u=[];if(r!=null){const d=r.length;if(d%2>0)throw new le("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push(...r);const m=r.map(g=>new bs({shape:g.shape}));this.forwardLayer.stateSpec=m.slice(0,d/2),this.backwardLayer.stateSpec=m.slice(d/2),u.push(...m)}if(s!=null)throw new yn("Support for constants in Bidirectional layers is not implemented yet.");const c=o[0]instanceof Ul;for(const d of o)if(d instanceof Ul!==c)throw new le("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){const d=[e].concat(o),m=this.inputSpec.concat(u),g=this.inputSpec;this.inputSpec=m;const y=super.apply(d,t);return this.inputSpec=g,y}else return super.apply(e,t)}call(e,t){return ve(()=>{const r=t.initialState;let s,a;if(r==null)s=this.forwardLayer.call(e,t),a=this.backwardLayer.call(e,t);else{const c=r.slice(0,r.length/2),d=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(t,{initialState:c})),a=this.backwardLayer.call(e,Object.assign(t,{initialState:d}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(a.slice(1))),s=s[0],a=a[0]),this.returnSequences&&(a=bo(a,1));let u;return this.mergeMode==="concat"?u=sR([s,a]):this.mergeMode==="sum"?u=Be(s,a):this.mergeMode==="ave"?u=ae(.5,Be(s,a)):this.mergeMode==="mul"?u=ae(s,a):this.mergeMode==null&&(u=[s,a]),this.returnState?this.mergeMode==null?u.concat(o):[u].concat(o):u})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Qh(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Qh(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){Array.isArray(t)&&(t=t[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[t,t]:r=t:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const r=Wl(t.layer);if(delete t.layer,t.numConstants!=null)throw new yn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=t;return s.layer=r,new e(s)}}_D.className="Bidirectional",Ve(_D);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AD extends Cn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return ve(()=>(e=en(e),e.dtype!=="float32"&&(e=Fu(e,"float32")),Be(ae(e,this.scale),this.offset)))}}AD.className="Rescaling",Ve(AD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:ete,cropAndResize:tte}=Ko;class OD extends Cn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,r,s,a,o,u,c){return ve(()=>{let d,m=!1;const g=t/o,y=r/u,x=(s+t)/o,S=(a+r)/u,k=[g,y,x,S],C=[];e.rank===3?(m=!0,d=ja([e])):d=e;for(let L=0;L<d.shape[0];L++)C.push(k);const N=Vi(C,[C.length,4]),$=Uh(0,C.length,1,"int32"),D=tte(d,N,$,[s,a],"nearest");return Fu(m?en(xo(D)):D,c)})}upsize(e,t,r,s){return ve(()=>{const a=ete(e,[t,r]);return Fu(a,s)})}call(e,t){return ve(()=>{const r=en(e),s=r.dtype,a=r.shape,o=a[a.length-3],u=a[a.length-2];let c=0;o!==this.height&&(c=Math.floor((o-this.height)/2));let d=0;return u!==this.width&&(d=Math.floor((u-this.width)/2),d===0&&(d=1)),c>=0&&d>=0?this.centerCrop(r,c,d,this.height,this.width,o,u,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=Hn(e);const t=e.length-3,r=e.length-2;return e[t]=this.height,e[r]=this.width,e}}OD.className="CenterCrop",Ve(OD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nte(n,e,t,r){let s=en(n);if(s.dtype!=="int32"&&(s=Fu(s,"int32")),e==="int")return s;const a=s.shape;if(s.rank===0&&(s=ca(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=ca(s,-1)),s.rank>2)throw new le(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(e),u=s;let c;if(typeof r<"u"&&e==="count"?c=bC(u,r,t,o):c=bC(u,[],t,o),e!=="tfIdf")return c;if(r)return ae(c,r);throw new le("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class FD extends Cn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return e=Hn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return ve(()=>{e=en(e),e.dtype!=="int32"&&(e=Fu(e,"int32"));let r;if(typeof t.countWeights<"u"){if(this.outputMode!=="count")throw new le(`countWeights is not used when outputMode !== count.
              Received countWeights=${t.countWeights}`);r=en(t.countWeights)}const s=yo(e),a=Pg(e),o=Ha(this.numTokens,s).bufferSync().get(0),u=zc(a,0).bufferSync().get(0);if(!(o&&u))throw new le(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return nte(e,this.outputMode,this.numTokens,r)})}}FD.className="CategoryEncoding",Ve(FD);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const rte=["bilinear","nearest"],oB=new Set(rte);class LD extends Cn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(oB.has(e.interpolation))this.interpolation=e.interpolation;else throw new le(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Hn(e);const t=e[2];return[this.height,this.width,t]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return ve(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Ko.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Ko.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...oB]} are supported`)})}}LD.className="Resizing",Ve(LD);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lB{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}lB.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class uB extends Cn{constructor(e){super(e),this.randomGenerator=new lB(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}}uB.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ste=["bilinear","nearest"],cB=new Set(ste);class MD extends uB{constructor(e){super(e);const{factor:t,interpolation:r="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new le(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new le(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new le(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(cB.has(r))this.interpolation=r;else throw new le(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){e=Hn(e);const t=e[2];return[this.imgHeight,-1,t]}call(e,t){return ve(()=>{const r=en(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=td([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*s;a=Math.round(a);const o=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return Ko.resizeBilinear(e,o);case"nearest":return Ko.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...cB]} are supported`)}})}}MD.className="RandomWidth",Ve(MD);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ate(n){return new Zg(n)}function ite(n){return new PR(n)}function ote(n){return new LR(n)}function lte(n){return new MR(n)}function ute(n){return new zR(n)}function cte(n){return new VR(n)}function fte(n){return new BR(n)}function dte(n){return new u0(n)}function hte(n){return new ry(n)}function pte(n){return new WR(n)}function mte(n){return new sy(n)}function gte(n){return new HR(n)}function yte(n){return new jR(n)}function vte(n){return new GR(n)}function bte(n){return new qR(n)}function xte(n){return new KR(n)}function wte(n){return new nD(n)}function Ste(n){return new eD(n)}function Cte(n){return new OT(n)}function Tte(n){return new JR(n)}function kte(n){return new tD(n)}function Ete(n){return new rD(n)}function Nte(n){return new sD(n)}function $te(n){return new aD(n)}function Ite(n){return new oD(n)}function Rte(n){return new lD(n)}function Dte(n){return new cD(n)}function _te(n){return new hD(n)}function Ate(n){return new fD(n)}function Ote(n){return new dD(n)}function Fte(n){return new uD(n)}function Lte(n){return new pD(n)}function Mte(n){return new vD(n)}function zte(n){return new bD(n)}function Pte(n){return new xD(n)}function zD(n){return new SD(n)}function Bte(n){return zD(n)}function Vte(n){return zD(n)}function PD(n){return new TD(n)}function Ute(n){return PD(n)}function Wte(n){return PD(n)}function BD(n){return new ED(n)}function Hte(n){return BD(n)}function jte(n){return BD(n)}function Gte(n){return new ND(n)}function qte(n){return new ID(n)}function fB(n){return new $D(n)}function dB(n){return new RD(n)}function hB(n){return new wD(n)}function pB(n){return new CD(n)}function Kte(n){return new kD(n)}function Xte(n){return new YR(n)}function Yte(n){return new DT(n)}function Qte(n){return new QR(n)}function Zte(n){return new f0(n)}function Jte(n){return new XR(n)}function ene(n){return new RT(n)}function tne(n){return new ZR(n)}function nne(n){return new AT(n)}function rne(n){return new ql(n)}function sne(n){return new _T(n)}function ane(n){return new _D(n)}function ine(n){return new DD(n)}const one=fB,lne=dB,une=hB,cne=pB;function fne(n){return new mD(n)}function dne(n){return new gD(n)}function hne(n){return new yD(n)}function pne(n){return new iD(n)}function mne(n){return new AD(n)}function gne(n){return new OD(n)}function yne(n){return new LD(n)}function vne(n){return new FD(n)}function bne(n){return new MD(n)}const xne=Object.freeze(Object.defineProperty({__proto__:null,Layer:Cn,RNN:ql,RNNCell:c0,activation:wte,add:Rte,alphaDropout:hne,average:Dte,averagePooling1d:zD,averagePooling2d:PD,averagePooling3d:BD,avgPool1d:Bte,avgPool2d:Ute,avgPool3d:Hte,avgPooling1d:Vte,avgPooling2d:Wte,avgPooling3d:jte,batchNormalization:Mte,bidirectional:ane,categoryEncoding:vne,centerCrop:gne,concatenate:_te,conv1d:dte,conv2d:hte,conv2dTranspose:pte,conv3d:mte,conv3dTranspose:gte,convLstm2d:tne,convLstm2dCell:nne,cropping2D:vte,dense:Ste,depthwiseConv2d:xte,dot:Lte,dropout:Cte,elu:ite,embedding:Ite,flatten:kte,gaussianDropout:dne,gaussianNoise:fne,globalAveragePooling1d:Gte,globalAveragePooling2d:qte,globalMaxPool1d:one,globalMaxPool2d:lne,globalMaxPooling1d:fB,globalMaxPooling2d:dB,gru:Xte,gruCell:Yte,input:IP,inputLayer:ate,layerNormalization:zte,leakyReLU:lte,lstm:Qte,lstmCell:Zte,masking:pne,maxPool1d:une,maxPool2d:cne,maxPooling1d:hB,maxPooling2d:pB,maxPooling3d:Kte,maximum:Ate,minimum:Ote,multiply:Fte,permute:$te,prelu:ute,randomWidth:bne,reLU:ote,repeatVector:Ete,rescaling:mne,reshape:Nte,resizing:yne,rnn:rne,separableConv2d:yte,simpleRNN:Jte,simpleRNNCell:ene,softmax:cte,spatialDropout1d:Tte,stackedRNNCells:sne,thresholdedReLU:fte,timeDistributed:ine,upSampling2d:bte,zeroPadding2d:Pte},Symbol.toStringTag,{value:"Module"}));function wne(n,e){return TR(n,e)}function Sne(n,e){return hP(n,e)}function Cne(n,e){return pP(n,e)}function Tne(n,e){return kR(n,e)}function kne(n,e){return ER(n,e)}function Ene(n,e){return dP(n,e)}function Nne(n,e){return see(n,e)}function $ne(n,e){return SR(n,e)}function Ine(n,e){return wT(n,e)}function Rne(n,e){return ey(n,e)}function Dne(n,e){return ey(n,e)}function _ne(n,e){return ey(n,e)}function Ane(n,e){return Jh(n,e)}function One(n,e){return Jh(n,e)}function Fne(n,e){return Jh(n,e)}function Lne(n,e){return aee(n,e)}const Mne=Object.freeze(Object.defineProperty({__proto__:null,MAPE:Dne,MSE:One,binaryAccuracy:wne,binaryCrossentropy:Sne,categoricalAccuracy:Tne,categoricalCrossentropy:kne,cosineProximity:$ne,mape:_ne,meanAbsoluteError:Ine,meanAbsolutePercentageError:Rne,meanSquaredError:Ane,mse:Fne,precision:Ene,r2Score:Lne,recall:Nne,sparseCategoricalAccuracy:Cne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zne=Object.freeze(Object.defineProperty({__proto__:null,modelFromJSON:Oee},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pne(n){return new l0(n)}function Bne(n){return Vee(n)}function Vne(n){return Uee(n)}const Une=Object.freeze(Object.defineProperty({__proto__:null,l1:Bne,l1l2:Pne,l2:Vne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mB extends Jg{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof jc))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}function LT(n,e){return n<e}function gB(n,e){return n>e}class yB extends mB{constructor(e){if(super(),e==null&&(e={}),e.restoreBestWeights)throw new yn("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=LT:this.mode==="max"?this.monitorFunc=gB:this.monitor.indexOf("acc")!==-1?this.monitorFunc=gB:this.monitorFunc=LT,this.monitorFunc===LT&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===LT?1/0:-1/0}async onEpochEnd(e,t){await ud(t);const r=this.getMonitorValue(t);r!=null&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){e==null&&(e={});const t=e[this.monitor];return t==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}}function Wne(n){return new yB(n)}const Hne={earlyStopping:Wne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */xe().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,n=>{n&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ji;(function(n){n[n.DT_INVALID=0]="DT_INVALID",n[n.DT_FLOAT=1]="DT_FLOAT",n[n.DT_DOUBLE=2]="DT_DOUBLE",n[n.DT_INT32=3]="DT_INT32",n[n.DT_UINT8=4]="DT_UINT8",n[n.DT_INT16=5]="DT_INT16",n[n.DT_INT8=6]="DT_INT8",n[n.DT_STRING=7]="DT_STRING",n[n.DT_COMPLEX64=8]="DT_COMPLEX64",n[n.DT_INT64=9]="DT_INT64",n[n.DT_BOOL=10]="DT_BOOL",n[n.DT_QINT8=11]="DT_QINT8",n[n.DT_QUINT8=12]="DT_QUINT8",n[n.DT_QINT32=13]="DT_QINT32",n[n.DT_BFLOAT16=14]="DT_BFLOAT16",n[n.DT_QINT16=15]="DT_QINT16",n[n.DT_QUINT16=16]="DT_QUINT16",n[n.DT_UINT16=17]="DT_UINT16",n[n.DT_COMPLEX128=18]="DT_COMPLEX128",n[n.DT_HALF=19]="DT_HALF",n[n.DT_RESOURCE=20]="DT_RESOURCE",n[n.DT_VARIANT=21]="DT_VARIANT",n[n.DT_UINT32=22]="DT_UINT32",n[n.DT_UINT64=23]="DT_UINT64",n[n.DT_FLOAT_REF=101]="DT_FLOAT_REF",n[n.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",n[n.DT_INT32_REF=103]="DT_INT32_REF",n[n.DT_UINT8_REF=104]="DT_UINT8_REF",n[n.DT_INT16_REF=105]="DT_INT16_REF",n[n.DT_INT8_REF=106]="DT_INT8_REF",n[n.DT_STRING_REF=107]="DT_STRING_REF",n[n.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",n[n.DT_INT64_REF=109]="DT_INT64_REF",n[n.DT_BOOL_REF=110]="DT_BOOL_REF",n[n.DT_QINT8_REF=111]="DT_QINT8_REF",n[n.DT_QUINT8_REF=112]="DT_QUINT8_REF",n[n.DT_QINT32_REF=113]="DT_QINT32_REF",n[n.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",n[n.DT_QINT16_REF=115]="DT_QINT16_REF",n[n.DT_QUINT16_REF=116]="DT_QUINT16_REF",n[n.DT_UINT16_REF=117]="DT_UINT16_REF",n[n.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",n[n.DT_HALF_REF=119]="DT_HALF_REF",n[n.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",n[n.DT_VARIANT_REF=121]="DT_VARIANT_REF",n[n.DT_UINT32_REF=122]="DT_UINT32_REF",n[n.DT_UINT64_REF=123]="DT_UINT64_REF"})(ji||(ji={}));var vB;(function(n){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n.CheckpointFormatVersion||(n.CheckpointFormatVersion={}))})(vB||(vB={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VD={};function jne(n,e){const t={tfOpName:n,category:"custom",inputs:[],attrs:[],customExecutor:e};VD[n]=t}function bB(n){return VD[n]}function Gne(n){delete VD[n]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O(n,e,t,r,s){const a=e.inputParams[n];if(a&&a.inputIndexStart!==void 0){const u=a.inputIndexStart,c=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?u+1:a.inputIndexEnd,d=u<0?e.inputNames.length+u:u;if(a.type==="tensor")return da(e.inputNames[d],t,r,s);if(a.type==="tensors"){const y=e.inputs.slice(u,c);return e.inputNames.slice(u,c).filter((S,k)=>{var C;return((C=y[k])===null||C===void 0?void 0:C.op)!=="NoOp"}).map(S=>da(S,t,r,s))}const m=da(e.inputNames[d],t,r,s),g=m.dataSync();return a.type==="number"?g[0]:mo(m.shape,g)}const o=e.attrParams[n];return o&&o.value}function da(n,e,t,r){const[s,a]=Gi(n,t);if(r!=null){const u=r.getHashTableHandleByName(s);if(u!=null)return u}const o=t.currentContextIds.find(u=>!!e[MT(s,u)]);return o!==void 0?e[MT(s,o)][a]:void 0}function xB(n,e,t){return e[MT(n,t.currentContextId)]}function Gc(n,e){const[t,r,s]=Gi(n,e);return[MT(t,e&&e.currentContextId),r,s]}function MT(n,e){return e?`${n}-${e}`:n}function Gi(n,e){if(n==="")return["",0,void 0];const t=e!=null&&e.parseNodeNameCache!=null;if(t){const a=e.parseNodeNameCache.get(n);if(a!=null)return a}const r=n.split(":");let s;if(r.length===1)s=[n,0,void 0];else{const a=r[0],o=r.length===3?r[1]:void 0,u=Number(r[r.length-1]);s=[a,u,o]}return t&&e.parseNodeNameCache.set(n,s),s}function zT(n,e,t){let r=O("pad",n,e,t);if(r==="explicit"){r=O("explicitPaddings",n,e,t);const s=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)s[a][0]=r[a*2],s[a][1]=r[a*2+1];return s}return r}function qc(n){return n.kept?n:$u(n)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qne=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kne=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xne=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yne=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qne=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zne=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jne=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ere=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tre=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nre=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rre=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sre=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const are=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ire=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ore=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lre=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ure=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cre=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fre=Object.freeze(Object.defineProperty({__proto__:null,json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wB{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[qne,Kne,Xne,Yne,Qne,Zne,Jne,ere,tre,nre,rre,sre,are,ire,ore,lre,ure,cre,fre],t=[].concat(...e.map(r=>r.json));this.opMappers=t.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,t={}){const r=e.node,s=[],a=[],o=[],u=r.reduce((k,C)=>(k[C.name]=this.mapNode(C),C.op.startsWith("Placeholder")?s.push(k[C.name]):C.op==="Const"?a.push(k[C.name]):(C.input==null||C.input.length===0)&&o.push(k[C.name]),k),{});let c=[];const d=[];let m={},g={};t!=null&&(m=this.mapSignatureEntries(t.inputs),g=this.mapSignatureEntries(t.outputs));const y=Object.keys(u);y.forEach(k=>{const C=u[k];C.inputNames.forEach((N,$)=>{const[A,,D]=Gc(N),L=u[A];if(L.outputs!=null){const P=L.outputs.indexOf(D);if(P!==-1){const W=`${A}:${P}`;C.inputNames[$]=W}}C.inputs.push(L),L.children.push(C)})}),Object.keys(g).length===0?y.forEach(k=>{const C=u[k];C.children.length===0&&d.push(C)}):Object.keys(g).forEach(k=>{const[C]=Gc(k),N=u[C];N!=null&&(N.signatureKey=g[k],d.push(N))}),Object.keys(m).length>0?Object.keys(m).forEach(k=>{const[C]=Gc(k),N=u[C];N&&(N.signatureKey=m[k],c.push(N))}):c=s;let x={};e.library!=null&&e.library.function!=null&&(x=e.library.function.reduce((k,C)=>(k[C.signature.name]=this.mapFunction(C),k),{}));const S={nodes:u,inputs:c,outputs:d,weights:a,placeholders:s,signature:t,functions:x};return o.length>0&&(S.initNodes=o),S}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,r)=>(t[e[r].name]=r,t),{})}mapNode(e){const t=bB(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return t.inputs!=null&&(r.inputParams=t.inputs.reduce((s,a)=>(s[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},s),{})),t.attrs!=null&&(r.attrParams=t.attrs.reduce((s,a)=>{const o=a.type;let u;switch(a.type){case"string":u=UD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=UD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":u=YD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=YD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":u=HD(e.attr,a.tfName,a.defaultValue||0),u===void 0&&a.tfDeprecatedName&&(u=HD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":u=XD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=XD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":u=WD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=WD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":u=ZD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=ZD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":u=KD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=KD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":u=QD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=QD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":u=GD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=GD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":u=qD(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=qD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":u=CB(e.attr,a.tfName,a.defaultValue),u===void 0&&a.tfDeprecatedName&&(u=CB(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return s[a.name]={value:u,type:o},s},{})),r}mapFunction(e){const t=e.nodeDef,r=[],s=[];let a={};t!=null&&(a=t.reduce((g,y)=>(g[y.name]=this.mapNode(y),y.op==="Const"&&s.push(g[y.name]),g),{}));const o=[],u=[];e.signature.inputArg.forEach(g=>{const[y]=Gc(g.name),x={name:y,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:jD(g.type),type:"dtype"}},children:[]};x.signatureKey=g.name,o.push(x),a[y]=x}),Object.keys(a).forEach(g=>{const y=a[g];y.inputNames.forEach((x,S)=>{const[k,,C]=Gc(x),N=a[k];if(N.outputs!=null){const $=N.outputs.indexOf(C);if($!==-1){const A=`${k}:${$}`;y.inputNames[S]=A}}y.inputs.push(N),N.children.push(y)})});const d=e.ret;e.signature.outputArg.forEach(g=>{const[y,x]=Gc(d[g.name]),S=a[y];S!=null&&(S.defaultOutput=x,u.push(S))});const m=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:u,weights:s,placeholders:r,signature:m}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r),t),{}),outputs:e.signature.outputArg.reduce((t,r)=>(t[r.name]=this.mapArgToTensorInfo(r,e.ret),t),{})}}mapArgToTensorInfo(e,t){let r=e.name;return t!=null&&(r=t[r]),{name:r,dtype:e.type}}}function dre(n){const e=xe().global;if(typeof e.atob<"u")return e.atob(n);if(typeof Buffer<"u")return new Buffer(n,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function SB(n,e){const t=Array.isArray(n)?String.fromCharCode.apply(null,n):dre(n);return e?t:t.toLowerCase()}function UD(n,e,t,r=!1){const s=n[e];return s!=null?SB(s.s,r):t}function WD(n,e,t){const r=n[e];return r?r.b:t}function HD(n,e,t){const r=n[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:t;return typeof s=="number"?s:parseInt(s,10)}function jD(n){switch(typeof n=="string"&&(n=ji[n]),n){case ji.DT_FLOAT:case ji.DT_HALF:return"float32";case ji.DT_INT32:case ji.DT_INT64:case ji.DT_INT8:case ji.DT_UINT8:return"int32";case ji.DT_BOOL:return"bool";case ji.DT_DOUBLE:return"float32";case ji.DT_STRING:return"string";case ji.DT_COMPLEX64:case ji.DT_COMPLEX128:return"complex64";default:return null}}function CB(n,e,t){const r=n[e];return r&&r.func?r.func.name:t}function GD(n,e,t){const r=n[e];return r&&r.type?jD(r.type):t}function qD(n,e,t){const r=n[e];return r&&r.list&&r.list.type?r.list.type.map(s=>jD(s)):t}function TB(n){if(!n.unknownRank)return n.dim!=null?n.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function KD(n,e,t){const r=n[e];return r&&r.shape?TB(r.shape):t}function XD(n,e,t){const r=n[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):t}function YD(n,e,t,r=!1){const s=n[e];return s&&s.list&&s.list.s?s.list.s.map(a=>SB(a,r)):t}function QD(n,e,t){const r=n[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>TB(s)):t}function ZD(n,e,t){const r=n[e];return r&&r.list&&r.list.b?r.list.b:t}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hre{constructor(e,t,r){this.node=e,this.tensorMap=t,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,a)=>(s[a]=this.getAttr(a),s),{}))}getInput(e){return da(e,this.tensorMap,this.context)}getAttr(e,t){const r=this.node.rawAttrs[e];if(r.tensor!=null)return da(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return HD(this.node.rawAttrs,e,t);if(r.s!=null)return UD(this.node.rawAttrs,e,t);if(r.b!=null)return WD(this.node.rawAttrs,e,t);if(r.shape!=null)return KD(this.node.rawAttrs,e,t);if(r.type!=null)return GD(this.node.rawAttrs,e,t);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return XD(this.node.rawAttrs,e,t);if(r.list.s!=null)return YD(this.node.rawAttrs,e,t);if(r.list.shape!=null)return QD(this.node.rawAttrs,e,t);if(r.list.b!=null)return ZD(this.node.rawAttrs,e,t);if(r.list.type!=null)return qD(this.node.rawAttrs,e,t)}return t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ha=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:P$,abs:gs,acos:J$,acosh:eI,add:Be,addN:CM,all:pC,any:Nx,argMax:Ah,argMin:tI,asin:nI,asinh:rI,atan:sI,atan2:aI,atanh:iI,avgPool:Dx,avgPool3d:uI,basicLSTMCell:TM,batchNorm:Lg,batchNorm2d:cI,batchNorm3d:fI,batchNorm4d:dI,batchToSpaceND:_x,bincount:hI,bitwiseAnd:kM,booleanMaskAsync:cz,broadcastArgs:EM,broadcastTo:Fh,buffer:gn,cast:nt,ceil:pI,clipByValue:gi,clone:$u,complex:Ac,concat:es,concat1d:mI,concat2d:gI,concat3d:yI,concat4d:vI,conv1d:mC,conv2d:Mc,conv2dTranspose:gC,conv3d:xI,conv3dTranspose:wI,cos:Ax,cosh:yC,cosineWindow:UC,cumprod:Ox,cumsum:vC,denseBincount:bC,depthToSpace:SI,depthwiseConv2d:Mg,diag:$M,dilation2d:CI,div:It,divNoNan:TI,dot:kI,dropout:i2,einsum:zh,elu:zg,enclosingPowerOfTwo:o2,ensureShape:IM,equal:Ui,erf:xC,euclideanNorm:NI,exp:yi,expandDims:ca,expm1:$I,eye:wC,fft:qx,fill:Lh,floor:Vg,floorDiv:hC,fused:bz,gather:Ug,gatherND:pz,greater:Ha,greaterEqual:zc,ifft:Kg,imag:Fx,image:Ko,inTopKAsync:mz,irfft:LC,isFinite:II,isInf:RI,isNaN:DI,leakyRelu:Lx,less:Wg,lessEqual:Jf,linalg:f2,linspace:_M,localResponseNormalization:_I,log:Wi,log1p:Mx,logSigmoid:AI,logSoftmax:CC,logSumExp:zx,logicalAnd:qo,logicalNot:Px,logicalOr:TC,logicalXor:OI,losses:$z,lowerBound:OM,matMul:Sn,max:yo,maxPool:Bx,maxPool3d:FI,maxPoolWithArgmax:FM,maximum:Du,mean:Wr,meshgrid:LM,min:Pg,minimum:ed,mirrorPad:LI,mod:MI,moments:Vx,movingAverage:fz,mul:ae,multiRNNCell:MM,multinomial:zM,neg:Sr,norm:Bg,notEqual:Bh,oneHot:Hg,ones:vi,onesLike:Hi,op:J,outerProduct:PM,pad:Pc,pad1d:BM,pad2d:VM,pad3d:UM,pad4d:WM,pool:zI,pow:Iu,prelu:Wx,print:Z$,prod:PI,raggedGather:HM,raggedRange:jM,raggedTensorToTensor:GM,rand:qM,randomGamma:QM,randomNormal:NC,randomStandardNormal:ZM,randomUniform:td,randomUniformInt:JM,range:Uh,real:Gg,reciprocal:YI,relu:Ml,relu6:$C,reshape:oe,reverse:bo,reverse1d:ez,reverse2d:tz,reverse3d:nz,reverse4d:rz,rfft:Kx,round:IC,rsqrt:RC,scalar:Ft,scatterND:dz,searchSorted:EC,selu:DC,separableConv2d:_C,setdiff1dAsync:sz,sigmoid:Ll,sign:QI,signal:Nz,sin:AC,sinh:OC,slice:Dn,slice1d:Hx,slice2d:FC,slice3d:jx,slice4d:qg,softmax:Gx,softplus:Ph,spaceToBatchND:Ux,sparse:Iz,sparseToDense:hz,spectral:Ez,split:bi,sqrt:Vs,square:hr,squaredDifference:MC,squeeze:nd,stack:ja,step:Wh,stridedSlice:ZI,string:Rz,sub:bt,sum:Ct,tan:JI,tanh:Qf,tensor:Vi,tensor1d:fa,tensor2d:rd,tensor3d:e2,tensor4d:az,tensor5d:iz,tensor6d:oz,tensorScatterUpdate:lz,tile:vo,topk:n2,transpose:Rn,truncatedNormal:PC,unique:r2,unsortedSegmentSum:BC,unstack:xo,upperBound:uz,variable:s2,where:Ps,whereAsync:a2,zeros:vs,zerosLike:_n},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pre=(n,e,t,r=ha)=>{switch(n.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(O("a",n,e,t),O("b",n,e,t))];case"AddN":return[r.addN(O("tensors",n,e,t))];case"FloorMod":case"Mod":return[r.mod(O("a",n,e,t),O("b",n,e,t))];case"Mul":return[r.mul(O("a",n,e,t),O("b",n,e,t))];case"RealDiv":case"Div":return[r.div(O("a",n,e,t),O("b",n,e,t))];case"DivNoNan":return[r.divNoNan(O("a",n,e,t),O("b",n,e,t))];case"FloorDiv":return[r.floorDiv(O("a",n,e,t),O("b",n,e,t))];case"Sub":return[r.sub(O("a",n,e,t),O("b",n,e,t))];case"Minimum":return[r.minimum(O("a",n,e,t),O("b",n,e,t))];case"Maximum":return[r.maximum(O("a",n,e,t),O("b",n,e,t))];case"Pow":return[r.pow(O("a",n,e,t),O("b",n,e,t))];case"SquaredDifference":return[r.squaredDifference(O("a",n,e,t),O("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mre=(n,e,t,r=ha)=>{switch(n.op){case"Abs":case"ComplexAbs":return[r.abs(O("x",n,e,t))];case"Acos":return[r.acos(O("x",n,e,t))];case"Acosh":return[r.acosh(O("x",n,e,t))];case"Asin":return[r.asin(O("x",n,e,t))];case"Asinh":return[r.asinh(O("x",n,e,t))];case"Atan":return[r.atan(O("x",n,e,t))];case"Atan2":return[r.atan2(O("x",n,e,t),O("y",n,e,t))];case"Atanh":return[r.atanh(O("x",n,e,t))];case"Ceil":return[r.ceil(O("x",n,e,t))];case"Complex":return[r.complex(O("real",n,e,t),O("imag",n,e,t))];case"Cos":return[r.cos(O("x",n,e,t))];case"Cosh":return[r.cosh(O("x",n,e,t))];case"Elu":return[r.elu(O("x",n,e,t))];case"Erf":return[r.erf(O("x",n,e,t))];case"Exp":return[r.exp(O("x",n,e,t))];case"Expm1":return[r.expm1(O("x",n,e,t))];case"Floor":return[r.floor(O("x",n,e,t))];case"Log":return[r.log(O("x",n,e,t))];case"Log1p":return[r.log1p(O("x",n,e,t))];case"Imag":return[r.imag(O("x",n,e,t))];case"Neg":return[r.neg(O("x",n,e,t))];case"Reciprocal":return[r.reciprocal(O("x",n,e,t))];case"Real":return[r.real(O("x",n,e,t))];case"Relu":return[r.relu(O("x",n,e,t))];case"Round":return[r.round(O("x",n,e,t))];case"Selu":return[r.selu(O("x",n,e,t))];case"Sigmoid":return[r.sigmoid(O("x",n,e,t))];case"Sin":return[r.sin(O("x",n,e,t))];case"Sign":return[r.sign(O("x",n,e,t))];case"Sinh":return[r.sinh(O("x",n,e,t))];case"Softplus":return[r.softplus(O("x",n,e,t))];case"Sqrt":return[r.sqrt(O("x",n,e,t))];case"Square":return[r.square(O("x",n,e,t))];case"Tanh":return[r.tanh(O("x",n,e,t))];case"Tan":return[r.tan(O("x",n,e,t))];case"ClipByValue":return[r.clipByValue(O("x",n,e,t),O("clipValueMin",n,e,t),O("clipValueMax",n,e,t))];case"Relu6":return[r.relu6(O("x",n,e,t))];case"Rsqrt":return[r.rsqrt(da(n.inputNames[0],e,t))];case"LeakyRelu":return[r.leakyRelu(O("x",n,e,t),O("alpha",n,e,t))];case"Prelu":return[r.prelu(O("x",n,e,t),O("alpha",n,e,t))];case"IsNan":return[r.isNaN(da(n.inputNames[0],e,t))];case"IsInf":return[r.isInf(da(n.inputNames[0],e,t))];case"IsFinite":return[r.isFinite(da(n.inputNames[0],e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zo(n,e,t=""){if(!(typeof n=="number"||typeof e=="number")){U(n.length===e.length,()=>t+` Shapes ${n} and ${e} must match`);for(let r=0;r<n.length;r++){const s=n[r],a=e[r];U(s<0||a<0||s===a,()=>t+` Shapes ${n} and ${e} must match`)}}}function kB(n){return!(typeof n=="number"||n.some(e=>e<0))}function p0(n,e,t){let r=JD(n,t);const s=!kB(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(a=>{r=JD(a.shape,r)}),!kB(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function JD(n,e){if(typeof n=="number")return e;if(typeof e=="number")return n;if(n.length!==e.length)throw new Error(`Incompatible ranks during merge: ${n} vs. ${e}`);const t=[];for(let r=0;r<n.length;++r){const s=n[r],a=e[r];if(s>=0&&a>=0&&s!==a)throw new Error(`Incompatible shape during merge: ${n} vs. ${e}`);t[r]=s>=0?s:a}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gre{constructor(e,t,r,s,a,o,u){this.name=e,this.dtype=t,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=u,this.tensors=[],this.closed_=!1,this.idTensor=Ft(0),Es(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(t=>this.read(t))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=t.shape),Zo(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=t,Es(t),r.written=!0,this.tensors[e]=r}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((r,s)=>this.write(r,t[s]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return Vi([],[0].concat(this.elementShape));const r=this.readMany(e);return Zo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ja(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Vi([],[0].concat(this.elementShape));const t=[];for(let s=0;s<this.size();s++)t.push(s);const r=this.readMany(t);return Zo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),es(r,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,xo(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let r=0;const s=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=r===0?0:t.size/r,o=[];ve(()=>{t=oe(t,[1,r,a]);for(let c=0;c<e.length;++c){const m=[0,c===0?0:s[c-1],0],g=[1,e[c],a];o[c]=oe(Dn(t,m,g),this.elementShape)}return o});const u=[];for(let c=0;c<e.length;c++)u[c]=c;this.writeMany(u,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class np{get id(){return this.idTensor.id}constructor(e,t,r,s=-1){this.tensors=e,this.elementShape=t,this.elementDtype=r,e?.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);Zo(t,a.shape,"TensorList shape mismatch: "),Es(a)}),this.idTensor=Ft(0),this.maxNumElements=s,Es(this.idTensor)}copy(){return new np([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(e==null||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Zo(e,this.elementShape,"TensorList shape mismatch: ");const s=p0(this.elementShape,this.tensors,e);return ve(()=>{const a=this.tensors.map(o=>oe(o,s));return ja(a,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=p0(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,Zo(s.shape,e,"TensorList shape mismatch: "),oe(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Zo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Es(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new np([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)t.tensors[r]=this.tensors[r];return t}getItem(e,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Zo(this.tensors[e].shape,t,"TensorList shape mismatch: ");const s=p0(this.elementShape,this.tensors,t);return oe(this.tensors[e],s)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Zo(this.elementShape,t.shape,"TensorList shape mismatch: "),Es(t),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Zo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=p0(this.elementShape,this.tensors,r);return e.length===0?Vi([],[0].concat(s)):ve(()=>{const a=e.map(o=>oe(this.tensors[o],s));return ja(a,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Zo(this.elementShape,t,"TensorList shape mismatch: ");const r=p0(this.elementShape,this.tensors,t);return this.size()===0?Vi([],[0].concat(r)):ve(()=>{const s=this.tensors.map(a=>oe(a,r));return es(s,0)})}}function yre(n,e,t){const r=n.dtype;if(n.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${n.shape}`);if(n.dtype!==t)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${t}`);const s=n.shape.slice(1);Zo(s,e,"TensorList shape mismatch: ");const a=xo(n);return new np(a,e,r)}function vre(n,e,t,r){return new np([],n,e,r)}function bre(n,e,t,r){if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const a=new np([],t,n.dtype,r),o=xo(n,0);return e.forEach((u,c)=>{a.setItem(u,o[c])}),a}function xre(n,e,t){let r=0;const s=e.map(m=>(r+=m,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);const a=n.shape.slice(1),o=JD(a,t),u=r===0?0:n.size/r,c=ve(()=>{const m=[];n=oe(n,[1,r,u]);for(let g=0;g<e.length;++g){const x=[0,g===0?0:s[g-1],0],S=[1,e[g],u];m[g]=oe(Dn(n,x,S),o)}return n.dispose(),m}),d=new np([],t,n.dtype,e.length);for(let m=0;m<c.length;m++)d.setItem(m,c[m]);return d}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wre=async(n,e,t)=>{switch(n.op){case"If":case"StatelessIf":{const r=O("thenBranch",n,e,t),s=O("elseBranch",n,e,t),a=O("cond",n,e,t),o=O("args",n,e,t);return(await a.data())[0]?t.functionMap[r].executeFunctionAsync(o,t.tensorArrayMap,t.tensorListMap):t.functionMap[s].executeFunctionAsync(o,t.tensorArrayMap,t.tensorListMap)}case"While":case"StatelessWhile":{const r=O("body",n,e,t),s=O("cond",n,e,t),a=O("args",n,e,t),o=await t.functionMap[s].executeFunctionAsync(a,t.tensorArrayMap,t.tensorListMap),u=a.map(m=>m.id);let c=await o[0].data();o.forEach(m=>{!m.kept&&u.indexOf(m.id)===-1&&m.dispose()});let d=a;for(;c[0];){const m=d;d=await t.functionMap[r].executeFunctionAsync(d,t.tensorArrayMap,t.tensorListMap);const g=d.map(x=>x.id);m.forEach(x=>{!x.kept&&u.indexOf(x.id)===-1&&g.indexOf(x.id)===-1&&x.dispose()});const y=await t.functionMap[s].executeFunctionAsync(d,t.tensorArrayMap,t.tensorListMap);c=await y[0].data(),y.forEach(x=>{!x.kept&&u.indexOf(x.id)===-1&&g.indexOf(x.id)===-1&&x.dispose()})}return d}case"LoopCond":{const r=O("pred",n,e,t);return[qc(r)]}case"Switch":{const r=O("pred",n,e,t);let s=O("data",n,e,t);return s.kept||(s=qc(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=n.inputNames.find(s=>da(s,e,t)!==void 0);if(r){const s=da(r,e,t);return[qc(s)]}return}case"Enter":{const r=O("frameName",n,e,t),s=O("tensor",n,e,t);return t.enterFrame(r),[qc(s)]}case"Exit":{const r=O("tensor",n,e,t);return t.exitFrame(),[qc(r)]}case"NextIteration":{const r=O("tensor",n,e,t);return t.nextIteration(),[qc(r)]}case"TensorArrayV3":{const r=O("size",n,e,t),s=O("dtype",n,e,t),a=O("elementShape",n,e,t),o=O("dynamicSize",n,e,t),u=O("clearAfterRead",n,e,t),c=O("identicalElementShapes",n,e,t),d=O("name",n,e,t),m=new gre(d,s,r,a,c,o,u);return t.addTensorArray(m),[m.idTensor,Ft(1)]}case"TensorArrayWriteV3":{const r=O("tensorArrayId",n,e,t),s=O("index",n,e,t),a=O("tensor",n,e,t),o=t.getTensorArray(r.id);return o.write(s,a),[o.idTensor]}case"TensorArrayReadV3":{const r=O("tensorArrayId",n,e,t),s=O("index",n,e,t);return[t.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=O("tensorArrayId",n,e,t),s=O("indices",n,e,t),a=O("dtype",n,e,t);return[t.getTensorArray(r.id).gather(s,a)]}case"TensorArrayScatterV3":{const r=O("tensorArrayId",n,e,t),s=O("indices",n,e,t),a=O("tensor",n,e,t),o=t.getTensorArray(r.id);return o.scatter(s,a),[o.idTensor]}case"TensorArrayConcatV3":{const r=O("tensorArrayId",n,e,t),s=t.getTensorArray(r.id),a=O("dtype",n,e,t);return[s.concat(a)]}case"TensorArraySplitV3":{const r=O("tensorArrayId",n,e,t),s=O("tensor",n,e,t),a=O("lengths",n,e,t),o=t.getTensorArray(r.id);return o.split(a,s),[o.idTensor]}case"TensorArraySizeV3":{const r=O("tensorArrayId",n,e,t),s=t.getTensorArray(r.id);return[Ft(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=O("tensorArrayId",n,e,t),s=t.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=O("tensorListId",n,e,t),s=O("index",n,e,t),a=O("tensor",n,e,t),o=t.getTensorList(r.id);return o.setItem(s,a),[o.idTensor]}case"TensorListGetItem":{const r=O("tensorListId",n,e,t),s=O("index",n,e,t),a=O("elementShape",n,e,t),o=O("elementDType",n,e,t);return[t.getTensorList(r.id).getItem(s,a,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=O("indices",n,e,t),s=O("tensor",n,e,t),a=O("elementShape",n,e,t),o=O("numElements",n,e,t),u=bre(s,r,a,o);return t.addTensorList(u),[u.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=O("elementShape",n,e,t),s=O("elementDType",n,e,t);let a;n.op==="TensorListReserve"?a="numElements":a="maxNumElements";const o=O(a,n,e,t),u=n.op==="TensorListReserve"?-1:o,c=vre(r,s,o,u);return t.addTensorList(c),[c.idTensor]}case"TensorListGather":{const r=O("tensorListId",n,e,t),s=O("indices",n,e,t),a=O("elementShape",n,e,t),o=O("elementDType",n,e,t);return[t.getTensorList(r.id).gather(s,o,a)]}case"TensorListStack":{const r=O("tensorListId",n,e,t),s=O("elementShape",n,e,t),a=O("elementDType",n,e,t),o=O("numElements",n,e,t);return[t.getTensorList(r.id).stack(s,a,o)]}case"TensorListFromTensor":{const r=O("tensor",n,e,t),s=O("elementShape",n,e,t),a=O("elementDType",n,e,t),o=yre(r,s,a);return t.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=O("tensorListId",n,e,t),s=t.getTensorList(r.id),a=O("dtype",n,e,t),o=O("elementShape",n,e,t);return[s.concat(a,o)]}case"TensorListPushBack":{const r=O("tensorListId",n,e,t),s=O("tensor",n,e,t),a=t.getTensorList(r.id);return a.pushBack(s),[a.idTensor]}case"TensorListPopBack":{const r=O("tensorListId",n,e,t),s=O("elementShape",n,e,t),a=O("elementDType",n,e,t);return[t.getTensorList(r.id).popBack(s,a)]}case"TensorListSplit":{const r=O("tensor",n,e,t),s=O("elementShape",n,e,t),a=O("lengths",n,e,t),o=xre(r,a,s);return t.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=O("tensorListId",n,e,t),s=t.getTensorList(r.id);return[Ft(s.size(),"int32")]}case"TensorListResize":{const r=O("tensorListId",n,e,t),s=O("size",n,e,t),o=t.getTensorList(r.id).resize(s);return t.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EB(n,e,t){const[r,s]=O("fusedOps",n,e,t),a=r==="biasadd",o=!a,u=s==="prelu",c=r==="fusedbatchnorm",d=O("numArgs",n,e,t);if(a){if(u&&d!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&a&&d!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const m=O("strides",n,e,t),g=zT(n,e,t),y=O("dataFormat",n,e,t).toUpperCase(),x=O("dilations",n,e,t);let[S,k]=O("args",n,e,t);o&&(k=S,S=void 0);const C=O("leakyreluAlpha",n,e,t);return{stride:m,pad:g,dataFormat:y,dilations:x,biasArg:S,preluArg:k,activationFunc:s,leakyreluAlpha:C}}const Sre=(n,e,t,r=ha)=>{switch(n.op){case"Conv1D":{const s=O("stride",n,e,t),a=O("pad",n,e,t),o=O("dataFormat",n,e,t).toUpperCase(),u=O("dilation",n,e,t);return[r.conv1d(O("x",n,e,t),O("filter",n,e,t),s,a,o,u)]}case"Conv2D":{const s=O("strides",n,e,t),a=zT(n,e,t),o=O("dataFormat",n,e,t).toUpperCase(),u=O("dilations",n,e,t);return[r.conv2d(O("x",n,e,t),O("filter",n,e,t),[s[1],s[2]],a,o,[u[1],u[2]])]}case"_FusedConv2D":{const{stride:s,pad:a,dataFormat:o,dilations:u,biasArg:c,preluArg:d,activationFunc:m,leakyreluAlpha:g}=EB(n,e,t);return[r.fused.conv2d({x:O("x",n,e,t),filter:O("filter",n,e,t),strides:[s[1],s[2]],pad:a,dataFormat:o,dilations:[u[1],u[2]],bias:c,activation:m,preluActivationWeights:d,leakyreluAlpha:g})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:a,dataFormat:o,dilations:u,biasArg:c,preluArg:d,activationFunc:m,leakyreluAlpha:g}=EB(n,e,t);return[r.fused.depthwiseConv2d({x:O("x",n,e,t),filter:O("filter",n,e,t),strides:[s[1],s[2]],pad:a,dataFormat:o,dilations:[u[1],u[2]],bias:c,activation:m,preluActivationWeights:d,leakyreluAlpha:g})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=O("outputShape",n,e,t),a=O("strides",n,e,t),o=zT(n,e,t);return[r.conv2dTranspose(O("x",n,e,t),O("filter",n,e,t),s,[a[1],a[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=O("strides",n,e,t),a=zT(n,e,t),o=O("dilations",n,e,t),u=O("dataFormat",n,e,t).toUpperCase();return[r.depthwiseConv2d(O("input",n,e,t),O("filter",n,e,t),[s[1],s[2]],a,u,[o[1],o[2]])]}case"Conv3D":{const s=O("strides",n,e,t),a=O("pad",n,e,t),o=O("dataFormat",n,e,t).toUpperCase(),u=O("dilations",n,e,t);return[r.conv3d(O("x",n,e,t),O("filter",n,e,t),[s[1],s[2],s[3]],a,o,[u[1],u[2],u[3]])]}case"AvgPool":{const s=O("strides",n,e,t),a=O("pad",n,e,t),o=O("kernelSize",n,e,t);return[r.avgPool(O("x",n,e,t),[o[1],o[2]],[s[1],s[2]],a)]}case"MaxPool":{const s=O("strides",n,e,t),a=O("pad",n,e,t),o=O("kernelSize",n,e,t);return[r.maxPool(O("x",n,e,t),[o[1],o[2]],[s[1],s[2]],a)]}case"MaxPoolWithArgmax":{const s=O("strides",n,e,t),a=O("pad",n,e,t),o=O("kernelSize",n,e,t),u=O("includeBatchInIndex",n,e,t),{result:c,indexes:d}=r.maxPoolWithArgmax(O("x",n,e,t),[o[1],o[2]],[s[1],s[2]],a,u);return[c,d]}case"AvgPool3D":{const s=O("strides",n,e,t),a=O("pad",n,e,t),o=O("kernelSize",n,e,t);return[r.avgPool3d(O("x",n,e,t),[o[1],o[2],o[3]],[s[1],s[2],s[3]],a)]}case"MaxPool3D":{const s=O("strides",n,e,t),a=O("pad",n,e,t),o=O("kernelSize",n,e,t);return[r.maxPool3d(O("x",n,e,t),[o[1],o[2],o[3]],[s[1],s[2],s[3]],a)]}case"Dilation2D":{const s=O("strides",n,e,t),a=O("pad",n,e,t),o=O("dilations",n,e,t),u=s[1],c=s[2],d=o[1],m=o[2];return[r.dilation2d(O("x",n,e,t),O("filter",n,e,t),[u,c],a,[d,m],"NHWC")]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cre=(n,e,t,r=ha)=>{switch(n.op){case"Fill":{const s=O("shape",n,e,t),a=O("dtype",n,e,t),o=O("value",n,e,t);return[r.fill(s,o,a)]}case"LinSpace":{const s=O("start",n,e,t),a=O("stop",n,e,t),o=O("num",n,e,t);return[r.linspace(s,a,o)]}case"Multinomial":{const s=O("logits",n,e,t),a=O("numSamples",n,e,t),o=O("seed",n,e,t);return[r.multinomial(s,a,o)]}case"OneHot":{const s=O("indices",n,e,t),a=O("depth",n,e,t),o=O("onValue",n,e,t),u=O("offValue",n,e,t),c=O("dtype",n,e,t);return[r.oneHot(s,a,o,u,c)]}case"Ones":return[r.ones(O("shape",n,e,t),O("dtype",n,e,t))];case"OnesLike":return[r.onesLike(O("x",n,e,t))];case"RandomStandardNormal":return[r.randomStandardNormal(O("shape",n,e,t),O("dtype",n,e,t),O("seed",n,e,t))];case"RandomUniform":return[r.randomUniform(O("shape",n,e,t),O("minval",n,e,t),O("maxval",n,e,t),O("dtype",n,e,t))];case"RandomUniformInt":return[r.randomUniformInt(O("shape",n,e,t),O("minval",n,e,t),O("maxval",n,e,t),O("seed",n,e,t))];case"Range":{const s=O("start",n,e,t),a=O("stop",n,e,t),o=O("step",n,e,t);return[r.range(s,a,o,O("dtype",n,e,t))]}case"TruncatedNormal":{const s=O("shape",n,e,t),a=O("mean",n,e,t),o=O("stdDev",n,e,t),u=O("seed",n,e,t);return[r.truncatedNormal(s,a,o,O("dtype",n,e,t),u)]}case"Zeros":return[r.zeros(O("shape",n,e,t),O("dtype",n,e,t))];case"ZerosLike":return[r.zerosLike(O("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_(n,e,t){const r=O("boxes",n,e,t),s=O("scores",n,e,t),a=O("maxOutputSize",n,e,t),o=O("iouThreshold",n,e,t),u=O("scoreThreshold",n,e,t),c=O("softNmsSigma",n,e,t);return{boxes:r,scores:s,maxOutputSize:a,iouThreshold:o,scoreThreshold:u,softNmsSigma:c}}const Tre=async(n,e,t,r,s=ha)=>{switch(n.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:o,maxOutputSize:u,iouThreshold:c,scoreThreshold:d,softNmsSigma:m}=e_(n,e,t),g=await s.image.nonMaxSuppressionWithScoreAsync(a,o,u,c,d,m);return[g.selectedIndices,g.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:o,maxOutputSize:u,iouThreshold:c,scoreThreshold:d}=e_(n,e,t),m=O("padToMaxOutputSize",n,e,t),g=await s.image.nonMaxSuppressionPaddedAsync(a,o,u,c,d,m);return[g.selectedIndices,g.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:o,maxOutputSize:u,iouThreshold:c,scoreThreshold:d}=e_(n,e,t);return[await s.image.nonMaxSuppressionAsync(a,o,u,c,d)]}case"Where":{const a=s.cast(O("condition",n,e,t),"bool"),o=[await s.whereAsync(a)];return a.dispose(),o}case"ListDiff":return s.setdiff1dAsync(O("x",n,e,t),O("y",n,e,t));default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kre=(n,e,t,r=ha)=>{switch(n.op){case"LowerBound":{const s=O("sortedSequence",n,e,t),a=O("values",n,e,t);return[r.lowerBound(s,a)]}case"TopKV2":{const s=O("x",n,e,t),a=O("k",n,e,t),o=O("sorted",n,e,t),u=r.topk(s,a,o);return[u.values,u.indices]}case"UpperBound":{const s=O("sortedSequence",n,e,t),a=O("values",n,e,t);return[r.upperBound(s,a)]}case"Unique":{const s=O("x",n,e,t),a=r.unique(s);return[a.values,a.indices]}case"UniqueV2":{const s=O("x",n,e,t),a=O("axis",n,e,t),o=r.unique(s,a);return[o.values,o.indices]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ere=(n,e,t,r=ha)=>{switch(n.op){case"Const":return e[n.name];case"PlaceholderWithDefault":const s=O("default",n,e,t);return[da(n.name,e,t)||s];case"Placeholder":return[da(n.name,e,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const m=O("x",n,e,t);return[qc(m)]}case"IdentityN":return O("x",n,e,t).map(m=>qc(m));case"Snapshot":const a=O("x",n,e,t);return[qc(a)];case"Shape":return[r.tensor1d(O("x",n,e,t).shape,"int32")];case"ShapeN":return O("x",n,e,t).map(m=>r.tensor1d(m.shape));case"Size":return[r.scalar(O("x",n,e,t).size,"int32")];case"Rank":return[r.scalar(O("x",n,e,t).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=O("x",n,e,t),u=O("data",n,e,t),c=O("message",n,e,t),d=O("summarize",n,e,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(let m=0;m<u.length;m++)console.log(Array.prototype.slice.call(u[m].dataSync()).slice(0,d));return[o];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nre{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=Ft(0),this.tensorMap=new Map,Es(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ft(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),ve(()=>{const s=xo(t),a=r.length,o=s.length;U(a===o,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${o} elements.`);for(let u=0;u<a;u++){const c=r[u],d=s[u];Es(d),this.tensorMap.set(c,d)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);const r=await e.data();return ve(()=>{const s=[];for(let a=0;a<r.length;a++){const o=r[a],u=this.findWithDefault(o,t);s.push(u)}return ja(s)})}findWithDefault(e,t){const r=this.tensorMap.get(e);return r??t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $re=async(n,e,t,r)=>{switch(n.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(n.name);if(s!=null)return[s];{const a=O("keyDType",n,e,t),o=O("valueDType",n,e,t),u=new Nre(a,o);return r.addHashTable(n.name,u),[u.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=O("tableHandle",n,e,t,r),a=O("keys",n,e,t),o=O("values",n,e,t);return[await r.getHashTableById(s.id).import(a,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=O("tableHandle",n,e,t,r),a=O("keys",n,e,t),o=O("defaultValue",n,e,t);return[await r.getHashTableById(s.id).find(a,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=O("tableHandle",n,e,t,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ire=(n,e,t,r=ha)=>{switch(n.op){case"ResizeBilinear":{const s=O("images",n,e,t),a=O("size",n,e,t),o=O("alignCorners",n,e,t),u=O("halfPixelCenters",n,e,t);return[r.image.resizeBilinear(s,[a[0],a[1]],o,u)]}case"ResizeNearestNeighbor":{const s=O("images",n,e,t),a=O("size",n,e,t),o=O("alignCorners",n,e,t),u=O("halfPixelCenters",n,e,t);return[r.image.resizeNearestNeighbor(s,[a[0],a[1]],o,u)]}case"CropAndResize":{const s=O("image",n,e,t),a=O("boxes",n,e,t),o=O("boxInd",n,e,t),u=O("cropSize",n,e,t),c=O("method",n,e,t),d=O("extrapolationValue",n,e,t);return[r.image.cropAndResize(s,a,o,u,c,d)]}case"ImageProjectiveTransformV3":{const s=O("images",n,e,t),a=O("transforms",n,e,t),o=O("outputShape",n,e,t),u=O("fillValue",n,e,t),c=O("interpolation",n,e,t),d=O("fillMode",n,e,t);return[r.image.transform(s,a,c.toLowerCase(),d.toLowerCase(),u,o)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rre=(n,e,t,r=ha)=>{switch(n.op){case"Equal":return[r.equal(O("a",n,e,t),O("b",n,e,t))];case"NotEqual":return[r.notEqual(O("a",n,e,t),O("b",n,e,t))];case"Greater":return[r.greater(O("a",n,e,t),O("b",n,e,t))];case"GreaterEqual":return[r.greaterEqual(O("a",n,e,t),O("b",n,e,t))];case"Less":return[r.less(O("a",n,e,t),O("b",n,e,t))];case"LessEqual":return[r.lessEqual(O("a",n,e,t),O("b",n,e,t))];case"LogicalAnd":return[r.logicalAnd(O("a",n,e,t),O("b",n,e,t))];case"LogicalNot":return[r.logicalNot(O("a",n,e,t))];case"LogicalOr":return[r.logicalOr(O("a",n,e,t),O("b",n,e,t))];case"Select":case"SelectV2":return[r.where(O("condition",n,e,t),O("a",n,e,t),O("b",n,e,t))];case"BitwiseAnd":return[r.bitwiseAnd(O("a",n,e,t),O("b",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dre=(n,e,t,r=ha)=>{switch(n.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(O("a",n,e,t),O("b",n,e,t),O("transposeA",n,e,t),O("transposeB",n,e,t))];case"Einsum":return[r.einsum(O("equation",n,e,t),...O("tensors",n,e,t))];case"Transpose":return[r.transpose(O("x",n,e,t),O("perm",n,e,t))];case"_FusedMatMul":const[s,a]=O("fusedOps",n,e,t),o=s==="biasadd",u=a==="prelu",c=O("numArgs",n,e,t),d=O("leakyreluAlpha",n,e,t);if(o){if(u&&c!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&c!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[m,g]=O("args",n,e,t);return[r.fused.matMul({a:O("a",n,e,t),b:O("b",n,e,t),transposeA:O("transposeA",n,e,t),transposeB:O("transposeB",n,e,t),bias:m,activation:a,preluActivationWeights:g,leakyreluAlpha:d})];case"MatrixBandPart":return[r.linalg.bandPart(O("a",n,e,t),O("numLower",n,e,t),O("numUpper",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _re=(n,e,t,r=ha)=>{switch(n.op){case"EuclideanNorm":return[r.euclideanNorm(O("x",n,e,t),O("axis",n,e,t),O("keepDims",n,e,t))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(O("x",n,e,t),O("mean",n,e,t),O("variance",n,e,t),O("offset",n,e,t),O("scale",n,e,t),O("epsilon",n,e,t))];case"FusedBatchNormV3":return[r.batchNorm(O("x",n,e,t),O("mean",n,e,t),O("variance",n,e,t),O("offset",n,e,t),O("scale",n,e,t),O("epsilon",n,e,t))];case"LRN":return[r.localResponseNormalization(O("x",n,e,t),O("radius",n,e,t),O("bias",n,e,t),O("alpha",n,e,t),O("beta",n,e,t))];case"Softmax":return[r.softmax(O("x",n,e,t))];case"LogSoftmax":return[r.logSoftmax(O("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Are=(n,e,t,r=ha)=>{switch(n.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:a}=r.raggedGather(O("paramsNestedSplits",n,e,t),O("paramsDenseValues",n,e,t),O("indices",n,e,t),O("outputRaggedRank",n,e,t));return s.concat(a)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:a}=r.raggedRange(O("starts",n,e,t),O("limits",n,e,t),O("splits",n,e,t));return[s,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(O("shape",n,e,t),O("values",n,e,t),O("defaultValue",n,e,t),O("rowPartitionTensors",n,e,t),O("rowPartitionTypes",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ore=(n,e,t,r=ha)=>{switch(n.op){case"Max":{const u=O("axis",n,e,t),c=O("keepDims",n,e,t);return[r.max(O("x",n,e,t),u,c)]}case"Mean":{const u=O("axis",n,e,t),c=O("keepDims",n,e,t);return[r.mean(O("x",n,e,t),u,c)]}case"Min":{const u=O("axis",n,e,t),c=O("keepDims",n,e,t);return[r.min(O("x",n,e,t),u,c)]}case"Sum":{const u=O("axis",n,e,t),c=O("keepDims",n,e,t);return[r.sum(O("x",n,e,t),u,c)]}case"All":{const u=O("axis",n,e,t),c=O("keepDims",n,e,t);return[r.all(O("x",n,e,t),u,c)]}case"Any":{const u=O("axis",n,e,t),c=O("keepDims",n,e,t);return[r.any(O("x",n,e,t),u,c)]}case"ArgMax":{const u=O("axis",n,e,t);return[r.argMax(O("x",n,e,t),u)]}case"ArgMin":{const u=O("axis",n,e,t);return[r.argMin(O("x",n,e,t),u)]}case"Prod":{const u=O("axis",n,e,t),c=O("keepDims",n,e,t);return[r.prod(O("x",n,e,t),u,c)]}case"Cumprod":{const u=O("axis",n,e,t),c=O("exclusive",n,e,t),d=O("reverse",n,e,t);return[r.cumprod(O("x",n,e,t),u,c,d)]}case"Cumsum":{const u=O("axis",n,e,t),c=O("exclusive",n,e,t),d=O("reverse",n,e,t);return[r.cumsum(O("x",n,e,t),u,c,d)]}case"Bincount":const s=O("x",n,e,t),a=O("weights",n,e,t),o=O("size",n,e,t);return[r.bincount(s,a,o)];case"DenseBincount":{const u=O("x",n,e,t),c=O("weights",n,e,t),d=O("size",n,e,t),m=O("binaryOutput",n,e,t);return[r.denseBincount(u,c,d,m)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fre=(n,e,t,r=ha)=>{switch(n.op){case"ConcatV2":case"Concat":{const s=O("n",n,e,t),a=O("axis",n,e,t);let o=O("tensors",n,e,t);return o=o.slice(0,s),[r.concat(o,a)]}case"Gather":{const s=O("x",n,e,t),a=O("indices",n,e,t);return[r.gather(s,r.cast(a,"int32"),0)]}case"GatherV2":{const s=O("axis",n,e,t),a=O("batchDims",n,e,t),o=O("x",n,e,t),u=O("indices",n,e,t);return[r.gather(o,r.cast(u,"int32"),s,a)]}case"Reverse":{const s=O("dims",n,e,t),a=[];for(let u=0;u<s.length;u++)s[u]&&a.push(u);const o=O("x",n,e,t);return[r.reverse(o,a)]}case"ReverseV2":{const s=O("axis",n,e,t),a=O("x",n,e,t);return[r.reverse(a,s)]}case"Slice":{const s=O("begin",n,e,t),a=O("size",n,e,t);return[r.slice(O("x",n,e,t),s,a)]}case"StridedSlice":{const s=O("begin",n,e,t),a=O("end",n,e,t),o=O("strides",n,e,t),u=O("beginMask",n,e,t),c=O("endMask",n,e,t),d=O("ellipsisMask",n,e,t),m=O("newAxisMask",n,e,t),g=O("shrinkAxisMask",n,e,t),y=O("x",n,e,t);return[r.stridedSlice(y,s,a,o,u,c,d,m,g)]}case"Pack":return ve(()=>{const s=O("axis",n,e,t),a=O("tensors",n,e,t),o=a[0].shape,u=r.squeeze(a[0]).shape,c=a.map(d=>{const m=Nn(d.shape,o);if(!m&&!Nn(r.squeeze(d).shape,u))throw new Error("the input tensors shape does not match");return m?d:r.reshape(d,o)});return[r.stack(c,s)]});case"Unpack":{const s=O("axis",n,e,t),a=O("tensor",n,e,t);return r.unstack(a,s)}case"Tile":{const s=O("reps",n,e,t);return[r.tile(O("x",n,e,t),s)]}case"Split":case"SplitV":{const s=O("axis",n,e,t),a=O("numOrSizeSplits",n,e,t),o=O("x",n,e,t);return r.split(o,a,s)}case"ScatterNd":{const s=O("indices",n,e,t),a=O("values",n,e,t),o=O("shape",n,e,t);return[r.scatterND(s,a,o)]}case"GatherNd":{const s=O("x",n,e,t),a=O("indices",n,e,t);return[r.gatherND(s,a)]}case"SparseToDense":{const s=O("sparseIndices",n,e,t),a=O("outputShape",n,e,t),o=O("sparseValues",n,e,t),u=O("defaultValue",n,e,t);return[r.sparseToDense(s,o,a,o.dtype===u.dtype?u:r.cast(u,o.dtype))]}case"TensorScatterUpdate":{const s=O("indices",n,e,t),a=O("values",n,e,t),o=O("tensor",n,e,t);return[r.tensorScatterUpdate(o,s,a)]}default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lre=(n,e,t,r=ha)=>{switch(n.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:a,emptyRowIndicator:o,reverseIndexMap:u}=r.sparse.sparseFillEmptyRows(O("indices",n,e,t),O("values",n,e,t),O("denseShape",n,e,t),O("defaultValue",n,e,t));return[s,a,o,u]}case"SparseReshape":{const{outputIndices:s,outputShape:a}=r.sparse.sparseReshape(O("inputIndices",n,e,t),O("inputShape",n,e,t),O("newShape",n,e,t));return[s,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(O("data",n,e,t),O("indices",n,e,t),O("segmentIds",n,e,t))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(O("data",n,e,t),O("indices",n,e,t),O("segmentIds",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mre=(n,e,t,r=ha)=>{switch(n.op){case"FFT":return[r.fft(O("x",n,e,t))];case"IFFT":return[r.ifft(O("x",n,e,t))];case"RFFT":return[r.rfft(O("x",n,e,t))];case"IRFFT":return[r.irfft(O("x",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zre=(n,e,t,r=ha)=>{switch(n.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(O("input",n,e,t),O("pattern",n,e,t),O("rewrite",n,e,t),O("replaceGlobal",n,e,t))];case"StringNGrams":{const{nGrams:s,nGramsSplits:a}=r.string.stringNGrams(O("data",n,e,t),O("dataSplits",n,e,t),O("separator",n,e,t),O("nGramWidths",n,e,t),O("leftPad",n,e,t),O("rightPad",n,e,t),O("padWidth",n,e,t),O("preserveShortSequences",n,e,t));return[s,a]}case"StringSplit":{const{indices:s,values:a,shape:o}=r.string.stringSplit(O("input",n,e,t),O("delimiter",n,e,t),O("skipEmpty",n,e,t));return[s,a,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(O("input",n,e,t),O("numBuckets",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pre=(n,e,t,r=ha)=>{switch(n.op){case"Cast":return[r.cast(O("x",n,e,t),O("dtype",n,e,t))];case"ExpandDims":{const s=O("axis",n,e,t);return[r.expandDims(O("x",n,e,t),s)]}case"Squeeze":{const s=O("axis",n,e,t);return[r.squeeze(O("x",n,e,t),s)]}case"Reshape":return[r.reshape(O("x",n,e,t),O("shape",n,e,t))];case"EnsureShape":return[r.ensureShape(O("x",n,e,t),O("shape",n,e,t))];case"MirrorPad":return[r.mirrorPad(O("x",n,e,t),O("padding",n,e,t),O("mode",n,e,t))];case"PadV2":case"Pad":return[r.pad(O("x",n,e,t),O("padding",n,e,t),O("constantValue",n,e,t))];case"SpaceToBatchND":{const s=O("blockShape",n,e,t),a=O("paddings",n,e,t);return[r.spaceToBatchND(O("x",n,e,t),s,a)]}case"BatchToSpaceND":{const s=O("blockShape",n,e,t),a=O("crops",n,e,t);return[r.batchToSpaceND(O("x",n,e,t),s,a)]}case"DepthToSpace":{const s=O("blockSize",n,e,t),a=O("dataFormat",n,e,t).toUpperCase();return[r.depthToSpace(O("x",n,e,t),s,a)]}case"BroadcastTo":return[r.broadcastTo(O("x",n,e,t),O("shape",n,e,t))];case"BroadcastArgs":return[r.broadcastArgs(O("s0",n,e,t),O("s1",n,e,t))];default:throw TypeError(`Node type ${n.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NB(n,e,t,r,s=ve){const a=((o,u,c)=>{switch(o.category){case"arithmetic":return s(()=>pre(o,u,c));case"basic_math":return s(()=>mre(o,u,c));case"control":return wre(o,u,c);case"convolution":return s(()=>Sre(o,u,c));case"creation":return s(()=>Cre(o,u,c));case"dynamic":return Tre(o,u,c);case"evaluation":return s(()=>kre(o,u,c));case"image":return s(()=>Ire(o,u,c));case"graph":return s(()=>Ere(o,u,c));case"logical":return s(()=>Rre(o,u,c));case"matrices":return s(()=>Dre(o,u,c));case"normalization":return s(()=>_re(o,u,c));case"ragged":return s(()=>Are(o,u,c));case"reduction":return s(()=>Ore(o,u,c));case"slice_join":return s(()=>Fre(o,u,c));case"sparse":return s(()=>Lre(o,u,c));case"spectral":return s(()=>Mre(o,u,c));case"string":return s(()=>zre(o,u,c));case"transformation":return s(()=>Pre(o,u,c));case"hash_table":return $re(o,u,c,r);case"custom":const d=bB(o.op);if(d&&d.customExecutor)return d.customExecutor(new hre(o,u,c));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(n,e,t);return Ic(a)?a.then(o=>[].concat(o)):[].concat(a)}class $B{constructor(e={},t={},r={},s={},a){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(t=>t.id===0&&t.iterationId===0?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IB(n,e,t,r){const s=new Set,a=[];let o=null,u=null;const c=new Set,d=new Set(Object.keys(n).map(y=>Gi(y)[0]));r=r||[];const m=new Set(r.map(y=>Gi(y.name)[0])),g=[...e];for(;g.length>0;){const y=g.pop();if((rp(y)||qre(y)||Kre(y))&&o==null&&(o=y,u=o.children.map(x=>x.name).filter(x=>s.has(x))),s.add(y.name),t[y.name]==null&&!d.has(y.name)&&!m.has(y.name)){if(y.inputs.length===0){a.push(y.name);continue}y.inputs.forEach(x=>{c.has(x.name)||(c.add(x.name),g.push(x))})}}return{inputs:n,outputs:e,usedNodes:s,missingInputs:a,dynamicNode:o,syncInputs:u}}function Bre(n,e){const{usedNodes:t,inputs:r}=e,s=Object.keys(r).map(C=>Gi(C)[0]).map(C=>n.nodes[C]),a=n.initNodes||[],o=C=>t.has(typeof C=="string"?C:C.name);function u(C){return[...new Map(C.map(N=>[N.name,N])).values()]}const c=u([...s,...n.weights,...a]).filter(o),d=u([...c,...Object.values(n.nodes)]).filter(o),m=new Map(d.map(C=>[C.name,C])),g={};for(const C of d){g[C.name]=g[C.name]||0;for(const N of C.children)o(N)||(g[N.name]=Number.POSITIVE_INFINITY),g[N.name]=(g[N.name]||0)+1}const y=Object.entries(g).filter(([,C])=>C===0).map(([C])=>C),x=[...y];for(;y.length>0;){const C=y.pop(),N=m.get(C);for(const $ of N.children.filter(o))--g[$.name]===0&&(x.push($.name),y.push($.name))}const S=x.map(C=>m.get(C)),k=Vre(S,c);return Ure(k,c),k}function Vre(n,e){const t=new Map(n.map(o=>[o.name,o])),r=e.map(o=>o.name),s=new Set(r);for(;r.length>0;){const o=r.pop(),u=t.get(o);for(const c of u.children)!t.has(c.name)||s.has(c.name)||(s.add(c.name),r.push(c.name))}return n.filter(o=>s.has(o.name))}class PT extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Ure(n,e){const t=new Map(n.map((u,c)=>[u.name,c])),r=new Set(e.map(u=>u.name)),s=u=>r.has(typeof u=="string"?u:u.name),a=new Set(n.map(u=>u.name)),o=u=>a.has(typeof u=="string"?u:u.name);for(const u of n){for(const c of u.children.filter(o)){if(!t.has(c.name))throw new PT(`Child ${c.name} of node ${u.name} is unreachable.`);if(t.get(u.name)>t.get(c.name))throw new PT(`Node ${u.name} is scheduled to run after its child ${c.name}.`)}if(!s(u))for(const c of u.inputs){if(!t.has(c.name))throw new PT(`Input ${c.name} of node ${u.name} is unreachable.`);if(t.get(c.name)>t.get(u.name))throw new PT(`Node ${u.name} is scheduled to run before its input ${c.name}.`)}}}function Wre(n){const e=new Map(n.map((u,c)=>[u.name,c])),t=Number.MAX_SAFE_INTEGER,r=n.map((u,c)=>rp(u)?t:c),s=u=>{const c=r[e.get(u.name)];return c??-1},a=n.map((u,c)=>u.children.map(s).reduce((d,m)=>Math.max(d,m),r[c])),o=new Map;for(let u=0;u<n.length;++u){const c=a[u];if(c===t)continue;const d=n[u],m=n[c];o.has(m.name)||o.set(m.name,[]),o.get(m.name).push(d)}return o}const Hre=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),jre=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Gre=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function rp(n){return Hre.has(n.op)}function qre(n){return jre.has(n.op)}function Kre(n){return Gre.has(n.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BT{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new BT(e.functions[r],this)})}getCompilationKey(e,t){const r=e.map(a=>a.name).sort(),s=t.map(a=>a.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,t){const r=IB(e,t,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:a,syncInputs:o}=r;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const d=t.map(g=>g.name),m=Object.keys(e);throw new Error(`Cannot compute the outputs [${d}] from the provided inputs [${m}]. Missing the following inputs: [${s}]`)}const u=Bre(this.graph,r),c=Wre(u);return{orderedNodes:u,nodeLiveUntilMap:c}}cloneAndKeepTensor(e){if(e==null)return null;const t=e.clone();return Es(t),t}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t,this.cloneTensorList(r)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const s=r.map(y=>this.graph.nodes[Gi(y)[0]]),a=t.map(y=>Gi(y)[0]),o=new Set(a);let u=a.map(y=>this.graph.nodes[y]);u.length===0&&(u=this._outputs);const c=this.getCompilationKey(s,u);let d=this.compiledMap.get(c);d==null&&(d=this.compile(e,u),this.compiledMap.set(c,d));try{this.keepIntermediateTensors=xe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(y){this.keepIntermediateTensors=!1,console.warn(y.message)}const m={},g={};return ve(()=>{const y=new $B(this.weightMap,m,g,this.functionExecutorMap,this.parseNodeNameCache),x=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(N=>{const[$,A]=Gi(N,y),D=[];D[A]=e[N],x[$]=D,this.keepIntermediateTensors&&(this.clonedTensorsMap[$]=this.cloneTensorList(D))});const S=this.getFrozenTensorIds(x),{orderedNodes:k,nodeLiveUntilMap:C}=d;for(const N of k){if(x[N.name])continue;const $=NB(N,x,y,this._resourceManager);if(Ic($))throw new Error(`The execution of the op '${N.op}' returned a promise. Please use model.executeAsync() instead.`);x[N.name]=$,this.keepIntermediateTensors&&(this.clonedTensorsMap[N.name]=this.cloneTensorList($)),this.checkTensorForDisposalWithNodeLiveUntilInfo(N,x,y,S,o,C.get(N.name))}return this.parent==null&&y.dispose(S),t.map(N=>da(N,x,y))})}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(t)}checkTensorForDisposal(e,t,r,s,a,o,u){if(!(rp(t)||o.has(e))){for(const c of r[e])c!=null&&(u[c.id]=(u[c.id]||0)+t.children.length);for(const c of t.inputs){if(rp(c))continue;const d=xB(c.name,r,s);if(d!=null)for(const m of d){if(!m||m.kept||a.has(m.id))continue;const g=u[m.id];g===1?(m.dispose(),delete u[m.id]):g!=null&&u[m.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,r,s,a,o){function u(c){return rp(c)||a.has(c.name)}if(!(rp(e)||o==null))for(const c of o){if(u(c))continue;const d=xB(c.name,t,r);for(const m of d)!m||m.kept||s.has(m.id)||m.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,r=!1,s={},a={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=xe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(y){this.keepIntermediateTensors=!1,console.warn(y.message)}const o=new $B(this.weightMap,s,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const u=await this.executeWithControlFlow(e,o,t,r),c=t.map(y=>da(y,u,o)),d=c.map(y=>y.id),m=Object.keys(e).map(y=>e[y].id),g=new Set([...d,...m,...this.weightIds]);return Object.values(u).forEach(y=>{y.forEach(x=>{x&&!x.isDisposed&&!g.has(x.id)&&x.dispose()})}),this.parent==null&&o.dispose(g),c}async executeFunctionAsync(e,t,r){const s=e.reduce((a,o,u)=>(a[this.inputs[u].name]=o,a),{});return this._executeAsync(s,this.outputNodes,!0,t,r)}async executeWithControlFlow(e,t,r,s){const a=Object.keys(e),o=a.map(D=>this.graph.nodes[Gi(D)[0]]),u=r.map(D=>Gi(D)[0]),c=new Set(u);let d=u.map(D=>this.graph.nodes[D]);d.length===0&&(d=this._outputs);const{usedNodes:m,missingInputs:g,dynamicNode:y,syncInputs:x}=IB(e,d,this.weightMap,this._initNodes),S=[...o,...this.graph.weights,...this._initNodes||[]].map(D=>({node:D,contexts:t.currentContext})),k=Object.assign({},this.weightMap);Object.keys(e).forEach(D=>{const[L,P]=Gi(D),W=[];W[P]=e[D],k[L]=W});const C={},N=this.getFrozenTensorIds(k),$={};for(;S.length>0;){const D=this.processStack(o,S,t,k,$,N,c,C,m);await Promise.all(D)}y==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const A=d.filter(D=>!rp(D)&&!da(D.name,k,t)).map(D=>D.name);if(A.length>0){let D="";throw y!=null&&(D=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${x}]`),new Error(`Cannot compute the outputs [${A}] from the provided inputs [${a}]. Consider providing the following inputs: [${g}]. ${D}`)}return k}processStack(e,t,r,s,a,o,u,c,d){const m=[];for(;t.length>0;){const g=t.pop();r.currentContext=g.contexts;let y="";if(g.node.op==="Enter"&&O("isConstant",g.node,s,r)&&([y]=Gc(g.node.name,r)),s[g.node.name]==null){const x=NB(g.node,s,r,this._resourceManager);y||([y]=Gc(g.node.name,r));const S=r.currentContext;Ic(x)?m.push(x.then(k=>(s[y]=k,this.keepIntermediateTensors&&(this.clonedTensorsMap[y]=this.cloneTensorList(k)),r.currentContext=S,this.checkTensorForDisposal(y,g.node,s,r,o,u,c),this.processChildNodes(g.node,t,r,s,a,d),k))):(s[y]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[y]=this.cloneTensorList(x)),this.checkTensorForDisposal(y,g.node,s,r,o,u,c),this.processChildNodes(g.node,t,r,s,a,d))}else this.processChildNodes(g.node,t,r,s,a,d)}return m}processChildNodes(e,t,r,s,a,o){e.children.forEach(u=>{const[c]=Gc(u.name,r);a[c]||!o.has(u.name)||(u.op==="Merge"?u.inputNames.some(d=>!!da(d,s,r))&&(a[c]=!0,t.push({contexts:r.currentContext,node:u})):u.inputNames.every(d=>!!da(d,s,r))&&(a[c]=!0,t.push({contexts:r.currentContext,node:u})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(t=>t.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{const r=e[t],[s]=Gi(t),a=this.graph.nodes[s];if(a.attrParams.shape&&a.attrParams.shape.value){const o=a.attrParams.shape.value,u=o.length===r.shape.length&&r.shape.every((c,d)=>o[d]===-1||o[d]===c);U(u,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&U(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var t,r;const s={};for(const a in e){const o=(r=(t=this._signature)===null||t===void 0?void 0:t.inputs)===null||r===void 0?void 0:r[a];o!=null?s[o.name]=e[a]:s[a]=e[a]}return s}checkInputs(e){const t=Object.keys(e).filter(r=>{const[s]=Gi(r);return this.graph.nodes[s]==null});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(t=>{var r,s;const a=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[t];return a!=null?a.name:t},{})}checkOutputs(e){e.forEach(t=>{const[r]=Gi(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}}class Xre{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yre="?tfjs-format=file",Qre="model.json";class t_{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},r=C2){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=r,t==null&&(this.loadOptions={}),this.resourceManager=new Xre}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(t.length===0)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Ic(e)?e.then(t=>t.getWeightStream==null?this.loadSync(t):this.loadStreaming(t)):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const t=await uM(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(s=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new BT(wB.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=wB.Instance.transformGraph(e.modelInitializer);this.initializer=new BT(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t=e instanceof Pn?[e]:e,r={};return t.forEach((s,a)=>r[this.structuredOutputKeys[a]]=s),r}return e}predict(e,t){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,t){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var t;if(!(e instanceof Pn)&&!Array.isArray(e)){const a=(t=this.signature)===null||t===void 0?void 0:t.inputs;if(a!=null)for(const o in a){const u=a[o];u.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[u.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((a,o)=>{var u,c,d;const m=(d=(c=(u=this.signature)===null||u===void 0?void 0:u.inputs)===null||c===void 0?void 0:c[o])===null||d===void 0?void 0:d.resourceId;return m!=null?a[o]=this.resourceIdToCapturedInput[m]:a[o]=e[s++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,r=Object.keys(t);for(let s=0;s<r.length;s++){const a=r[s],o=t[a];this.resourceIdToCapturedInput[o.resourceId]=e[s]}}}execute(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=this.executor.execute(e,t);return r.length>1?r:r[0]}async executeAsync(e,t){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const r=await this.executor.executeAsync(e,t);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,r)=>(t[r]=[e[r]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&un(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Zre(n,e={},t=C2){if(n==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof n=="string"&&(n=ese(n));const r=new t_(n,e,t);return await r.load(),r}function Jre(n){if(n==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(n instanceof Array){const[r,s]=n;if(!r)throw new Error("modelJSON must be the first element of the array");if(!s||!(s instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const a=fC(r.weightsManifest),o=G$(r,a,s);e=QC(o)}else if("load"in n)e=n;else if("modelTopology"in n&&"weightSpecs"in n&&"weightData"in n)e=QC(n);else throw new Error("Unknown model format");const t=new t_(e);return t.load(),t}function ese(n){return n.endsWith("/")||(n=n+"/"),`${n}${Qre}${Yre}`}/** @license See the LICENSE file. */const RB="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function tse(n,e){return VT(n,e)}function VT(n,e,t=new Map,r=new Set){if(n==null)return null;if(typeof Blob=="function"&&n instanceof Blob)return n.slice();if(r.has(n))throw new Error("Circular references are not supported.");if(t.has(n))return t.get(n);const s=e(n);if(s.recurse&&s.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(s.recurse)if(ay(n)){const a=Array.isArray(n)?[]:{};r.add(n);for(const o in n){const u=n[o],c=VT(u,e,t,r);a[o]=c}return r.delete(n),n.__proto__&&(a.__proto__=n.__proto__),a}else throw new Error(`Can't recurse into non-iterable type: ${n}`);else return t.set(n,s.value),s.value}function nse(n,e=_B){return DB(n,e)}function DB(n,e,t=new Set){const r=n[0];if(t.has(r))throw new Error("Circular references are not supported.");const s=e(n);if(s.recurse&&s.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(s.recurse)if(ay(r)){const a=Array.isArray(r)?[]:{};t.add(r);for(const o in r){const u=n.map(d=>d[o]),c=DB(u,e,t);a[o]=c}return t.delete(r),a}else throw new Error(`Can't recurse into non-iterable type: ${r}`);else return s.value}function _B(n){return n===null?null:ay(n[0])?{value:null,recurse:!0}:{value:n,recurse:!1}}async function AB(n,e){const t=new Map;VT(n,e,t);for(const s of Array.from(t.keys())){const a=t.get(s);if(Ic(a)){const o=await a;t.set(s,o)}}return VT(n,e,t)}function ay(n){let e=!1;if(xe().get("IS_BROWSER"))e=n instanceof TextDecoder;else{const{StringDecoder:t}=require("string_decoder");e=n instanceof t}return n!=null&&!ArrayBuffer.isView(n)&&(Array.isArray(n)||typeof n=="object"&&!(n instanceof Pn)&&!(n instanceof Promise)&&!e)}function rse(n){return n==null||sse(n)||Array.isArray(n)||typeof n=="object"&&n instanceof Pn||ks(n)}function sse(n){return n===null||typeof n!="object"&&typeof n!="function"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function ase(n){return tse(n,ise)}function ise(n){return n instanceof Pn?{value:n.clone(),recurse:!1}:ay(n)?{value:null,recurse:!0}:{value:n,recurse:!1}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class OB{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,e==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),r=this.get(t);return this.set(t,this.pop()),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class UT extends OB{constructor(){super(UT.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=this.capacity*2,t=new Array(e),r=this.length();for(let s=0;s<r;s++)t[s]=this.get(this.wrap(this.begin+s));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=r}}UT.INITIAL_CAPACITY=32;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function FB(n){return new use(n)}function n_(n){return new cse(n)}function ose(n,e){return new MB(n,e)}function lse(n,e=hd.FAIL){return new bse(n,e)}class Ws{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let r=await e.next();for(;!r.done;)t.push(r.value),r=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),r=e(t.value);for(;!t.done&&r;)t=await this.next(),r=e(t.value)}handleErrors(e){return new yse(this,e)}filter(e){return new mse(this,e)}map(e){return new gse(this,e)}mapAsync(e){return new LB(this,e)}serialMapAsync(e){return new LB(this,e).serial()}flatmap(e){return new vse(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(t=>t===!0)}rowMajorBatch(e,t=!0){return new pse(this,e,t)}columnMajorBatch(e,t=!0,r=_B){return this.rowMajorBatch(e,t).map(a=>nse(a,r))}concatenate(e,t){return new MB(FB([this,e]),t)}take(e){return e<0||e==null?this:new hse(this,e)}skip(e){return e<0||e==null?this:new dse(this,e)}prefetch(e){return new zB(this,e)}shuffle(e,t){return new xse(this,e,t)}serial(){return new fse(this)}}class use extends Ws{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:ase(e),done:!1}}}class cse extends Ws{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class fse extends Ws{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class dse extends Ws{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;un(e.value)}return this.upstream.next()}}class hse extends Ws{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class pse extends Ws{constructor(e,t,r=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=r,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class mse extends Ws{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;un(e.value)}}}class gse extends Ws{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=_c(e.value),r=this.transform(e.value),s=_c(r);for(const a of t)cC(a,s)||a.dispose();return{value:r,done:!1}}}class yse extends Ws{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class LB extends Ws{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=_c(e.value),r=await this.transform(e.value),s=_c(r);for(const a of t)cC(a,s)||a.dispose();return{value:r,done:!1}}}class r_ extends Ws{constructor(){super(),this.outputQueue=new UT,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class vse extends r_{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=_c(e.value),r=this.transform(e.value),s=_c(r);this.outputQueue.pushAll(r);for(const a of t)cC(a,s)||a.dispose();return!0}}class MB extends Ws{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,this.iterator==null){const r=await this.moreIterators.next();if(r.done)return{value:null,done:!0};this.iterator=r.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var hd;(function(n){n[n.FAIL=0]="FAIL",n[n.SHORTEST=1]="SHORTEST",n[n.LONGEST=2]="LONGEST"})(hd||(hd={}));class bse extends Ws{constructor(e,t=hd.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,r=0;function s(o){return o instanceof Ws?{value:o.next().then(c=>(t++,c.done&&r++,c.value)),recurse:!1}:{value:null,recurse:!0}}const a=await AB(this.iterators,s);if(t===r)return{value:null,done:!0};if(r>0)switch(this.mismatchMode){case hd.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case hd.SHORTEST:return{value:null,done:!0};case hd.LONGEST:}return this.count++,{value:a,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class zB extends Ws{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new OB(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class xse extends zB{constructor(e,t,r){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=jg.alea(r||oa().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(t.done)this.upstreamExhausted=!0;else return this.refill(),t}return{value:null,done:!0}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class iy{constructor(){this.size=null}batch(e,t=!0){const r=this;U(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`);let s;return this.size===1/0||this.size==null?s=this.size:t?s=Math.ceil(this.size/e):s=Math.floor(this.size/e),qi(async()=>(await r.iterator()).columnMajorBatch(e,t,Cse),s)}concatenate(e){const t=this;let r;return this.size===1/0||e.size===1/0?r=1/0:this.size!=null&&e.size!=null?r=this.size+e.size:r=null,qi(async()=>(await t.iterator()).concatenate(await e.iterator()),r)}filter(e){const t=this;let r;return this.size===1/0?r=1/0:r=null,qi(async()=>(await t.iterator()).filter(s=>ve(()=>e(s))),r)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return qi(async()=>(await t.iterator()).map(r=>ve(()=>e(r))),this.size)}mapAsync(e){const t=this;return qi(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(e==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return qi(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){const t=this;let r;return this.size!=null&&e>0?r=this.size*e:e===0?r=0:this.size!=null&&(e===void 0||e<0)?r=1/0:r=null,qi(async()=>{const s=n_(async()=>({value:await t.iterator(),done:!1}));return ose(s.take(e))},r)}skip(e){const t=this;let r;return this.size!=null&&e>=0&&this.size>=e?r=this.size-e:this.size!=null&&(this.size<e||e===void 0||e<0)?r=0:r=null,qi(async()=>(await t.iterator()).skip(e),r)}shuffle(e,t,r=!0){if(e==null||e<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const s=this,a=jg.alea(t||oa().toString());return qi(async()=>{let o=a.int32();return r&&(o+=a.int32()),(await s.iterator()).shuffle(e,o.toString())},this.size)}take(e){const t=this;let r;return this.size!=null&&this.size>e?r=e:this.size!=null&&this.size<=e?r=this.size:r=null,qi(async()=>(await t.iterator()).take(e),r)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}iy.MAX_BUFFER_SIZE=1e4;function qi(n,e=null){return new class extends iy{constructor(){super(...arguments),this.size=e}async iterator(){return n()}}}function wse(n){return qi(async()=>FB(n),n.length)}function Sse(n){if(!ay(n))throw new Error("The argument to zip() must be an object or array.");let e;if(Array.isArray(n))for(let t=0;t<n.length;t++)e=e==null?n[t].size:Math.min(e,n[t].size);else if(n instanceof Object)for(const t in n)e=e==null?n[t].size:Math.min(e,n[t].size);return qi(async()=>{const t=await AB(n,r=>{if(r instanceof iy)return{value:r.iterator(),recurse:!1};if(ay(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return lse(t,hd.SHORTEST)},e)}function Cse(n){if(n===null)return null;const e=n[0];return rse(e)?{value:Tse(n),recurse:!1}:{value:null,recurse:!0}}function Tse(n){if(n.length===0)throw new Error("Can't make a batch of zero elements.");return n[0]instanceof Pn?ja(n):Vi(n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class PB extends iy{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split(`
`).map(s=>(s.endsWith("\r")&&(s=s.slice(0,-1)),s))}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */const WT='"',m0=Symbol("out"),BB=Symbol("field"),HT=Symbol("quote"),s_=Symbol("quoteafterquote"),VB=Symbol("quoteinquote");class UB extends iy{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&U(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);const t=this.fullColumnNames.reduce((s,a)=>(s[a]=s[a]+1||1,s),{}),r=Object.keys(t).filter(s=>t[s]>1);if(U(r.length===0,()=>"Duplicate column names found: "+r.toString()),this.columnConfigs){for(const s of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(s)===-1)throw new Error('The key "'+s+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const t=await(await this.base.iterator()).next();if(t.done)throw new Error("No data was found for CSV parsing.");const r=t.value;return this.parseRow(r,!1)}else return null}constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new PB(e),t||(t={}),this.hasHeader=t.hasHeader!==!1,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(U(t.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(t=>this.makeDataElement(t))}makeDataElement(e){const t=this.parseRow(e),r={},s={};for(let a=0;a<this.fullColumnNames.length;a++){const o=this.fullColumnNames[a],u=this.columnConfigs?this.columnConfigs[o]:null;if(!(this.configuredColumnsOnly&&!u)){const c=t[a];let d=null;if(c==="")if(u&&u.default!==void 0)d=u.default;else{if(u&&(u.required||u.isLabel))throw new Error(`Required column ${o} is empty in this line: ${e}`);d=void 0}else{const m=Number(c);if(isNaN(m))u&&u.dtype==="bool"?d=this.getBoolean(c):d=c;else if(!u||!u.dtype)d=m;else switch(u.dtype){case"float32":d=m;break;case"int32":d=Math.floor(m);break;case"bool":d=this.getBoolean(c);break;default:d=m}}u&&u.isLabel?s[o]=d:r[o]=d}}return Object.keys(s).length===0?r:{xs:r,ys:s}}getBoolean(e){return e==="1"||e.toLowerCase()==="true"?1:0}parseRow(e,t=!0){const r=[];let s=0;const a=e.length;let o=m0;for(let u=0;u<a;u++)switch(o){case m0:switch(e.charAt(u)){case WT:s=u+1,o=HT;break;case this.delimiter:if(s=u+1,this.delimiter===" "&&this.delimWhitespace)break;r.push(""),o=m0;break;default:o=BB,s=u;break}break;case BB:switch(e.charAt(u)){case this.delimiter:r.push(e.substring(s,u)),o=m0,s=u+1;break}break;case HT:switch(e.charAt(u)){case WT:o=s_;break}break;case s_:switch(e.charAt(u)){case this.delimiter:r.push(e.substring(s,u-1)),o=m0,s=u+1;break;case WT:o=HT;break;default:o=VB;break}break;case VB:switch(e.charAt(u)){case WT:o=HT;break}break}if(o===s_?r.push(e.substring(s,a-1)):r.push(e.substring(s)),t&&r.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${r}`);return r}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class a_ extends Ws{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;const t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=e.includeSpectrogram!==!1,this.includeWaveform=e.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!xe().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");const t=new a_(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(r){throw new Error(`Error thrown while initializing video stream: ${r.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);const t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t;const r=await this.getAudioData();if(this.includeSpectrogram){const s=this.flattenQueue(r.freqDataQueue);e=this.getTensorFromAudioDataArray(s,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const s=this.flattenQueue(r.timeDataQueue);t=this.getTensorFromAudioDataArray(s,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const e=[],t=[];let r=0;return new Promise(s=>{const a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&s({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++r===this.numFrames&&(clearInterval(a),s({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){const t=e[0].length,r=new Float32Array(e.length*t);return e.forEach((s,a)=>r.set(s,a*t)),r}getTensorFromAudioDataArray(e,t){const r=new Float32Array(Re(t));return r.set(e,r.length-e.length),Vi(r,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class i_ extends Ws{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=fa([0],"int32"),this.webcamConfig.centerCrop){const r=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,s=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,a=(1-r)/2,o=(1-s)/2,u=a+r,c=s+o;this.cropBox=rd([o,a,c,u],[1,4])}else this.cropBox=rd([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(!xe().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}const r=new i_(e,t);return await r.start(),r}async start(){this.webcamConfig.facingMode&&U(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=Uz(this.webcamVideoElement)}catch(t){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(t)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(t){throw new Error(`Error thrown cropping the video: ${t.message}`)}finally{e.dispose()}else return{value:e,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame(e){return ve(()=>{const t=ca(nt(e,"float32"),0);let r;r=Ko.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const s=r.shape;return oe(r,s.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(t=>t.stop());try{this.webcamVideoElement.srcObject=null}catch(t){console.log(t),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class WB{}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class HB extends Ws{split(e){return new kse(this,e)}}class kse extends HB{constructor(e,t){super(),this.upstream=e,this.impl=new Ese(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class Ese extends r_{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const e=await this.upstream.next();if(e.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);const t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(const r of t.slice(0,-1))this.outputQueue.push(r);return this.carryover=t[t.length-1],!0}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Nse extends Ws{decodeUTF8(){return new $se(this)}}class $se extends HB{constructor(e){super(),this.upstream=e,this.impl=new Ise(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class Ise extends r_{constructor(e){if(super(),this.upstream=e,xe().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:t}=require("string_decoder");this.decoder=new t("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const e=await this.upstream.next();let t;if(e.done)return!1;t=e.value;let r;return xe().get("IS_BROWSER")?r=this.decoder.decode(t,{stream:!0}):r=this.decoder.write(Buffer.from(t.buffer)),this.outputQueue.push(r),!0}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class jB extends Nse{constructor(e,t={}){super(),this.file=e,this.options=t,U(e instanceof Uint8Array||(xe().get("IS_BROWSER")?e instanceof File||e instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((t,r)=>{const s=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)t(new Uint8Array(this.file.slice(this.offset,s)));else{const a=new FileReader;a.onload=u=>{let c=a.result;if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),!(c instanceof Uint8Array))return r(new TypeError("FileReader returned unknown type."));t(c)},a.onabort=u=>r(new Error("Aborted")),a.onerror=u=>r(new Error(u.type));const o=this.file.slice(this.offset,s);a.readAsArrayBuffer(o)}this.offset=s}),done:!1}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function Rse(n,e={},t){let r,s;typeof n=="string"?r=n:(r=n.url,s=Dse(n));const a=await XL(r,s);if(a.ok){const o=new Uint8Array(await a.arrayBuffer());return new jB(o,e)}else throw new Error(a.statusText)}const Dse=n=>({method:n.method,headers:n.headers,body:n.body,mode:n.mode,credentials:n.credentials,cache:n.cache,redirect:n.redirect,referrer:n.referrer,integrity:n.integrity});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function GB(n){return typeof n=="string"&&n.slice(0,7)==="file://"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class qB extends WB{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(GB(this.input)&&xe().get("IS_NODE")){const e=require("fs");this.input=e.readFileSync(this.input.slice(7))}return new jB(this.input,this.options)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class KB extends WB{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return GB(this.url)?new qB(this.url,this.fileOptions).iterator():Rse(this.url,this.fileOptions)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function _se(n,e={}){return new UB(new KB(n),e)}function Ase(n){const e=n_(n);return qi(async()=>e)}function Ose(n){return qi(async()=>{const e=await n();return n_(()=>e.next())})}async function Fse(n,e){return i_.create(n,e)}async function Lse(n){return a_.create(n)}/** @license See the LICENSE file. */const XB="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mse=Object.freeze(Object.defineProperty({__proto__:null,CSVDataset:UB,Dataset:iy,FileDataSource:qB,TextLineDataset:PB,URLDataSource:KB,array:wse,csv:_se,func:Ase,generator:Ose,microphone:Lse,version_data:XB,webcam:Fse,zip:Sse},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $t(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&U(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zse=VC;class g0 extends H1{nextDataId(){return g0.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new m$(this,Fl())}write(e,t,r){this.firstUse&&(this.firstUse=!1,xe().get("IS_NODE")&&go(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,t,r){let s;if(t==="string"&&r!=null&&r.length>0&&Tu(r[0])){const a=r.map(o=>ku(o));s=this.write(a,e,t)}else s=this.write(r,e,t);return{dataId:s,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){const t=this.data.get(e);t.refCount--}}move(e,t,r,s,a){this.data.set(e,{values:t,dtype:s,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:r}=this.data.get(e);if(t==="complex64"){const s=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return Uc(s,a)}return EL(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(s=>Dc(s));return gn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return gn(e.shape,e.dtype,t)}makeOutput(e,t,r){return Fl().makeTensorFromTensorInfo(this.makeTensorInfo(t,r,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=oa();return e(),{kernelMs:oa()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){$t([e],"where");const t=this.readSync(e.dataId);return zse(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}g0.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YB(n){const e=new Float32Array(n.length);for(let t=0;t<n.length;++t)e[t]=Math.abs(n[t]);return e}const Pse={kernelName:db,backendName:"cpu",kernelFunc:n=>{const{x:e}=n.inputs,t=n.backend;$t(e,"abs");let r=new Float32Array(Re(e.shape));const s=t.data.get(e.dataId).values;return r=YB(s),t.makeOutput(r,e.shape,e.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ss(n){return(e,t,r,s,a)=>{const o=cn(e,t),u=o.length,c=Ot(o),d=Re(o),m=Ls(a,d),g=e.length,y=t.length,x=Ot(e),S=Ot(t),k=Mh(e,o),C=Mh(t,o);if(k.length+C.length===0)for(let N=0;N<m.length;++N)m[N]=n(r[N%r.length],s[N%s.length]);else for(let N=0;N<m.length;++N){const $=Sh(N,u,c),A=$.slice(-g);k.forEach(W=>A[W]=0);const D=Dl(A,g,x),L=$.slice(-y);C.forEach(W=>L[W]=0);const P=Dl(L,y,S);m[N]=n(r[D],s[P])}return[m,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ki(n){const{inputs:e,backend:t}=n,{real:r,imag:s}=e,a=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,u=t.makeTensorInfo(r.shape,"complex64"),c=t.data.get(u.dataId);return c.complexTensorInfos={real:t.makeTensorInfo(r.shape,"float32",a),imag:t.makeTensorInfo(s.shape,"float32",o)},u}const Bse={kernelName:nS,backendName:"cpu",kernelFunc:Ki};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jT(n,e,t="float32"){if(t==="complex64"){const s=jT(n,e,"float32"),a=jT(n,e,"float32");return Ki({inputs:{real:s,imag:a},backend:n})}const r=ia(Re(e),t);return n.makeTensorInfo(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zu(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Vse={kernelName:Jm,backendName:"cpu",kernelFunc:zu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sp(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.data.get(r.dataId).complexTensorInfos.real,a=t.data.get(s.dataId).values;return t.makeTensorInfo(s.shape,s.dtype,a)}const Use={kernelName:MS,backendName:"cpu",kernelFunc:sp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QB(n,e,t,r){if(r==="int32"){const s=Int32Array.from(n);return[e,"int32",s]}if(r==="bool"){const s=jf([0],t),[a,o]=ss((u,c)=>u!==c?1:0)(e,[],n,s,"bool");return[o,"bool",a]}throw new Error(`Error in Cast: failed to cast ${t} to ${r}`)}function pd(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return zu({inputs:{x:s},backend:t});const m=jT(t,s.shape,s.dtype),g=pd({inputs:{x:s},backend:t,attrs:{dtype:"float32"}}),y=Ki({inputs:{real:g,imag:m},backend:t});return t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),y}if(s.dtype==="complex64"){const m=sp({inputs:{input:s},backend:t}),g=pd({inputs:{x:m},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(m),g}if(!b$(s.dtype,a)){const m=zu({inputs:{x:s},backend:t});return{dataId:m.dataId,shape:m.shape,dtype:a}}const o=t.data.get(s.dataId).values,[u,c,d]=QB(o,s.shape,s.dtype,a);return t.makeTensorInfo(u,c,d)}const Wse={kernelName:Bm,backendName:"cpu",kernelFunc:pd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rs(n,e,t,r){return t==null?({inputs:s,backend:a})=>{const{a:o,b:u}=s,c=a;$t([o,u],n);const d=c.data.get(o.dataId).values,m=c.data.get(u.dataId).values,g=o.dtype==="string"?Wc(d):d,y=o.dtype==="string"?Wc(m):m,x=r||o.dtype,[S,k]=e(o.shape,u.shape,g,y,x);return c.makeTensorInfo(k,x,S)}:({inputs:s,backend:a})=>{const{a:o,b:u}=s,c=a;if(o.dtype==="complex64"||u.dtype==="complex64"){const d=pd({inputs:{x:o},backend:c,attrs:{dtype:"complex64"}}),m=c.data.get(d.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,x=c.data.get(g.dataId).values,S=c.data.get(y.dataId).values,k=pd({inputs:{x:u},backend:c,attrs:{dtype:"complex64"}}),C=c.data.get(k.dataId),N=C.complexTensorInfos.real,$=C.complexTensorInfos.imag,A=c.data.get(N.dataId).values,D=c.data.get($.dataId).values,[L,P,W]=t(o.shape,u.shape,x,S,A,D),B=c.makeTensorInfo(W,"float32",L),G=c.makeTensorInfo(W,"float32",P),X=Ki({inputs:{real:B,imag:G},backend:c});return c.disposeIntermediateTensorInfo(d),c.disposeIntermediateTensorInfo(k),c.disposeIntermediateTensorInfo(B),c.disposeIntermediateTensorInfo(G),X}else{const d=c.data.get(o.dataId).values,m=c.data.get(u.dataId).values,g=r||o.dtype,[y,x]=e(o.shape,u.shape,d,m,g);return c.makeTensorInfo(x,g,y)}}}function o_(n){return(e,t,r,s,a,o)=>{const u=cn(e,t),c=Re(u),d=u.length,m=Ot(u),g=Ls("float32",c),y=Ls("float32",c),x=Mh(e,u),S=Mh(t,u),k=Uc(r,s),C=Uc(a,o),N=e.length,$=Ot(e),A=t.length,D=Ot(t);if(x.length+S.length===0)for(let L=0;L<g.length;L++){const P=L%k.length,W=L%C.length,B=n(k[P*2],k[P*2+1],C[W*2],C[W*2+1]);g[L]=B.real,y[L]=B.imag}else for(let L=0;L<g.length;L++){const P=Sh(L,d,m),W=P.slice(-N);x.forEach(ue=>W[ue]=0);const B=Dl(W,N,$),G=P.slice(-A);S.forEach(ue=>G[ue]=0);const X=Dl(G,A,D),re=n(k[B*2],k[B*2+1],C[X*2],C[X*2+1]);g[L]=re.real,y[L]=re.imag}return[g,y,u]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZB=ss((n,e)=>n+e),Hse=o_((n,e,t,r)=>({real:n+t,imag:e+r})),oy=Rs(Ch,ZB,Hse),jse={kernelName:Ch,backendName:"cpu",kernelFunc:oy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l_(n,e,t,r,s){const a=Re(r),o=ia(s,t);for(let u=0;u<n.length;u++){const c=n[u];if(c<0)throw new Error("Input x must be non-negative!");c>=s||(a>0?o[c]+=e[u]:o[c]+=1)}return o}function JB(n,e,t,r=!1){const s=n.shape[0],a=n.shape[1],o=gn([s,t],e.dtype);for(let u=0;u<s;u++)for(let c=0;c<a;c++){const d=n.get(u,c);if(d<0)throw new Error("Input x must be non-negative!");d>=t||(r?o.set(1,u,d):e.size>0?o.set(o.get(u,d)+e.get(u,c),u,d):o.set(o.get(u,d)+1,u,d))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eV=ss((n,e)=>n&e),Gse=Rs(xb,eV),qse={kernelName:xb,backendName:"cpu",kernelFunc:Gse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pu(n){return(e,t,r)=>{const s=Gr(t,e.length);for(let a=0;a<e.length;++a)s[a]=n(e[a],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sr(n,e,t){const r=Pu(e);return md(n,r,t)}function md(n,e,t){return({inputs:r,attrs:s,backend:a})=>{const{x:o}=r;$t(o,n);const u=a,c=u.data.get(o.dataId).values;let d;if(o.dtype==="string"){if(!Array.isArray(c))throw new Error("String tensor's value was not an instance of Array");d=Wc(c)}else d=c;const m=t||o.dtype,g=e(d,m,s);return u.makeTensorInfo(o.shape,m,g)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tV=Pu(n=>Math.ceil(n)),Kse=md(Vm,tV),Xse={kernelName:Vm,backendName:"cpu",kernelFunc:Kse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nV(n,e,t,r){const s=Gr(t,Re(e));if(r&&t!=="string"){let a=0;n.forEach(o=>{const u=Re(o.shape);s.set(o.vals,a),a+=u})}else{let a=0;n.forEach(o=>{const u=t==="string"?Wc(o.vals):o.vals;let c=0;for(let d=0;d<o.shape[0];++d){const m=d*e[1]+a;for(let g=0;g<o.shape[1];++g)s[m+g]=u[c++]}a+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rV=ss((n,e)=>n===e?1:0),sV=Rs(Ib,rV,null,"bool"),Yse={kernelName:Ib,backendName:"cpu",kernelFunc:sV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aV=Pu(n=>Math.exp(n)),iV=md(Km,aV,"float32"),Qse={kernelName:Km,backendName:"cpu",kernelFunc:iV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oV=Pu(n=>Math.expm1(n)),Zse=md(Xm,oV),Jse={kernelName:Xm,backendName:"cpu",kernelFunc:Zse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lV=Pu(n=>Math.floor(n)),eae=md(Ym,lV),tae={kernelName:Ym,backendName:"cpu",kernelFunc:eae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uV=ss((n,e)=>Math.floor(n/e)),nae=Rs(Qm,uV,null,"int32"),rae={kernelName:Qm,backendName:"cpu",kernelFunc:nae};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cV(n,e,t,r,s,a,o,u,c){const d=gn([r,a],t);for(let m=0;m<r;m++){const g=[];let y=0;for(let x=0;x<s;x++){const S=n[m*s+x];y+=S*o[x],g.push(S)}if(y<0||y>=c/a)throw new Error(`Invalid indices: ${g} does not index into ${u}`);for(let x=0;x<a;x++)d.values[m*a+x]=e.get(...e.indexToLoc(y*a+x))}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fV(n,e,t){const r=gn(t,n.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),u=o[0],c=o[2],d=e.locToIndex([u,c]);o[2]=e.values[d];const m=n.locToIndex(o);0<=m&&m<n.values.length&&(r.values[s]=n.values[m])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dV=ss((n,e)=>n>e?1:0),sae=Rs(Ab,dV,null,"bool"),aae={kernelName:Ab,backendName:"cpu",kernelFunc:sae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hV=ss((n,e)=>n>=e?1:0),iae=Rs(Zm,hV,null,"bool"),oae={kernelName:Zm,backendName:"cpu",kernelFunc:iae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pV=ss((n,e)=>n<e?1:0),lae=Rs(Fb,pV,null,"bool"),uae={kernelName:Fb,backendName:"cpu",kernelFunc:lae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mV=ss((n,e)=>n<=e?1:0),cae=Rs(Lb,mV,null,"bool"),fae={kernelName:Lb,backendName:"cpu",kernelFunc:cae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gV(n,e,t){const r=(e-n)/(t-1),s=ia(t,"float32");s[0]=n;for(let a=1;a<s.length;a++)s[a]=s[a-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yV=Pu(n=>Math.log(n)),dae=md(rg,yV),hae={kernelName:rg,backendName:"cpu",kernelFunc:dae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vV(n,e,t,r){const s=Ls(r,Re(t));for(let a=0;a<s.length;++a){const o=a*e;let u=n[o];for(let c=0;c<e;++c){const d=n[o+c];(Number.isNaN(d)||d>u)&&(u=d)}s[a]=u}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bV=ss((n,e)=>Math.max(n,e)),pae=Rs(ag,bV),mae={kernelName:ag,backendName:"cpu",kernelFunc:pae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xV=ss((n,e)=>Math.min(n,e)),gae=Rs(ig,xV),yae={kernelName:ig,backendName:"cpu",kernelFunc:gae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u_=ss((n,e)=>n*e),vae=o_((n,e,t,r)=>({real:n*t-e*r,imag:n*r+e*t})),GT=Rs(lg,u_,vae),bae={kernelName:lg,backendName:"cpu",kernelFunc:GT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wV(n,e,t){const r=Rc(-1,t);return u_([],e,r,n,t)}function xae(n){const{inputs:e,backend:t}=n,{x:r}=e;$t(r,"neg");const s=t.data.get(r.dataId).values,[a,o]=wV(s,r.shape,r.dtype);return t.makeTensorInfo(o,r.dtype,a)}const wae={kernelName:qb,backendName:"cpu",kernelFunc:xae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SV=ss((n,e)=>n!==e?1:0),Sae=Rs(Kb,SV,null,"bool"),Cae={kernelName:Kb,backendName:"cpu",kernelFunc:Sae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_(n,e,t,r,s){const a=e.length,o=Re(e),u=Ot(e),c=Ot(s),d=Ls(t,Re(s));for(let m=0;m<o;++m){const g=Sh(m,a,u),y=new Array(g.length);for(let S=0;S<y.length;S++)y[S]=g[r[S]];const x=Dl(y,a,c);d[x]=n[m]}return d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Si(n){const{inputs:e,attrs:t,backend:r}=n,{x:s}=e,{perm:a}=t;$t(s,"transpose");const o=s.shape.length,u=new Array(o);for(let g=0;g<u.length;g++)u[g]=s.shape[a[g]];const c=r.data.get(s.dataId).values,d=c_(c,s.shape,s.dtype,a,u);return{dataId:r.write(d,u,s.dtype),shape:u,dtype:s.dtype}}const Tae={kernelName:Th,backendName:"cpu",kernelFunc:Si};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CV(n,e,t,r){const[s,a]=Bs(n,r),o=pi(e,"int32"),u=ia(Re(s),o),c=Re(a);for(let d=0;d<u.length;++d){const m=d*c;let g=1;for(let y=0;y<c;++y)g*=t[m+y];u[d]=g}return{outVals:u,outShape:s,outDtype:o}}function kae(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r;$t(s,"prod");const u=s.shape.length,c=wn(a,s.shape),d=Ur(c,u);let m=c,g=s;const y=[];d!=null&&(g=Si({inputs:{x:s},backend:t,attrs:{perm:d}}),y.push(g),m=ns(m.length,u));const x=t.data.get(g.dataId).values,{outVals:S,outShape:k,outDtype:C}=CV(g.shape,g.dtype,x,m);let N=k;return o&&(N=ts(k,c)),y.forEach($=>t.disposeIntermediateTensorInfo($)),t.makeTensorInfo(N,C,S)}const Eae={kernelName:ex,backendName:"cpu",kernelFunc:kae};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nae(n,e,t){n.forEach((r,s)=>{if(r<0||r>=t){const a=Sh(s,e.length,Ot(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${t})`)}})}function $ae(n,e){for(let t=0;t<n.length;++t){const r=n[t],s=t===n.length-1?e:n[t+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function Iae(n,e,t,r){const s=[];let a=0;const o=e.length-1+t.length,u=new Array(o).fill(null).map(()=>[0]);$ae(t,r);let c=1;for(let d=0;d<e.length-1;++d){c*=e[d];const m=e[d+1];for(let g=1;g<c+1;++g)u[d].push(g*m)}for(let d=0;d<n.length;++d){let m=n[d],g=n[d]+1;for(let y=0;y<t.length;++y){const x=t[y],S=y+e.length-1;if(S>=0){const k=u[S],C=k[k.length-1]-x[m];for(let N=m;N<g;++N)u[S].push(x[N+1]+C)}m=x[m],g=x[g]}g!==m&&(s.push([m,g]),a+=g-m)}return{outSplits:u,valueSlices:s,numValues:a}}function Rae(n){const e=[];for(let t=0;t<n.length;++t){const r=n[t].length,s=Gr("int32",r);e.push(s),n[t].forEach((a,o)=>s[o]=a)}return e}function TV(n,e){const t=n.slice(0,e);for(;t.length<e;)t.push(1);for(let r=e;r<n.length;r++)t[e-1]*=n[r];return t}function Dae(n,e,t,r,s,a){const o=TV(e,2)[1],u=TV(a,2)[1];let c=0;for(const d of t)for(let m=d[0];m<d[1];++m){for(let g=0;g<r;++g)s[c*u+g]=n[m*o+g];++c}}function _ae(n,e,t,r,s){const a=e.slice();a[0]=s;const o=Gr(t,Re(a)),u=n.length,c=u===0?0:u/e[0];return Dae(n,e,r,c,o,a),[o,a]}function kV(n,e,t,r,s,a,o,u){if(n.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const c=e[0][0]-1;if(Nae(a,o,c),r.length===0)throw new Error("params.rank must be nonzero");const d=r[0],{outSplits:m,valueSlices:g,numValues:y}=Iae(a,o,n,d),x=Rae(m),S=_ae(t,r,s,g,y);return[x,S[0],S[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EV=2147483647;function NV(n,e,t,r,s,a,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const u=e.length===0,c=s.length===0,d=o.length===0,m=[];u||m.push(e[0]),c||m.push(s[0]),d||m.push(o[0]);for(let C=1;C<m.length;++C)if(m[C]!==m[C-1])throw new Error("starts, limits, and deltas must have the same shape");const g=m.length===0?1:m[0],y=Gr("int32",g+1);y[0]=0;for(let C=0;C<g;++C){const N=u?n[0]:n[C],$=c?r[0]:r[C],A=d?a[0]:a[C];if(A===0)throw new Error("Requires delta != 0");let D;if(A>0&&$<N||A<0&&$>N)D=0;else if(D=Math.ceil(Math.abs(($-N)/A)),D>EV)throw new Error(`Requires ((limit - start) / delta) <= ${EV}`);y[C+1]=y[C]+D}const x=y[g],S=Gr(t,x);let k=0;for(let C=0;C<g;++C){const N=y[C+1]-y[C];let $=u?n[0]:n[C];const A=d?a[0]:a[C];for(let D=0;D<N;++D)S[k++]=$,$+=A}return[y,S]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Jo=zl;class qT{constructor(e,t,r,s,a,o,u,c,d,m){this.shape=e,this.shapeShape=t,this.values=r,this.valuesShape=s,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=u,this.rowPartitionValues=c,this.rowPartitionValuesShapes=d,this.rowPartitionTypes=n3(m),this.raggedRank=r3(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Jo.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Jo.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Jo.VALUE_ROWIDS:return qT.getMaxWidthValueRowID(t);case Jo.ROW_SPLITS:return qT.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${Jo[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(t===0||t===1)return 0;let r=0;for(let s=0;s<t-1;++s){const a=e[s+1]-e[s];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const t=e.length;if(t===0)return 0;let r=0,s=e[0],a=0;for(let o=1;o<t;++o){const u=e[o];u!==s&&(s=u,a=Math.max(o-r,a),r=o)}return Math.max(t-r,a)}tensorShapeFromTensor(e,t,r=!0){if(t.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return IV(e,r)}calculateOutputSize(e){const t=this.valuesShape,r=this.defaultValueShape;s3(r,t);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=t3(this.raggedRank,s,t);o[0]<0&&(o[0]=e);for(let u=1;u<=this.raggedRank;++u)o[u]<0&&(o[u]=this.getMaxWidth(u));return o}calculateFirstParentOutputIndex(e,t,r){const s=Math.min(e,r),a=[];let o=0;for(let u=0;u<s;++u,o+=t)a.push(o);for(let u=s;u<e;++u)a.push(-1);return U(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,r,s){const a=e.length,o=[];for(let u=0;u<a-1;++u){const c=e[u+1]-e[u];let d=Math.min(s,c),m=t[u];m===-1&&(d=0);for(let g=0;g<d;++g)o.push(m),m+=r;for(let g=0;g<c-d;++g)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,r,s){const a=e.length,o=[];if(a===0)return[];let u=0,c=e[0];if(c>=t.length)throw new Error(`Got currentValueRowId=${c}, which is not less than ${t.length}`);let d=t[c];o.push(d);for(let m=1;m<a;++m){const g=e[m];if(g===c)d>=0&&(++u,u<s?d+=r:d=-1);else{if(u=0,c=g,g>=t.length)throw new Error(`Got nextValueRowId=${g} which is not less than ${t.length}`);d=t[g]}o.push(d)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,r,s){const a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Jo.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,r,s);case Jo.ROW_SPLITS:if(a.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,r,s);default:throw new Error(`Unsupported partition type: ${Jo[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case Jo.FIRST_DIM_SIZE:return e[0];case Jo.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Jo.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Jo[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const t=this.getFirstDimensionSize(),r=this.calculateOutputSize(t),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let c=s.length-2;c>=0;--c)s[c]=s[c+1]*r[c+1];const a=IV(r,!1),o=Gr(this.valuesDType,Re(a));if(s[0]*r[0]>0){let c=this.calculateFirstParentOutputIndex(t,s[0],r[0]);for(let d=1;d<=this.raggedRank;++d)c=this.calculateOutputIndex(d-1,c,s[d],r[d]);this.setOutput(this.raggedRank,c,o,a)}return[a,o]}setOutput(e,t,r,s){if(r.length===0)return;const a=this.values,o=r;let u=s.slice();u=u.slice(e+1);const c=Re(u),d=t.length;let m=this.defaultValue;if(m.length!==c&&m.length!==1){const S=this.defaultValueShape;ve(()=>{const k=oe(m,S);m=Fh(k,u).dataSync()})}let g=0,y=0,x=0;for(let S=0;S<=d;++S){let k=S<d?t[S]:-1;if(k===x){++x;continue}if(y<x){const C=a.subarray(g*c),N=o.subarray(y*c),$=(x-y)*c;$V(N,C,$)}if(S>=d){const C=r.length;k=Math.floor(C/c)}if(k>x)if(this.defaultValue.length===1)o.subarray(x*c,k*c).fill(this.defaultValue[0]),x=k;else for(;k>x;){const C=o.slice(x*c);$V(C,m,c),++x}k<0?(g=S+1,y=x):(g=S,y=x,x=y+1)}}}function $V(n,e,t){for(let r=0;r<t;r++)n[r]=e[r]}function IV(n,e){const t=[];for(let r of n){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}t.push(r)}return t}function RV(n,e,t,r,s,a,o,u,c,d){return new qT(n,e,t,r,s,a,o,u,c,d).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DV(n,e,t,r){const s=n===e,a=n<e&&t<0,o=e<n&&t>1;if(s||a||o)return ia(0,r);const u=Math.abs(Math.ceil((e-n)/t)),c=ia(u,r);e<n&&t===1&&(t=-1),c[0]=n;for(let d=1;d<c.length;d++)c[d]=c[d-1]+t;return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _V=Pu(n=>1/Math.sqrt(n)),Aae=md(pg,_V),Oae={kernelName:pg,backendName:"cpu",kernelFunc:Aae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ap(n,e,t,r,s,a,o,u,c,d){const m=[r/s,s],g=n.values,y=e.values;if(r===0)return gn(t,e.dtype);const x=c instanceof ms?c:gn(m,e.dtype);typeof c=="string"||typeof c=="number"?x.values.fill(c):typeof c=="boolean"&&x.values.fill(+c);for(let S=0;S<a;S++){const k=[];let C=0;for(let N=0;N<o;N++){const $=g[S*o+N];k.push($),C+=$*u[N]}if(C<0||C>=r/s)throw new Error(`Invalid indices: ${k} does not index into ${t}`);for(let N=0;N<s;N++)d?x.values[C*s+N]+=y[S*s+N]:x.values[C*s+N]=e.rank===0?y[0]:y[S*s+N]}return x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fae=Pu(n=>1/(1+Math.exp(-n))),AV=sr(bg,n=>1/(1+Math.exp(-n))),Lae={kernelName:bg,backendName:"cpu",kernelFunc:AV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OV(n,e,t,r,s){const a=N2(r,e,t),o=Re(t),u=Ot(r);if(a){const g=$2(e,u);return s==="string"?n.slice(g,g+o):n.subarray(g,g+o)}const c=s==="string"?Wc(n):n,d=gn(r,s,c),m=gn(t,s);for(let g=0;g<m.size;++g){const y=m.indexToLoc(g),x=y.map((S,k)=>S+e[k]);m.set(d.get(...x),...y)}return s==="string"?E3(m.values):m.values}function ip(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:a,size:o}=r;$t(s,"slice");const[u,c]=JC(s,a,o);k2(s,u,c);const d=t.data.get(s.dataId).values,m=OV(d,u,c,s.shape,s.dtype);return t.makeTensorInfo(c,s.dtype,m)}const Mae={kernelName:ix,backendName:"cpu",kernelFunc:ip};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FV(n,e,t,r,s,a,o){const u=e[0],c=a[0],d=new Array(c),m=new Array(u),g=e[1];if(c===0){if(u!==0)throw new Error(h3(u));const C=Gr(t,0),N=Gr(s,0);return[C,[0,g],N,d,m]}let y=!0,x=0;const S=new Array(c).fill(0);for(let C=0;C<u;++C){const N=n[C*g];if(N<0)throw new Error(p3(C,N));if(N>=c)throw new Error(m3(C,N,c));++S[N],y=y&&N>=x,x=N}let k=!0;for(let C=0;C<c;++C){const N=S[C]===0;d[C]=N,k=k&&!N,S[C]=Math.max(S[C],1),C>0&&(S[C]+=S[C-1])}if(k&&y){const C=n,N=r;for(let $=0;$<u;++$)m[$]=$;return[C,[u,g],N,d,m]}else{const C=S[c-1],N=Gr(t,C*g),$=Gr(s,C),A=new Array(c).fill(0);for(let D=0;D<u;++D){const L=n[D*g],P=A[L],W=(L===0?0:S[L-1])+P;A[L]++;for(let B=0;B<g;++B)N[W*g+B]=n[D*g+B];$[W]=r[D],m[D]=W}for(let D=0;D<c;++D)if(A[D]===0){const P=D===0?0:S[D-1];N[P*g+0]=D;for(let W=1;W<g;++W)N[P*g+W]=0;$[P]=o}return[N,[C,g],$,d,m]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LV(n,e,t,r,s){const a=Re(r),o=e[0],u=s.length,c=[];let d=1,m=-1;for(let C=0;C<u;++C){const N=s[C];if(N===-1){if(m!==-1)throw new Error(g3(m,C));m=C,c.push(1)}else{if(N<0)throw new Error(y3(C,N));d*=N,c.push(N)}}if(m!==-1){if(d<=0)throw new Error(v3());const C=Math.trunc(a/d);if(d*C!==a)throw new Error(b3(r,c));c[m]=C}if(Re(c)!==a)throw new Error(x3(r,c));const y=r.length,x=[];if(y>0){x[y-1]=1;for(let C=y-2;C>=0;--C)x[C]=x[C+1]*r[C+1]}const S=[];if(u>0){S[u-1]=1;for(let C=u-2;C>=0;--C)S[C]=S[C+1]*c[C+1]}const k=Gr(t,o*u);for(let C=0;C<o;++C){let N=0;for(let $=0;$<y;++$)N+=n[C*y+$]*x[$];for(let $=0;$<u;++$)k[C*u+$]=Math.trunc(N/S[$]),N%=S[$]}return[k,[o,u],c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f_(n,e,t,r,s,a=!1,o=0){const u=r.length,c=[e[0],n.length/e[0]],d=c[1],g=u>0?s[u-1]+1:0;if(g<0)throw new Error(Y2());const y=e.slice();y[0]=g;const x=y.reduce((A,D)=>A*D,1),S=Gr(t,x);if(u===0)return g>0&&S.fill(o),[S,y];if(g<=0)throw new Error(Y2());let k=0,C=1,N=0,$=s[k];for(;;){let A=0;if(C<u){if(A=s[C],$===A){++C;continue}if($>=A)throw new Error(w3())}if($<0||$>=g)throw new Error(S3($,g));$>N&&S.fill(o,N*d,$*d);for(let D=k;D<C;++D){const L=r[D];if(L<0||L>=c[0])throw new Error(C3(D,r[D],c[0]));for(let P=0;P<d;P++)S[$*d+P]+=n[L*d+P]}if(a)for(let D=0;D<d;D++)S[$*d+D]/=C-k;if(k=C,++C,N=$+1,$=A,C>u)break}return N<g&&S.fill(o,N*d,g*d),[S,y]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zae=Pu(n=>Math.sqrt(n)),Pae=sr(wg,n=>Math.sqrt(n)),Bae={kernelName:wg,backendName:"cpu",kernelFunc:Pae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MV=ss((n,e)=>{const t=n-e;return t*t}),Vae=Rs(Sg,MV),Uae={kernelName:Sg,backendName:"cpu",kernelFunc:Vae};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zV=Pu((n,e)=>{const{pattern:t,replaceGlobal:r,rewrite:s}=e;return n.replace(new RegExp(t,r?"g":""),s)}),Wae=md(fx,zV),Hae={kernelName:fx,backendName:"cpu",kernelFunc:Wae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PV(n,e,t,r){const s=gn(n,e.dtype);for(let a=0;a<s.size;a++){const o=s.indexToLoc(a),u=new Array(o.length);for(let c=0;c<u.length;c++)u[c]=o[c]*t[c]+r[c];s.set(e.get(...u),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jae{constructor(e,t,r,s,a,o){this.separator=ku(e),this.nGramWidths=t,this.leftPad=ku(r),this.rightPad=ku(s),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const r=this.getPadWidth(t);return Math.max(0,e+2*r-t+1)}createNGrams(e,t,r,s,a,o){for(let u=0;u<a;++u){const c=this.getPadWidth(o),d=Math.max(0,c-u),m=Math.max(0,c-(a-(u+1))),g=o-(d+m),y=t+(d>0?0:u-c);let x=0;x+=d*this.leftPad.length;for(let $=0;$<g;++$)x+=e[y+$].length;x+=m*this.rightPad.length;const S=d+m+g-1;x+=S*this.separator.length,r[s+u]=new Uint8Array(x);const k=r[s+u];let C=0;const N=$=>$.forEach(A=>k[C++]=A);for(let $=0;$<d;++$)N(this.leftPad),N(this.separator);for(let $=0;$<g-1;++$)N(e[y+$]),N(this.separator);if(g>0){N(e[y+g-1]);for(let $=0;$<m;++$)N(this.separator),N(this.rightPad)}else{for(let $=0;$<m-1;++$)N(this.rightPad),N(this.separator);N(this.rightPad)}}}compute(e,t){const r=e.length,s=t.length;if(s>0){let c=t[0];if(c!==0)throw new Error(`First split value must be 0, got ${c}`);for(let d=1;d<s;++d){let m=t[d]>=c;if(m=m&&t[d]<=r,!m)throw new Error(`Invalid split value ${t[d]}, must be in [${c}, ${r}]`);c=t[d]}if(c!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${c}`)}const a=s-1,o=Gr("int32",s);if(r===0||s===0){const c=new Array(r);for(let d=0;d<=a;++d)o[d]=0;return[c,o]}o[0]=0;for(let c=1;c<=a;++c){const d=t[c]-t[c-1];let m=0;this.nGramWidths.forEach(g=>{m+=this.getNumNGrams(d,g)}),this.preserveShort&&d>0&&m===0&&(m=1),o[c]=o[c-1]+m}const u=new Array(o[a]);for(let c=0;c<a;++c){const d=t[c];let m=o[c];if(this.nGramWidths.forEach(g=>{const y=t[c+1]-t[c],x=this.getNumNGrams(y,g);this.createNGrams(e,d,u,m,x,g),m+=x}),this.preserveShort&&m===o[c]){const g=t[c+1]-t[c];if(g===0)continue;const y=g+2*this.padWidth;this.createNGrams(e,d,u,m,1,y)}}return[u,o]}}function BV(n,e,t,r,s,a,o,u){return new jae(t,r,s,a,o,u).compute(n,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gae(n,e,t,r){if(!n.length)return;if(e.length===0){for(let a=0;a<n.length;++a)r.push(n.subarray(a,a+1));return}if(e.length===1){const a=e[0];let o=n.indexOf(a);for(;o!==-1;){const u=n.subarray(0,o);(!t||u.length!==0)&&r.push(u),n=n.subarray(o+1),o=n.indexOf(a)}(!t||n.length!==0)&&r.push(n);return}let s=0;for(let a=0;a<n.length+1;a++)if(a===n.length||e.indexOf(n[a])!==-1){const o=n.subarray(s,a);(!t||o.length!==0)&&r.push(o),s=a+1}}function VV(n,e,t){const r=n.length,s=[];let a=0,o=0;const u=new Array(r);for(let y=0;y<r;++y){const x=s.length;Gae(n[y],e,t,s);const S=s.length-x;u[y]=S,a+=S,o=Math.max(o,S)}const c=Gr("int32",a*2),d=new Array(a),m=[r,o];let g=0;for(let y=0;y<r;++y)for(let x=0;x<u[y];++x)c[g*2]=y,c[g*2+1]=x,d[g]=s[g],++g;return[c,d,m]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UV(n,e){const t=Gr("int32",n.length);for(let r=0;r<n.length;++r)t[r]=KL(n[r]).modulo(e).getLowBitsUnsigned();return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WV=ss((n,e)=>n-e),qae=o_((n,e,t,r)=>({real:n-t,imag:e-r})),d_=Rs(Cg,WV,qae),Kae={kernelName:Cg,backendName:"cpu",kernelFunc:d_};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HV(n,e){const t=new Array(n.rank);for(let s=0;s<t.length;s++)t[s]=n.shape[s]*e[s];const r=gn(t,n.dtype);for(let s=0;s<r.values.length;++s){const a=r.indexToLoc(s),o=new Array(n.rank);for(let c=0;c<o.length;c++)o[c]=a[c]%n.shape[c];const u=n.locToIndex(o);r.values[s]=n.values[u]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y0=(n,e)=>{const t=e.value-n.value;return t===0?n.index-e.index:t};function jV(n,e,t=0,r=n.length-1){for(;r>t;){if(r-t>600){const u=r-t+1,c=e-t+1,d=Math.log(u),m=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*m*(u-m)/u)*Math.sign(c-u/2),y=Math.max(t,Math.floor(e-c*m/u+g)),x=Math.min(r,Math.floor(e+(u-c)*m/u+g));jV(n,e,y,x)}const s=n[e];let a=t,o=r;for(Nc(n,t,e),y0(n[r],s)>0&&Nc(n,t,r);a<o;){for(Nc(n,a,o),a++,o--;y0(n[a],s)<0;)a=a+1;for(;y0(n[o],s)>0;)o=o-1}y0(n[t],s)===0?Nc(n,t,o):(o=o+1,Nc(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function GV(n,e,t,r,s){const a=e[e.length-1],[o,u]=[n.length/a,a],c=Ls(t,o*r),d=Ls("int32",o*r);for(let g=0;g<o;g++){const y=g*u,x=n.subarray(y,y+u);let S=new Array(x.length);x.forEach(($,A)=>S[A]={value:$,index:A}),r<S.length&&(jV(S,r),S=S.slice(0,r)),s&&S.sort(y0);const k=g*r,C=c.subarray(k,k+r),N=d.subarray(k,k+r);for(let $=0;$<r;$++)C[$]=S[$].value,N[$]=S[$].index}const m=e.slice();return m[m.length-1]=r,[gn(m,t,c),gn(m,"int32",d)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qV(n,e,t,r){const s=wn(e,t)[0],a=[1,t[0],1];for(let S=0;S<s;S++)a[0]*=t[S];a[1]=t[s];for(let S=s+1;S<t.length;S++)a[2]*=t[S];const o=new Map,u=new Int32Array(t[s]),c=new ms(a,r,n),d=[],m=a[0]===1&&a[2]===1;for(let S=0;S<t[s];S++){let k;if(m)k=n[S].toString();else{const N=[];for(let $=0;$<a[0];$++)for(let A=0;A<a[2];A++)N.push(c.get($,S,A));k=N.join(",")}const C=o.get(k);if(C!=null)u[S]=C;else{const N=o.size;o.set(k,N),u[S]=N,d.push(S)}}const g=a.slice();g[1]=o.size;const y=new ms(g,r);d.forEach((S,k)=>{for(let C=0;C<a[0];C++)for(let N=0;N<a[2];N++)y.set(c.get(C,S,N),C,k,N)});const x=t.slice();return x[s]=g[1],{outputValues:y.values,outputShape:x,indices:u}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KV=Object.freeze(Object.defineProperty({__proto__:null,addImpl:ZB,bincountImpl:l_,bincountReduceImpl:JB,bitwiseAndImpl:eV,castImpl:QB,ceilImpl:tV,concatImpl:nV,equalImpl:rV,expImpl:aV,expm1Impl:oV,floorDivImpl:uV,floorImpl:lV,gatherNdImpl:cV,gatherV2Impl:fV,greaterEqualImpl:hV,greaterImpl:dV,lessEqualImpl:mV,lessImpl:pV,linSpaceImpl:gV,logImpl:yV,maxImpl:vV,maximumImpl:bV,minimumImpl:xV,multiplyImpl:u_,negImpl:wV,notEqualImpl:SV,prodImpl:CV,raggedGatherImpl:kV,raggedRangeImpl:NV,raggedTensorToTensorImpl:RV,rangeImpl:DV,rsqrtImpl:_V,scatterImpl:ap,sigmoidImpl:Fae,simpleAbsImpl:YB,sliceImpl:OV,sparseFillEmptyRowsImpl:FV,sparseReshapeImpl:LV,sparseSegmentReductionImpl:f_,sqrtImpl:zae,squaredDifferenceImpl:MV,staticRegexReplaceImpl:zV,stridedSliceImpl:PV,stringNGramsImpl:BV,stringSplitImpl:VV,stringToHashBucketFastImpl:UV,subImpl:WV,tileImpl:HV,topKImpl:GV,transposeImpl:c_,uniqueImpl:qV},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const XV="4.22.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */V$("cpu",()=>new g0,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YV=sr(Gm,n=>n>=0?n:Math.exp(n)-1),Xae={kernelName:Gm,backendName:"cpu",kernelFunc:YV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QV(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{alpha:a}=r;$t([s],"leakyRelu");const o=Re(s.shape),u=t.data.get(s.dataId).values,c=Ls("float32",o);for(let d=0;d<u.length;d++)c[d]=u[d]<0?a*u[d]:u[d];return t.makeTensorInfo(s.shape,"float32",c)}const Yae={kernelName:Ob,backendName:"cpu",kernelFunc:QV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qae=ss((n,e)=>n<0?e*n:n);function ZV(n){const{inputs:e,backend:t}=n,{x:r,alpha:s}=e;$t([r,s],"prelu");const a=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,[u,c]=Qae(r.shape,s.shape,a,o,"float32");return t.makeTensorInfo(c,"float32",u)}const Zae={kernelName:Jb,backendName:"cpu",kernelFunc:ZV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV=sr(fg,n=>Math.max(0,n)),Jae={kernelName:fg,backendName:"cpu",kernelFunc:JV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eU=sr(dg,n=>Math.min(Math.max(0,n),6)),eie={kernelName:dg,backendName:"cpu",kernelFunc:eU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KT(n,e,t,r,s){if(t==="linear")return zu({inputs:{x:e},backend:n});if(t==="relu")return JV({inputs:{x:e},backend:n});if(t==="elu")return YV({inputs:{x:e},backend:n});if(t==="relu6")return eU({inputs:{x:e},backend:n});if(t==="prelu")return ZV({inputs:{x:e,alpha:r},backend:n});if(t==="leakyrelu")return QV({inputs:{x:e},backend:n,attrs:{alpha:s}});if(t==="sigmoid")return AV({inputs:{x:e},backend:n});throw new Error(`Activation ${t} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{shape:a}=r,o=Re(s.shape),u=v$(a,o),c=Re(u);U(o===c,()=>`The new shape (${u}) has ${c} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),t.incRef(s.dataId);const d=t.data.get(s.dataId);if(d.complexTensorInfos!=null){const m=d.complexTensorInfos.real,g=d.complexTensorInfos.imag;m.shape=u,g.shape=u}return{dataId:s.dataId,shape:u,dtype:s.dtype}}const tie={kernelName:tx,backendName:"cpu",kernelFunc:Cr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tU(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:a}=e,{transposeA:o,transposeB:u}=r;$t([s,a],"matMul");const c=s.shape.length,d=a.shape.length,m=o?s.shape[c-2]:s.shape[c-1],g=u?a.shape[d-1]:a.shape[d-2],y=o?s.shape[c-1]:s.shape[c-2],x=u?a.shape[d-2]:a.shape[d-1],S=s.shape.slice(0,-2),k=a.shape.slice(0,-2),C=Re(S),N=Re(k),A=cn(s.shape.slice(0,-2),a.shape.slice(0,-2)).concat([y,x]);U(m===g,()=>`Error in matMul: inner shapes (${m}) and (${g}) of Tensors with shapes ${s.shape} and ${a.shape} and transposeA=${o} and transposeB=${u} must match.`);const D=o?[C,m,y]:[C,y,m],L=u?[N,x,g]:[N,g,x],P=Cr({inputs:{x:s},backend:t,attrs:{shape:D}}),W=Cr({inputs:{x:a},backend:t,attrs:{shape:L}}),B=o?P.shape[1]:P.shape[2],G=o?P.shape[2]:P.shape[1],X=u?W.shape[1]:W.shape[2],re=Math.max(C,N),ue=t.data.get(P.dataId).values,ne=t.data.get(W.dataId).values,me=Ot(P.shape),ge=Ot(W.shape),[be,pe,te]=o?[me[0],1,me[1]]:[me[0],me[1],1],[ye,ce,K]=u?[1,ge[1],ge[0]]:[ge[1],1,ge[0]],Z=G*X,De=gn([re,G,X],P.dtype),Ae=De.values,Fe=t.blockSize;for(let Pe=0;Pe<re;Pe++){const He=Pe%C,Ke=Pe%N;for(let Xe=0;Xe<G;Xe+=Fe){const ct=Math.min(Xe+Fe,G);for(let Tt=0;Tt<X;Tt+=Fe){const tn=Math.min(Tt+Fe,X);for(let Xt=0;Xt<B;Xt+=Fe){const hn=Math.min(Xt+Fe,B);for(let Zt=Xe;Zt<ct;Zt++)for(let Ne=Tt;Ne<tn;Ne++){let Je=0;for(let ht=Xt;ht<hn;ht++){const Lt=ue[He*be+Zt*pe+ht*te],it=ne[ht*ye+Ne*ce+Ke*K];Je+=Lt*it}Ae[Pe*Z+(Zt*X+Ne)]+=Je}}}}}return t.disposeIntermediateTensorInfo(P),t.disposeIntermediateTensorInfo(W),t.makeTensorInfo(A,De.dtype,De.values)}const nie={kernelName:vb,backendName:"cpu",kernelFunc:tU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rie(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:a,bias:o,preluActivationWeights:u}=e,{transposeA:c,transposeB:d,activation:m,leakyreluAlpha:g}=r;let y,x,S;const k=[];y=tU({inputs:{a:s,b:a},attrs:{transposeA:c,transposeB:d},backend:t}),o&&(x=oy({inputs:{a:y,b:o},backend:t}),k.push(y),y=x),m&&(S=KT(t,y,m,u,g),k.push(y),y=S);for(const N of k)t.disposeIntermediateTensorInfo(N);return y}const sie={kernelName:mx,backendName:"cpu",kernelFunc:rie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aie=sr(Am,n=>Math.acos(n)),iie={kernelName:Am,backendName:"cpu",kernelFunc:aie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oie=sr(Om,n=>Math.acosh(n)),lie={kernelName:Om,backendName:"cpu",kernelFunc:oie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uie(n){const{inputs:e,backend:t}=n,r=e;$t(e,"addN");const s=r.map(u=>t.data.get(u.dataId).values),a=gn(r[0].shape,r[0].dtype),o=a.values;for(let u=0;u<r.length;u++){const c=s[u];for(let d=0;d<o.length;d++)o[d]+=c[d]}return t.makeTensorInfo(a.shape,a.dtype,a.values)}const cie={kernelName:hb,backendName:"cpu",kernelFunc:uie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r;$t(s,"all");const u=wn(a,s.shape);let c=u;const d=Ur(c,s.shape.length);let m=s;d!=null&&(m=Si({inputs:{x:s},backend:t,attrs:{perm:d}}),c=ns(c.length,s.shape.length)),ua("all",c,m.shape.length);const[g,y]=Bs(m.shape,c),x=Re(y),S=ia(Re(g),m.dtype),k=t.data.get(m.dataId).values;for(let N=0;N<S.length;++N){const $=N*x;let A=k[$];for(let D=0;D<x;++D){const L=k[$+D];A=A&&L}S[N]=A}d!=null&&t.disposeIntermediateTensorInfo(m);const C=t.makeTensorInfo(g,m.dtype,S);if(o){const N=ts(g,u),$=Cr({inputs:{x:C},backend:t,attrs:{shape:N}});return t.disposeIntermediateTensorInfo(C),$}return C}const die={kernelName:Y1,backendName:"cpu",kernelFunc:fie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r;$t(s,"any");const u=wn(a,s.shape);let c=u;const d=Ur(c,s.shape.length);let m=s;d!=null&&(m=Si({inputs:{x:s},backend:t,attrs:{perm:d}}),c=ns(c.length,s.shape.length)),ua("any",c,m.shape.length);const[g,y]=Bs(m.shape,c),x=Re(y),S=ia(Re(g),m.dtype),k=t.data.get(m.dataId).values;for(let N=0;N<S.length;++N){const $=N*x;let A=k[$];for(let D=0;D<x;++D){const L=k[$+D];A=A||L}S[N]=A}d!=null&&t.disposeIntermediateTensorInfo(m);const C=t.makeTensorInfo(g,m.dtype,S);if(o){const N=ts(g,u),$=Cr({inputs:{x:C},backend:t,attrs:{shape:N}});return t.disposeIntermediateTensorInfo(C),$}return C}const pie={kernelName:Q1,backendName:"cpu",kernelFunc:hie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a}=r;$t(s,"argMax");let o=wn(a,s.shape);const u=Ur(o,s.shape.length);let c=s;const d=[];u!=null&&(c=Si({inputs:{x:s},backend:t,attrs:{perm:u}}),d.push(c),o=ns(o.length,c.shape.length)),o=[o[0]],ua("argMax",o,c.shape.length);const[m,g]=Bs(c.shape,o),y=Re(m),x=ia(y,"int32"),S=Re(g),k=t.data.get(c.dataId).values;for(let C=0;C<x.length;++C){const N=C*S;let $=k[N],A=0;for(let D=0;D<S;++D){const L=k[N+D];L>$&&($=L,A=D)}x[C]=A}return d.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.makeTensorInfo(m,"int32",x)}const gie={kernelName:pb,backendName:"cpu",kernelFunc:mie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a}=r;$t(s,"argMin");let o=wn(a,s.shape);const u=Ur(o,s.shape.length);let c=s;const d=[];u!=null&&(c=Si({inputs:{x:s},backend:t,attrs:{perm:u}}),d.push(c),o=ns(o.length,c.shape.length)),o=[o[0]],ua("argMin",o,c.shape.length);const[m,g]=Bs(c.shape,o),y=Re(m),x=ia(y,"int32"),S=Re(g),k=t.data.get(c.dataId).values;for(let C=0;C<x.length;++C){const N=C*S;let $=k[N],A=0;for(let D=0;D<S;++D){const L=k[N+D];L<$&&($=L,A=D)}x[C]=A}return d.forEach(C=>t.disposeIntermediateTensorInfo(C)),t.makeTensorInfo(m,"int32",x)}const vie={kernelName:mb,backendName:"cpu",kernelFunc:yie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bie=sr(Fm,n=>Math.asin(n)),xie={kernelName:Fm,backendName:"cpu",kernelFunc:bie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wie=sr(Lm,n=>Math.asinh(n)),Sie={kernelName:Lm,backendName:"cpu",kernelFunc:wie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cie=sr(Mm,n=>Math.atan(n)),Tie={kernelName:Mm,backendName:"cpu",kernelFunc:Cie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kie=ss((n,e)=>Math.atan2(n,e)),Eie=Rs(Pm,kie),Nie={kernelName:Pm,backendName:"cpu",kernelFunc:Eie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ie=sr(zm,n=>Math.atanh(n)),Iie={kernelName:zm,backendName:"cpu",kernelFunc:$ie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h_(n,e,t,r,s,a){const o=s.strideHeight,u=s.strideWidth,c=s.dilationHeight,d=s.dilationWidth,m=s.effectiveFilterHeight,g=s.effectiveFilterWidth,y=s.padInfo.top,x=s.padInfo.left,S=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,k=gn(s.outShape,t),C=k.values,N=s.outShape[1]*s.outShape[2]*s.outShape[3],$=s.outShape[2]*s.outShape[3],A=s.outShape[3];for(let D=0;D<s.batchSize;++D){const L=D*N,P=D*r[0];for(let W=0;W<s.inChannels;++W)for(let B=0;B<s.outHeight;++B){const G=B*o-y,X=Math.max(0,G),re=Math.min(s.inHeight,m+G),ue=L+B*$;for(let ne=0;ne<s.outWidth;++ne){const me=ne*u-x,ge=Math.max(0,me),be=Math.min(s.inWidth,g+me);let pe=S,te=0,ye=0;for(let K=X;K<re;K+=c){const Z=P+K*r[1];for(let De=ge;De<be;De+=d){const Ae=Z+De*r[2],Fe=n[Ae+W];a==="max"&&Fe>pe?pe=Fe:a==="avg"&&(te+=Fe,ye++)}if(isNaN(pe))break}const ce=ue+ne*A+W;C[ce]=a==="avg"?te/ye:pe}}}return k}function nU(n,e,t,r,s=!1,a=!1){const o=gn(r.outShape,"int32"),u=r.strideHeight,c=r.strideWidth,d=r.dilationHeight,m=r.dilationWidth,g=r.effectiveFilterHeight,y=r.effectiveFilterWidth,x=r.padInfo.top,S=r.padInfo.left,k=gn(e,t,n);for(let C=0;C<r.batchSize;++C)for(let N=0;N<r.inChannels;++N)for(let $=0;$<r.outHeight;++$){const A=$*u-x;let D=A;for(;D<0;)D+=d;const L=Math.min(r.inHeight,g+A);for(let P=0;P<r.outWidth;++P){const W=P*c-S;let B=W;for(;B<0;)B+=m;const G=Math.min(r.inWidth,y+W);let X=Number.NEGATIVE_INFINITY,re=-1;for(let ue=D;ue<L;ue+=d){const ne=ue-A;for(let me=B;me<G;me+=m){const ge=me-W,be=k.get(C,ue,me,N);be>X&&(X=be,s?re=a?((C*r.inHeight+ue)*r.inWidth+me)*r.inChannels+N:(ue*r.inWidth+me)*r.inChannels+N:re=ne*y+ge)}}o.set(re,C,$,P,N)}}return o}function rU(n,e,t,r,s,a){const o=s.strideDepth,u=s.strideHeight,c=s.strideWidth,d=s.dilationDepth,m=s.dilationHeight,g=s.dilationWidth,y=s.effectiveFilterDepth,x=s.effectiveFilterHeight,S=s.effectiveFilterWidth,k=s.padInfo.front,C=s.padInfo.top,N=s.padInfo.left,$=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,A=gn(s.outShape,t),D=A.values,L=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],P=s.outShape[2]*s.outShape[3]*s.outShape[4],W=s.outShape[3]*s.outShape[4],B=s.outShape[4];for(let G=0;G<s.batchSize;++G){const X=G*L,re=G*r[0];for(let ue=0;ue<s.inChannels;++ue)for(let ne=0;ne<s.outDepth;++ne){const me=ne*o-k;let ge=me;for(;ge<0;)ge+=d;const be=Math.min(s.inDepth,y+me),pe=X+ne*P;for(let te=0;te<s.outHeight;++te){const ye=te*u-C;let ce=ye;for(;ce<0;)ce+=m;const K=Math.min(s.inHeight,x+ye),Z=pe+te*W;for(let De=0;De<s.outWidth;++De){const Ae=De*c-N;let Fe=Ae;for(;Fe<0;)Fe+=g;const Pe=Math.min(s.inWidth,S+Ae),He=Z+De*B;let Ke=$,Xe=0,ct=0;for(let tn=ge;tn<be;tn+=d){const Xt=re+tn*r[1];for(let hn=ce;hn<K;hn+=m){const Zt=Xt+hn*r[2];for(let Ne=Fe;Ne<Pe;Ne+=g){const Je=Zt+Ne*r[3],ht=n[Je+ue];if(a==="max"&&ht>Ke?Ke=ht:a==="avg"&&(Xe+=ht,ct++),isNaN(Ke))break}if(isNaN(Ke))break}if(isNaN(Ke))break}const Tt=He+ue;D[Tt]=a==="avg"?Xe/Math.max(ct,1):Ke}}}}return A}function Rie(n,e){const t=gn(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,m=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=e.padInfo.front,x=e.padInfo.top,S=e.padInfo.left;for(let k=0;k<e.batchSize;++k)for(let C=0;C<e.inChannels;++C)for(let N=0;N<e.outDepth;++N){const $=N*r-y;let A=$;for(;A<0;)A+=o;const D=Math.min(e.inDepth,d+$);for(let L=0;L<e.outHeight;++L){const P=L*s-x;let W=P;for(;W<0;)W+=u;const B=Math.min(e.inHeight,m+P);for(let G=0;G<e.outWidth;++G){const X=G*a-S;let re=X;for(;re<0;)re+=c;const ue=Math.min(e.inWidth,g+X);let ne=Number.NEGATIVE_INFINITY,me=-1;for(let ge=A;ge<D;ge+=o){const be=ge-$;for(let pe=W;pe<B;pe+=u){const te=pe-P;for(let ye=re;ye<ue;ye+=c){const ce=ye-X,K=n.get(k,ge,pe,ye,C);K>=ne&&(ne=K,me=be*m*g+te*m+ce)}}}t.set(me,k,N,L,G,C)}}}return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Die(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;$t(s,"avgPool");const{filterSize:a,strides:o,pad:u,dimRoundingMode:c}=r,d=1;U(la(o,d),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`);const m=Go(s.shape,a,o,d,u,c);let g;if(m.filterWidth===1&&m.filterHeight===1&&Nn(m.inShape,m.outShape))g=zu({inputs:{x:s},backend:t});else{const y=t.data.get(s.dataId).values,x=Ot(s.shape),S=h_(y,s.shape,s.dtype,x,m,"avg");g=t.makeTensorInfo(m.outShape,s.dtype,S.values)}return g}const _ie={kernelName:gb,backendName:"cpu",kernelFunc:Die};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:a,strides:o,pad:u,dimRoundingMode:c,dataFormat:d}=r;$t(s,"avgPool3d");const m=Fc(s.shape,a,o,1,u,c,d),g=t.data.get(s.dataId).values,y=rU(g,s.shape,s.dtype,Ot(s.shape),m,"avg");return t.makeTensorInfo(y.shape,"float32",y.values)}const Oie={kernelName:yb,backendName:"cpu",kernelFunc:Aie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fie(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,{filterSize:o,strides:u,pad:c,dimRoundingMode:d}=r;$t([s,a],"avgPool3DGrad");const m=Fc(a.shape,o,u,1,c,d),g=m.strideDepth,y=m.strideHeight,x=m.strideWidth,S=m.filterDepth,k=m.filterHeight,C=m.filterWidth,N=m.dilationDepth,$=m.dilationHeight,A=m.dilationWidth,D=m.effectiveFilterDepth,L=m.effectiveFilterHeight,P=m.effectiveFilterWidth,W=D-1-m.padInfo.front,B=P-1-m.padInfo.left,G=L-1-m.padInfo.top,X=gn(a.shape,"float32"),re=1/(S*k*C),ue=t.bufferSync(s);for(let ne=0;ne<m.batchSize;++ne)for(let me=0;me<m.inChannels;++me)for(let ge=0;ge<m.inDepth;++ge)for(let be=0;be<m.inHeight;++be)for(let pe=0;pe<m.inWidth;++pe){const te=ge-W,ye=be-G,ce=pe-B;let K=0;for(let Z=0;Z<D;Z+=N){const De=(te+Z)/g;if(!(De<0||De>=m.outDepth||Math.floor(De)!==De))for(let Ae=0;Ae<L;Ae+=$){const Fe=(ye+Ae)/y;if(!(Fe<0||Fe>=m.outHeight||Math.floor(Fe)!==Fe))for(let Pe=0;Pe<P;Pe+=A){const He=(ce+Pe)/x;if(He<0||He>=m.outWidth||Math.floor(He)!==He)continue;const Ke=ue.get(ne,De,Fe,He,me);K+=Ke}}}X.set(K*re,ne,ge,be,pe,me)}return t.makeTensorInfo(X.shape,X.dtype,X.values)}const Lie={kernelName:J1,backendName:"cpu",kernelFunc:Fie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mie(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,o=a;$t([s,a],"avgPoolGrad");const{filterSize:u,strides:c,pad:d}=r,m=Go(o.shape,u,c,1,d),g=m.strideHeight,y=m.strideWidth,x=m.filterHeight,S=m.filterWidth,k=m.dilationHeight,C=m.dilationWidth,N=m.effectiveFilterHeight,$=m.effectiveFilterWidth,A=$-1-m.padInfo.left,D=N-1-m.padInfo.top,L=gn(o.shape,"float32"),P=1/(x*S),W=t.data.get(s.dataId).values,B=gn(s.shape,"float32",W);for(let G=0;G<m.batchSize;++G)for(let X=0;X<m.inChannels;++X)for(let re=0;re<m.inHeight;++re)for(let ue=0;ue<m.inWidth;++ue){const ne=re-D,me=ue-A;let ge=0;for(let be=0;be<N;be+=k){const pe=(ne+be)/g;if(!(pe<0||pe>=m.outHeight||Math.floor(pe)!==pe))for(let te=0;te<$;te+=C){const ye=(me+te)/y;if(ye<0||ye>=m.outWidth||Math.floor(ye)!==ye)continue;const ce=B.get(G,pe,ye,X);ge+=ce}}L.set(ge*P,G,re,ue,X)}return t.makeTensorInfo(L.shape,L.dtype,L.values)}const zie={kernelName:Z1,backendName:"cpu",kernelFunc:Mie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,scale:a,offset:o,mean:u,variance:c}=e;U(u.shape.length===c.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(o==null||u.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(a==null||u.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),$t([s,u,c,a,o],"batchNorm");let{varianceEpsilon:d}=r;d==null&&(d=.001);const m=t.data.get(s.dataId).values,g=t.data.get(u.dataId).values,y=t.data.get(c.dataId).values,x=a?t.data.get(a.dataId).values:new Float32Array([1]),S=o?t.data.get(o.dataId).values:new Float32Array([0]),k=new Float32Array(m.length),C=S.length,N=x.length,$=y.length,A=g.length;let D=0,L=0,P=0,W=0;for(let B=0;B<m.length;++B)k[B]=S[D++]+(m[B]-g[L++])*x[P++]/Math.sqrt(y[W++]+d),D>=C&&(D=0),L>=A&&(L=0),P>=N&&(P=0),W>=$&&(W=0);return t.makeTensorInfo(s.shape,s.dtype,k)}const Bie={kernelName:Db,backendName:"cpu",kernelFunc:Pie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:a,crops:o}=r;$t([s],"batchToSpaceND");const u=a.reduce((N,$)=>N*$),c=Xx(s.shape,a,u),d=Yx(c.length,a.length),m=Qx(s.shape,a,u),g=O2(o,a.length),y=F2(m,o,a.length),x=Cr({inputs:{x:s},backend:t,attrs:{shape:c}}),S=Si({inputs:{x},backend:t,attrs:{perm:d}}),k=Cr({inputs:{x:S},backend:t,attrs:{shape:m}}),C=ip({inputs:{x:k},backend:t,attrs:{begin:g,size:y}});return t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(S),t.disposeIntermediateTensorInfo(k),C}const Uie={kernelName:bb,backendName:"cpu",kernelFunc:Vie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:a}=e,{size:o}=r,u=t.data.get(s.dataId).values,c=t.data.get(a.dataId).values,d=l_(u,c,a.dtype,a.shape,o);return t.makeTensorInfo([o],a.dtype,d)}const Hie={kernelName:eS,backendName:"cpu",kernelFunc:Wie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jie(n){const{inputs:e,backend:t}=n,{s0:r,s1:s}=e,a=t.data.get(r.dataId).values,o=t.data.get(s.dataId).values,u=cn(Array.from(a),Array.from(o));return t.makeTensorInfo([u.length],"int32",Int32Array.from(u))}const Gie={kernelName:tS,backendName:"cpu",kernelFunc:jie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qie=sr(Um,(n,e)=>{const t=e;return n>t.clipValueMax?t.clipValueMax:n<t.clipValueMin?t.clipValueMin:n}),Kie={kernelName:Um,backendName:"cpu",kernelFunc:qie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xie={kernelName:wb,backendName:"cpu",kernelFunc:n=>{const{x:e}=n.inputs,t=n.backend,r=new Float32Array(Re(e.shape)),s=t.data.get(e.dataId),a=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,u=t.data.get(a.dataId).values,c=t.data.get(o.dataId).values;for(let d=0;d<u.length;d++){const m=u[d],g=c[d];r[d]=Math.hypot(m,g)}return t.makeOutput(r,e.shape,"float32")}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ly(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.data.get(r.dataId).complexTensorInfos.imag,a=t.data.get(s.dataId).values;return t.makeTensorInfo(s.shape,s.dtype,a)}const Yie={kernelName:CS,backendName:"cpu",kernelFunc:ly};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uy(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r,a=wn(s,e[0].shape)[0],o=e.map(k=>k.shape);D2(o,a);let u=_u(e.map(k=>k.shape),a);if(Re(u)===0)return t.makeTensorInfo(u,e[0].dtype,[]);const c=e.filter(k=>Re(k.shape)>0);if(c.length===1)return zu({inputs:{x:c[0]},backend:t});if(c[0].dtype==="complex64"){const k=c.map(D=>sp({inputs:{input:D},backend:t})),C=c.map(D=>ly({inputs:{input:D},backend:t})),N=uy({inputs:k,backend:t,attrs:{axis:a}}),$=uy({inputs:C,backend:t,attrs:{axis:a}}),A=Ki({inputs:{real:N,imag:$},backend:t});return k.forEach(D=>t.disposeIntermediateTensorInfo(D)),C.forEach(D=>t.disposeIntermediateTensorInfo(D)),t.disposeIntermediateTensorInfo(N),t.disposeIntermediateTensorInfo($),A}const d=c.map(k=>{const N=[-1,Re(k.shape.slice(a))];return Cr({inputs:{x:k},backend:t,attrs:{shape:N}})}),m=d.map(k=>({vals:t.data.get(k.dataId).values,shape:k.shape}));u=_u(d.map(k=>k.shape),1);const g=d[0].shape[0]===1,y=nV(m,u,e[0].dtype,g),x=_u(c.map(k=>k.shape),a),S=t.makeTensorInfo(x,e[0].dtype,y);return d.forEach(k=>t.disposeIntermediateTensorInfo(k)),S}const Qie={kernelName:Sb,backendName:"cpu",kernelFunc:uy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sU(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:o,pad:u,dataFormat:c,dilations:d,dimRoundingMode:m}=r;$t([s,a],"conv2d");const g=Lc(c),y=zs(s.shape,a.shape,o,d,u,m,!1,g),x=y.filterHeight,S=y.filterWidth,k=y.dilationHeight,C=y.dilationWidth,N=y.padInfo.left,$=y.padInfo.top,A=y.dataFormat==="channelsLast",D=new ms(y.outShape,s.dtype),L=Ot(s.shape),P=Ot(a.shape),W=L[0],B=A?L[1]:L[2],G=A?L[2]:1,X=A?1:L[1],re=D.strides[0],ue=A?D.strides[1]:D.strides[2],ne=A?D.strides[2]:1,me=A?1:D.strides[1],ge=t.data.get(s.dataId).values,be=t.data.get(a.dataId).values,pe=D.values;for(let te=0;te<y.batchSize;++te){const ye=te*W,ce=te*re;for(let K=0;K<y.outHeight;++K){const Z=ce+K*ue,De=K*y.strideHeight-$;for(let Ae=0;Ae<x;++Ae){const Fe=De+Ae*k;if(Fe<0||Fe>=y.inHeight)continue;const Pe=Ae*P[0],He=ye+Fe*B;for(let Ke=0;Ke<y.outWidth;++Ke){const Xe=Z+Ke*ne,ct=Ke*y.strideWidth-N;for(let Tt=0;Tt<S;++Tt){const tn=ct+Tt*C;if(tn<0||tn>=y.inWidth)continue;const Xt=Pe+Tt*P[1],hn=He+tn*G;let Zt=Xt;for(let Ne=0;Ne<y.inChannels;++Ne){const Je=ge[hn+Ne*X];for(let ht=0;ht<y.outChannels;++ht)pe[Xe+ht*me]+=Je*be[Zt+ht];Zt+=y.outChannels}}}}}}return t.makeTensorInfo(D.shape,D.dtype,pe)}const Zie={kernelName:Cb,backendName:"cpu",kernelFunc:sU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jie(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:o,pad:u,dataFormat:c,dimRoundingMode:d,filterShape:m}=r;$t([s,a],"conv2dBackpropFilter");const g=Lc(c),y=zs(s.shape,m,o,1,u,d,!1,g),{strideHeight:x,strideWidth:S,filterHeight:k,filterWidth:C}=y,N=y.dataFormat==="channelsLast",$=new ms(y.filterShape,"float32"),A=y.padInfo.left,D=y.padInfo.top,L=t.data.get(s.dataId).values,P=t.data.get(a.dataId).values,W=new ms(s.shape,s.dtype,L),B=new ms(a.shape,a.dtype,P);for(let G=0;G<k;++G){const X=Math.max(0,Math.ceil((D-G)/x)),re=Math.min(y.outHeight,(y.inHeight+D-G)/x);for(let ue=0;ue<C;++ue){const ne=Math.max(0,Math.ceil((A-ue)/S)),me=Math.min(y.outWidth,(y.inWidth+A-ue)/S);for(let ge=0;ge<y.inChannels;++ge)for(let be=0;be<y.outChannels;++be){let pe=0;for(let te=0;te<y.batchSize;++te)for(let ye=X;ye<re;++ye){const ce=G+ye*x-D;for(let K=ne;K<me;++K){const Z=ue+K*S-A;N?pe+=W.get(te,ce,Z,ge)*B.get(te,ye,K,be):pe+=W.get(te,ge,ce,Z)*B.get(te,be,ye,K)}}$.set(pe,G,ue,ge,be)}}}return t.makeTensorInfo($.shape,$.dtype,$.values)}const eoe={kernelName:rS,backendName:"cpu",kernelFunc:Jie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function toe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{inputShape:o,strides:u,pad:c,dataFormat:d,dimRoundingMode:m}=r;$t([s,a],"conv2dBackpropInput");const g=Ot(a.shape),y=Ot(s.shape);let x=Lc(d);const S=zs(o,a.shape,u,1,c,m,!1,x),k=new ms(S.inShape,"float32"),C=k.values,N=t.data.get(s.dataId).values,$=t.data.get(a.dataId).values,[A,D,L]=g,{batchSize:P,filterHeight:W,filterWidth:B,inChannels:G,inHeight:X,inWidth:re,outChannels:ue,outHeight:ne,outWidth:me,strideHeight:ge,strideWidth:be}=S;x=S.dataFormat;const pe=W-1-S.padInfo.top,te=B-1-S.padInfo.left,ye=x==="channelsLast",ce=k.strides[0],K=ye?k.strides[1]:k.strides[2],Z=ye?k.strides[2]:1,De=ye?1:k.strides[1],Ae=y[0],Fe=ye?y[1]:y[2],Pe=ye?y[2]:1,He=ye?1:y[1];for(let Ke=0;Ke<P;++Ke)for(let Xe=0;Xe<G;++Xe)for(let ct=0;ct<X;++ct){const Tt=ct-pe,tn=Math.max(0,Math.ceil(Tt/ge)),Xt=Math.min(ne,(W+Tt)/ge);for(let hn=0;hn<re;++hn){const Zt=hn-te,Ne=Math.max(0,Math.ceil(Zt/be)),Je=Math.min(me,(B+Zt)/be);let ht=0;for(let it=tn;it<Xt;++it){const mt=it*ge-Tt;for(let Yt=Ne;Yt<Je;++Yt){const jt=Yt*be-Zt,Tn=Ae*Ke+Fe*it+Pe*Yt,nn=A*(W-1-mt)+D*(B-1-jt)+L*Xe;for(let Vn=0;Vn<ue;++Vn){const tr=N[Tn+He*Vn],Zn=$[nn+Vn];ht+=tr*Zn}}}const Lt=ce*Ke+K*ct+Z*hn+De*Xe;C[Lt]=ht}}return t.makeTensorInfo(k.shape,k.dtype,k.values)}const noe={kernelName:Tb,backendName:"cpu",kernelFunc:toe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function roe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:o,pad:u,dilations:c}=r;$t([s,a],"conv3d");const d=Xf(s.shape,a.shape,o,c,u),{filterDepth:m,filterHeight:g,filterWidth:y,dilationDepth:x,dilationHeight:S,dilationWidth:k,padInfo:C}=d,N=C.front,$=C.left,A=C.top,D=new ms(d.outShape,s.dtype),L=t.data.get(s.dataId).values,P=t.data.get(a.dataId).values,W=D.values,B=Ot(s.shape),G=Ot(a.shape);for(let X=0;X<d.batchSize;++X){const re=X*B[0],ue=X*D.strides[0];for(let ne=0;ne<d.outDepth;++ne){const me=ue+ne*D.strides[1],ge=ne*d.strideDepth-N;for(let be=0;be<m;++be){const pe=ge+be*x;if(pe<0||pe>=d.inDepth)continue;const te=be*G[0],ye=re+pe*B[1];for(let ce=0;ce<d.outHeight;++ce){const K=me+ce*D.strides[2],Z=ce*d.strideHeight-A;for(let De=0;De<g;++De){const Ae=Z+De*S;if(Ae<0||Ae>=d.inHeight)continue;const Fe=te+De*G[1],Pe=ye+Ae*B[2];for(let He=0;He<d.outWidth;++He){const Ke=K+He*d.outChannels,Xe=He*d.strideWidth-$;for(let ct=0;ct<y;++ct){const Tt=Xe+ct*k;if(Tt<0||Tt>=d.inWidth)continue;const tn=Fe+ct*G[2],Xt=Pe+Tt*d.inChannels;let hn=tn;for(let Zt=0;Zt<d.inChannels;++Zt){const Ne=L[Xt+Zt];for(let Je=0;Je<d.outChannels;++Je)W[Ke+Je]+=Ne*P[hn+Je];hn+=d.outChannels}}}}}}}}return t.makeTensorInfo(D.shape,D.dtype,D.values)}const soe={kernelName:kb,backendName:"cpu",kernelFunc:roe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aoe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:o,pad:u,filterShape:c}=r;$t([s,a],"conv3dBackpropFilterV2");const d=Ot(s.shape),m=Ot(a.shape),g=Xf(s.shape,c,o,1,u),y=g.strideDepth,x=g.strideHeight,S=g.strideWidth,k=g.filterDepth,C=g.filterHeight,N=g.filterWidth,$=new ms(g.filterShape,"float32"),A=$.values,[D,L,P,W]=$.strides,B=t.data.get(a.dataId).values,[G,X,re,ue]=m,ne=t.data.get(s.dataId).values,[me,ge,be,pe]=d,te=g.padInfo.front,ye=g.padInfo.left,ce=g.padInfo.top;for(let K=0;K<k;++K){const Z=Math.max(0,Math.ceil((te-K)/y)),De=Math.min(g.outDepth,(g.inDepth+te-K)/y),Ae=K*D;for(let Fe=0;Fe<C;++Fe){const Pe=Math.max(0,Math.ceil((ce-Fe)/x)),He=Math.min(g.outHeight,(g.inHeight+ce-Fe)/x),Ke=Fe*L+Ae;for(let Xe=0;Xe<N;++Xe){const ct=Math.max(0,Math.ceil((ye-Xe)/S)),Tt=Math.min(g.outWidth,(g.inWidth+ye-Xe)/S),tn=Xe*P+Ke;for(let Xt=0;Xt<g.inChannels;++Xt){const hn=Xt*W+tn;for(let Zt=0;Zt<g.outChannels;++Zt){let Ne=0;for(let Je=0;Je<g.batchSize;++Je){const ht=Je*me,Lt=Je*G;for(let it=Z;it<De;++it){const Yt=(K+it*y-te)*ge+ht,jt=it*X+Lt;for(let Tn=Pe;Tn<He;++Tn){const Vn=(Fe+Tn*x-ce)*be+Yt,tr=Tn*re+jt;for(let Zn=ct;Zn<Tt;++Zn){const Ze=(Xe+Zn*S-ye)*pe+Vn,pt=Zn*ue+tr;Ne+=ne[Ze+Xt]*B[pt+Zt]}}}}A[hn+Zt]=Ne}}}}}return t.makeTensorInfo($.shape,$.dtype,$.values)}const ioe={kernelName:sS,backendName:"cpu",kernelFunc:aoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ooe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{pad:o,strides:u,inputShape:c}=r;$t([s],"conv3dBackpropInputV2");const d=Ot(s.shape),m=Ot(a.shape),g=Xf(c,a.shape,u,1,o),y=new ms(g.inShape,"float32"),x=y.values,[S,k,C,N]=y.strides,$=t.data.get(s.dataId).values,[A,D,L,P]=d,W=t.data.get(a.dataId).values,[B,G,X,re]=m,{batchSize:ue,filterDepth:ne,filterHeight:me,filterWidth:ge,inChannels:be,inDepth:pe,inHeight:te,inWidth:ye,outChannels:ce,outDepth:K,outHeight:Z,outWidth:De,strideDepth:Ae,strideHeight:Fe,strideWidth:Pe}=g,He=ne-1-g.padInfo.front,Ke=me-1-g.padInfo.top,Xe=ge-1-g.padInfo.left;for(let ct=0;ct<ue;++ct)for(let Tt=0;Tt<be;++Tt)for(let tn=0;tn<pe;++tn){const Xt=tn-He,hn=Math.max(0,Math.ceil(Xt/Ae)),Zt=Math.min(K,(ne+Xt)/Ae);for(let Ne=0;Ne<te;++Ne){const Je=Ne-Ke,ht=Math.max(0,Math.ceil(Je/Fe)),Lt=Math.min(Z,(me+Je)/Fe);for(let it=0;it<ye;++it){const mt=it-Xe,Yt=Math.max(0,Math.ceil(mt/Pe)),jt=Math.min(De,(ge+mt)/Pe);let Tn=0;for(let nn=hn;nn<Zt;++nn){const Vn=nn*Ae-Xt;for(let tr=ht;tr<Lt;++tr){const Zn=tr*Fe-Je;for(let Ir=Yt;Ir<jt;++Ir){const Ze=Ir*Pe-mt,pt=A*ct+D*nn+L*tr+P*Ir,Pt=B*(ne-1-Vn)+G*(me-1-Zn)+X*(ge-1-Ze)+re*Tt;for(let Vt=0;Vt<ce;++Vt){const jn=$[pt+Vt],mr=W[Pt+Vt];Tn+=jn*mr}}}}x[S*ct+k*tn+C*Ne+N*it+Tt]=Tn}}}return t.makeTensorInfo(y.shape,y.dtype,y.values)}const loe={kernelName:aS,backendName:"cpu",kernelFunc:ooe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uoe=sr(Wm,n=>Math.cos(n)),coe={kernelName:Wm,backendName:"cpu",kernelFunc:uoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const foe=sr(Hm,n=>Math.cosh(n)),doe={kernelName:Hm,backendName:"cpu",kernelFunc:foe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hoe(n){const{inputs:e,backend:t,attrs:r}=n,{image:s,boxes:a,boxInd:o}=e,{cropSize:u,method:c,extrapolationValue:d}=r,[m,g,y,x]=s.shape,S=a.shape[0],[k,C]=u,N=gn([S,k,C,x],"float32"),$=t.data.get(a.dataId).values,A=t.data.get(o.dataId).values,D=t.data.get(s.dataId).values,L=Ot(s.shape),P=Ot(N.shape);for(let W=0;W<S;W++){const B=W*4,G=$[B],X=$[B+1],re=$[B+2],ue=$[B+3],ne=A[W];if(ne>=m)continue;const me=k>1?(re-G)*(g-1)/(k-1):0,ge=C>1?(ue-X)*(y-1)/(C-1):0;for(let be=0;be<k;be++){const pe=k>1?G*(g-1)+be*me:.5*(G+re)*(g-1);if(pe<0||pe>g-1){for(let te=0;te<C;te++)for(let ye=0;ye<x;ye++){const ce=ye+te*P[2]+be*P[1]+W*P[0];N.values[ce]=d}continue}if(c==="bilinear"){const te=Math.floor(pe),ye=Math.ceil(pe),ce=pe-te;for(let K=0;K<C;K++){const Z=C>1?X*(y-1)+K*ge:.5*(X+ue)*(y-1);if(Z<0||Z>y-1){for(let Pe=0;Pe<x;Pe++){const He=Pe+K*P[2]+be*P[1]+W*P[0];N.values[He]=d}continue}const De=Math.floor(Z),Ae=Math.ceil(Z),Fe=Z-De;for(let Pe=0;Pe<x;Pe++){let He=Pe+De*L[2]+te*L[1]+ne*L[0];const Ke=D[He];He=Pe+Ae*L[2]+te*L[1]+ne*L[0];const Xe=D[He];He=Pe+De*L[2]+ye*L[1]+ne*L[0];const ct=D[He];He=Pe+Ae*L[2]+ye*L[1]+ne*L[0];const Tt=D[He],tn=Ke+(Xe-Ke)*Fe,Xt=ct+(Tt-ct)*Fe;He=Pe+K*P[2]+be*P[1]+W*P[0],N.values[He]=tn+(Xt-tn)*ce}}}else for(let te=0;te<C;++te){const ye=C>1?X*(y-1)+te*ge:.5*(X+ue)*(y-1);if(ye<0||ye>y-1){for(let Z=0;Z<x;Z++){const De=Z+te*P[2]+be*P[1]+W*P[0];N.values[De]=d}continue}const ce=Math.round(ye),K=Math.round(pe);for(let Z=0;Z<x;Z++){const De=Z+ce*L[2]+K*L[1]+ne*L[0],Ae=Z+te*P[2]+be*P[1]+W*P[0];N.values[Ae]=D[De]}}}}return t.makeTensorInfo(N.shape,N.dtype,N.values)}const poe={kernelName:oS,backendName:"cpu",kernelFunc:hoe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,exclusive:o,reverse:u}=r;$t(s,"cumprod");const c=Ur([a],s.shape.length);let d=s;c!=null&&(d=Si({inputs:{x:s},backend:t,attrs:{perm:c}}));const m=ns(1,s.shape.length)[0];if(m!==d.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${d.shape.length-1} but got axis=${m}`);const g=pi(d.dtype,"int32"),y=X1(Re(d.shape),g),x=t.data.get(d.dataId).values,S=d.shape[d.shape.length-1],k=u?(N,$)=>N+S-$-1:(N,$)=>N+$;for(let N=0;N<x.length;N+=S)for(let $=0;$<S;$++){const A=k(N,$);if($===0)y[A]=o?1:x[A];else{const D=k(N,$-1);y[A]=o?x[D]*y[D]:x[A]*y[D]}}const C=t.makeTensorInfo(d.shape,g,y);if(c!=null){const N=Zf(c),$=Si({inputs:{x:C},backend:t,attrs:{perm:N}});return t.disposeIntermediateTensorInfo(C),t.disposeIntermediateTensorInfo(d),$}return C}const goe={kernelName:iS,backendName:"cpu",kernelFunc:moe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yoe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,exclusive:o,reverse:u}=r;$t(s,"cumsum");const c=Ur([a],s.shape.length);let d=s;c!=null&&(d=Si({inputs:{x:s},backend:t,attrs:{perm:c}}));const m=ns(1,s.shape.length)[0];if(m!==d.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${d.shape.length-1} but got axis=${m}`);const g=pi(d.dtype,"int32"),y=ia(Re(d.shape),g),x=t.data.get(d.dataId).values,S=d.shape[d.shape.length-1],k=u?(N,$)=>N+S-$-1:(N,$)=>N+$;for(let N=0;N<x.length;N+=S)for(let $=0;$<S;$++){const A=k(N,$);if($===0)y[A]=o?0:x[A];else{const D=k(N,$-1);y[A]=o?x[D]+y[D]:x[A]+y[D]}}const C=t.makeTensorInfo(d.shape,g,y);if(c!=null){const N=Zf(c),$=Si({inputs:{x:C},backend:t,attrs:{perm:N}});return t.disposeIntermediateTensorInfo(C),t.disposeIntermediateTensorInfo(d),$}return C}const voe={kernelName:Eb,backendName:"cpu",kernelFunc:yoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function boe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:a}=e,{size:o,binaryOutput:u}=r;if(s.shape.length===1){const c=t.data.get(s.dataId).values,d=t.data.get(a.dataId).values,m=l_(c,d,a.dtype,a.shape,o);return t.makeTensorInfo([o],a.dtype,m)}else if(s.shape.length===2){const c=t.bufferSync(s),d=t.bufferSync(a),m=JB(c,d,o,u);return t.makeTensorInfo(m.shape,a.dtype,m.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const xoe={kernelName:lS,backendName:"cpu",kernelFunc:boe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function woe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockSize:a,dataFormat:o}=r;U(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const u=s.shape[0],c=s.shape[1],d=s.shape[2],m=s.shape[3],g=c*a,y=d*a,x=m/(a*a),S=t.data.get(s.dataId).values,k=new Float32Array(u*g*y*x);let C=0;for(let N=0;N<u;++N)for(let $=0;$<g;++$){const A=Math.floor($/a),D=$%a;for(let L=0;L<y;++L){const P=Math.floor(L/a),W=L%a,B=(D*a+W)*x;for(let G=0;G<x;++G){const re=G+B+m*(P+d*(A+c*N));k[C++]=S[re]}}}return t.makeTensorInfo([u,g,y,x],s.dtype,k)}const Soe={kernelName:uS,backendName:"cpu",kernelFunc:woe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aU(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:o,pad:u,dilations:c,dimRoundingMode:d}=r;$t([s,a],"depthwiseConv2DNative");const m=Ot(s.shape),g=Ot(a.shape);let y=c;y==null&&(y=[1,1]),U(la(o,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${y}'`);const x=zs(s.shape,a.shape,o,y,u,d,!0),{filterHeight:S,filterWidth:k,dilationHeight:C,dilationWidth:N,padInfo:$}=x,A=$.left,D=$.top,L=x.outChannels/x.inChannels,P=new ms(x.outShape,s.dtype),W=t.data.get(s.dataId).values,B=t.data.get(a.dataId).values,G=P.values;for(let X=0;X<x.batchSize;++X){const re=X*m[0],ue=X*P.strides[0];for(let ne=0;ne<x.outHeight;++ne){const me=ue+ne*P.strides[1],ge=ne*x.strideHeight-D;for(let be=0;be<S;++be){const pe=ge+be*C;if(pe<0||pe>=x.inHeight)continue;const te=be*g[0],ye=re+pe*m[1];for(let ce=0;ce<x.outWidth;++ce){const K=me+ce*P.strides[2],Z=ce*x.strideWidth-A;for(let De=0;De<k;++De){const Ae=Z+De*N;if(Ae<0||Ae>=x.inWidth)continue;const Fe=te+De*g[1],Pe=ye+Ae*x.inChannels;let He=K,Ke=Fe;for(let Xe=0;Xe<x.inChannels;++Xe){const ct=W[Pe+Xe];for(let Tt=0;Tt<L;++Tt)G[He+Tt]+=ct*B[Ke+Tt];He+=L,Ke+=L}}}}}}return t.makeTensorInfo(P.shape,P.dtype,P.values)}const Coe={kernelName:Nb,backendName:"cpu",kernelFunc:aU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Toe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:o,dilations:u,pad:c,dimRoundingMode:d,filterShape:m}=r;$t([s,a],"depthwiseConv2dNativeBackpropFilter");const g=zs(s.shape,m,o,u,c,d,!0),{strideHeight:y,strideWidth:x,filterHeight:S,filterWidth:k}=g,C=new ms(g.filterShape,"float32"),N=g.padInfo.left,$=g.padInfo.top,A=g.outChannels/g.inChannels,D=t.data.get(s.dataId).values,L=new ms(s.shape,s.dtype,D),P=t.data.get(a.dataId).values,W=new ms(a.shape,a.dtype,P);for(let B=0;B<S;++B){const G=Math.max(0,Math.ceil(($-B)/y)),X=Math.min(g.outHeight,(g.inHeight+$-B)/y);for(let re=0;re<k;++re){const ue=Math.max(0,Math.ceil((N-re)/x)),ne=Math.min(g.outWidth,(g.inWidth+N-re)/x);for(let me=0;me<g.outChannels;++me){const ge=Math.trunc(me/A),be=me%A;let pe=0;for(let te=0;te<g.batchSize;++te)for(let ye=G;ye<X;++ye){const ce=B+ye*y-$;for(let K=ue;K<ne;++K){const Z=re+K*x-N;pe+=L.get(te,ce,Z,ge)*W.get(te,ye,K,me)}}C.set(pe,B,re,ge,be)}}}return t.makeTensorInfo(C.shape,C.dtype,C.values)}const koe={kernelName:cS,backendName:"cpu",kernelFunc:Toe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eoe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{strides:o,dilations:u,pad:c,dimRoundingMode:d,inputShape:m}=r;$t([s,a],"depthwiseConv2DNativeBackpropInput");const g=Ot(s.shape),y=Ot(a.shape),x=zs(m,a.shape,o,u,c,d,!0),S=new ms(x.inShape,"float32"),k=S.values,[C,N,$]=S.strides,A=t.data.get(s.dataId).values,[D,L,P]=g,W=t.data.get(a.dataId).values,[B,G,X]=y,{batchSize:re,filterHeight:ue,filterWidth:ne,inChannels:me,inHeight:ge,inWidth:be,outChannels:pe,outHeight:te,outWidth:ye,strideHeight:ce,strideWidth:K}=x,Z=ue-1-x.padInfo.top,De=ne-1-x.padInfo.left,Ae=pe/me;for(let Fe=0;Fe<re;++Fe)for(let Pe=0;Pe<me;++Pe)for(let He=0;He<ge;++He){const Ke=He-Z,Xe=Math.max(0,Math.ceil(Ke/ce)),ct=Math.min(te,(ue+Ke)/ce);for(let Tt=0;Tt<be;++Tt){const tn=Tt-De,Xt=Math.max(0,Math.ceil(tn/K)),hn=Math.min(ye,(ne+tn)/K);let Zt=0;for(let Ne=Xe;Ne<ct;++Ne){const Je=Ne*ce-Ke;for(let ht=Xt;ht<hn;++ht){const Lt=ht*K-tn,it=D*Fe+L*Ne+P*ht,mt=B*(ue-1-Je)+G*(ne-1-Lt)+X*Pe;for(let Yt=0;Yt<Ae;++Yt){const jt=Pe*Ae+Yt,Tn=A[it+jt],nn=W[mt+Yt];Zt+=Tn*nn}}}k[C*Fe+N*He+$*Tt+Pe]=Zt}}return t.makeTensorInfo(S.shape,S.dtype,S.values)}const Noe={kernelName:fS,backendName:"cpu",kernelFunc:Eoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $oe(n){const{inputs:e,backend:t}=n,{x:r}=e,s=Re(r.shape),a=t.data.get(r.dataId).values,o=gn([s,s],r.dtype),u=o.values;for(let d=0;d<a.length;d++)u[d*s+d]=a[d];const c=[...r.shape,...r.shape];return t.makeTensorInfo(c,o.dtype,o.values)}const Ioe={kernelName:dS,backendName:"cpu",kernelFunc:$oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Roe={kernelName:$b,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s}=n,{strides:a,pad:o,dilations:u}=t,c=e,d=c.data.get(r.dataId).values,m=r.shape.length,g=c.data.get(s.dataId).values,y=s.shape.length,{batchSize:x,inHeight:S,inWidth:k,inChannels:C,outHeight:N,outWidth:$,padInfo:A,strideHeight:D,strideWidth:L,filterHeight:P,filterWidth:W,dilationHeight:B,dilationWidth:G,outShape:X}=$x(r.shape,s.shape,a,o,"NHWC",u),re=Re(X),ue=X.length,ne=Gr(r.dtype,re);for(let ge=0;ge<x;++ge)for(let be=0;be<N;++be){const pe=be*D-A.top;for(let te=0;te<$;++te){const ye=te*L-A.left;for(let ce=0;ce<C;++ce){let K=Number.MIN_SAFE_INTEGER;for(let De=0;De<P;++De){const Ae=pe+De*B;if(Ae>=0&&Ae<S)for(let Fe=0;Fe<W;++Fe){const Pe=ye+Fe*G;if(Pe>=0&&Pe<k){const He=Dl([ge,Ae,Pe,ce],m,Ot(r.shape)),Ke=Dl([De,Fe,ce],y,Ot(s.shape)),Xe=d[He]+g[Ke];Xe>K&&(K=Xe)}}}const Z=Dl([ge,be,te,ce],ue,Ot(X));ne[Z]=K}}}return{dataId:c.write(jf(ne,r.dtype),X,r.dtype),shape:X,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Doe={kernelName:pS,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s,dy:a}=n,{strides:o,pad:u,dilations:c}=t,d=e,m=mo(r.shape,d.data.get(r.dataId).values),g=mo(s.shape,d.data.get(s.dataId).values),{batchSize:y,inHeight:x,inWidth:S,inChannels:k,outHeight:C,outWidth:N,padInfo:$,strideHeight:A,strideWidth:D,filterHeight:L,filterWidth:P,dilationHeight:W,dilationWidth:B,outShape:G}=$x(r.shape,s.shape,o,u,"NHWC",c);U(a.rank===G.length,()=>`Error in ${pS}, dy must have the same rank as output ${G.length}, but got ${a.rank}`);const X=mo(G,d.data.get(a.dataId).values),re=x$(s.shape,s.dtype);for(let ne=0;ne<y;++ne)for(let me=0;me<C;++me){const ge=me*A-$.top;for(let be=0;be<N;++be){const pe=be*D-$.left;for(let te=0;te<k;++te){let ye=Number.MIN_SAFE_INTEGER,ce=0,K=0;for(let Z=0;Z<L;++Z){const De=ge+Z*W;if(De>=0&&De<x)for(let Ae=0;Ae<P;++Ae){const Fe=pe+Ae*B;if(Fe>=0&&Fe<S){const Pe=m[ne][De][Fe][te]+g[Z][Ae][te];Pe>ye&&(ye=Pe,ce=Z,K=Ae)}}}re[ce][K][te]+=X[ne][me][be][te]}}}return{dataId:d.write(jf(re,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _oe={kernelName:hS,backendName:"cpu",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,filter:s,dy:a}=n,{strides:o,pad:u,dilations:c}=t,d=e,m=mo(r.shape,d.data.get(r.dataId).values),g=mo(s.shape,d.data.get(s.dataId).values),{batchSize:y,inHeight:x,inWidth:S,inChannels:k,outHeight:C,outWidth:N,padInfo:$,strideHeight:A,strideWidth:D,filterHeight:L,filterWidth:P,dilationHeight:W,dilationWidth:B,outShape:G}=$x(r.shape,s.shape,o,u,"NHWC",c);U(a.rank===G.length,()=>`Error in ${hS}, dy must have the same rank as output ${G.length}, but got ${a.rank}`);const X=mo(G,d.data.get(a.dataId).values),re=x$(r.shape,r.dtype);for(let ne=0;ne<y;++ne)for(let me=0;me<C;++me){const ge=me*A-$.top;for(let be=0;be<N;++be){const pe=be*D-$.left;for(let te=0;te<k;++te){let ye=Number.MIN_SAFE_INTEGER,ce=ge<0?0:ge,K=pe<0?0:pe;for(let Z=0;Z<L;++Z){const De=ge+Z*W;if(De>=0&&De<x)for(let Ae=0;Ae<P;++Ae){const Fe=pe+Ae*B;if(Fe>=0&&Fe<S){const Pe=m[ne][De][Fe][te]+g[Z][Ae][te];Pe>ye&&(ye=Pe,ce=De,K=Fe)}}}re[ne][ce][K][te]+=X[ne][me][be][te]}}}return{dataId:d.write(jf(re,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aoe(n){const{inputs:e,backend:t,attrs:r}=n,{image:s}=e,{canvas:a,options:o}=r,{contextOptions:u,imageOptions:c}=o||{},d=c?.alpha||1,m=u?.contextType||"2d";if(m!=="2d")throw new Error(`Context type ${u.contextType} is not supported by the CPU backend.`);const g=a.getContext(m,u?.contextAttributes||{});if(g==null)throw new Error(`Could not get the context with ${m} type.`);const[y,x]=s.shape.slice(0,2),S=s.shape.length===2?1:s.shape[2],k=t.data.get(s.dataId).values,C=s.dtype==="float32"?255:1,N=new Uint8ClampedArray(x*y*4);for(let A=0;A<y*x;++A){const D=[0,0,0,255*d];for(let P=0;P<S;P++){const W=k[A*S+P];if(s.dtype==="float32"){if(W<0||W>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${W}.`)}else if(s.dtype==="int32"&&(W<0||W>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${W}.`);S===1?(D[0]=W*C,D[1]=W*C,D[2]=W*C):D[P]=W*C}const L=A*4;N[L+0]=Math.round(D[0]),N[L+1]=Math.round(D[1]),N[L+2]=Math.round(D[2]),N[L+3]=Math.round(D[3])}a.width=x,a.height=y;const $=new ImageData(N,x,y);return g.putImageData($,0,0),s}const Ooe={kernelName:mS,backendName:"cpu",kernelFunc:Aoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r;$t(s,"sum");let u;s.dtype==="bool"?u=pd({inputs:{x:s},backend:t,attrs:{dtype:"int32"}}):u=zu({inputs:{x:s},backend:t});const c=u.shape.length,d=wn(a,u.shape),m=Ur(d,c);let g=d,y=u;m!=null&&(y=Si({inputs:{x:u},backend:t,attrs:{perm:m}}),g=ns(g.length,c)),ua("sum",g,y.shape.length);const[x,S]=Bs(y.shape,g),k=pi(y.dtype,"int32");let C=jT(t,x,k);const N=Re(S),$=t.data.get(C.dataId).values,A=t.data.get(y.dataId).values;for(let D=0;D<$.length;++D){const L=D*N;let P=0;for(let W=0;W<N;++W)P+=A[L+W];$[D]=P}if(o){const D=ts(C.shape,d),L=C;C=Cr({inputs:{x:C},backend:t,attrs:{shape:D}}),t.disposeIntermediateTensorInfo(L)}return t.disposeIntermediateTensorInfo(u),m!=null&&t.disposeIntermediateTensorInfo(y),C}const Foe={kernelName:ox,backendName:"cpu",kernelFunc:v0};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Loe(n){const{inputs:e,backend:t,attrs:r}=n,{equation:s}=r,a=e,{allDims:o,summedDims:u,idDims:c}=H2(s,a.length);G2(o.length,c,a);const{path:d,steps:m}=q2(u,c),g=m.length;let y=null,x=o.length;const S=[];for(let k=0;k<g;++k){for(const C of m[k]){const{permutationIndices:N,expandDims:$}=j2(x,c[C]);let A;K2(N)?A=a[C]:(A=Si({inputs:{x:a[C]},backend:t,attrs:{perm:N}}),S.push(A));const D=A.shape.slice();for(let L=0;L<$.length;++L)D.splice($[L],0,1);Nn(A.shape,D)||(A=Cr({inputs:{x:A},backend:t,attrs:{shape:D}}),S.push(A)),y===null?y=A:(y=GT({inputs:{a:A,b:y},backend:t}),S.push(y))}k<g-1&&(d[k]>=0&&(y=v0({inputs:{x:y},backend:t,attrs:{axis:d[k]-(o.length-x),keepDims:!1}}),S.push(y)),x--)}for(const k of S)k!==y&&t.disposeIntermediateTensorInfo(k);return y}const Moe={kernelName:gS,backendName:"cpu",kernelFunc:Loe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zoe(n){const{inputs:e,backend:t}=n,{dy:r,y:s}=e;$t([r,s],"eluGrad");const a=new Float32Array(Re(s.shape)),o=t.data.get(s.dataId).values,u=t.data.get(r.dataId).values;for(let c=0;c<o.length;++c){const d=o[c];d>=0?a[c]=u[c]:a[c]=u[c]*(d+1)}return t.makeTensorInfo(s.shape,"float32",a)}const Poe={kernelName:yS,backendName:"cpu",kernelFunc:zoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Boe=L2,Voe=M2,Uoe=z2,Woe=P2,Hoe=B2,joe=V2,Goe=sr(qm,n=>{const e=Math.sign(n),t=Math.abs(n),r=1/(1+Boe*t);return e*(1-((((joe*r+Hoe)*r+Woe)*r+Uoe)*r+Voe)*r*Math.exp(-t*t))}),qoe={kernelName:qm,backendName:"cpu",kernelFunc:Goe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XT(n){const{inputs:e,backend:t,attrs:r}=n,{input:s}=e,{dim:a}=r,o=s.shape.length,u=s.shape.slice();let c=a;return a<0&&(U(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+a+1),u.splice(c,0,1),Cr({inputs:{x:s},backend:t,attrs:{shape:u}})}const Koe={kernelName:Rb,backendName:"cpu",kernelFunc:XT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xoe=ss((n,e)=>n/e),p_=Rs(jm,Xoe),m_={kernelName:jm,backendName:"cpu",kernelFunc:p_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iU(n,e,t){const r=n.shape,s=r[0],a=r[1],o=t.data.get(n.dataId),u=o.complexTensorInfos.real,c=o.complexTensorInfos.imag,d=[s,a],m=Re(d),g=Ls("float32",m),y=Ls("float32",m);for(let C=0;C<s;C++){const N=ip({inputs:{x:u},backend:t,attrs:{begin:[C,0],size:[1,a]}}),$=ip({inputs:{x:c},backend:t,attrs:{begin:[C,0],size:[1,a]}}),A=Ki({inputs:{real:N,imag:$},backend:t}),{real:D,imag:L}=Yoe(A,e,t),P=Uc(D,L);for(let W=0;W<a;W++){const B=U2(P,W);g[C*a+W]=B.real,y[C*a+W]=B.imag}t.disposeIntermediateTensorInfo(N),t.disposeIntermediateTensorInfo($),t.disposeIntermediateTensorInfo(A)}const x=t.makeTensorInfo(d,"float32",g),S=t.makeTensorInfo(d,"float32",y),k=Ki({inputs:{real:x,imag:S},backend:t});return t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(S),k}function Yoe(n,e,t){const r=Re(n.shape),s=t.data.get(n.dataId),a=t.data.get(s.complexTensorInfos.real.dataId).values,o=t.data.get(s.complexTensorInfos.imag.dataId).values;if(Qoe(r)){const u=g_(a,o,r,e,t),c=[n.shape[0],n.shape[1]];if(e){const d=t.makeTensorInfo(c,"float32",u.real),m=t.makeTensorInfo(c,"float32",u.imag),g=t.makeTensorInfo([],"float32",Rc(r,"float32")),y=zu({inputs:{x:g},backend:t}),x=m_.kernelFunc({inputs:{a:d,b:g},backend:t}),S=m_.kernelFunc({inputs:{a:m,b:y},backend:t}),k=t.data.get(x.dataId).values,C=t.data.get(S.dataId).values;return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(S),{real:k,imag:C}}return u}else{const u=Uc(a,o),c=Zoe(u,r,e);return a3(c)}}function Qoe(n){return(n&n-1)===0}function g_(n,e,t,r,s){if(t===1)return{real:n,imag:e};const a=Uc(n,e),o=t/2,u=i3(a),c=u.real,d=u.imag,m=[c.length],g=s.makeTensorInfo(m,"float32",c),y=s.makeTensorInfo(m,"float32",d),x=Ki({inputs:{real:g,imag:y},backend:s}),S=o3(a),k=S.real,C=S.imag,N=[k.length],$=s.makeTensorInfo(N,"float32",k),A=s.makeTensorInfo(N,"float32",C),D=Ki({inputs:{real:$,imag:A},backend:s}),L=g_(c,d,o,r,s),P=L.real,W=L.imag,B=[P.length],G=s.makeTensorInfo(B,"float32",P),X=s.makeTensorInfo(B,"float32",W),re=Ki({inputs:{real:G,imag:X},backend:s}),ue=g_(k,C,o,r,s),ne=ue.real,me=ue.imag,ge=[ne.length],be=s.makeTensorInfo(ge,"float32",ne),pe=s.makeTensorInfo(ge,"float32",me),te=Ki({inputs:{real:be,imag:pe},backend:s}),ye=u3(t,r),ce=[ye.real.length],K=s.makeTensorInfo(ce,"float32",ye.real),Z=s.makeTensorInfo(ce,"float32",ye.imag),De=Ki({inputs:{real:K,imag:Z},backend:s}),Ae=GT({inputs:{a:De,b:te},backend:s}),Fe=oy({inputs:{a:re,b:Ae},backend:s}),Pe=d_({inputs:{a:re,b:Ae},backend:s}),He=sp({inputs:{input:Fe},backend:s}),Ke=sp({inputs:{input:Pe},backend:s}),Xe=ly({inputs:{input:Fe},backend:s}),ct=ly({inputs:{input:Pe},backend:s}),Tt=uy({inputs:[He,Ke],backend:s,attrs:{axis:0}}),tn=uy({inputs:[Xe,ct],backend:s,attrs:{axis:0}}),Xt=s.data.get(Tt.dataId).values,hn=s.data.get(tn.dataId).values;return s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(y),s.disposeIntermediateTensorInfo(x),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(re),s.disposeIntermediateTensorInfo(be),s.disposeIntermediateTensorInfo(pe),s.disposeIntermediateTensorInfo(te),s.disposeIntermediateTensorInfo(K),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(De),s.disposeIntermediateTensorInfo(Ae),s.disposeIntermediateTensorInfo(Fe),s.disposeIntermediateTensorInfo(Pe),s.disposeIntermediateTensorInfo(He),s.disposeIntermediateTensorInfo(Xe),s.disposeIntermediateTensorInfo(Ke),s.disposeIntermediateTensorInfo(ct),s.disposeIntermediateTensorInfo(Tt),s.disposeIntermediateTensorInfo(tn),{real:Xt,imag:hn}}function Zoe(n,e,t){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let a=0,o=0;for(let u=0;u<e;u++){const c=c3(s*u,e,t),d=U2(n,u);a+=d.real*c.real-d.imag*c.imag,o+=d.real*c.imag+d.imag*c.real}t&&(a/=e,o/=e),l3(r,a,o,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Joe(n){const{inputs:e,backend:t}=n,{input:r}=e,s=Re(r.shape),a=r.shape[r.shape.length-1],o=s/a,u=Cr({inputs:{x:r},backend:t,attrs:{shape:[o,a]}}),c=iU(u,!1,t),d=Cr({inputs:{x:c},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(c),d}const ele={kernelName:vS,backendName:"cpu",kernelFunc:Joe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_(n){const{backend:e,attrs:t}=n,{shape:r,value:s,dtype:a}=t,o=a||wh(s),u=Gr(o,Re(r));return nle(u,s,o),e.makeTensorInfo(r,o,u)}const tle={kernelName:bS,backendName:"cpu",kernelFunc:y_};function nle(n,e,t){n.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rle={kernelName:xS,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,s=t,a=Ls(r.dtype,Re(r.shape)),[o,u,c,d]=r.shape,m=s.data.get(r.dataId).values;for(let y=0;y<o;y++){const x=y*c*u*d;for(let S=0;S<u;S++){const k=S*(c*d);for(let C=0;C<c;C++){const N=C*d;for(let $=0;$<d;$++){const A=Math.round(c-C-1),D=x+k+N+$;let L=m[D];if(A>=0&&A<c){const P=A*d,W=x+k+P+$;L=m[W]}a[D]=L}}}}return{dataId:s.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sle(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a,bias:o,preluActivationWeights:u}=e,{strides:c,pad:d,dataFormat:m,dilations:g,dimRoundingMode:y,activation:x,leakyreluAlpha:S}=r;let k=sU({inputs:{x:s,filter:a},backend:t,attrs:{strides:c,pad:d,dataFormat:m,dilations:g,dimRoundingMode:y}});if(o){const C=k;if(m==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const N=Cr({inputs:{x:o},backend:t,attrs:{shape:[o.shape[0],1,1]}});k=oy({inputs:{a:k,b:N},backend:t}),t.disposeIntermediateTensorInfo(N)}else k=oy({inputs:{a:k,b:o},backend:t});t.disposeIntermediateTensorInfo(C)}if(x){const C=k;if(m==="NCHW"&&x==="prelu"&&u.shape.length===1&&u.shape[0]!==1){const N=Cr({inputs:{x:u},backend:t,attrs:{shape:[u.shape[0],1,1]}});k=KT(t,k,x,N,S),t.disposeIntermediateTensorInfo(N)}else k=KT(t,k,x,u,S);t.disposeIntermediateTensorInfo(C)}return k}const ale={kernelName:gx,backendName:"cpu",kernelFunc:sle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ile(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a,bias:o,preluActivationWeights:u}=e,{strides:c,pad:d,dataFormat:m,dilations:g,dimRoundingMode:y,activation:x,leakyreluAlpha:S}=r;let k=aU({inputs:{x:s,filter:a},backend:t,attrs:{strides:c,pad:d,dataFormat:m,dilations:g,dimRoundingMode:y}});if(o){const C=k;k=oy({inputs:{a:k,b:o},backend:t}),t.disposeIntermediateTensorInfo(C)}if(x){const C=k;k=KT(t,k,x,u,S),t.disposeIntermediateTensorInfo(C)}return k}const ole={kernelName:yx,backendName:"cpu",kernelFunc:ile};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lle(n){const{inputs:e,backend:t}=n,{params:r,indices:s}=e,a=Re(r.shape),o=s.shape,u=o[o.length-1],[c,d,m,g]=ZC(r,s);if(d===0)return t.makeTensorInfo(c,r.dtype,[]);const y=t.data.get(s.dataId).values,x=t.bufferSync(r),S=cV(y,x,r.dtype,d,u,m,g,r.shape,a);return t.makeTensorInfo(c,r.dtype,S.values)}const ule={kernelName:wS,backendName:"cpu",kernelFunc:lle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cle(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,indices:a}=e,{axis:o,batchDims:u}=r;$t([s,a],"gatherV2");const c=wn(o,s.shape)[0],d=t.data.get(a.dataId).values,m=s.shape[c];for(let D=0;D<d.length;++D){const L=d[D];U(L<=m-1&&L>=0,()=>`GatherV2: the index value ${L} is not in [0, ${m-1}]`)}let g=u;u==null&&(g=0);const y=Re(a.shape),x=Q2(s,a,c,g),S=Cr({inputs:{x:s},backend:t,attrs:{shape:[x.batchSize,x.outerSize,x.dimSize,x.sliceSize]}}),k=Cr({inputs:{x:a},backend:t,attrs:{shape:[x.batchSize,y/x.batchSize]}}),C=[x.batchSize,x.outerSize,y/x.batchSize,x.sliceSize],N=t.bufferSync(k),$=t.bufferSync(S),A=fV($,N,C);return t.disposeIntermediateTensorInfo(S),t.disposeIntermediateTensorInfo(k),t.makeTensorInfo(x.outputShape,A.dtype,A.values)}const fle={kernelName:_b,backendName:"cpu",kernelFunc:cle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dle(n){const{inputs:e,backend:t}=n,{input:r}=e,s=Re(r.shape),a=r.shape[r.shape.length-1],o=s/a,u=Cr({inputs:{x:r},backend:t,attrs:{shape:[o,a]}}),c=iU(u,!0,t),d=Cr({inputs:{x:c},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(c),d}const hle={kernelName:SS,backendName:"cpu",kernelFunc:dle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ple=sr(eg,n=>Number.isFinite(n)?1:0,"bool"),mle={kernelName:eg,backendName:"cpu",kernelFunc:ple};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gle=sr(tg,n=>Math.abs(n)===1/0?1:0,"bool"),yle={kernelName:tg,backendName:"cpu",kernelFunc:gle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vle=sr(ng,n=>Number.isNaN(n)?1:0,"bool"),ble={kernelName:ng,backendName:"cpu",kernelFunc:vle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xle(n){const{backend:e,attrs:t}=n,{start:r,stop:s,num:a}=t,o=gV(r,s,a);return e.makeTensorInfo([o.length],"float32",o)}const wle={kernelName:TS,backendName:"cpu",kernelFunc:xle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sle=sr(sg,n=>Math.log1p(n)),Cle={kernelName:sg,backendName:"cpu",kernelFunc:Sle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tle=ss((n,e)=>n&&e),kle=Rs(Mb,Tle,null,"bool"),Ele={kernelName:Mb,backendName:"cpu",kernelFunc:kle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nle=sr(zb,n=>n?0:1,"bool"),$le={kernelName:zb,backendName:"cpu",kernelFunc:Nle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ile=ss((n,e)=>n||e),Rle=Rs(Pb,Ile,null,"bool"),Dle={kernelName:Pb,backendName:"cpu",kernelFunc:Rle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _le(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{depthRadius:a,bias:o,alpha:u,beta:c}=r;$t(s,"LRN");const d=s.shape[3],m=d-1,g=t.data.get(s.dataId).values,y=Re(s.shape),x=new Float32Array(y);function S(k){const C=k%d;let N=k-C+Math.max(0,C-a);const $=k-C+Math.min(C+a,m);let A=0;for(;N<=$;N++){const D=g[N];A+=D*D}return A}for(let k=0;k<y;k++){const C=S(k),N=g[k]*Math.pow(o+u*C,-c);x[k]=N}return t.makeTensorInfo(s.shape,s.dtype,x)}const Ale={kernelName:Bb,backendName:"cpu",kernelFunc:_le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ole(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,y:a,dy:o}=e,{depthRadius:u,bias:c,alpha:d,beta:m}=r;$t(o,"LRNGrad");const g=Re(o.shape),y=o.shape[3],x=t.data.get(o.dataId).values,S=t.data.get(s.dataId).values,k=t.data.get(a.dataId).values,C=new Float32Array(g),N=g;for(let $=0;$<N;$++){const A=$%y,D=$-A+Math.max(0,A-u),L=$-A+Math.min(y,A+u+1);let P=0;for(let W=D;W<L;W++)P+=Math.pow(S[W],2);P=d*P+c;for(let W=D;W<L;W++){let B=-2*d*m*S[W]*k[$]/P;$===W&&(B+=Math.pow(P,-m)),B*=x[$],C[W]+=B}}return t.makeTensorInfo(o.shape,s.dtype,C)}const Fle={kernelName:kS,backendName:"cpu",kernelFunc:Ole};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oU(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reductionIndices:a,keepDims:o}=r,u=t;let c=s.shape;const d=c.length,m=wn(a,c);let g=m;const y=Ur(g,d);let x=u.data.get(s.dataId).values;if(y!=null){const D=new Array(d);for(let L=0;L<D.length;L++)D[L]=c[y[L]];x=c_(x,c,s.dtype,y,D),g=ns(g.length,d),c=D}$t(s,"max"),ua("max",g,d);const[S,k]=Bs(c,g),C=Re(k),N=vV(x,C,S,s.dtype),$=u.write(N,S,s.dtype);let A=S;return o&&(A=ts(S,m)),{dataId:$,shape:A,dtype:s.dtype}}const Lle={kernelName:Vb,backendName:"cpu",kernelFunc:oU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mle(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;$t(s,"maxPool");const{filterSize:a,strides:o,pad:u,dimRoundingMode:c}=r,d=1;U(la(o,d),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`);const m=Go(s.shape,a,o,d,u,c);let g;if(m.filterWidth===1&&m.filterHeight===1&&Nn(m.inShape,m.outShape))g=zu({inputs:{x:s},backend:t});else{const y=t.data.get(s.dataId).values,x=Ot(s.shape),S=h_(y,s.shape,s.dtype,x,m,"max");g=t.makeTensorInfo(m.outShape,s.dtype,S.values)}return g}const zle={kernelName:Ub,backendName:"cpu",kernelFunc:Mle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ple(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:a,strides:o,pad:u,dimRoundingMode:c,dataFormat:d}=r;$t(s,"maxPool3d");const m=Fc(s.shape,a,o,1,u,c,d),g=t.data.get(s.dataId).values,y=rU(g,s.shape,s.dtype,Ot(s.shape),m,"max");return t.makeTensorInfo(y.shape,"float32",y.values)}const Ble={kernelName:Wb,backendName:"cpu",kernelFunc:Ple};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vle(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,{filterSize:o,strides:u,pad:c,dimRoundingMode:d}=r;$t([s,a],"maxPool3DGrad");const m=Fc(a.shape,o,u,1,c,d),g=t.bufferSync(a),y=Rie(g,m),x=m.strideDepth,S=m.strideHeight,k=m.strideWidth,C=m.dilationDepth,N=m.dilationHeight,$=m.dilationWidth,A=m.effectiveFilterDepth,D=m.effectiveFilterHeight,L=m.effectiveFilterWidth,P=A-1-m.padInfo.front,W=L-1-m.padInfo.left,B=D-1-m.padInfo.top,G=gn(a.shape,"float32"),X=t.bufferSync(s);for(let re=0;re<m.batchSize;++re)for(let ue=0;ue<m.inChannels;++ue)for(let ne=0;ne<m.inDepth;++ne)for(let me=0;me<m.inHeight;++me)for(let ge=0;ge<m.inWidth;++ge){const be=ne-P,pe=me-B,te=ge-W;let ye=0;for(let ce=0;ce<A;ce+=C){const K=(be+ce)/x;if(!(K<0||K>=m.outDepth||Math.floor(K)!==K))for(let Z=0;Z<D;Z+=N){const De=(pe+Z)/S;if(!(De<0||De>=m.outHeight||Math.floor(De)!==De))for(let Ae=0;Ae<L;Ae+=$){const Fe=(te+Ae)/k;if(Fe<0||Fe>=m.outWidth||Math.floor(Fe)!==Fe)continue;const Pe=A*D*L-1-y.get(re,K,De,Fe,ue),He=ce*D*L+Z*L+Ae,Ke=Pe===He?1:0;if(Ke===0)continue;const Xe=X.get(re,K,De,Fe,ue);ye+=Xe*Ke}}}G.set(ye,re,ne,me,ge,ue)}return t.makeTensorInfo(G.shape,G.dtype,G.values)}const Ule={kernelName:NS,backendName:"cpu",kernelFunc:Vle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wle(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a,output:o}=e,u=a;$t([a,o],"maxPoolGrad");const{filterSize:c,strides:d,pad:m,dimRoundingMode:g}=r,y=Go(u.shape,c,d,1,m,g),x=t.data.get(u.dataId).values,S=gn(y.outShape,u.dtype,nU(x,u.shape,u.dtype,y).values),k=y.strideHeight,C=y.strideWidth,N=y.dilationHeight,$=y.dilationWidth,A=y.effectiveFilterHeight,D=y.effectiveFilterWidth,L=D-1-y.padInfo.left,P=A-1-y.padInfo.top,W=gn(u.shape,"float32"),B=t.data.get(s.dataId).values,G=gn(s.shape,"float32",B);for(let X=0;X<y.batchSize;++X)for(let re=0;re<y.inChannels;++re)for(let ue=0;ue<y.inHeight;++ue)for(let ne=0;ne<y.inWidth;++ne){const me=ue-P,ge=ne-L;let be=0;for(let pe=0;pe<A;pe+=N){const te=(me+pe)/k;if(!(te<0||te>=y.outHeight||Math.floor(te)!==te))for(let ye=0;ye<D;ye+=$){const ce=(ge+ye)/C;if(ce<0||ce>=y.outWidth||Math.floor(ce)!==ce)continue;const K=A*D-1-S.get(X,te,ce,re),Z=pe*D+ye,De=K===Z?1:0;if(De===0)continue;const Ae=G.get(X,te,ce,re);be+=Ae*De}}W.set(be,X,ue,ne,re)}return t.makeTensorInfo(W.shape,W.dtype,W.values)}const Hle={kernelName:ES,backendName:"cpu",kernelFunc:Wle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jle(n,e,t,r,s){const a=Ot(e),o=h_(n,e,t,a,s,"max"),u=nU(n,e,t,s,!0,r);return[o.values,u.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gle={kernelName:$S,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:s,strides:a,pad:o,includeBatchInIndex:u}=e,c=t;$t(r,"MaxPoolWithArgmax");const d=c.data.get(r.dataId).values,m=Go(r.shape,s,a,[1,1],o),[g,y]=jle(d,r.shape,r.dtype,u,m),x=c.write(g,m.outShape,r.dtype),S=c.write(y,m.outShape,r.dtype);return[{dataId:x,shape:m.outShape,dtype:r.dtype},{dataId:S,shape:m.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qle(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r,u=wn(a,s.shape),d=Bs(s.shape,u)[1],m=Re(d),g=[],y=t.makeTensorInfo([],"float32",new Float32Array([m]));g.push(y);const x=pd({inputs:{x:s},backend:t,attrs:{dtype:"float32"}});g.push(x);const S=p_({inputs:{a:x,b:y},backend:t});g.push(S);const k=v0({inputs:{x:S},backend:t,attrs:{axis:a,keepDims:o}});return g.forEach(C=>t.disposeIntermediateTensorInfo(C)),k}const Kle={kernelName:Hb,backendName:"cpu",kernelFunc:qle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xle(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r;$t(s,"min");const u=wn(a,s.shape);let c=u;const d=Ur(c,s.shape.length);let m=s;d!=null&&(m=Si({inputs:{x:s},backend:t,attrs:{perm:d}}),c=ns(c.length,s.shape.length)),ua("min",c,m.shape.length);const[g,y]=Bs(m.shape,c),x=Re(y),S=ia(Re(g),m.dtype),k=t.data.get(m.dataId).values;for(let N=0;N<S.length;++N){const $=N*x;let A=k[$];for(let D=0;D<x;++D){const L=k[$+D];(Number.isNaN(L)||L<A)&&(A=L)}S[N]=A}d!=null&&t.disposeIntermediateTensorInfo(m);const C=t.makeTensorInfo(g,m.dtype,S);if(o){const N=ts(g,u),$=Cr({inputs:{x:C},backend:t,attrs:{shape:N}});return t.disposeIntermediateTensorInfo(C),$}return C}const Yle={kernelName:jb,backendName:"cpu",kernelFunc:Xle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qle(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:a,mode:o}=r;$t(s,"mirrorPad");const u=a.map((A,D)=>A[0]+s.shape[D]+A[1]),c=a.map(A=>A[0]),d=a.map((A,D)=>A[0]+s.shape[D]),m=o==="reflect"?0:1,g=t.data.get(s.dataId).values,y=s.shape.length,x=Ot(s.shape),S=Re(u),k=u.length,C=Ot(u),N=Ls(s.dtype,S);for(let A=0;A<S;A++){let D=Sh(A,k,C);for(let P=0;P<k;P++)D[P]<c[P]?D[P]=c[P]*2-D[P]-m:D[P]>=d[P]&&(D[P]=(d[P]-1)*2-D[P]+m);D=D.map((P,W)=>P-c[W]);const L=Dl(D,y,x);N[A]=g[L]}return{dataId:t.write(N,u,s.dtype),shape:u,dtype:s.dtype}}const Zle={kernelName:Gb,backendName:"cpu",kernelFunc:Qle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jle=ss((n,e)=>{const t=n%e;return n<0&&e<0||n>=0&&e>=0?t:(t+e)%e}),eue=Rs(og,Jle),tue={kernelName:og,backendName:"cpu",kernelFunc:eue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lU(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{dim:a}=r,o=s.shape.length;let u=a;if(u===-1&&(u=o-1),u!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${u}`);const c=wn([u],s.shape),d=oU({inputs:{x:s},backend:t,attrs:{reductionIndices:c,keepDims:!1}}),m=ts(d.shape,c),g=Cr({inputs:{x:d},backend:t,attrs:{shape:m}}),y=d_({inputs:{a:s,b:g},backend:t}),x=iV({inputs:{x:y},backend:t}),S=v0({inputs:{x},backend:t,attrs:{axis:c,keepDims:!1}}),k=Cr({inputs:{x:S},backend:t,attrs:{shape:m}}),C=p_({inputs:{a:x,b:k},backend:t});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(S),t.disposeIntermediateTensorInfo(k),C}const nue={kernelName:cx,backendName:"cpu",kernelFunc:lU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rue(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{numSamples:a,seed:o,normalized:u}=r;$t(s,"multinomial");const c=u?s:lU({inputs:{logits:s},backend:t,attrs:{dim:-1}}),d=c.shape[0],m=c.shape[1],g=t.data.get(c.dataId).values,y=[d,a],x=ia(Re(y),"int32");for(let S=0;S<d;++S){const k=S*m,C=new Float32Array(m-1);C[0]=g[k];for(let A=1;A<C.length;++A)C[A]=C[A-1]+g[k+A];const N=jg.alea(o.toString()),$=S*a;for(let A=0;A<a;++A){const D=N();x[$+A]=C.length;for(let L=0;L<C.length;L++)if(D<C[L]){x[$+A]=L;break}}}return u||t.disposeIntermediateTensorInfo(c),t.makeTensorInfo(y,"int32",x)}const sue={kernelName:IS,backendName:"cpu",kernelFunc:rue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aue=qC;function iue(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:o,iouThreshold:u,scoreThreshold:c}=r;$t(s,"NonMaxSuppression");const d=t.data.get(s.dataId).values,m=t.data.get(a.dataId).values,{selectedIndices:g}=aue(d,m,o,u,c);return t.makeTensorInfo([g.length],"int32",new Int32Array(g))}const oue={kernelName:RS,backendName:"cpu",kernelFunc:iue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lue=KC;function uue(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:o,iouThreshold:u,scoreThreshold:c,padToMaxOutputSize:d}=r;$t(s,"NonMaxSuppressionPadded");const m=t.data.get(s.dataId).values,g=t.data.get(a.dataId).values,{selectedIndices:y,validOutputs:x}=lue(m,g,o,u,c,d);return[t.makeTensorInfo([y.length],"int32",new Int32Array(y)),t.makeTensorInfo([],"int32",new Int32Array([x]))]}const cue={kernelName:DS,backendName:"cpu",kernelFunc:uue};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fue=XC;function due(n){const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:o,iouThreshold:u,scoreThreshold:c,softNmsSigma:d}=r;$t(s,"NonMaxSuppressionWithScore");const m=t.data.get(s.dataId).values,g=t.data.get(a.dataId).values,y=o,x=u,S=c,k=d,{selectedIndices:C,selectedScores:N}=fue(m,g,y,x,S,k);return[t.makeTensorInfo([C.length],"int32",new Int32Array(C)),t.makeTensorInfo([N.length],"float32",new Float32Array(N))]}const hue={kernelName:_S,backendName:"cpu",kernelFunc:due};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pue(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s}=e,{dtype:a,depth:o,onValue:u,offValue:c}=r;$t(s,"oneHot");const d=Re(s.shape),m=new Float32Array(d*o);m.fill(c);const g=t.data.get(s.dataId).values;for(let y=0;y<d;++y)g[y]>=0&&g[y]<o&&(m[y*o+g[y]]=u);return t.makeTensorInfo([...s.shape,o],a,m)}const mue={kernelName:Yb,backendName:"cpu",kernelFunc:pue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YT(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=sp({inputs:{input:r},backend:t}),a=YT({inputs:{x:s},backend:t}),o=ly({inputs:{input:r},backend:t}),u=YT({inputs:{x:o},backend:t}),c=Ki({inputs:{real:a,imag:u},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(u),c}else return y_({backend:t,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const gue={kernelName:px,backendName:"cpu",kernelFunc:YT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uU(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=sp({inputs:{input:r},backend:t}),a=uU({inputs:{x:s},backend:t}),o=ly({inputs:{input:r},backend:t}),u=YT({inputs:{x:o},backend:t}),c=Ki({inputs:{real:a,imag:u},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(u),c}else return y_({backend:t,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const yue={kernelName:Xb,backendName:"cpu",kernelFunc:uU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cU(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r;if(e.length===1)return XT({inputs:{input:e[0]},backend:t,attrs:{dim:s}});const a=e[0].shape,o=e[0].dtype;e.forEach(m=>{aa(a,m.shape,"All tensors passed to stack must have matching shapes"),U(o===m.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],c=e.map(m=>{const g=XT({inputs:{input:m},backend:t,attrs:{dim:s}});return u.push(g),g}),d=uy({inputs:c,backend:t,attrs:{axis:s}});return u.forEach(m=>t.disposeIntermediateTensorInfo(m)),d}const vue={kernelName:Qb,backendName:"cpu",kernelFunc:cU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bue(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:a,constantValue:o}=r;$t(s,"pad");const u=a.map(($,A)=>$[0]+s.shape[A]+$[1]),c=a.map($=>$[0]),d=t.data.get(s.dataId).values,m=Re(s.shape),g=s.shape.length,y=Ot(s.shape),x=Re(u),S=u.length,k=Ot(u),C=Ls(s.dtype,x);o!==0&&C.fill(o);for(let $=0;$<m;$++){const D=Sh($,g,y).map((P,W)=>P+c[W]),L=Dl(D,S,k);C[L]=d[$]}return{dataId:t.write(C,u,s.dtype),shape:u,dtype:s.dtype}}const fU={kernelName:Zb,backendName:"cpu",kernelFunc:bue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xue=ss((n,e)=>Math.pow(n,e)),wue=Rs(ug,xue),Sue={kernelName:ug,backendName:"cpu",kernelFunc:wue};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cue(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:s,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:u}=r,c=s.map(N=>t.data.get(N.dataId).values),d=s.map(N=>N.shape),m=t.data.get(a.dataId).values,g=t.data.get(o.dataId).values,[y,x,S]=kV(c,d,m,a.shape,a.dtype,g,o.shape),k=y.map(N=>t.makeTensorInfo([N.length],"int32",N)),C=t.makeTensorInfo(S,a.dtype,x);return k.concat([C])}const Tue={kernelName:AS,backendName:"cpu",kernelFunc:Cue};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kue(n){const{inputs:e,backend:t}=n,{starts:r,limits:s,deltas:a}=e,o=t.data.get(r.dataId).values,u=t.data.get(s.dataId).values,c=t.data.get(a.dataId).values,[d,m]=NV(o,r.shape,r.dtype,u,s.shape,c,a.shape),g=t.makeTensorInfo([d.length],"int32",d),y=t.makeTensorInfo([m.length],r.dtype,m);return[g,y]}const Eue={kernelName:OS,backendName:"cpu",kernelFunc:kue};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nue(n){const{inputs:e,backend:t,attrs:r}=n,{shape:s,values:a,defaultValue:o,rowPartitionTensors:u}=e,{rowPartitionTypes:c}=r,d=t.data.get(s.dataId).values,m=t.data.get(a.dataId).values,g=t.data.get(o.dataId).values,y=u.map(C=>t.data.get(C.dataId).values),x=u.map(C=>C.shape),[S,k]=RV(d,s.shape,m,a.shape,a.dtype,g,o.shape,y,x,c);return t.makeTensorInfo(S,a.dtype,k)}const $ue={kernelName:FS,backendName:"cpu",kernelFunc:Nue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iue(n){const{backend:e,attrs:t}=n,{start:r,stop:s,dtype:a,step:o}=t,u=DV(r,s,o,a);return e.makeTensorInfo([u.length],a,u)}const Rue={kernelName:LS,backendName:"cpu",kernelFunc:Iue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Due=sr(cg,n=>1/n),_ue={kernelName:cg,backendName:"cpu",kernelFunc:Due};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aue(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:a,halfPixelCenters:o,size:u}=r;$t(s,"resizeBilinear");const c=Ot(s.shape),[d,m]=u,[g,y,x,S]=s.shape,k=t.data.get(s.dataId).values,C=new Float32Array(Re([g,d,m,S])),N=[a&&d>1?y-1:y,a&&m>1?x-1:x],$=[a&&d>1?d-1:d,a&&m>1?m-1:m];let A=0;const D=N[0]/$[0],L=N[1]/$[1];for(let P=0;P<g;P++)for(let W=0;W<d;W++){let B;o?B=D*(W+.5)-.5:B=D*W;const G=Math.max(0,Math.floor(B)),X=B-G,re=Math.min(y-1,Math.ceil(B)),ue=P*c[0]+G*c[1],ne=P*c[0]+re*c[1];for(let me=0;me<m;me++){let ge;o?ge=L*(me+.5)-.5:ge=L*me;const be=Math.max(0,Math.floor(ge)),pe=ge-be,te=Math.min(x-1,Math.ceil(ge)),ye=ue+be*c[2],ce=ne+be*c[2],K=ue+te*c[2],Z=ne+te*c[2];for(let De=0;De<S;De++){const Ae=k[ye+De],Fe=k[ce+De],Pe=k[K+De],He=k[Z+De],Ke=Ae+(Pe-Ae)*pe,Xe=Fe+(He-Fe)*pe,ct=Ke+(Xe-Ke)*X;C[A++]=ct}}}return t.makeTensorInfo([g,d,m,S],"float32",C)}const Oue={kernelName:rx,backendName:"cpu",kernelFunc:Aue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fue(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:a}=e,{alignCorners:o}=r;$t([a,s],"resizeBilinearGrad");const u=Ot(s.shape),[c,d,m,g]=s.shape,[,y,x]=a.shape,S=new Float32Array(c*d*m*g),k=[o&&y>1?d-1:d,o&&x>1?m-1:m],C=[o&&y>1?y-1:y,o&&x>1?x-1:x],N=k[0]/C[0],$=k[1]/C[1],A=t.data.get(a.dataId).values;let D=0;for(let L=0;L<c;L++){const P=L*u[0];for(let W=0;W<y;W++){const B=W*N,G=Math.floor(B),X=Math.min(Math.ceil(B),d-1),re=P+G*u[1],ue=P+X*u[1],ne=B-G,me=1-ne;for(let ge=0;ge<x;ge++){const be=ge*$,pe=Math.floor(be),te=Math.min(Math.ceil(be),m-1),ye=be-pe,ce=1-ye,K=re+pe*u[2],Z=re+te*u[2],De=ue+pe*u[2],Ae=ue+te*u[2],Fe=me*ce,Pe=me*ye,He=ne*ce,Ke=ne*ye;for(let Xe=0;Xe<g;Xe++){const ct=A[D++];S[K+Xe]+=ct*Fe,S[Z+Xe]+=ct*Pe,S[De+Xe]+=ct*He,S[Ae+Xe]+=ct*Ke}}}}return t.makeTensorInfo([c,m,d,g],"float32",S)}const Lue={kernelName:PS,backendName:"cpu",kernelFunc:Fue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mue(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:a,halfPixelCenters:o,size:u}=r;$t(s,"resizeNearestNeighbor");const c=Ot(s.shape),[d,m]=u,[g,y,x,S]=s.shape,k=t.data.get(s.dataId).values,C=new Float32Array(g*d*m*S),N=[a&&d>1?y-1:y,a&&m>1?x-1:x],$=[a&&d>1?d-1:d,a&&m>1?m-1:m],A=N[0]/$[0],D=N[1]/$[1];let L=0;for(let P=0;P<g;P++){const W=P*c[0];for(let B=0;B<d;B++){const G=o?A*(B+.5):A*B;let X=Math.min(y-1,a?Math.round(G):Math.floor(G));o&&(X=Math.max(0,X));const re=W+X*c[1];for(let ue=0;ue<m;ue++){const ne=o?D*(ue+.5):D*ue;let me=Math.min(x-1,a?Math.round(ne):Math.floor(ne));o&&(me=Math.max(0,me));const ge=re+me*c[2];for(let be=0;be<S;be++){const pe=k[ge+be];C[L++]=pe}}}}return t.makeTensorInfo([g,d,m,S],s.dtype,C)}const zue={kernelName:nx,backendName:"cpu",kernelFunc:Mue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pue(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:a}=e,{alignCorners:o}=r;$t([a,s],"resizeNearestNeighborGrad");const u=Ot(s.shape),c=Ot(a.shape),[d,m,g,y]=s.shape,[,x,S]=a.shape,k=new Float32Array(d*m*g*y),C=t.data.get(a.dataId).values,N=[o&&x>1?m-1:m,o&&S>1?g-1:g],$=[o&&x>1?x-1:x,o&&S>1?S-1:S],A=N[0]/$[0],D=N[1]/$[1],L=1/A,P=1/D,W=Math.ceil(L)*2+2,B=Math.ceil(P)*2+2;for(let G=0;G<d;G++){const X=G*u[0];for(let re=0;re<m;re++){const ue=X+re*u[1],ne=Math.floor(re*L),me=Math.floor(ne-W/2);for(let ge=0;ge<g;ge++){const be=ue+ge*u[2],pe=Math.floor(ge*P),te=Math.floor(pe-B/2);for(let ye=0;ye<y;ye++){let ce=0;for(let K=0;K<W;K++){const Z=K+me;if(Z<0||Z>=x)continue;const De=X+Z*c[1],Ae=Z*A,Fe=Math.min(m-1,o?Math.round(Ae):Math.floor(Ae));if(re===Fe)for(let Pe=0;Pe<B;Pe++){const He=Pe+te;if(He<0||He>=S)continue;const Ke=De+He*c[2],Xe=He*D,ct=Math.min(g-1,o?Math.round(Xe):Math.floor(Xe));ge===ct&&(ce+=C[Ke+ye])}}k[be+ye]=ce}}}}return t.makeTensorInfo(s.shape,s.dtype,k)}const Bue={kernelName:zS,backendName:"cpu",kernelFunc:Pue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vue(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dims:a}=r;$t(s,"reverse");const o=s.shape.length,u=wn(a,s.shape);if(o===0)return zu({inputs:{x:s},backend:t});const c=new ms(s.shape,s.dtype),d=t.bufferSync(s);for(let m=0;m<c.size;m++){const g=c.indexToLoc(m),y=g.slice();u.forEach(x=>y[x]=s.shape[x]-1-y[x]),c.set(d.get(...y),...g)}return t.makeTensorInfo(c.shape,c.dtype,c.values)}const Uue={kernelName:sx,backendName:"cpu",kernelFunc:Vue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wue={kernelName:rC,backendName:"cpu",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:s,fillValue:a,center:o}=e,u=t,c=Ls(r.dtype,Re(r.shape)),[d,m,g,y]=r.shape,[x,S]=A2(o,m,g),k=255,C=Math.sin(s),N=Math.cos(s),$=u.data.get(r.dataId).values;for(let D=0;D<d;D++){const L=D*g*m*y;for(let P=0;P<m;P++){const W=P*(g*y);for(let B=0;B<g;B++){const G=B*y;for(let X=0;X<y;X++){const re=[d,P,B,X],ue=re[2],ne=re[1];let me=(ue-x)*N-(ne-S)*C,ge=(ue-x)*C+(ne-S)*N;me=Math.round(me+x),ge=Math.round(ge+S);let be=a;if(typeof a!="number"&&(X===3?be=k:be=a[X]),me>=0&&me<g&&ge>=0&&ge<m){const te=ge*(g*y),ye=me*y,ce=L+te+ye+X;be=$[ce]}const pe=L+W+G+X;c[pe]=be}}}}return{dataId:u.write(c,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hue=sr(hg,n=>{const e=Math.floor(n);return n-e<.5?Math.floor(n):n-e>.5?Math.ceil(n):e%2===0?e:e+1}),jue={kernelName:hg,backendName:"cpu",kernelFunc:Hue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gue(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s,updates:a}=e,{shape:o}=r,{sliceRank:u,numUpdates:c,sliceSize:d,strides:m,outputSize:g}=sd(a,s,o),y=!0,x=t.bufferSync(s),S=t.bufferSync(a),k=ap(x,S,o,g,d,c,u,m,0,y);return t.makeTensorInfo(o,k.dtype,k.values)}const que={kernelName:BS,backendName:"cpu",kernelFunc:Gue};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kue(n,e){let t=0,r=n.length,s=0;for(;t<r;)s=Math.floor((t+r)/2),n[s]<e?t=s+1:r=s;return r}function Xue(n,e){let t=0,r=n.length,s=0;for(;t<r;)s=Math.floor((t+r)/2),n[s]<=e?t=s+1:r=s;return r}function Yue(n,e,t,r,s,a){const o=Gr("int32",t*s);for(let u=0;u<t;++u){const c=n.slice(u*r,(u+1)*r),d=u*s;for(let m=0;m<s;++m)o[d+m]=a==="left"?Kue(c,e[m+d]):Xue(c,e[m+d])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Que(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:s,values:a}=e,{side:o}=r,u=t.data.get(s.dataId).values,c=t.data.get(a.dataId).values,d=Yue(u,c,s.shape[0],s.shape[1],a.shape[1],o);return t.makeTensorInfo(a.shape,"int32",d)}const Zue={kernelName:US,backendName:"cpu",kernelFunc:Que};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jue(n){const{inputs:e,backend:t}=n,{condition:r,t:s,e:a}=e;$t([r,s,a],"select");const o=r.shape.length,u=t.data.get(r.dataId).values,c=t.data.get(s.dataId).values,d=t.data.get(a.dataId).values,m=pi(s.dtype,a.dtype),g=ia(Re(s.shape),m);let y=0;const x=o===0||o>1||s.shape.length===1?1:Re(s.shape.slice(1));for(let S=0;S<u.length;S++)for(let k=0;k<x;k++)u[S]===1?g[y++]=c[S]:g[y++]=d[S];return t.makeTensorInfo(s.shape,m,g)}const ece={kernelName:ax,backendName:"cpu",kernelFunc:Jue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tce=tT,nce=nT,rce=sr(mg,n=>n>=0?nce*n:tce*(Math.exp(n)-1)),sce={kernelName:mg,backendName:"cpu",kernelFunc:rce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ace=sr(vg,n=>n<0?-1:n>0?1:0),ice={kernelName:vg,backendName:"cpu",kernelFunc:ace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oce=sr(gg,n=>Math.sin(n)),lce={kernelName:gg,backendName:"cpu",kernelFunc:oce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uce=sr(yg,n=>Math.sinh(n)),cce={kernelName:yg,backendName:"cpu",kernelFunc:uce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dU=Math.log(11920928955078125e-23)+2,fce=sr(xg,n=>{const e=n>-dU,t=n<dU,r=Math.exp(n);let s;return t?s=r:e?s=n:s=Math.log(1+r),s}),dce={kernelName:xg,backendName:"cpu",kernelFunc:fce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hce(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:a,paddings:o}=r;$t([s],"spaceToBatchND");const u=Re(a),c=[[0,0]];c.push(...o);for(let P=1+a.length;P<s.shape.length;++P)c.push([0,0]);const d=fU.kernelFunc({inputs:{x:s},backend:t,attrs:{paddings:c,constantValue:0}}),m=Xx(d.shape,a,u,!1),g=Yx(m.length,a.length,!1),y=Qx(d.shape,a,u,!1),k=Cr({inputs:{x:d},backend:t,attrs:{shape:m}}),$=Si({inputs:{x:k},backend:t,attrs:{perm:g}}),L=Cr({inputs:{x:$},backend:t,attrs:{shape:y}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(k),t.disposeIntermediateTensorInfo($),L}const pce={kernelName:lx,backendName:"cpu",kernelFunc:hce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mce(n){const{inputs:e,backend:t}=n,{indices:r,values:s,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const u=t.data.get(r.dataId).values,c=t.data.get(s.dataId).values,d=t.data.get(a.dataId).values,m=t.data.get(o.dataId).values[0],[g,y,x,S,k]=FV(u,r.shape,r.dtype,c,s.dtype,d,m);return[t.makeTensorInfo(y,r.dtype,g),t.makeTensorInfo([y[0]],s.dtype,x),t.makeTensorInfo([S.length],"bool",new Uint8Array(S.map(C=>Number(C)))),t.makeTensorInfo([k.length],r.dtype,new Int32Array(k))]}const gce={kernelName:WS,backendName:"cpu",kernelFunc:mce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yce(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:s,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(t.data.get(s.dataId).values),u=t.data.get(r.dataId).values,c=Array.from(t.data.get(a.dataId).values),[d,m,g]=LV(u,r.shape,r.dtype,o,c);return[t.makeTensorInfo(m,r.dtype,d),t.makeTensorInfo([g.length],a.dtype,new Int32Array(g))]}const vce={kernelName:HS,backendName:"cpu",kernelFunc:yce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bce(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=t.data.get(r.dataId).values,u=t.data.get(s.dataId).values,c=t.data.get(a.dataId).values,[d,m]=f_(o,r.shape,r.dtype,u,c,!0);return t.makeTensorInfo(m,r.dtype,d)}const xce={kernelName:jS,backendName:"cpu",kernelFunc:bce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wce(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=t.data.get(r.dataId).values,u=t.data.get(s.dataId).values,c=t.data.get(a.dataId).values,[d,m]=f_(o,r.shape,r.dtype,u,c);return t.makeTensorInfo(m,r.dtype,d)}const Sce={kernelName:GS,backendName:"cpu",kernelFunc:wce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cce(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:s,sparseValues:a,defaultValue:o}=e,{outputShape:u}=r,{sliceRank:c,numUpdates:d,sliceSize:m,strides:g,outputSize:y}=sd(a,s,u),x=!1,S=t.bufferSync(s);let k;switch(a.dtype){case"bool":{const C=t.bufferSync(a),N=!!t.data.get(o.dataId).values[0];k=ap(S,C,u,y,m,d,c,g,N,x);break}case"float32":{const C=t.bufferSync(a),N=t.data.get(o.dataId).values[0];k=ap(S,C,u,y,m,d,c,g,N,x);break}case"int32":{const C=t.bufferSync(a),N=t.data.get(o.dataId).values[0];k=ap(S,C,u,y,m,d,c,g,N,x);break}case"string":{const C=t.bufferSync(a),N=Dc(t.data.get(o.dataId).values[0]);k=ap(S,C,u,y,m,d,c,g,N,x);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return t.makeTensorInfo(u,k.dtype,k.values)}const Tce={kernelName:qS,backendName:"cpu",kernelFunc:Cce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kce(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{numOrSizeSplits:a,axis:o}=r,u=wn(o,s.shape)[0],c=X2(s,a,u),d=new Array(s.shape.length).fill(0),m=s.shape.slice();return c.map(g=>{const y=[...m];y[u]=g;const x=ip({inputs:{x:s},backend:t,attrs:{begin:d,size:y}});return d[u]+=g,x})}const Ece={kernelName:ux,backendName:"cpu",kernelFunc:kce};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nce={kernelName:KS,backendName:"cpu",kernelFunc:({inputs:n,backend:e})=>{const{x:t}=n,r=e;$t(t,"square");const s=r.data.get(t.dataId).values,a=new Float32Array(s.length);for(let u=0;u<s.length;++u){const c=s[u];a[u]=c*c}return{dataId:r.write(a,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ce=sr(Ng,(n,e)=>{const t=e;return isNaN(n)?NaN:n>0?1:t.alpha}),Ice={kernelName:Ng,backendName:"cpu",kernelFunc:$ce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rce(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:a,end:o,strides:u,beginMask:c,endMask:d,ellipsisMask:m,newAxisMask:g,shrinkAxisMask:y}=r;$t(s,"stridedSlice");const{finalShapeSparse:x,finalShape:S,isIdentity:k,sliceDim0:C,isSimpleSlice:N,begin:$,end:A,strides:D}=I2(s.shape,a,o,u,c,d,m,g,y);let L;if(k)L=Cr({inputs:{x:s},backend:t,attrs:{shape:S}});else if(C||N){U(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const P=E2($,A,D),W=ip({inputs:{x:s},backend:t,attrs:{begin:$,size:P}});L=Cr({inputs:{x:W},backend:t,attrs:{shape:S}}),t.disposeIntermediateTensorInfo(W)}else{const P=t.bufferSync(s),W=PV(x,P,D,$);L=t.makeTensorInfo(S,W.dtype,W.values)}return L}const Dce={kernelName:XS,backendName:"cpu",kernelFunc:Rce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ce(n){const{inputs:e,backend:t,attrs:r}=n,{separator:s,nGramWidths:a,leftPad:o,rightPad:u,padWidth:c,preserveShortSequences:d}=r,{data:m,dataSplits:g}=e,y=t.data.get(m.dataId).values,x=t.data.get(g.dataId).values,[S,k]=BV(y,x,s,a,o,u,c,d);return[t.makeTensorInfo([S.length],"string",S),t.makeTensorInfo(g.shape,"int32",k)]}const Ace={kernelName:YS,backendName:"cpu",kernelFunc:_ce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oce(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:s}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const u=t.data.get(a.dataId).values,c=t.data.get(o.dataId).values[0],[d,m,g]=VV(u,c,s),y=m.length;return[t.makeTensorInfo([y,2],"int32",d),t.makeTensorInfo([y],"string",m),t.makeTensorInfo([2],"int32",new Int32Array(g))]}const Fce={kernelName:QS,backendName:"cpu",kernelFunc:Oce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lce(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:s}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=t.data.get(a.dataId).values,u=UV(o,s);return t.makeTensorInfo(a.shape,"int32",u)}const Mce={kernelName:ZS,backendName:"cpu",kernelFunc:Lce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zce=sr(Tg,n=>Math.tan(n)),Pce={kernelName:Tg,backendName:"cpu",kernelFunc:zce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bce=sr(kg,n=>Math.tanh(n)),Vce={kernelName:kg,backendName:"cpu",kernelFunc:Bce};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uce(n){const{inputs:e,backend:t}=n,{tensor:r,indices:s,updates:a}=e,{sliceRank:o,numUpdates:u,sliceSize:c,strides:d,outputSize:m}=sd(a,s,r.shape),g=!1,y=t.bufferSync(s),x=t.bufferSync(a),S=t.bufferSync(r),k=ap(y,x,r.shape,m,c,u,o,d,S,g);return t.makeTensorInfo(r.shape,k.dtype,k.values)}const Wce={kernelName:VS,backendName:"cpu",kernelFunc:Uce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hce(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reps:a}=r;$t(s,"tile");const o=HV(t.bufferSync(s),a);return t.makeTensorInfo(o.shape,o.dtype,o.values)}const jce={kernelName:Eg,backendName:"cpu",kernelFunc:Hce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gce(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{k:a,sorted:o}=r;$t(s,"topk");const u=t.data.get(s.dataId).values,[c,d]=GV(u,s.shape,s.dtype,a,o);return[t.makeTensorInfo(c.shape,c.dtype,c.values),t.makeTensorInfo(d.shape,d.dtype,d.values)]}const qce={kernelName:JS,backendName:"cpu",kernelFunc:Gce};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kce(n){const{inputs:e,attrs:t,backend:r}=n,{image:s,transforms:a}=e,{interpolation:o,fillMode:u,fillValue:c,outputShape:d}=t,[m,g,y,x]=s.shape,[S,k]=d??[g,y],C=[m,S,k,x],N=Ot(s.shape),$=N[0],A=N[1],D=N[2],L=Ot(C),P=L[0],W=L[1],B=L[2],G=Ls(s.dtype,Re(C));G.fill(c);const X=r.data.get(s.dataId).values,re=r.data.get(a.dataId).values;for(let ne=0;ne<m;++ne){const me=a.shape[0]===1?re:re.subarray(ne*8,ne*8+8);for(let ge=0;ge<S;++ge)for(let be=0;be<k;++be)for(let pe=0;pe<x;++pe){let te;const ye=me[6]*be+me[7]*ge+1;if(ye===0)continue;const ce=(me[0]*be+me[1]*ge+me[2])/ye,K=(me[3]*be+me[4]*ge+me[5])/ye,Z=hU(ce,y,u),De=hU(K,g,u);switch(o){case"nearest":te=efe(X,g,y,$,A,D,ne,De,Z,pe,c);break;case"bilinear":te=tfe(X,g,y,$,A,D,ne,De,Z,pe,c);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const Ae=ne*P+ge*W+be*B+pe;G[Ae]=te}return r.makeTensorInfo(C,s.dtype,G)}return{dataId:r.write(G,C,s.dtype),shape:s.shape,dtype:s.dtype}}const Xce={kernelName:eC,backendName:"cpu",kernelFunc:Kce};function hU(n,e,t){switch(t){case"reflect":return Yce(n,e);case"wrap":return Qce(n,e);case"nearest":return Jce(n,e);case"constant":default:return Zce(n)}}function Yce(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=2*e;t<r&&(t=r*Math.trunc(-t/r)+t),t=t<-e?t+r:-t-1}else if(t>e-1)if(e<=1)t=0;else{const r=2*e;t-=r*Math.trunc(t/r),t>=e&&(t=r-t-1)}return Uf(0,t,e-1)}function Qce(n,e){let t=n;if(t<0)if(e<=1)t=0;else{const r=e-1;t+=e*(Math.trunc(-t/r)+1)}else if(t>e-1)if(e<=1)t=0;else{const r=e-1;t-=e*Math.trunc(t/r)}return Uf(0,t,e-1)}function Zce(n,e){return n}function Jce(n,e){return Uf(0,n,e-1)}function b0(n,e,t,r,s,a,o,u,c,d,m){const g=o*r+u*s+c*a+d;return 0<=u&&u<e&&0<=c&&c<t?n[g]:m}function efe(n,e,t,r,s,a,o,u,c,d,m){const g=Math.round(u),y=Math.round(c);return b0(n,e,t,r,s,a,o,g,y,d,m)}function tfe(n,e,t,r,s,a,o,u,c,d,m){const g=Math.floor(u),y=Math.floor(c),x=g+1,S=y+1,k=(S-c)*b0(n,e,t,r,s,a,o,g,y,d,m)+(c-y)*b0(n,e,t,r,s,a,o,g,S,d,m),C=(S-c)*b0(n,e,t,r,s,a,o,x,y,d,m)+(c-y)*b0(n,e,t,r,s,a,o,x,S,d,m);return(x-u)*k+(u-g)*C}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nfe(n){const{inputs:e,attrs:t,backend:r}=n,{axis:s}=t,{x:a}=e;$t(a,"unique");const o=r.data.get(a.dataId).values,{outputValues:u,outputShape:c,indices:d}=qV(o,s,a.shape,a.dtype);return[r.makeTensorInfo(c,a.dtype,u),r.makeTensorInfo([d.length],"int32",d)]}const rfe={kernelName:tC,backendName:"cpu",kernelFunc:nfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sfe(n){const{inputs:e,backend:t,attrs:r}=n,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const o=s.shape.length,u=s.shape[a],c=new Array(o-1);let d=0;for(let x=0;x<o;x++)x!==a&&(c[d++]=s.shape[x]);const m=new Array(o).fill(0),g=s.shape.slice();g[a]=1;const y=new Array(u);for(let x=0;x<y.length;x++){m[a]=x;const S=ip({inputs:{x:s},backend:t,attrs:{begin:m,size:g}});y[x]=Cr({inputs:{x:S},backend:t,attrs:{shape:c}}),t.disposeIntermediateTensorInfo(S)}return y}const afe={kernelName:dx,backendName:"cpu",kernelFunc:sfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ife(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,segmentIds:a}=e,{numSegments:o}=r;$t(s,"unsortedSegmentSum");const u=s.shape.length,c=a.shape.length,d=[],m=[],g=u-c;let y=a;for(let S=0;S<g;++S){const k=XT({inputs:{input:y},backend:t,attrs:{dim:S+1}});y=k,m.push(k)}for(let S=0;S<o;++S){const k=Rc(S,"int32"),C=t.makeTensorInfo([],"int32",k),N=sV({inputs:{a:C,b:y},backend:t}),$=pd({inputs:{x:N},backend:t,attrs:{dtype:"float32"}}),A=GT({inputs:{a:$,b:s},backend:t}),D=v0({inputs:{x:A},backend:t,attrs:{axis:0,keepDims:!1}});d.push(D),m.push(C),m.push(N),m.push($),m.push(A),m.push(D)}const x=cU({inputs:d,backend:t,attrs:{axis:0}});return m.forEach(S=>t.disposeIntermediateTensorInfo(S)),x}const ofe={kernelName:hx,backendName:"cpu",kernelFunc:ife};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lfe=[sie,Pse,iie,lie,jse,cie,die,pie,gie,vie,xie,Sie,Tie,Nie,Iie,_ie,Oie,Lie,zie,nie,Bie,Uie,Hie,qse,Gie,Wse,Xse,Kie,Bse,Xie,Qie,Zie,eoe,noe,soe,ioe,loe,coe,doe,poe,goe,voe,xoe,Soe,Coe,koe,Noe,Ioe,Roe,Doe,_oe,Ooe,Moe,Xae,Poe,Yse,qoe,Qse,Koe,Jse,ele,tle,rle,tae,rae,ale,ole,ule,fle,aae,oae,Vse,hle,Yie,mle,yle,ble,Yae,uae,fae,wle,hae,Cle,Ele,$le,Dle,Ale,Fle,Lle,mae,zle,Ble,Ule,Hle,Gle,Kle,Yle,yae,Zle,tue,sue,bae,wae,oue,cue,hue,Cae,mue,yue,vue,fU,Sue,Zae,Eae,Tue,Eue,$ue,Rue,Use,m_,_ue,Jae,eie,tie,Oue,Lue,zue,Bue,Uue,Wue,jue,Oae,que,Zue,ece,sce,Lae,ice,lce,cce,Mae,nue,dce,pce,gce,vce,xce,Sce,Tce,Ece,Bae,Nce,Uae,Hae,Ice,Dce,Ace,Fce,Mce,Kae,Foe,Pce,Vce,Wce,jce,qce,Xce,Tae,rfe,afe,ofe,gue];for(const n of lfe)aC(n);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const op={},QT={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function pU(n,e){op[n]=e}function Kl(n,e){if(!(n in op)||e!=null){const r=cfe(n,e);if(r!==null)op[n]=r;else return console.log("Could not get context for WebGL version",n),null}const t=op[n];return t==null||t.isContextLost()?(delete op[n],Kl(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),op[n])}function ufe(n){if(!xe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&n===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function cfe(n,e){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=e??ufe(n);return t.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete op[n]},!1),xe().getBool("SOFTWARE_WEBGL_ENABLED")&&(QT.failIfMajorPerformanceCaveat=!1),n===1?t.getContext("webgl",QT)||t.getContext("experimental-webgl",QT):t.getContext("webgl2",QT)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var x0;(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(x0||(x0={}));var To;(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(To||(To={}));var pa;(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(pa||(pa={}));function w0(n,e){return[e,n]}function ffe(n,e){return n*e}function ZT(n){const e=Re(n),t=Math.ceil(e/4);return G1(t)}function cy(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function dfe(n,e){const[t,r]=cy(n,e);return t*r*4}function v_(n,e){const t=n;let r,s,a,o,u,c,d,m,g,y;return xe().getNumber("WEBGL_VERSION")===2?(r=t.R32F,s=t.R16F,a=t.RGBA16F,o=t.RGBA32F,u=t.RED,d=4,m=1,g=t.HALF_FLOAT,y=t.FLOAT,c=t.RGBA8):(r=n.RGBA,s=n.RGBA,a=n.RGBA,o=t.RGBA,u=n.RGBA,d=4,m=4,g=e!=null?e.HALF_FLOAT_OES:null,y=n.FLOAT,c=n.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:u,downloadTextureFormat:c,downloadUnpackNumChannels:d,defaultNumChannels:m,textureTypeHalfFloat:g,textureTypeFloat:y}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(n,e){const t=e();return xe().getBool("DEBUG")&&hfe(n),t}function hfe(n){const e=n.getError();if(e!==n.NO_ERROR)throw new Error("WebGL Error: "+gU(n,e))}const pfe=596e-10,mfe=65504;function mU(n){return!!(xe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||pfe<Math.abs(n)&&Math.abs(n)<mfe)}function gU(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function S0(n,e){return Kc(n,()=>n.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function yU(n,e){const t=Kc(n,()=>n.createShader(n.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(at(n,()=>n.shaderSource(t,e)),at(n,()=>n.compileShader(t)),n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function vU(n,e){const t=Kc(n,()=>n.createShader(n.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(at(n,()=>n.shaderSource(t,e)),at(n,()=>n.compileShader(t)),xe().get("ENGINE_COMPILE_ONLY"))return t;if(n.getShaderParameter(t,n.COMPILE_STATUS)===!1)throw b_(e,n.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}const gfe=/ERROR: [0-9]+:([0-9]+):/g;function b_(n,e){const t=gfe.exec(e);if(t==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(n);return}const r=+t[1],s=n.split(`
`),a=s.length.toString().length+2,o=s.map((g,y)=>xh((y+1).toString(),a)+g);let u=0;for(let g=0;g<o.length;g++)u=Math.max(o[g].length,u);const c=o.slice(0,r-1),d=o.slice(r-1,r),m=o.slice(r);console.log(c.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${xh(d[0],u)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}function bU(n){return Kc(n,()=>n.createProgram(),"Unable to create WebGLProgram.")}function xU(n,e){if(at(n,()=>n.linkProgram(e)),!xe().get("ENGINE_COMPILE_ONLY")&&n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function JT(n,e){if(at(n,()=>n.validateProgram(e)),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function wU(n,e){const t=Kc(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return at(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),at(n,()=>n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function SU(n,e){const t=Kc(n,()=>n.createBuffer(),"Unable to create WebGLBuffer");return at(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t)),at(n,()=>n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)),t}function yfe(){return xe().getNumber("WEBGL_VERSION")===2?1:4}function CU(n){return Kc(n,()=>n.createTexture(),"Unable to create WebGLTexture.")}function TU(n,e){const t=xe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){const r=`[${n}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t){const r=`[${n}x${e}]`,s=`[${t}x${t}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function kU(n){return Kc(n,()=>n.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function x_(n,e,t,r,s,a,o){const u=n.getAttribLocation(e,t);return u===-1?!1:(at(n,()=>n.bindBuffer(n.ARRAY_BUFFER,r)),at(n,()=>n.vertexAttribPointer(u,s,n.FLOAT,!1,a,o)),at(n,()=>n.enableVertexAttribArray(u)),!0)}function EU(n,e,t){DU(n,t),at(n,()=>n.activeTexture(n.TEXTURE0+t)),at(n,()=>n.bindTexture(n.TEXTURE_2D,e))}function vfe(n,e){DU(n,e),at(n,()=>n.activeTexture(n.TEXTURE0+e)),at(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function NU(n,e,t){return Kc(n,()=>n.getUniformLocation(e,t),'uniform "'+t+'" not present in program.')}function $U(n,e,t){return n.getUniformLocation(e,t)}function IU(n,e,t,r){at(n,()=>EU(n,e,r)),at(n,()=>n.uniform1i(t,r))}function bfe(n){at(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),at(n,()=>n.viewport(0,0,n.canvas.width,n.canvas.height)),at(n,()=>n.scissor(0,0,n.canvas.width,n.canvas.height))}function ek(n,e,t){at(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,t)),at(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0))}function w_(n,e){at(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,e)),at(n,()=>n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0))}function C0(n){const e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+RU(n,e))}function RU(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function Kc(n,e,t){const r=at(n,()=>e());if(r==null)throw new Error(t);return r}function DU(n,e){const t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t){const s=`[gl.TEXTURE0, gl.TEXTURE${t}]`;throw new Error(`textureUnit must be in ${s}.`)}}function lp(n,e=2){return Re(n.slice(0,n.length-e))}function up(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function T0(n){let e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[lp(n),...up(n)]),e}function _U(n,e=!1){let t=xe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=xe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&xe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=t/2),e&&(t=t*2,r=r*2,n=n.map((u,c)=>c>=n.length-2?j1(n[c]):n[c]),n.length===1&&(n=[2,n[0]])),n.length!==2&&(n=$c(n).newShape);let s=Re(n),a=null;n.length<=1&&s<=t?a=[1,s]:n.length===2&&n[0]<=t&&n[1]<=t?a=n:n.length===3&&n[0]*n[1]<=t&&n[2]<=t?a=[n[0]*n[1],n[2]]:n.length===3&&n[0]<=t&&n[1]*n[2]<=t?a=[n[0],n[1]*n[2]]:n.length===4&&n[0]*n[1]*n[2]<=t&&n[3]<=t?a=[n[0]*n[1]*n[2],n[3]]:n.length===4&&n[0]<=t&&n[1]*n[2]*n[3]<=t&&(a=[n[0],n[1]*n[2]*n[3]]);const o=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||o)if(e){const u=lp(n);let c=2,d=2;n.length&&([c,d]=up(n)),s=u*(c/2)*(d/2),a=G1(s).map(m=>m*2)}else a=G1(s);return a}function tk(n){return n%2===0}function k0(n,e){if(n=n.slice(-2),e=e.slice(-2),Nn(n,e)||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){const t=n[n.length-1],r=e[e.length-1];if(t===r||tk(t)&&tk(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&tk(n[0])&&tk(e[0])}let nk,rk;function AU(n){if(nk==null){const e=Kl(n);nk=e.getParameter(e.MAX_TEXTURE_SIZE)}return nk}function xfe(){nk=null}function wfe(){rk=null}function OU(n){if(rk==null){const e=Kl(n);rk=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,rk)}function FU(n){if(n===0)return 0;let e;const t=Kl(n);return ko(t,"EXT_disjoint_timer_query_webgl2")&&n===2?e=2:ko(t,"EXT_disjoint_timer_query")?e=1:e=0,e}function ko(n,e){return n.getExtension(e)!=null}function S_(n){try{if(Kl(n)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function LU(n){if(n===0)return!1;const e=Kl(n);if(n===1){if(!ko(e,"OES_texture_float"))return!1}else if(!ko(e,"EXT_color_buffer_float"))return!1;return C_(e)}function MU(n){if(n===0)return!1;const e=Kl(n);if(n===1){if(!ko(e,"OES_texture_float")||!ko(e,"WEBGL_color_buffer_float"))return!1}else{if(ko(e,"EXT_color_buffer_float"))return C_(e);const r="EXT_color_buffer_half_float";if(ko(e,r)){const s=e.getExtension(r);return Sfe(e,s)}return!1}return C_(e)}function C_(n){const e=v_(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const o=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(a),o}function Sfe(n,e){const t=v_(n,e),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatHalfFloat,1,1,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);const o=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);const u=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(r),n.deleteFramebuffer(o),u}function zU(n){return n!==2?!1:Kl(n).fenceSync!=null}function fy(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>{t!=null&&U(t.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}const Cfe=Object.freeze(Object.defineProperty({__proto__:null,assertNotComplex:fy,bindCanvasToFramebuffer:bfe,bindColorTextureToFramebuffer:ek,bindTextureToProgramUniformSampler:IU,bindTextureUnit:EU,bindVertexBufferToProgramAttribute:x_,callAndCheck:at,canBeRepresented:mU,createFragmentShader:vU,createFramebuffer:kU,createProgram:bU,createStaticIndexBuffer:SU,createStaticVertexBuffer:wU,createTexture:CU,createVertexShader:yU,getBatchDim:lp,getExtensionOrThrow:S0,getFramebufferErrorMessage:RU,getMaxTexturesInShader:OU,getNumChannels:yfe,getProgramUniformLocation:$U,getProgramUniformLocationOrThrow:NU,getRowsCols:up,getShapeAs3D:T0,getTextureShapeFromLogicalShape:_U,getWebGLDisjointQueryTimerVersion:FU,getWebGLErrorMessage:gU,getWebGLMaxTextureSize:AU,hasExtension:ko,isCapableOfRenderingToFloatTexture:LU,isDownloadFloatTextureEnabled:MU,isReshapeFree:k0,isWebGLFenceEnabled:zU,isWebGLVersionEnabled:S_,linkProgram:xU,logShaderSourceAndInfoLog:b_,resetMaxTextureSize:xfe,resetMaxTexturesInShader:wfe,unbindColorTextureFromFramebuffer:w_,unbindTextureUnit:vfe,validateFramebuffer:C0,validateProgram:JT,validateTextureSize:TU},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rt=xe();Rt.registerFlag("HAS_WEBGL",()=>Rt.getNumber("WEBGL_VERSION")>0),Rt.registerFlag("WEBGL_VERSION",()=>S_(2)?2:S_(1)?1:0),Rt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),Rt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Rt.get("WEBGL_VERSION")===2),Rt.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Rt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Rt.registerFlag("WEBGL_PACK",()=>Rt.getBool("HAS_WEBGL")),Rt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_PACK_CLIP",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_PACK_REDUCE",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_CONV_IM2COL",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Rt.getBool("WEBGL_PACK")),Rt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>AU(Rt.getNumber("WEBGL_VERSION"))),Rt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>OU(Rt.getNumber("WEBGL_VERSION"))),Rt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const n=Rt.getNumber("WEBGL_VERSION");return n===0?0:FU(n)}),Rt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Rt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!M$()),Rt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>LU(Rt.getNumber("WEBGL_VERSION"))),Rt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Rt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Rt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Rt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>MU(Rt.getNumber("WEBGL_VERSION"))),Rt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>zU(Rt.getNumber("WEBGL_VERSION"))),Rt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Rt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),Rt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${n}.`)}),Rt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>M$()?1:-1,n=>{if(typeof n!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${n}.`);if(n<0&&n!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${n}.`)}),Rt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),Rt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),Rt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),Rt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),Rt.registerFlag("WEBGL_EXP_CONV",()=>!1),Rt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Rt.getBool("IS_TEST")),Rt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),Rt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),Rt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),Rt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qa(){let n,e,t,r,s,a,o,u,c,d;return xe().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",s="texture",a="outputColor",o="out vec4 outputColor;",u=xe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",c="",d=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",s="texture2D",a="gl_FragColor",o="",u=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,d=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:s,output:a,defineOutput:o,defineSpecialNaN:u,defineSpecialInf:c,defineRound:d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cp(n,e,t="index"){const r=Ot(e);return r.map((s,a)=>{const o=`int ${n[a]} = ${t} / ${s}`,u=a===r.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * ${s}`:`index -= ${n[a]} * ${s}`;return`${o}; ${u};`}).join("")}function sk(n,e,t="index"){const r=Ot(e);return r.map((s,a)=>{const o=`int ${n[a]} = ${t} / outShapeStrides[${a}]`,u=a===r.length-1?`int ${n[a+1]} = ${t} - ${n[a]} * outShapeStrides[${a}]`:`index -= ${n[a]} * outShapeStrides[${a}]`;return`${o}; ${u};`}).join("")}function Tfe(n,e){const t=n.length,r=n.map(a=>`${e}[${a}]`),s=new Array(t-1);s[t-2]=r[t-1];for(let a=t-3;a>=0;--a)s[a]=`(${s[a+1]} * ${r[a+1]})`;return s}function kfe(n,e,t="index"){const r=n.map((a,o)=>o),s=Tfe(r,e);return s.map((a,o)=>{const u=`int ${n[o]} = ${t} / ${s[o]}`,c=o===s.length-1?`int ${n[o+1]} = ${t} - ${n[o]} * ${s[o]}`:`index -= ${n[o]} * ${s[o]}`;return`${u}; ${c};`}).join("")}function T_(n){const e=Ot(n).map(t=>t.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function k_(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const PU=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:BU}=N3;function Efe(n,e,t){const r=[];if(n.forEach(x=>{const S=Re(x.shapeInfo.logicalShape);if(x.shapeInfo.isUniform?r.push(`uniform float ${x.name}${S>1?`[${S}]`:""};`):(r.push(`uniform sampler2D ${x.name};`),r.push(`uniform int offset${x.name};`)),t.enableShapeUniforms){const{uniformShape:k}=E_(t.packedInputs,x.shapeInfo.logicalShape,x.shapeInfo.texShape);switch(k.length){case 1:r.push(`uniform int ${x.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${x.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${x.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${x.name}Shape;`);break}r.push(`uniform ivec2 ${x.name}TexShape;`)}}),t.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}t.customUniforms&&t.customUniforms.forEach(x=>{r.push(`uniform ${x.type} ${x.name}${x.arrayIndex?`[${x.arrayIndex}]`:""};`)});const s=r.join(`
`),a=n.map(x=>Nfe(x,e,t.packedInputs,t.enableShapeUniforms)).join(`
`),o=e.texShape,u=qa(),c=Rfe(u);let d,m,g=Afe(u);return e.isPacked?(d=$fe(e.logicalShape,o,t.enableShapeUniforms),m=_fe(u)):(d=Ife(e.logicalShape,o,t.enableShapeUniforms),m=Dfe(u)),t.packedInputs&&(g+=Mfe),[g,c,m,s,d,a,t.userCode].join(`
`)}function dy(n,e=!1){const t=n.shapeInfo.logicalShape;switch(t.length){case 0:return Xfe(n,e);case 1:return Qfe(n,e);case 2:return Jfe(n,e);case 3:return tde(n,e);case 4:return rde(n,e);case 5:return sde(n);case 6:return ade(n);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function VU(n,e){switch(n.shapeInfo.logicalShape.length){case 0:return Kfe(n);case 1:return Yfe(n,e);case 2:return Zfe(n,e);case 3:return ede(n,e);default:return nde(n,e)}}function Nfe(n,e,t=!1,r){let s="";t?s+=VU(n,r):s+=dy(n,r);const a=n.shapeInfo.logicalShape,o=e.logicalShape;return a.length<=o.length&&(t?s+=ide(n,e):s+=ode(n,e)),s}function $fe(n,e,t){switch(n.length){case 0:return UU();case 1:return zfe(n,e,t);case 2:return Gfe(n,e,t);case 3:return Bfe(n,e,t);default:return Ufe(n,e,t)}}function Ife(n,e,t){switch(n.length){case 0:return UU();case 1:return Pfe(n,e,t);case 2:return qfe(n,e,t);case 3:return Vfe(n,e,t);case 4:return Wfe(n,e,t);case 5:return Hfe(n,e);case 6:return jfe(n,e);default:throw new Error(`${n.length}-D output sampling is not yet supported`)}}function Rfe(n){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${n.texture2D}(textureSampler, uv).r;
    }
  `}function Dfe(n){return`
    void setOutput(float val) {
      ${n.output} = vec4(val, 0, 0, 0);
    }
  `}function _fe(n){return`
    void setOutput(vec4 val) {
      ${n.output} = val;
    }
  `}function Afe(n){return`${n.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${n.varyingFs} vec2 resultUV;
    ${n.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${n.defineSpecialNaN}
    ${n.defineSpecialInf}
    ${n.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${Ofe}
    ${Ffe}
    ${Lfe}
  `}const Ofe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ffe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Lfe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Mfe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function UU(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function zfe(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?t?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function Pfe(n,e,t){return e[0]===1?t?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?t?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:t?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function Bfe(n,e,t){if(t)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(n[2]/2),a=s*Math.ceil(n[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function Vfe(n,e,t){if(t)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${sk(["r","c","d"],n)}
    return ivec3(r, c, d);
  }
`;const r=cp(["r","c","d"],n);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function Ufe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(n[n.length-1]/2),a=s*Math.ceil(n[n.length-2]/2);let o=a,u="",c="b, r, c";for(let d=2;d<n.length-1;d++)o*=n[n.length-d-1],u=`
      int b${d} = index / ${o};
      index -= b${d} * ${o};
    `+u,c=`b${d}, `+c;return`
    ivec${n.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${u}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${n.length}(${c});
    }
  `}function Wfe(n,e,t){if(t)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${sk(["r","c","d","d2"],n)}
      return ivec4(r, c, d, d2);
    }
  `;const r=cp(["r","c","d","d2"],n);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Hfe(n,e){const t=cp(["r","c","d","d2","d3"],n);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function jfe(n,e){const t=cp(["r","c","d","d2","d3","d4"],n);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${t}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Gfe(n,e,t){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Nn(n,e))return t?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(n[1]/2);return t?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function qfe(n,e,t){return Nn(n,e)?t?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:n[1]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:n[0]===1?t?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:t?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${n[1]};
      int c = index - r * ${n[1]};
      return ivec2(r, c);
    }
  `}function fp(n){return`offset${n}`}function Kfe(n){const e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=qa();return`
    vec4 ${t}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function Xfe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;const[s,a]=n.shapeInfo.texShape;if(s===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${t}, halfCR);
      }
    `;const o=fp(t);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${o});
      return sampleTexture(${t}, uv);
    }
  `;const[u,c]=n.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${u}, ${c}, ${o});
      return sampleTexture(${t}, uv);
    }
  `}function Yfe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=n.shapeInfo.texShape,a=qa();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${t}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${t}, uv);
    }
  `}function Qfe(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(n.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${hy(n)}
      }
    `;const s=n.shapeInfo.texShape,a=s[0],o=s[1];if(o===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${t}, halfCR);
      }
    `;const u=fp(t);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${u}) + 0.5) / float(${t}TexShape[0]));
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${u}) + 0.5) / ${a}.0);
        return sampleTexture(${t}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${u}) + 0.5) / float(${t}TexShape[1]), 0.5);
        return sampleTexture(${t}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${u}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${t}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${u});
      return sampleTexture(${t}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${o}, index + ${u});
      return sampleTexture(${t}, uv);
    }
  `}function Zfe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape,o=a[0],u=a[1],c=qa();if(a!=null&&Nn(t,a))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${c.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${u}.0, ${o}.0);

        return ${c.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${c.texture2D}(${r}, uv);
    }
  `;const d=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],m=Math.ceil(t[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${m}, ${d[0]}, ${d[1]}, row, col);
      return ${c.texture2D}(${r}, uv);
    }
  `}function Jfe(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape;if(a!=null&&Nn(t,a)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const y=a[0],x=a[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${x}.0, ${y}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:u}=$c(t),c=o;if(c.length<t.length){const y=py(n,c),x=["row","col"];return`
      ${dy(y,e)}
      float ${s}(int row, int col) {
        return ${s}(${my(x,u)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));
        ${hy(n)}
      }
    `;const d=a[0],m=a[1],g=fp(r);return m===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${g}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${g}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `:d===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${g}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${g}), vec3(${t[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${m}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${g};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${t[1]} + col + ${g};
    vec2 uv = uvFromFlat(${d}, ${m}, index);
    return sampleTexture(${r}, uv);
  }
`}function ede(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(t[0]===1){const y=t.slice(1),x=[1,2],S=py(n,y),k=["b","row","col"];return`
        ${VU(S,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${my(k,x)});
        }
      `}const u=qa();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `;const c=o[0],d=o[1],m=Math.ceil(t[2]/2),g=m*Math.ceil(t[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${c}, ${d}, ${g}, ${m}, b, row, col);
      return ${u.texture2D}(${r}, uv);
    }
  `}function tde(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[1]*t[2],o=t[2],{newShape:u,keptDims:c}=$c(t),d=u;if(d.length<t.length){const k=py(n,d),C=["row","col","depth"];return`
        ${dy(k,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${my(C,c)});
        }
      `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${o}, 1)));
        ${hy(n)}
      }
    `;const m=n.shapeInfo.texShape,g=m[0],y=m[1],x=n.shapeInfo.flatOffset;if(y===a&&x==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${y}.0, ${g}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(y===o&&x==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${y}.0, ${g}.0);
      return sampleTexture(${r}, uv);
    }
  `;const S=fp(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${S};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${o} + depth + ${S};
        vec2 uv = uvFromFlat(${g}, ${y}, index);
        return sampleTexture(${r}, uv);
      }
  `}function nde(n,e){const t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=qa();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${t}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${t}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${t}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${t}, uv);
    }
  `;const a=n.shapeInfo.logicalShape,o=a.length,u=n.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],d=c[0],m=c[1],g=Math.ceil(a[o-1]/2);let y=g*Math.ceil(a[o-2]/2),x="int b, int row, int col",S=`b * ${y} + (row / 2) * ${g} + (col / 2)`;for(let k=2;k<o-1;k++)x=`int b${k}, `+x,y*=a[o-k-1],S=`b${k} * ${y} + `+S;return`
    vec4 ${r}(${x}) {
      int index = ${S};
      int texR = index / ${m};
      int texC = index - texR * ${m};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${m}, ${d});
      return ${s.texture2D}(${t}, uv);
    }
  `}function rde(n,e){const t=n.shapeInfo.logicalShape,r=n.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[3],o=t[2]*a,u=t[1]*o,{newShape:c,keptDims:d}=$c(t);if(c.length<t.length){const $=py(n,c),A=["row","col","depth","depth2"];return`
      ${dy($,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${my(A,d)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${u}, ${o}, ${a}, 1)));
        ${hy(n)}
      }
    `;const m=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,y=g[0],x=g[1],S=`int stride2 = ${r}Shape[3];`,k=`int stride1 = ${r}Shape[2] * stride2;`,C=`int stride0 = ${r}Shape[1] * stride1;`;if(x===u&&m==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${S}
        ${k}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}.0, ${y}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(x===a&&m==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${t[1]*t[2]}, ${t[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${x}.0, ${y}.0);
        return sampleTexture(${r}, uv);
      }
    `;const N=fp(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${S}
      ${k}
      ${C}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${N});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${o} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${y}, ${x}, index + ${N});
      return sampleTexture(${r}, uv);
    }
  `}function sde(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),s=e[4],a=e[3]*s,o=e[2]*a,u=e[1]*o,{newShape:c,keptDims:d}=$c(e);if(c.length<e.length){const k=py(n,c),C=["row","col","depth","depth2","depth3"];return`
      ${dy(k)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${my(C,d)});
      }
    `}if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${o}, ${a}, ${s})) +
          depth3;
        ${hy(n)}
      }
    `;const m=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,y=g[0],x=g[1];if(x===u&&m==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${x}.0, ${y}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(x===s&&m==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${x}.0, ${y}.0);
        return sampleTexture(${t}, uv);
      }
    `;const S=fp(t);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${o} + depth * ${a} +
          depth2 * ${s} + depth3 + ${S};
      vec2 uv = uvFromFlat(${y}, ${x}, index);
      return sampleTexture(${t}, uv);
    }
  `}function ade(n){const e=n.shapeInfo.logicalShape,t=n.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:s,keptDims:a}=$c(e);if(s.length<e.length){const C=py(n,s),N=["row","col","depth","depth2","depth3","depth4"];return`
      ${dy(C)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${my(N,a)});
      }
    `}const o=e[5],u=e[4]*o,c=e[3]*u,d=e[2]*c,m=e[1]*d;if(n.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${m}, ${d}, ${c}, ${u})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${hy(n)}
      }
    `;const g=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,x=y[0],S=y[1];if(S===m&&g==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${d}, ${c}, ${u}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${S}.0, ${x}.0);
        return sampleTexture(${t}, uv);
      }
    `;if(S===o&&g==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${S}.0, ${x}.0);
        return sampleTexture(${t}, uv);
      }
    `;const k=fp(t);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${m} + col * ${d} + depth * ${c} +
          depth2 * ${u} + depth3 * ${o} + depth4 + ${k};
      vec2 uv = uvFromFlat(${x}, ${S}, index);
      return sampleTexture(${t}, uv);
    }
  `}function hy(n){const e=n.name,t=Re(n.shapeInfo.logicalShape);return t<2?`return ${e};`:`
    for (int i = 0; i < ${t}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function ide(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),s="get"+r+"AtOutCoords",a=n.shapeInfo.logicalShape.length,o=e.logicalShape.length,u=BU(n.shapeInfo.logicalShape,e.logicalShape),c=pr(o),d=o-a;let m;const g=["x","y","z","w","u","v"];a===0?m="":o<2&&u.length>=1?m="coords = 0;":m=u.map($=>`coords.${g[$+d]} = 0;`).join(`
`);let y="";o<2&&a>0?y="coords":y=n.shapeInfo.logicalShape.map(($,A)=>`coords.${g[A+d]}`).join(", ");let x="return outputValue;";const k=Re(n.shapeInfo.logicalShape)===1,N=Re(e.logicalShape)===1;if(a===1&&!k&&!N)x=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(k&&!N)o===1?x=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:x=`
        return vec4(outputValue.x);
      `;else if(u.length){const $=a-2,A=a-1;u.indexOf($)>-1&&u.indexOf(A)>-1?x="return vec4(outputValue.x);":u.indexOf($)>-1?x="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(A)>-1&&(x="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${c} coords = getOutputCoords();
      ${m}
      vec4 outputValue = get${r}(${y});
      ${x}
    }
  `}function ode(n,e){const t=n.name,r=t.charAt(0).toUpperCase()+t.slice(1),s="get"+r+"AtOutCoords",a=e.texShape,o=n.shapeInfo.texShape,u=n.shapeInfo.logicalShape.length,c=e.logicalShape.length;if(!n.shapeInfo.isUniform&&u===c&&n.shapeInfo.flatOffset==null&&Nn(o,a))return`
      float ${s}() {
        return sampleTexture(${t}, resultUV);
      }
    `;const d=pr(c),m=BU(n.shapeInfo.logicalShape,e.logicalShape),g=c-u;let y;const x=["x","y","z","w","u","v"];u===0?y="":c<2&&m.length>=1?y="coords = 0;":y=m.map(k=>`coords.${x[k+g]} = 0;`).join(`
`);let S="";return c<2&&u>0?S="coords":S=n.shapeInfo.logicalShape.map((k,C)=>`coords.${x[C+g]}`).join(", "),`
    float ${s}() {
      ${d} coords = getOutputCoords();
      ${y}
      return get${r}(${S});
    }
  `}function pr(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error(`GPU for rank ${n} is not yet supported`)}function E_(n,e,t){const{newShape:r,keptDims:s}=$c(e),a=e.length,o=n&&a===3&&e[0]===1,u=o?e.slice(1):r,c=!n&&a>1&&!Nn(e,t)&&r.length<a||o;return{useSqueezeShape:c,uniformShape:c?u:e,keptDims:s}}function py(n,e){const t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function my(n,e){return e.map(t=>n[t]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lde(n,e,t,r){const s=t.map((m,g)=>{const y={logicalShape:m.shape,texShape:m.isUniform?null:m.texData.texShape,isUniform:m.isUniform,isPacked:m.isUniform?!1:m.texData.isPacked,flatOffset:null};return m.texData!=null&&m.texData.slice!=null&&m.texData.slice.flatOffset>0&&(y.flatOffset=m.texData.slice.flatOffset),{name:e.variableNames[g],shapeInfo:y}}),a=s.map(m=>m.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Efe(s,o,e),c=vU(n.gl,u),d=n.createProgram(c);return xe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:c,source:u,webGLProgram:d,inShapeInfos:a,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(n.buildVao(d),Object.assign({program:e,fragmentShader:c,source:u,webGLProgram:d,inShapeInfos:a,outShapeInfo:o},WU(n,e,d)))}function WU(n,e,t){const r=[],s=[];let a,o,u,c=null,d=null;d=n.getUniformLocation(t,"NAN",!1),xe().getNumber("WEBGL_VERSION")===1&&(c=n.getUniformLocation(t,"INFINITY",!1));const m=!1;for(const g of e.variableNames){const y={name:g,uniform:n.getUniformLocation(t,g,m),offset:n.getUniformLocation(t,`offset${g}`,m)};e.enableShapeUniforms&&(y.shape=n.getUniformLocation(t,`${g}Shape`,m),y.texShape=n.getUniformLocation(t,`${g}TexShape`,m)),r.push(y)}if(e.enableShapeUniforms&&(a=n.getUniformLocation(t,"outShape",m),u=n.getUniformLocation(t,"outShapeStrides",m),o=n.getUniformLocation(t,"outTexShape",m)),e.customUniforms)for(const g of e.customUniforms)s.push(n.getUniformLocation(t,g.name,m));return{variablesLocations:r,customUniformLocations:s,infLoc:c,nanLoc:d,outShapeLocation:a,outShapeStridesLocation:u,outTexShapeLocation:o}}function HU(n,e){if(n.length!==e.length)throw Error(`Binary was compiled with ${n.length} inputs, but was executed with ${e.length} inputs`);n.forEach((t,r)=>{const s=t.logicalShape,a=e[r],o=a.shape;if(!Nn(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(t.isUniform&&a.isUniform)return;const u=t.texShape,c=a.isUniform?null:a.texData.texShape;if(!Nn(u,c))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${u} and ${c} must match`)})}function ude(n,e,t,r,s){e.program.enableShapeUniforms||(HU(e.inShapeInfos,t),HU([e.outShapeInfo],[r]));const a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?n.setOutputPackedMatrixTexture(a.texture,o[0],o[1]):n.setOutputMatrixTexture(a.texture,o[0],o[1]),n.setProgram(e.webGLProgram),n.bindVertexArray(e.webGLProgram.vao),xe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&n.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&n.gl.uniform1f(e.nanLoc,NaN);for(let c=0;c<t.length;++c){const d=t[c],{uniform:m,offset:g,shape:y,texShape:x}=e.variablesLocations[c];if(y){const{uniformShape:S}=E_(e.program.packedInputs,d.shape,d.texData.texShape);switch(S.length){case 1:n.gl.uniform1iv(y,new Int32Array(S));break;case 2:n.gl.uniform2iv(y,new Int32Array(S));break;case 3:n.gl.uniform3iv(y,new Int32Array(S));break;case 4:n.gl.uniform4iv(y,new Int32Array(S));break}}if(x&&n.gl.uniform2i(x,d.texData.texShape[0],d.texData.texShape[1]),m!=null){if(d.isUniform){if(Re(d.shape)<2)n.gl.uniform1f(m,d.uniformValues[0]);else{let S=d.uniformValues;S instanceof Float32Array||(S=new Float32Array(S)),n.gl.uniform1fv(m,S)}continue}d.texData.slice!=null&&g!=null&&n.gl.uniform1i(g,d.texData.slice.flatOffset),n.setInputMatrixTexture(d.texData.texture.texture,m,c)}}const u=e.outShapeLocation;if(u)switch(r.shape.length){case 1:n.gl.uniform1iv(u,new Int32Array(r.shape));break;case 2:n.gl.uniform2iv(u,new Int32Array(r.shape));break;case 3:n.gl.uniform3iv(u,new Int32Array(r.shape));break;case 4:n.gl.uniform4iv(u,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const c=Ot(r.shape);switch(r.shape.length){case 2:n.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(c));break;case 3:n.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(c));break;case 4:n.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(c));break}}if(e.outTexShapeLocation&&n.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let c=0;c<e.program.customUniforms.length;++c){const d=e.program.customUniforms[c],m=e.customUniformLocations[c],g=s[c];if(d.type==="float")n.gl.uniform1fv(m,g);else if(d.type==="vec2")n.gl.uniform2fv(m,g);else if(d.type==="vec3")n.gl.uniform3fv(m,g);else if(d.type==="vec4")n.gl.uniform4fv(m,g);else if(d.type==="int")n.gl.uniform1iv(m,g);else if(d.type==="ivec2")n.gl.uniform2iv(m,g);else if(d.type==="ivec3")n.gl.uniform3iv(m,g);else if(d.type==="ivec4")n.gl.uniform4iv(m,g);else throw Error(`uniform type ${d.type} is not supported yet.`)}n.executeProgram()}function cde(n,e,t){let r="";e.concat(t).forEach(o=>{const u=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(n.enableShapeUniforms&&!o.isUniform){const c=o.texData.texShape,{useSqueezeShape:d,uniformShape:m,keptDims:g}=E_(n.packedInputs,o.shape,c);let y="",x="",S="";if(m.length===1&&n.packedInputs){const L=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];y=`${L[0]>1}_${L[1]>1}`}else if(m.length===2&&!n.packedInputs)x=`${m[0]>1}_${m[1]>1}`;else if(m.length>2&&!n.packedInputs){const L=Ot(m);S=`${L[0]===c[1]}_${L[L.length-1]===c[1]}`}const k=o.shape.length,C=m.length===2&&Nn(o.shape,c),N=Re(o.shape)===1,$=Mh(o.shape,t.shape),A=!n.packedInputs&&k===t.shape.length&&Nn(c,t.texData.texShape),D=n.packedInputs||m.length>2?"":`${c[0]>1}_${c[1]>1}`;r+=`${k}_${A}_${d?g:""}_${m.length}_${N}_${$}_${C}_${y}_${x}_${S}_${D}_${u}`}else{const c=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${c}_${u}`}});const s=n.userCode;let a=n.constructor.name;return a+="_"+r+"_"+s+`${xe().getNumber("WEBGL_VERSION")}`,a}function wa(n){return xe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&n<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fde{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=x0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=qa();this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?sk(["r","c","d"],e):cp(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dde{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=x0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=qa();this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?sk(["r","c","d"],e):cp(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hde{constructor(e){this.variableNames=["A"],this.outTexUsage=To.DOWNLOAD;const t=qa();this.outputShape=e,this.userCode=`
      ${PU}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pde{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=To.DOWNLOAD;const t=qa();this.outputShape=e,this.userCode=`
      ${PU}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mde={R:0,G:1,B:2,A:3};class jU{constructor(e,t=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=qa();this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let o="";for(let u=0;u<r.length;u++){const c=r[u];o+=`
          if(offset == ${u}) {
            result = values[${mde[c]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?k_():T_(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gde{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=qa();this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length);let s="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let u=0;u<=1;u++){const c=o*2+u;s+=`
          localCoords = coords;
          if(localCoords[2] + ${u} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${u};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${c}] = values[0];
            } else if (offset == 1) {
              result[${c}] = values[1];
            } else if (offset == 2) {
              result[${c}] = values[2];
            } else {
              result[${c}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?k_():T_(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GU(n){const e=qa(),t=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return yU(n,t)}function qU(n){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return wU(n,e)}function KU(n){const e=new Uint16Array([0,1,2,2,1,3]);return SU(n,e)}function E0(n,e,t,r,s,a){TU(e,t);const o=CU(n),u=n.TEXTURE_2D;return at(n,()=>n.bindTexture(u,o)),at(n,()=>n.texParameteri(u,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)),at(n,()=>n.texParameteri(u,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)),at(n,()=>n.texParameteri(u,n.TEXTURE_MIN_FILTER,n.NEAREST)),at(n,()=>n.texParameteri(u,n.TEXTURE_MAG_FILTER,n.NEAREST)),xe().getNumber("WEBGL_VERSION")===1?at(n,()=>n.texImage2D(u,0,r,e,t,0,s,a,null)):at(n,()=>n.texStorage2D(u,1,r,e,t)),at(n,()=>n.bindTexture(n.TEXTURE_2D,null)),{texture:o,texShape:[t,e]}}function N_(n){return n.internalFormatFloat}function XU(n,e,t,r){const[s,a]=w0(e,t);return E0(n,s,a,N_(r),r.textureFormatFloat,n.FLOAT)}function $_(n){return n.internalFormatHalfFloat}function YU(n,e,t,r){const[s,a]=w0(e,t);return E0(n,s,a,$_(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function I_(n){return n.downloadTextureFormat}function QU(n,e,t,r){const[s,a]=w0(e,t);return E0(n,s,a,I_(r),n.RGBA,n.UNSIGNED_BYTE)}function R_(n){return n.internalFormatPackedFloat}function ZU(n,e,t,r){const[s,a]=cy(e,t);return E0(n,s,a,R_(r),n.RGBA,n.FLOAT)}function D_(n){return n.internalFormatPackedHalfFloat}function JU(n,e,t,r){const[s,a]=cy(e,t);return E0(n,s,a,D_(r),n.RGBA,r.textureTypeHalfFloat)}function e4(n,e,t){return at(n,()=>n.bindBuffer(n.ARRAY_BUFFER,t)),x_(n,e,"clipSpacePos",t,3,20,0)&&x_(n,e,"uv",t,2,20,12)}function t4(n,e,t,r,s,a){at(n,()=>n.bindTexture(n.TEXTURE_2D,e));let o,u,c;s instanceof Uint8Array?(o=new Uint8Array(t*r*4),u=n.UNSIGNED_BYTE,c=n.RGBA):(o=new Float32Array(t*r*4),u=n.FLOAT,c=a.internalFormatPackedFloat),o.set(s),xe().getNumber("WEBGL_VERSION")===2?at(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,n.RGBA,u,o)):at(n,()=>n.texImage2D(n.TEXTURE_2D,0,c,t,r,0,n.RGBA,u,o)),at(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function n4(n,e,t){at(n,()=>n.bindTexture(n.TEXTURE_2D,e)),t.data instanceof Uint8Array?xe().getNumber("WEBGL_VERSION")===2?at(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,t.data)):at(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width,t.height,0,n.RGBA,n.UNSIGNED_BYTE,t.data)):xe().getNumber("WEBGL_VERSION")===2?at(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t)):at(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),at(n,()=>n.bindTexture(n.TEXTURE_2D,null))}function r4(n,e,t,r){const s=n.createBuffer();at(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,s));const u=4*4*e*t;return at(n,()=>n.bufferData(n.PIXEL_PACK_BUFFER,u,n.STREAM_READ)),at(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,0)),at(n,()=>n.bindBuffer(n.PIXEL_PACK_BUFFER,null)),s}function s4(n,e,t){const r=n,s=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function a4(n,e,t,r){const[s,a]=w0(e,t),o=4,u=new Uint8Array(ffe(e*t,o));return at(n,()=>n.readPixels(0,0,s,a,r.downloadTextureFormat,n.UNSIGNED_BYTE,u)),new Float32Array(u.buffer)}function i4(n,e,t,r,s,a,o,u){const c=n,d=new Float32Array(dfe(a,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,d),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),d}function o4(n,e,t){const r=new Float32Array(e*t*4);return at(n,()=>n.readPixels(0,0,t,e,n.RGBA,n.FLOAT,r)),r}const yde=Object.freeze(Object.defineProperty({__proto__:null,bindVertexProgramAttributeStreams:e4,createBufferFromOutputTexture:r4,createFloat16MatrixTexture:YU,createFloat16PackedMatrixTexture:JU,createFloat32MatrixTexture:XU,createIndexBuffer:KU,createPackedMatrixTexture:ZU,createUnsignedBytesMatrixTexture:QU,createVertexBuffer:qU,createVertexShader:GU,downloadByteEncodedFloatMatrixFromOutputTexture:a4,downloadFloat32MatrixFromBuffer:s4,downloadMatrixFromPackedOutputTexture:o4,downloadPackedMatrixFromBuffer:i4,getInternalFormatForFloat16MatrixTexture:$_,getInternalFormatForFloat16PackedMatrixTexture:D_,getInternalFormatForFloat32MatrixTexture:N_,getInternalFormatForPackedMatrixTexture:R_,getInternalFormatForUnsignedBytesMatrixTexture:I_,uploadDenseMatrixToTexture:t4,uploadPixelDataToTexture:n4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ak{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=xe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,pU(t,e)):this.gl=Kl(t),e=this.gl,xe().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>at(a,()=>a.createVertexArray()),this.bindVertexArray=o=>at(a,()=>a.bindVertexArray(o)),this.deleteVertexArray=o=>at(a,()=>a.deleteVertexArray(o)),this.getVertexArray=()=>at(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>at(e,()=>a.createVertexArrayOES()),this.bindVertexArray=o=>at(e,()=>a.bindVertexArrayOES(o)),this.deleteVertexArray=o=>at(e,()=>a.deleteVertexArrayOES(o)),this.getVertexArray=()=>at(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),xe().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=S0(this.gl,a),ko(this.gl,o))this.textureHalfFloatExtension=S0(this.gl,o);else if(xe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),ko(this.gl,s))this.colorBufferHalfFloatExtension=S0(this.gl,s);else if(xe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",ko(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(ko(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=qU(this.gl),this.indexBuffer=KU(this.gl),this.framebuffer=kU(this.gl),this.textureConfig=v_(this.gl,this.textureHalfFloatExtension)}get debug(){return xe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;at(e,()=>e.finish()),at(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),at(e,()=>e.deleteFramebuffer(this.framebuffer)),at(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),at(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),at(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),XU(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),YU(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),QU(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),n4(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,r,s){this.throwIfDisposed(),t4(this.gl,e,t,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),JU(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),ZU(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(w_(this.gl,this.framebuffer),this.outputTexture=null),at(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,r){return this.downloadMatrixDriver(e,()=>a4(this.gl,t,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,r,s,a,o){return i4(this.gl,e,t,r,s,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return s4(this.gl,e,t)}createBufferFromTexture(e,t,r){this.bindTextureToFrameBuffer(e);const s=r4(this.gl,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,r;if(xe().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,a=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(a,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},t=a}else xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(t,xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:t,isFencePassed:r}}downloadMatrixFromPackedTexture(e,t,r){return this.downloadMatrixDriver(e,()=>o4(this.gl,t,r))}createProgram(e){this.throwIfDisposed();const t=this.gl;this.vertexShader==null&&(this.vertexShader=GU(t));const r=bU(t);at(t,()=>t.attachShader(r,this.vertexShader)),at(t,()=>t.attachShader(r,e)),xU(t,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&JT(t,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;at(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),e4(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(at(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&JT(this.gl,this.program),at(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,r=!0){return this.throwIfDisposed(),r?NU(this.gl,e,t):$U(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),at(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),IU(this.gl,e,t,r)}setOutputMatrixTexture(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)}setOutputPackedMatrixTexture(e,t,r){this.throwIfDisposed();const[s,a]=cy(t,r);this.setOutputMatrixTextureDriver(e,s,a)}setOutputMatrixWriteRegion(e,t,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,t)}setOutputPackedMatrixWriteRegion(e,t,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&JT(this.gl,this.program),C0(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}at(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),at(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=S0(this.gl,xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await y$(()=>this.disposed||this.isQueryAvailable(e,xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(t===0)return null;if(t===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(t===0)return!0;if(t===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){const e=vde(this.itemsToPoll.map(t=>t.isDoneFn));for(let t=0;t<=e;++t){const{resolveFn:r}=this.itemsToPoll[t];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in xe().platform&&(r=xe().platform.setTimeoutCustom.bind(xe().platform)),y$(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),ek(this.gl,e,this.framebuffer),this.debug&&C0(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(ek(this.gl,this.outputTexture,this.framebuffer),this.debug&&C0(this.gl)):w_(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const r=t();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,t,r){this.throwIfDisposed();const s=this.gl;ek(s,e,this.framebuffer),this.debug&&C0(s),this.outputTexture=e,at(s,()=>s.viewport(0,0,t,r)),at(s,()=>s.scissor(0,0,t,r))}setOutputMatrixWriteRegionDriver(e,t,r,s){this.throwIfDisposed(),at(this.gl,()=>this.gl.scissor(e,t,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function vde(n){let e=0;for(;e<n.length&&n[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:bde,bincountImpl:l4,bincountReduceImpl:xde,bitwiseAndImpl:wde,castImpl:Sde,ceilImpl:Cde,concatImpl:Tde,equalImpl:kde,expImpl:Ede,expm1Impl:Nde,floorImpl:$de,gatherNdImpl:Ide,gatherV2Impl:Rde,greaterImpl:Dde,greaterEqualImpl:_de,lessImpl:Ade,lessEqualImpl:Ode,linSpaceImpl:Fde,logImpl:Lde,maxImpl:Mde,maximumImpl:zde,minimumImpl:Pde,multiplyImpl:Bde,negImpl:Vde,notEqualImpl:Ude,prodImpl:Wde,raggedGatherImpl:Hde,raggedRangeImpl:jde,raggedTensorToTensorImpl:Gde,rangeImpl:qde,rsqrtImpl:Kde,scatterImpl:Xde,sigmoidImpl:Yde,simpleAbsImpl:u4,sliceImpl:Qde,sparseFillEmptyRowsImpl:Zde,sparseReshapeImpl:Jde,sparseSegmentReductionImpl:c4,sqrtImpl:ehe,staticRegexReplaceImpl:the,stridedSliceImpl:nhe,stringNGramsImpl:rhe,stringSplitImpl:she,stringToHashBucketFastImpl:ahe,subImpl:ihe,tileImpl:ohe,topKImpl:lhe,transposeImpl:__,uniqueImpl:uhe}=KV;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f4(n,e){return["x","y","z","w","u","v"].slice(0,e).map(t=>`${n}.${t}`)}function Ka(n,e){return e===1?[n]:f4(n,e)}function che(n,e){if(n===1)return"rc";let t="";for(let r=0;r<n;r++)t+=e[r],r<n-1&&(t+=",");return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fhe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=wa(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const t=Ka("rc",this.rank),r=pr(this.rank),s=this.getOutOfBoundsCondition(t),a=this.getSetup(t),o=this.getOutput(t);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const t=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let a=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)a=`${e[e.length-1-o]},`+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let r=this.rank-2;r<this.rank;r++)t+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(t+="||");return t}getSetup(e){if(this.rank===1)return"";const t=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const t=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d4{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length);let r="";for(let s=0;s<4;s++){let a="thisRC = rc;";s%2===1&&(a+="thisRC.z += 1;"),s>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${dhe(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?k_():T_(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function dhe(n,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?kfe(["r","c","d"],"inputShape"):cp(["r","c","d"],n)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hhe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,r){const s=p4(t,r),a=m4(e,s,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const o=h4(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const c=this.freeTextures[a].pop();return this.usedTextures[a].push(c),c}let u;return s===pa.PACKED_2X2_FLOAT32?u=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===pa.PACKED_2X2_FLOAT16?u=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===pa.UNPACKED_FLOAT32?u=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===pa.UNPACKED_FLOAT16?u=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===pa.PACKED_4X1_UNSIGNED_BYTE&&(u=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(u),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),u}releaseTexture(e,t,r,s){if(this.freeTextures==null)return;const a=p4(r,s),o=m4(t,a,s);o in this.freeTextures||(this.freeTextures[o]=[]);const u=h4(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,s),c=xe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");c!==-1&&this._numBytesAllocated>c?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=u):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=u),this.numUsedTextures--;const d=this.usedTextures[o],m=d&&d.indexOf(e);if(m==null||m<0)throw new Error("Cannot release a texture that was never provided by this texture manager");d[m]=d[d.length-1],d.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(t=>{this.gpgpu.deleteMatrixTexture(t.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function phe(n,e){const t=n;if(e===t.R32F)return 4;if(e===t.R16F)return 2;if(e===t.RGBA32F)return 16;if(e===n.RGBA)return 16;if(e===t.RGBA16F)return 8;if(e===t.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function h4(n,e,t,r,s){const a=mhe(e,r);let o;if(s){const[c,d]=cy(n[0],n[1]);o=c*d}else{const[c,d]=w0(n[0],n[1]);o=c*d}const u=phe(t,a);return o*u}function mhe(n,e){switch(n){case pa.PACKED_2X2_FLOAT32:return R_(e);case pa.PACKED_2X2_FLOAT16:return D_(e);case pa.UNPACKED_FLOAT32:return N_(e);case pa.UNPACKED_FLOAT16:return $_(e);case pa.PACKED_4X1_UNSIGNED_BYTE:return I_(e);default:throw new Error(`Unknown physical texture type ${n}`)}}function ghe(n){return xe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?pa.PACKED_2X2_FLOAT32:pa.UNPACKED_FLOAT32:n?pa.PACKED_2X2_FLOAT16:pa.UNPACKED_FLOAT16}function p4(n,e){if(n===To.UPLOAD)return pa.PACKED_2X2_FLOAT32;if(n===To.RENDER||n==null)return ghe(e);if(n===To.DOWNLOAD||n===To.PIXELS)return pa.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${n}`)}function m4(n,e,t){return`${n[0]}_${n[1]}_${e}_${t}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bu{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const el="if (isnan(x)) return x;",yhe="return x;",g4="return abs(x);",vhe="return (x >= 0.0) ? x : (exp(x) - 1.0);",bhe=el+`
  return (x < 0.0) ? 0.0 : x;
`,xhe=el+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,gd="return x;",whe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const She="return x;",Che=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,The=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,khe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ehe="return 1.0 / (1.0 + exp(-1.0 * x));";class yd{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nhe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length);const t=e.length,r=Ka("rc",t),s=pr(t),a=che(t,r),o=r.slice(-2),u=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${u}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $he=VC,Ihe=1e-7,Rhe=1e-4,ik={};function Dhe(n){return n in ik||(ik[n]={}),ik[n]}const _he=xe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Ahe=600;function Ohe(){return xe().global.screen==null?1024:xe().global.screen.height*xe().global.screen.width*window.devicePixelRatio*Ahe/1024/1024}class N0 extends H1{nextDataId(){return N0.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!xe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(e!=null){if(e instanceof ak)t=e;else{const r=Kl(xe().getNumber("WEBGL_VERSION"),e);t=new ak(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Kl(xe().getNumber("WEBGL_VERSION"));t=new ak(r),this.binaryCache=Dhe(xe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new hhe(this.gpgpu),this.numMBBeforeWarning=Ohe(),this.texData=new m$(this,Fl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,r,s,a,o){const u=this.makeTensorInfo(t,r),c=this.texData.get(u.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[s,a]},c.texShape=[s,a];const d=T0(t),m=new jU(d,!1,o),g=this.runWebGLProgram(m,[u],r,[[s,a]]);return g.shape=t,c.texture=null,this.disposeIntermediateTensorInfo(u),g.dataId}write(e,t,r){if((xe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||xe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:t,dtype:r,values:e,usage:To.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){const t=this.texData.get(e);t.refCount--}}move(e,t,r,s,a){if(xe().getBool("DEBUG")&&this.checkNumericalProblems(t),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:t,usage:To.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:a,slice:o,shape:u,isPacked:c}=t;if(o!=null){let y;c?y=new yd(u,gd):y=new Bu(u,gd);const x=this.runWebGLProgram(y,[{dataId:e,shape:u,dtype:s}],s),S=this.readSync(x.dataId);return this.disposeIntermediateTensorInfo(x),S}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const d=this.activeTimers!=null;let m;d&&(m=oa());let g;if(s==="complex64"){const y=this.readSync(a.real.dataId),x=this.readSync(a.imag.dataId);g=Uc(y,x)}else g=this.getValuesFromTexture(e);return d&&(this.downloadWaitMs+=oa()-m),this.convertAndCacheOnCPU(e,g)}async read(e){if(this.pendingRead.has(e)){const S=this.pendingRead.get(e);return new Promise(k=>S.push(k))}const t=this.texData.get(e),{values:r,shape:s,slice:a,dtype:o,complexTensorInfos:u,isPacked:c}=t;if(a!=null){let S;c?S=new yd(s,gd):S=new Bu(s,gd);const k=this.runWebGLProgram(S,[{dataId:e,shape:s,dtype:o}],o),C=this.read(k.dataId);return this.disposeIntermediateTensorInfo(k),C}if(r!=null)return this.convertAndCacheOnCPU(e);if(xe().getBool("DEBUG")&&!xe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&xe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let d=null,m;if(o!=="complex64"&&xe().get("WEBGL_BUFFER_SUPPORTED")){m=this.decode(e);const S=this.texData.get(m.dataId);d=this.gpgpu.createBufferFromTexture(S.texture.texture,...ZT(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let g;if(o==="complex64"){const S=await Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),k=S[0],C=S[1];g=Uc(k,C)}else if(d==null)g=this.getValuesFromTexture(e);else{const S=Re(s);g=this.gpgpu.downloadFloat32MatrixFromBuffer(d,S)}if(m!=null&&this.disposeIntermediateTensorInfo(m),d!=null){const S=this.gpgpu.gl;at(S,()=>S.deleteBuffer(d))}const y=this.convertAndCacheOnCPU(e,g),x=this.pendingRead.get(e);return this.pendingRead.delete(e),x.forEach(S=>S(y)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Fl().removeDataId(e,this),this.pendingDeletes--),y}readToGPU(e,t={}){const r=this.texData.get(e),{values:s,shape:a,slice:o,dtype:u,isPacked:c,texture:d}=r;if(u==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let x;c?x=new yd(a,gd):x=new Bu(a,gd);const S=this.runWebGLProgram(x,[{dataId:e,shape:a,dtype:u}],u),k=this.readToGPU(S,t);return this.disposeIntermediateTensorInfo(S),k}if(d==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const m=this.decode(e,t.customTexShape),g=Fl().makeTensorFromTensorInfo(m),y=this.texData.get(m.dataId);return Object.assign({tensorRef:g},y.texture)}bufferSync(e){const t=this.readSync(e.dataId);if(e.dtype==="string")try{const r=t.map(s=>Dc(s));return gn(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return gn(e.shape,e.dtype,t)}checkNumericalProblems(e){if(e!=null)for(let t=0;t<e.length;t++){const r=e[t];if(!mU(r))throw xe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:t,dtype:r,isPacked:s}=this.texData.get(e),a=Re(t);if(xe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const y=this.decode(e),x=this.texData.get(y.dataId),S=this.gpgpu.downloadMatrixFromPackedTexture(x.texture.texture,...ZT(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(y),S}const o=xe().getBool("WEBGL_PACK")&&s===!0,u=o?T0(t):t,c=o?new pde(u):new hde(u),d=this.runWebGLProgram(c,[{shape:u,dtype:r,dataId:e}],"float32"),m=this.texData.get(d.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture.texture,m.texShape[0],m.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(d),g}timerAvailable(){return xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=Eu(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),o=Eu(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=t,s&&(this.programTimersStack=null);const u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const c=await Promise.all(a);u.kernelMs=bL(c),u.getExtraProfileInfo=()=>c.map((d,m)=>({name:o[m],ms:d})).map(d=>`${d.name}: ${d.ms}`).join(", ")}else u.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,u})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:oa(),endMs:null}}endTimer(e){return xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=oa(),e)}async getQueryTime(e){if(xe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:r,texShape:s,usage:a,isPacked:o,slice:u}=this.texData.get(e),c=u&&u.origDataId||e,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),t!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(t,s,a,o)));const m=this.texData.get(e);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=_he){return xe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Re(r.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){go("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return $he(e.shape,t)}packedUnaryOp(e,t,r){const s=new yd(e.shape,t),a=this.compileAndRun(s,[e],r);return Fl().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=u4(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(xe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,g4,e.dtype);const t=new Bu(e.shape,g4),r=this.compileAndRun(t,[e]);return Fl().makeTensorFromTensorInfo(r)}makeTensorInfo(e,t,r){let s;if(t==="string"&&r!=null&&r.length>0&&Tu(r[0])){const a=r.map(o=>ku(o));s=this.write(a,e,t)}else s=this.write(r,e,t);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:t}}makeOutput(e,t,r){return Fl().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,r),this)}unpackTensor(e){const t=new Nhe(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new fhe(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const r=[lp(e.shape),...up(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},a=[lp(t),...up(t)],o=new d4(a,r),u=!0,c=[r],d=this.runWebGLProgram(o,[s],e.dtype,c,u);return{dataId:d.dataId,shape:t,dtype:d.dtype}}decode(e,t){const r=this.texData.get(e),{isPacked:s,shape:a,dtype:o}=r;if(t!=null){const y=Re(a),x=t[0]*t[1]*4;U(y<=x,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const u=T0(a);let c;s?c=new dde(u):c=new fde(u);const d=!0,m=[t??ZT(u)],g=this.runWebGLProgram(c,[{shape:u,dtype:o,dataId:e}],o,m,d,t);return{dtype:o,shape:a,dataId:g.dataId}}runWebGLProgram(e,t,r,s,a=!1,o){const u=this.makeTensorInfo(e.outputShape,r),c=this.texData.get(u.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===x0.DENSE){const N=o??ZT(e.outputShape);c.texShape=N.map($=>$*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),Re(u.shape)===0)return c.values=Ls(u.dtype,0),u;const d=[],m=t.map(N=>{if(N.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let $=this.texData.get(N.dataId);if($.texture==null){if(!e.packedInputs&&Re(N.shape)<=xe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:N.shape,texData:null,isUniform:!0,uniformValues:$.values};e.packedInputs&&($.isPacked=!0,$.shape=N.shape)}if(this.uploadToGPU(N.dataId),!!$.isPacked!=!!e.packedInputs)N=$.isPacked?this.unpackTensor(N):this.packTensor(N),d.push(N),$=this.texData.get(N.dataId);else if($.isPacked&&!k0($.shape,N.shape)){const A=N,D=N.shape;N.shape=$.shape,N=this.packedReshape(N,D),d.push(N),$=this.texData.get(N.dataId),A.shape=D}return{shape:N.shape,texData:$,isUniform:!1}});this.uploadToGPU(u.dataId);const g={shape:u.shape,texData:c,isUniform:!1},y=cde(e,m,g),x=this.getAndSaveBinary(y,()=>lde(this.gpgpu,e,m,g)),S=this.activeTimers!=null;let k;S&&(k=this.startTimer()),xe().get("ENGINE_COMPILE_ONLY")||ude(this.gpgpu,x,m,g,s),d.forEach(N=>this.disposeIntermediateTensorInfo(N)),S&&(k=this.endTimer(k),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(k)}));const C=xe().getNumber("WEBGL_FLUSH_THRESHOLD");if(C>0){const N=oa();N-this.lastGlFlushTime>C&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=N)}if(!xe().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&a===!1){const N=this.unpackTensor(u);return this.disposeIntermediateTensorInfo(u),N}return u}compileAndRun(e,t,r,s,a=!1){return r=r||t[0].dtype,this.runWebGLProgram(e,t,r,s,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(xe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ve(()=>{if(!xe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=xe().getBool("DEBUG");xe().set("DEBUG",!1);const t=this.abs(Ft(1e-8)).dataSync()[0];if(xe().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?Ihe:Rhe}uploadToGPU(e){const t=this.texData.get(e),{shape:r,dtype:s,values:a,texture:o,usage:u,isPacked:c}=t;if(o!=null)return;const d=this.activeTimers!=null;let m;d&&(m=oa());let g=t.texShape;if(g==null&&(g=_U(r,c),t.texShape=g),a!=null){const y=T0(r);let x,S=g[1],k=g[0];const C=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(c||!C)&&([S,k]=cy(g[0],g[1])),c?x=new gde(y,C):x=new jU(y,C);const N=C?[k,S]:g,$=this.makeTensorInfo(N,s),A=this.texData.get($.dataId);C?A.usage=To.PIXELS:A.usage=To.UPLOAD,A.texShape=N,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture($.dataId),S,k,a);const D=[[k,S]],P=this.runWebGLProgram(x,[$],s,D,!0),W=this.texData.get(P.dataId);t.texShape=W.texShape,t.isPacked=W.isPacked,t.usage=W.usage,xe().get("ENGINE_COMPILE_ONLY")?this.disposeData(P.dataId):(t.texture=W.texture,t.values=null,this.texData.delete(P.dataId)),this.disposeIntermediateTensorInfo($),d&&(this.uploadWaitMs+=oa()-m)}else{const y=this.acquireTexture(g,u,s,c);t.texture=y}}convertAndCacheOnCPU(e,t){const r=this.texData.get(e),{dtype:s}=r;return t!=null&&(r.values=Fhe(t,s)),r.values}acquireTexture(e,t,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,s)}computeBytes(e,t){return e[0]*e[1]*fb(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}else{for(const[,t]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(t),s(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await R2(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(b_(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:r,infLoc:s,nanLoc:a,outShapeLocation:o,outShapeStridesLocation:u,outTexShapeLocation:c}=WU(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=a,e.outShapeLocation=o,e.outShapeStridesLocation=u,e.outTexShapeLocation=c}}createTensorFromGPUData(e,t,r){e.channels=e.channels||"RGBA";const{texture:s,height:a,width:o,channels:u}=e,c=Fl().backend;if(!c.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const d=c.writeTexture(s,t,r,a,o,u);return Fl().makeTensorFromDataId(d,t,r,c)}}N0.nextDataId=0;function Fhe(n,e){if(e==="float32"||e==="complex64")return n;if(e==="int32"||e==="bool"){const t=e==="int32"?new Int32Array(n.length):new Uint8Array(n.length);for(let r=0;r<t.length;++r)t[r]=Math.round(n[r]);return t}else throw new Error(`Unknown dtype ${e}`)}/** @license See the LICENSE file. */const y4="4.22.0";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4(){xe().set("WEBGL_FORCE_F16_TEXTURES",!0)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */z$()&&V$("webgl",()=>new N0,2);const Lhe={forceHalfFloat:v4};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class dp{constructor(e,t,r){this.variableNames=["A","B"],this.outputShape=cn(t,r),this.enableShapeUniforms=wa(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hp=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class gy{constructor(e,t,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=cn(t,r);const a=this.outputShape.length;this.enableShapeUniforms=wa(a);let o="";if(s)if(a===0||Re(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${pr(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const c=Ka("coords",a);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${c[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${c[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${c[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${c[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xi(n){const{inputs:e,backend:t}=n,{x:r}=e;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Mhe={kernelName:Jm,backendName:"webgl",kernelFunc:Xi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vd(n){const{inputs:e,backend:t}=n,{real:r,imag:s}=e,a=t.makeTensorInfo(r.shape,"complex64"),o=t.texData.get(a.dataId),u=Xi({inputs:{x:r},backend:t}),c=Xi({inputs:{x:s},backend:t});return o.complexTensorInfos={real:u,imag:c},a}const zhe={kernelName:nS,backendName:"webgl",kernelFunc:vd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4="return (a < 0.) ? b * a : a;",x4=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Phe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{alpha:a}=r,o=t.makeTensorInfo([],"float32",Rc(a,"float32")),u=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gy(x4,s.shape,o.shape):new dp(b4,s.shape,o.shape),c=t.runWebGLProgram(u,[s,o],"float32");return t.disposeIntermediateTensorInfo(o),c}const Bhe={kernelName:Ob,backendName:"webgl",kernelFunc:Phe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4="return (a < 0.) ? b * a : a;",S4=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Vhe(n){const{inputs:e,backend:t}=n,{x:r,alpha:s}=e,a=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gy(S4,r.shape,s.shape):new dp(w4,r.shape,s.shape);return t.runWebGLProgram(a,[r,s],"float32")}const Uhe={kernelName:Jb,backendName:"webgl",kernelFunc:Vhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yy="if (isnan(x)) return x;";function Bn({opSnippet:n,packedOpSnippet:e,cpuKernelImpl:t,dtype:r}){return({inputs:s,backend:a})=>{const{x:o}=s,u=a,c=r||o.dtype;if(u.shouldExecuteOnCPU([o])&&t!=null){const g=u.texData.get(o.dataId),y=t(g.values,c);return u.makeTensorInfo(o.shape,c,y)}const d=xe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let m;return d?m=new yd(o.shape,e):m=new Bu(o.shape,n),u.runWebGLProgram(m,[o],c)}}function ma({opSnippet:n,packedOpSnippet:e,checkOutOfBounds:t=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:a}){return({inputs:o,backend:u})=>{const{a:c,b:d}=o,m=u;if(r&&c.dtype==="complex64"){const S=m.texData.get(c.dataId),k=m.texData.get(d.dataId),[C,N]=[[S.complexTensorInfos.real,k.complexTensorInfos.real],[S.complexTensorInfos.imag,k.complexTensorInfos.imag]].map(A=>{const[D,L]=A,P={dataId:D.dataId,dtype:D.dtype,shape:c.shape},W={dataId:L.dataId,dtype:L.dtype,shape:d.shape},B=new dp(n,c.shape,d.shape);return m.runWebGLProgram(B,[P,W],pi(D.dtype,L.dtype))}),$=vd({inputs:{real:C,imag:N},backend:m});return m.disposeIntermediateTensorInfo(C),m.disposeIntermediateTensorInfo(N),$}const g=a||pi(c.dtype,d.dtype);if((c.dtype==="string"||d.dtype==="string"||m.shouldExecuteOnCPU([c,d]))&&s!=null){const S=m.texData.get(c.dataId).values,k=m.texData.get(d.dataId).values,C=c.dtype==="string"?Wc(S):S,N=c.dtype==="string"?Wc(k):k,[$,A]=s(c.shape,d.shape,C,N,g),D=m.makeTensorInfo(A,g),L=m.texData.get(D.dataId);return L.values=$,D}const y=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let x;return y?x=new gy(e,c.shape,d.shape,t):x=new dp(n,c.shape,d.shape),m.runWebGLProgram(x,[c,d],g)}}function $0(n,e=!1){if(n==="linear")return e?She:yhe;if(n==="relu")return e?The:bhe;if(n==="elu")return e?Che:vhe;if(n==="relu6")return e?khe:xhe;if(n==="prelu")return e?S4:w4;if(n==="leakyrelu")return e?x4:b4;if(n==="sigmoid")return e?Ehe:whe;throw new Error(`Activation ${n} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C4{constructor(e,t,r,s=!1,a=!1,o=!1,u=null,c=!1,d=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=wa(this.outputShape.length);const m=s?e[1]:e[2],g=Math.ceil(m/2),y=s?"i * 2, rc.y":"rc.y, i * 2",x=a?"rc.z, i * 2":"i * 2, rc.z",S=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],k=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let C="",N="";u&&(c?C=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${u}
        }`:d?C=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${u}
        }`:C=`vec4 activation(vec4 x) {
          ${u}
        }`,N="result = activation(result);");const $=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),d&&this.variableNames.push("leakyreluAlpha");let A="rc.x",D="rc.x";e[0]<t[0]?A=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(D=`imod(rc.x, ${t[0]})`),this.userCode=`
      ${C}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${g}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${A};
        int batchB = ${D};
        for (int i = 0; i < ${g}; i++) {
          vec4 a = getMatrixA(batchA, ${y});
          vec4 b = getMatrixB(batchB, ${x});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${S[0]} * ${k[0]});
          result += (${S[1]} * ${k[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${$}

        ${N}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class k4{constructor(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=cn(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4="return a * b;";function O_(n){const{inputs:e,backend:t}=n,{a:r,b:s}=e,a=pi(r.dtype,s.dtype);if(r.dtype==="complex64"){const u=t.texData.get(r.dataId),c=t.texData.get(s.dataId),d=new k4(T4.REAL,r.shape,s.shape),m=new k4(T4.IMAG,r.shape,s.shape),g=[{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:r.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:s.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:s.shape}],y=t.runWebGLProgram(d,g,"float32"),x=t.runWebGLProgram(m,g,"float32"),S=vd({inputs:{real:y,imag:x},backend:t});return t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(x),S}if(t.shouldExecuteOnCPU([r,s])){const u=t.texData.get(r.dataId),c=t.texData.get(s.dataId),[d,m]=Bde(r.shape,s.shape,u.values,c.values,a),g=t.makeTensorInfo(m,a),y=t.texData.get(g.dataId);return y.values=d,g}let o;return xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new gy(E4,r.shape,s.shape):o=new dp(E4,r.shape,s.shape),t.runWebGLProgram(o,[r,s],a)}const Whe={kernelName:lg,backendName:"webgl",kernelFunc:O_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hhe(n,e,t){const r=[lp(n.shape),...up(n.shape)],s={dtype:n.dtype,shape:r,dataId:n.dataId},a=[lp(e),...up(e)],o=new d4(a,r),u=!0,c=[r],d=t.runWebGLProgram(o,[s],n.dtype,c,u);return{dataId:d.dataId,shape:e,dtype:d.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rt(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{shape:a}=r,o=t,u=Re(s.shape),c=v$(a,u),d=Re(c);U(u===d,()=>`The new shape (${c}) has ${d} elements and the old shape (${s.shape}) has ${u} elements. The new shape and old shape must have the same number of elements.`);const m=o.texData.get(s.dataId);return m.isPacked&&!k0(s.shape,c)&&!(m.texture!==null&&k0(m.shape,c))?Hhe(s,c,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:c,dtype:s.dtype})}const jhe={kernelName:tx,backendName:"webgl",kernelFunc:rt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N4{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:a,outSize:o}=e;this.outputShape=[s,o];const u=Math.floor(r/4)*4,c=r%4;let d="sumValue += dot(values, ones);";if(t!=null){const g=1/t;d=`sumValue += dot(values * ${bh(g)?g.toPrecision(2):g}, ones);`}let m="";a%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${d}
        }

        int inIdx = inOffset + ${u};
        if (${c===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${d}
        } else if (${c===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${d}
        } else if (${c===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${d}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ghe{constructor(e,t){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:a,outSize:o}=e;this.outputShape=[s,o];let u="0.0",c="";t==="prod"?u="1.0":t==="min"?(u="1.0 / 1e-20",c="min"):t==="max"&&(u="-1.0 / 1e-20",c="max");let d=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="sum"?d="sumValue":t==="prod"?d="prodValue":t==="all"?d="allValue":t==="any"&&(d="anyValue");const m=Math.floor(r/4)*4,g=r%4;let y=`
      if (${t==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${t==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${c}(values, minMaxValue);
        if (${t==="min"} || ${t==="max"}) {
          minMaxValue = ${c}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,x="vec4";t==="all"?(u="1.0",y=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,x="bvec4"):t==="any"&&(u="0.0",y=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,x="bvec4");let S="";a%r>0&&(S=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${u};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${S}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${u});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${m}; i += 4) {
          int inIdx = inOffset + i;
          ${x} values = ${x}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${y}
        }

        int inIdx = inOffset + ${m};
        if (${g===1}) {
          ${x} values = ${x}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${y}
        } else if (${g===2}) {
          ${x} values = ${x}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${y}
        } else if (${g===3}) {
          ${x} values = ${x}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${y}
        }
        setOutput(${d});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qhe(n){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const t=e.length?e[e.length-1].outSize:n[1],r=eT(t);e.push({inSize:t,windowSize:r,outSize:Math.ceil(t/r)})}return e}function pp(n,e,t,r){const s=qhe(n.shape);let a=n;for(let o=0;o<s.length;o++){const{inSize:u,windowSize:c,outSize:d}=s[o];let m,g;t==="mean"?m=o===0?new N4({windowSize:c,inSize:u,batchSize:n.shape[0],outSize:d},u):new N4({windowSize:c,inSize:u,batchSize:n.shape[0],outSize:d}):m=new Ghe({windowSize:c,inSize:u,batchSize:n.shape[0],outSize:d},t),g=a,a=r.runWebGLProgram(m,[a],e),g.dataId!==n.dataId&&r.disposeIntermediateTensorInfo(g)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Khe{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[t[o]];this.outputShape=r,this.rank=r.length;const s=pr(this.rank),a=Xhe(t);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function Xhe(n){const e=n.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<n.length;s++)r[n[s]]=t[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yhe{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let m=0;m<r.length;m++)r[m]=e[t[m]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=pr(this.rank),a=f4("rc",this.rank),o=new Array(this.rank);for(let m=0;m<t.length;m++)o[t[m]]=a[m];const u=`vec2(${o.slice(-2).join()})`,c=`++${a[this.rank-1]} < ${r[this.rank-1]}`,d=`getChannel(getA(${o.join()}), ${u})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${d};
      if(${c}) {
        result[1] = ${d};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${d};
        if(${c}) {
          result[3] = ${d};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ok(n,e,t){const r=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yhe(n.shape,e):new Khe(n.shape,e);return t.runWebGLProgram(r,[n],n.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qhe(n,e,t,r){const s=e,a=n.shape.length,o=wn(s,n.shape);let u=o;const c=Ur(u,a),d=c!=null;let m=n;d&&(m=ok(n,c,r),u=ns(u.length,a)),ua("sum",u,a);const[g,y]=Bs(m.shape,u);let x=g;t&&(x=ts(g,o));const S=Re(y),C=Re(n.shape)/S,N=rt({inputs:{x:m},attrs:{shape:[C,S]},backend:r}),$=uC(n.dtype),A=pp(N,$,"sum",r),D=rt({inputs:{x:A},attrs:{shape:x},backend:r});return r.disposeIntermediateTensorInfo(N),r.disposeIntermediateTensorInfo(A),d&&r.disposeIntermediateTensorInfo(m),D}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lk(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r;return Qhe(s,a,o,t)}const Zhe={kernelName:ox,backendName:"webgl",kernelFunc:lk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xa(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{perm:a}=r,o=t,u=s.shape.length,c=new Array(u);for(let m=0;m<c.length;m++)c[m]=s.shape[a[m]];let d;if(o.shouldExecuteOnCPU([s])){const g=o.texData.get(s.dataId).values,y=__(g,s.shape,s.dtype,a,c);d=o.makeTensorInfo(c,s.dtype);const x=o.texData.get(d.dataId);x.values=y}else d=ok(s,a,o);return d}const Jhe={kernelName:Th,backendName:"webgl",kernelFunc:Xa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4=1e3;function uk({a:n,b:e,transposeA:t,transposeB:r,backend:s,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:u=0,activation:c=null}){const d=n.shape.length,m=e.shape.length,g=t?n.shape[d-2]:n.shape[d-1],y=r?e.shape[m-1]:e.shape[m-2],x=t?n.shape[d-1]:n.shape[d-2],S=r?e.shape[m-2]:e.shape[m-1],k=n.shape.slice(0,-2),C=e.shape.slice(0,-2),N=Re(k),$=Re(C),D=cn(n.shape.slice(0,-2),e.shape.slice(0,-2)).concat([x,S]);U(g===y,()=>`Error in matMul: inner shapes (${g}) and (${y}) of Tensors with shapes ${n.shape} and ${e.shape} and transposeA=${t} and transposeB=${r} must match.`);const L=t?[N,g,x]:[N,x,g],P=r?[$,S,y]:[$,y,S],W=rt({inputs:{x:n},backend:s,attrs:{shape:L}}),B=rt({inputs:{x:e},backend:s,attrs:{shape:P}}),G=[W,B],X=Math.max(N,$),re=t?W.shape[1]:W.shape[2],ue=a!=null,ne=o!=null,me=c==="leakyrelu",ge=c!=null?$0(c,!0):null,be=ue||ne||me||ge!=null;let pe;if((x===1||S===1)&&re>$4&&be===!1){let ye=W,ce=B;t&&(ye=Xa({inputs:{x:W},backend:s,attrs:{perm:[0,2,1]}}),G.push(ye)),r&&(ce=Xa({inputs:{x:B},backend:s,attrs:{perm:[0,2,1]}}),G.push(ce));const K=S!==1,Z=S===1;let De=ye;K&&(De=rt({inputs:{x:ye},backend:s,attrs:{shape:[X,re,1]}}),G.push(De));const Ae=S===1?2:1;let Fe=ce;Z&&(Fe=rt({inputs:{x:ce},backend:s,attrs:{shape:[X,1,re]}}),G.push(Fe));const Pe=O_({inputs:{a:De,b:Fe},backend:s});pe=lk({inputs:{x:Pe},backend:s,attrs:{axis:Ae,keepDims:!0}}),G.push(Pe)}else{const ye=pi(n.dtype,e.dtype),ce=new C4(L,P,[X,x,S],t,r,ue,ge,ne,me),K=[W,B];if(a!=null&&K.push(a),ne&&K.push(o),me){const Z=s.makeTensorInfo([],"float32",Rc(u,"float32"));K.push(Z),G.push(Z)}pe=s.runWebGLProgram(ce,K,ye)}const te=rt({inputs:{x:pe},backend:s,attrs:{shape:D}});G.push(pe);for(const ye of G)s.disposeIntermediateTensorInfo(ye);return te}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function epe(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:a,bias:o,preluActivationWeights:u}=e,{transposeA:c,transposeB:d,activation:m,leakyreluAlpha:g}=r;return uk({a:s,b:a,transposeA:c,transposeB:d,backend:t,bias:o,preluActivationWeights:u,leakyreluAlpha:g,activation:m})}const tpe={kernelName:mx,backendName:"webgl",kernelFunc:epe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4="return abs(x);";function npe(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=t.texData.get(r.dataId),o=u4(a.values);return t.makeTensorInfo(r.shape,r.dtype,o)}let s;return xe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new yd(r.shape,I4):s=new Bu(r.shape,I4),t.runWebGLProgram(s,[r],r.dtype)}const rpe={kernelName:db,backendName:"webgl",kernelFunc:npe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spe=el+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,ape=Bn({opSnippet:spe}),ipe={kernelName:Am,backendName:"webgl",kernelFunc:ape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ope=el+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,lpe=Bn({opSnippet:ope}),upe={kernelName:Om,backendName:"webgl",kernelFunc:lpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4="return a + b;",cpe=ma({opSnippet:R4,packedOpSnippet:R4,supportsComplex:!0,cpuKernelImpl:bde}),fpe={kernelName:Ch,backendName:"webgl",kernelFunc:cpe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dpe{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const s=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hpe{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const s=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ck(n){const{inputs:e,backend:t}=n,r=e;if(r.length===1)return Xi({inputs:{x:r[0]},backend:t});if(r.length>xe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(r.length/2),d=ck({inputs:r.slice(0,c),backend:t}),m=ck({inputs:r.slice(c),backend:t});return ck({inputs:[d,m],backend:t})}const s=r.map(c=>c.dtype).reduce((c,d)=>pi(c,d)),a=r.map(c=>c.shape),u=xe().getBool("WEBGL_PACK")?new hpe(r[0].shape,a):new dpe(r[0].shape,a);return t.runWebGLProgram(u,r,s)}const ppe={kernelName:hb,backendName:"webgl",kernelFunc:ck};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mpe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r,u=s.shape.length,c=wn(a,s.shape);let d=c;const m=Ur(d,u);let g=s;m!=null&&(g=Xa({inputs:{x:s},backend:t,attrs:{perm:m}}),d=ns(d.length,u)),ua("all",d,u);const[y,x]=Bs(g.shape,d),S=Re(x),k=rt({inputs:{x:g},backend:t,attrs:{shape:[-1,S]}}),C=pp(k,k.dtype,"all",t);let N;if(o){const $=ts(y,c);N=rt({inputs:{x:C},backend:t,attrs:{shape:$}})}else N=rt({inputs:{x:C},backend:t,attrs:{shape:y}});return t.disposeIntermediateTensorInfo(k),t.disposeIntermediateTensorInfo(C),m!=null&&t.disposeIntermediateTensorInfo(g),N}const gpe={kernelName:Y1,backendName:"webgl",kernelFunc:mpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ype(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r,u=s.shape.length,c=wn(a,s.shape);let d=c;const m=Ur(d,u);let g=s;m!=null&&(g=Xa({inputs:{x:s},backend:t,attrs:{perm:m}}),d=ns(d.length,u)),ua("any",d,u);const[y,x]=Bs(g.shape,d),S=Re(x),k=rt({inputs:{x:g},backend:t,attrs:{shape:[-1,S]}}),C=pp(k,k.dtype,"any",t);let N;if(o){const $=ts(y,c);N=rt({inputs:{x:C},backend:t,attrs:{shape:$}})}else N=rt({inputs:{x:C},backend:t,attrs:{shape:y}});return t.disposeIntermediateTensorInfo(k),t.disposeIntermediateTensorInfo(C),m!=null&&t.disposeIntermediateTensorInfo(g),N}const vpe={kernelName:Q1,backendName:"webgl",kernelFunc:ype};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bpe{constructor(e,t,r){this.variableNames=["A"];const{windowSize:s,batchSize:a,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];const u=t==="max"?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${c};
          float candidate = getA(batch, inIdx);
          if (candidate ${u} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xpe{constructor(e,t,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,U(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],o=Math.ceil(a/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const u=this.outputShape,c=u.length,d=pr(c),m=Ka("coords",c);let g,y;if(o===1){y=c+1;const B=pr(y);g=`
        ${B} sourceLocR = ${B}(${m.join()}, 0);
        ++${m[c-1]};
        ${B} sourceLocG = ${B}(${m.join()}, 0);
        ++${m[c-2]};
        ${B} sourceLocA = ${B}(${m.join()}, 0);
        --${m[c-1]};
        ${B} sourceLocB = ${B}(${m.join()}, 0);
        --${m[c-2]};`}else y=c,g=`
        ${d} sourceLocR = coords;
        ++${m[c-1]};
        ${d} sourceLocG = coords;
        ++${m[c-2]};
        ${d} sourceLocA = coords;
        --${m[c-1]};
        ${d} sourceLocB = coords;
        --${m[c-2]};`;const x=["x","y","z","w","u","v"].slice(0,y),S="."+x[y-1],k=x.map(B=>"int "+B),C=Ka("sourceLocR",y-1).concat("inIdx.r"),N=Ka("sourceLocG",y-1).concat("inIdx.g"),$=Ka("sourceLocB",y-1).concat("inIdx.b"),A=Ka("sourceLocA",y-1).concat("inIdx.a"),D=r==="max"?"greaterThan":"lessThan",L=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${N.join()}),
                             getBestIndicesAChannel(${$.join()}),
                             getBestIndicesAChannel(${A.join()})));`,P=`vec4(
            getAChannel(${C.join()}),
            hasNextCol ? getAChannel(${N.join()}) : 0.,
            hasNextRow ? getAChannel(${$.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${A.join()}) : 0.)`,W=s?"":`
      float getBestIndicesAChannel(${k.join()}) {
        return getChannel(getBestIndicesA(${x.join()}),
                                          vec2(${x.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${k.join()}) {
        return getChannel(getA(${x.join()}),
                               vec2(${x.slice(-2).join()}));
      }
      ${W}
      void main() {
        ${d} coords = getOutputCoords();
        bool hasNextCol = ${m[c-1]} < ${u[c-1]-1};
        bool hasNextRow = ${m[c-2]} < ${u[c-2]-1};
        ${g}
        ivec4 srcIdx = ivec4(sourceLocR${S}, sourceLocG${S},
          sourceLocB${S}, sourceLocA${S}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${P};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${L}
          vec4 candidate = ${P};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${D}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4(n,e,t,r=null){let s=e.shape[0],a=e.shape[1];r!=null&&(s=r.shape[0],a=r.shape[1]);const o=eT(a),u={windowSize:o,inSize:a,batchSize:s,outSize:Math.ceil(a/o)},c=new bpe(u,t,r==null),d=[e];r!=null&&d.push(r);const m=n.runWebGLProgram(c,d,"int32");if(m.shape[1]===1)return m;const g=D4(n,e,t,m);return n.disposeIntermediateTensorInfo(m),g}function _4(n,e,t,r=null){const s=r!=null?r.shape:e.shape,a=s[s.length-1],o=eT(a),u=new xpe(s,o,t,r==null),c=r==null?[e]:[e,r],d=n.runWebGLProgram(u,c,"int32");if(d.shape.length===e.shape.length){const m=_4(n,e,t,d);return n.disposeIntermediateTensorInfo(d),m}return d}function A4(n,e,t,r){const s=[t];if(ua("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!xe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],o=n.texData.get(e.dataId),u=o!==null&&o.isPacked;let c=e;u&&(c=n.unpackTensor(e),a.push(c));const[d,m]=Bs(c.shape,s),g=Re(m),y=rt({inputs:{x:c},backend:n,attrs:{shape:[-1,g]}});a.push(y);const x=D4(n,y,r);a.push(x);const S=rt({inputs:{x},backend:n,attrs:{shape:d}});return a.forEach(k=>n.disposeIntermediateTensorInfo(k)),S}return _4(n,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wpe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a}=r;let o=wn(a,s.shape);const u=Ur(o,s.shape.length);let c=s;const d=[];u!=null&&(c=Xa({inputs:{x:s},backend:t,attrs:{perm:u}}),d.push(c),o=ns(o.length,c.shape.length)),ua("argMax",[o[0]],c.shape.length);const m=A4(t,c,o[0],"max");return d.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}const Spe={kernelName:pb,backendName:"webgl",kernelFunc:wpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cpe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a}=r;let o=wn(a,s.shape);const u=Ur(o,s.shape.length);let c=s;const d=[];u!=null&&(c=Xa({inputs:{x:s},backend:t,attrs:{perm:u}}),d.push(c),o=ns(o.length,c.shape.length)),ua("argMin",[o[0]],c.shape.length);const m=A4(t,c,o[0],"min");return d.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}const Tpe={kernelName:mb,backendName:"webgl",kernelFunc:Cpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kpe=el+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Epe=Bn({opSnippet:kpe}),Npe={kernelName:Fm,backendName:"webgl",kernelFunc:Epe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $pe=el+"return log(x + sqrt(x * x + 1.0));",Ipe=Bn({opSnippet:$pe}),Rpe={kernelName:Lm,backendName:"webgl",kernelFunc:Ipe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dpe=el+`
  return atan(x);
`,_pe=Bn({opSnippet:Dpe}),Ape={kernelName:Mm,backendName:"webgl",kernelFunc:_pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ope=A_+`
  return atan(a, b);
`,Fpe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+hp+`
  return result;
`,Lpe=ma({opSnippet:Ope,packedOpSnippet:Fpe}),Mpe={kernelName:Pm,backendName:"webgl",kernelFunc:Lpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zpe=el+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Ppe=Bn({opSnippet:zpe}),Bpe={kernelName:zm,backendName:"webgl",kernelFunc:Ppe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I0{constructor(e,t,r,s=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,u=e.strideHeight,c=e.strideWidth,d=e.dilationHeight,m=e.dilationWidth,g=e.effectiveFilterHeight,y=e.effectiveFilterWidth,x=e.padInfo.top,S=e.padInfo.left;this.outputShape=e.outShape;const k=t==="avg",C=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,N=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let $="0.0";if(k||($="-1.0 / 1e-20"),r){const B=">=";this.userCode=`
        const ivec2 strides = ivec2(${u}, ${c});
        const ivec2 pads = ivec2(${x}, ${S});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${g};
              wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${y};
                wC += ${m}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${B} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?a?C:N:`wR * ${y} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const A="max";let D=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(D="avgValue / max(count, 1.0)");const L=Math.floor(o/4)*4,P=o%4,W=`
      if (${k}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${A}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${u}, ${c});
      const ivec2 pads = ivec2(${x}, ${S});
      const float initializationValue = ${$};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${$});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${g};
            wR += ${d}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${L}; wC += 4) {
            int xC = xCCorner + wC * ${m};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${m}, d),
              getValue(batch, xR, xC + 2 * ${m}, d),
              getValue(batch, xR, xC + 3 * ${m}, d)
            );

            ${W}
          }

          int xC = xCCorner + ${L};
          if (${P===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${W}
          } else if (${P===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${m}, d),
              initializationValue,
              initializationValue
            );

            ${W}
          } else if (${P===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${m}, d),
              getValue(batch, xR, xC + 2 * ${m}, d),
              initializationValue
            );

            ${W}
          }
        }
        setOutput(${D});
      }
    `}}class F_{constructor(e,t,r,s=!1,a=!1){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,u=e.strideDepth,c=e.strideHeight,d=e.strideWidth,m=e.dilationDepth,g=e.dilationHeight,y=e.dilationWidth,x=e.effectiveFilterDepth,S=e.effectiveFilterHeight,k=e.effectiveFilterWidth,C=e.padInfo.front,N=e.padInfo.top,$=e.padInfo.left;this.outputShape=e.outShape;const A=t==="avg";let D="0.0";if(A||(D="-1.0 / 1e-20"),r){const X=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${u}, ${c}, ${d});
        const ivec3 pads = ivec3(${C}, ${N}, ${$});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${x};
              wD += ${m}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${S};
                wR += ${g}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${k};
                  wC += ${y}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${X} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${S} * ${k} +
                      wR * ${k} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const L="max";let P=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;t==="avg"&&(P="avgValue / max(count, 1.0)");const W=Math.floor(o/4)*4,B=o%4,G=`
      if (${A}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${L}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${u}, ${c}, ${d});
      const ivec3 pads = ivec3(${C}, ${N}, ${$});
      const float initializationValue = ${D};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${D});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${x};
            wD += ${m}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${S};
            wR += ${g}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${W}; wC += 4) {
              int xC = xCCorner + wC * ${y};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${y}, ch),
                getValue(batch, xD, xR, xC + 2 * ${y}, ch),
                getValue(batch, xD, xR, xC + 3 * ${y}, ch)
              );

              ${G}
            }

            int xC = xCCorner + ${W};
            if (${B===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${G}
            } else if (${B===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${y}, ch),
                initializationValue,
                initializationValue
              );

              ${G}
            } else if (${B===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${y}, ch),
                getValue(batch, xD, xR, xC + 2 * ${y}, ch),
                initializationValue
              );

              ${G}
            }
          }
        }
        setOutput(${P});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vpe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;fy(s,"avgPool");const{filterSize:a,strides:o,pad:u,dimRoundingMode:c}=r,d=1;U(la(o,d),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`);const m=Go(s.shape,a,o,d,u,c);if(m.filterWidth===1&&m.filterHeight===1&&Nn(m.inShape,m.outShape))return Xi({inputs:{x:s},backend:t});const g=new I0(m,"avg",!1);return t.runWebGLProgram(g,[s],"float32")}const Upe={kernelName:gb,backendName:"webgl",kernelFunc:Vpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:a,strides:o,pad:u,dimRoundingMode:c,dataFormat:d}=r,m=[1,1,1],g=Fc(s.shape,a,o,m,u,c,d),y=new F_(g,"avg",!1);return t.runWebGLProgram(y,[s],"float32")}const Hpe={kernelName:yb,backendName:"webgl",kernelFunc:Wpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jpe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,m=c-1-e.padInfo.top,g=d-1-e.padInfo.left,y=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${c};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${d};
            wC+= ${u}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Gpe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,s=e.filterWidth,a=e.strideDepth,o=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,m=e.dilationWidth,g=e.effectiveFilterDepth,y=e.effectiveFilterHeight,x=e.effectiveFilterWidth,S=g-1-e.padInfo.front,k=y-1-e.padInfo.top,C=x-1-e.padInfo.left,N=1/(t*r*s);this.userCode=`
      const ivec3 pads = ivec3(${S}, ${k}, ${C});
      const float avgMultiplier = float(${N});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${c}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${y};
              wR += ${d}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${x};
                wC += ${m}) {
              float dyC = float(dyCCorner + wC) / ${u}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qpe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,o=a,{filterSize:u,strides:c,pad:d,dimRoundingMode:m}=r,g=[1,1,1],y=Fc(o.shape,u,c,g,d,m),x=new Gpe(y);return t.runWebGLProgram(x,[s],o.dtype)}const Kpe={kernelName:J1,backendName:"webgl",kernelFunc:qpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpe(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,o=a;fy([s,a],"avgPoolGrad");const{filterSize:u,strides:c,pad:d}=r,m=Go(o.shape,u,c,1,d),g=new jpe(m);return t.runWebGLProgram(g,[s],o.dtype)}const Ype={kernelName:Z1,backendName:"webgl",kernelFunc:Xpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qpe(n){const{inputs:e,backend:t,attrs:r}=n,{a:s,b:a}=e,{transposeA:o,transposeB:u}=r;return uk({a:s,b:a,transposeA:o,transposeB:u,backend:t})}const Zpe={kernelName:vb,backendName:"webgl",kernelFunc:Qpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jpe{constructor(e,t,r,s,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],cn(e,t),cn(e,r);let u="0.0";s!=null&&(cn(e,s),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");let c="1.0";a!=null&&(cn(e,a),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${u};
        float scale = ${c};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eme{constructor(e,t,r,s,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],cn(e,t),cn(e,r);let u="vec4(0.0)";s!=null&&(cn(e,s),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");let c="vec4(1.0)";a!=null&&(cn(e,a),this.variableNames.push("scale"),c="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${u};
        vec4 scale = ${c};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme={kernelName:Db,backendName:"webgl",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r,mean:s,variance:a,offset:o,scale:u}=n;U(s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),U(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),U(u==null||s.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=t;c==null&&(c=.001);const d=[r,s,a];let m=null;o!=null&&(m=o.shape,d.push(o));let g=null;u!=null&&(g=u.shape,d.push(u));const y=xe().getBool("WEBGL_PACK_NORMALIZATION")?new eme(r.shape,s.shape,a.shape,m,g,c):new Jpe(r.shape,s.shape,a.shape,m,g,c);return e.runWebGLProgram(y,d,d[0].dtype)}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nme{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=pr(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=rme(this.rank);let s;const a=e.map((o,u)=>`sourceLoc.${L_[u]} = start[${u}] + coords.${L_[u]};`);s=`
        ${t} sourceLoc;
        ${t} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const L_=["x","y","z","w","u","v"];function rme(n){if(n===1)return"sourceLoc";if(n<=6)return L_.slice(0,n).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sme{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=pr(this.rank),r=Ka("coords",this.rank),s=Ka("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${a})`,u=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,c=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,d=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((m,g)=>`start[${g}]`).join()});`:e.map((m,g)=>`${s[g]} = ${r[g]} + start[${g}];`).join(`
`);this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${d}
        vec4 result = vec4(0.);
        ${u}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ame(n,e,t,r){const s=r.texData.get(n.dataId),a=r.makeTensorInfo(t,n.dtype),o=r.texData.get(a.dataId);Object.assign(o,s),o.refCount=1,o.shape=t,o.dtype=n.dtype;let u=$2(e,Ot(n.shape));s.slice&&(u+=s.slice.flatOffset),o.slice={flatOffset:u,origDataId:s.slice&&s.slice.origDataId||n.dataId};const c=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,c+1),a}function vy(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:a,size:o}=r,[u,c]=JC(s,a,o);if(k2(s,u,c),Re(c)===0)return t.makeTensorInfo(c,s.dtype,[]);if(t.shouldExecuteOnCPU([s])||s.dtype==="string"){const g=t.texData.get(s.dataId),y=Qde(g.values,u,c,s.shape,s.dtype);return t.makeTensorInfo(c,s.dtype,y)}const{isPacked:d}=t.texData.get(s.dataId),m=N2(s.shape,u,c);if(d||!m){const g=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sme(c):new nme(c),y=[u];return t.runWebGLProgram(g,[s],s.dtype,y)}return t.uploadToGPU(s.dataId),ame(s,u,c,t)}const ime={kernelName:ix,backendName:"webgl",kernelFunc:vy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ome={kernelName:bb,backendName:"webgl",kernelFunc:n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:a,crops:o}=r;U(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const u=a.reduce(($,A)=>$*A),c=Xx(s.shape,a,u),d=Yx(c.length,a.length),m=Qx(s.shape,a,u),g=O2(o,a.length),y=F2(m,o,a.length),x=[],S=rt({inputs:{x:s},backend:t,attrs:{shape:c}}),k=Xa({inputs:{x:S},backend:t,attrs:{perm:d}}),C=rt({inputs:{x:k},backend:t,attrs:{shape:m}}),N=vy({inputs:{x:C},backend:t,attrs:{begin:g,size:y}});return x.push(S),x.push(k),x.push(C),x.forEach($=>t.disposeIntermediateTensorInfo($)),N}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lme(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:a}=e,{size:o}=r,u=t.readSync(s.dataId),c=t.readSync(a.dataId),d=l4(u,c,a.dtype,a.shape,o);return t.makeTensorInfo([o],a.dtype,d)}const ume={kernelName:eS,backendName:"webgl",kernelFunc:lme};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cme=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,fme=`
  return float(int(a.r) & int(b.r));
`;function dme(n){const{inputs:e,backend:t}=n,{a:r,b:s}=e,a=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=xe().getNumber("WEBGL_VERSION");if(t.shouldExecuteOnCPU([r,s])||o===1){const c=t.texData.get(r.dataId).values,d=t.texData.get(s.dataId).values,[m,g]=wde(r.shape,s.shape,c,d,r.dtype),y=t.makeTensorInfo(g,r.dtype),x=t.texData.get(y.dataId);return x.values=m,y}let u;return a?u=new gy(cme,r.shape,s.shape,!1):u=new dp(fme,r.shape,s.shape),t.runWebGLProgram(u,[r,s],r.dtype)}const hme={kernelName:xb,backendName:"webgl",kernelFunc:dme};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pme(n){const{inputs:e,backend:t}=n,{s0:r,s1:s}=e,a=t.readSync(r.dataId),o=t.readSync(s.dataId),u=cn(Array.from(a),Array.from(o));return t.makeTensorInfo([u.length],"int32",Int32Array.from(u))}const mme={kernelName:tS,backendName:"webgl",kernelFunc:pme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4=ma({opSnippet:"return float(a != b);",cpuKernelImpl:Ude,dtype:"bool"}),gme={kernelName:Kb,backendName:"webgl",kernelFunc:O4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R0(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.texData.get(r.dataId);return Xi({inputs:{x:s.complexTensorInfos.real},backend:t})}const yme={kernelName:MS,backendName:"webgl",kernelFunc:R0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vme="return float(int(x));";function bme(n,e){const t=new Bu(n.shape,vme),r=e.runWebGLProgram(t,[n],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M_(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return Xi({inputs:{x:s},backend:t});const o=vs(s.shape),u=M_({inputs:{x:s},backend:t,attrs:{dtype:"float32"}}),c=vd({inputs:{real:u,imag:o},backend:t});return o.dispose(),t.disposeIntermediateTensorInfo(u),c}if(s.dtype==="complex64"){const o=R0({inputs:{input:s},backend:t}),u=M_({inputs:{x:o},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(o),u}if(!b$(s.dtype,a)){const o=Xi({inputs:{x:s},backend:t});return{dataId:o.dataId,shape:o.shape,dtype:a}}if(t.shouldExecuteOnCPU([s])){const o=t.texData.get(s.dataId).values,[u,c,d]=Sde(o,s.shape,s.dtype,a);return t.makeTensorInfo(u,c,d)}if(a==="int32")return bme(s,t);if(a==="bool"){const o=t.makeTensorInfo([],"bool",Ls("bool",1)),c=O4({inputs:{a:s,b:o},backend:t});return t.disposeIntermediateTensorInfo(o),c}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${a}`)}const xme={kernelName:Bm,backendName:"webgl",kernelFunc:M_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4="return ceil(x);",wme=Bn({opSnippet:F4,packedOpSnippet:F4,cpuKernelImpl:Cde}),Sme={kernelName:Vm,backendName:"webgl",kernelFunc:wme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cme{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tme{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kme(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{clipValueMin:a,clipValueMax:o}=r;let u;xe().getBool("WEBGL_PACK_CLIP")?u=new Tme(s.shape):u=new Cme(s.shape);const c=[[a],[o]];return t.runWebGLProgram(u,[s],s.dtype,c)}const Eme={kernelName:Um,backendName:"webgl",kernelFunc:kme};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nme{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4(n,e){return{dataId:e.dataId,dtype:e.dtype,shape:n.shape}}function $me(n){const{inputs:e,backend:t}=n,{x:r}=e,s=t.texData.get(r.dataId),a=new Nme(r.shape),o=[L4(r,s.complexTensorInfos.real),L4(r,s.complexTensorInfos.imag)];return t.runWebGLProgram(a,o,o[0].dtype)}const Ime={kernelName:wb,backendName:"webgl",kernelFunc:$me};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rme{constructor(e){this.outputShape=[],this.outputShape=_u(e,1),this.variableNames=e.map((o,u)=>`T${u}`);const t=new Array(e.length-1);t[0]=e[0][1];for(let o=1;o<t.length;o++)t[o]=t[o-1]+e[o][1];const r=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<t.length;o++){const u=t[o-1];r.push(`else if (yC < ${t[o]}) setOutput(getT${o}(yR, yC-${u}));`)}const s=t.length,a=t[t.length-1];r.push(`else setOutput(getT${s}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dme{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=_u(e,t);const r=this.outputShape,s=r.length,a=pr(s),o=Ka("coords",s),u=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((k,C)=>`T${C}`);const c=new Array(e.length-1);c[0]=e[0][t];for(let k=1;k<c.length;k++)c[k]=c[k-1]+e[k][t];const d=u[t],m=u.slice(-2),g=u.join();let y=`if (${d} < ${c[0]}) {
        return getChannel(
            getT0(${g}), vec2(${m.join()}));
        }`;for(let k=1;k<c.length;k++){const C=c[k-1];y+=`
        if (${d} < ${c[k]}  && ${d} >= ${c[k-1]}) {
          return getChannel(
            getT${k}(${fk(u,d,C)}),
            vec2(${fk(m,d,C)}));
        }`}const x=c.length,S=c[c.length-1];y+=`
        return getChannel(
          getT${x}(${fk(u,d,S)}),
          vec2(${fk(m,d,S)}));`,this.userCode=`
      float getValue(${u.map(k=>"int "+k)}) {
        ${y}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function fk(n,e,t){const r=n.indexOf(e);return n.map((a,o)=>o===r?`${a} - ${t}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dk(n){const{inputs:e,backend:t}=n,{input:r}=e,s=t.texData.get(r.dataId);return Xi({inputs:{x:s.complexTensorInfos.imag},backend:t})}const _me={kernelName:CS,backendName:"webgl",kernelFunc:dk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D0(n,e,t){const r=n[0].dtype;if(r==="complex64"){const x=n.map($=>R0({inputs:{input:$},backend:t})),S=n.map($=>dk({inputs:{input:$},backend:t})),k=D0(x,e,t),C=D0(S,e,t),N=vd({inputs:{real:k,imag:C},backend:t});return x.forEach($=>t.disposeIntermediateTensorInfo($)),S.forEach($=>t.disposeIntermediateTensorInfo($)),t.disposeIntermediateTensorInfo(k),t.disposeIntermediateTensorInfo(C),N}let s=t.shouldExecuteOnCPU(n);if(r==="string"&&(s=!0),s){const x=n.map(D=>{const P=[-1,Re(D.shape.slice(e))];return rt({inputs:{x:D},backend:t,attrs:{shape:P}})}),S=x.map(D=>({vals:t.readSync(D.dataId),shape:D.shape})),k=_u(x.map(D=>D.shape),1),C=x[0].shape[0]===1,N=Tde(S,k,r,C),$=_u(n.map(D=>D.shape),e),A=t.makeTensorInfo($,r,N);return x.forEach(D=>t.disposeIntermediateTensorInfo(D)),A}const a=n.filter(x=>Re(x.shape)>0),o=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const x=o?new Bu(n[0].shape,gd):new yd(n[0].shape,gd);return t.runWebGLProgram(x,n,r)}const u=xe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>u){const x=[];for(let k=0;k<a.length;k+=u){const C=a.slice(k,k+u);x.push(D0(C,e,t))}const S=D0(x,e,t);for(const k of x)t.disposeIntermediateTensorInfo(k);return S}if(o){const x=new Dme(a.map(S=>S.shape),e);return t.runWebGLProgram(x,a,r)}const{tensors2D:c,outShape:d}=Ame(a,e,t),m=new Rme(c.map(x=>x.shape)),g=t.runWebGLProgram(m,c,r);c.forEach(x=>t.disposeIntermediateTensorInfo(x));const y=rt({inputs:{x:g},attrs:{shape:d},backend:t});return t.disposeIntermediateTensorInfo(g),y}function Ame(n,e,t){const r=_u(n.map(a=>a.shape),e);return{tensors2D:n.map(a=>rt({inputs:{x:a},attrs:{shape:[-1,Re(a.shape.slice(e))]},backend:t})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M4(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r,a=wn(s,e[0].shape)[0],o=e.map(d=>d.shape);D2(o,a);const u=_u(e.map(d=>d.shape),a);if(Re(u)===0)return t.makeTensorInfo(u,e[0].dtype,[]);const c=e.filter(d=>Re(d.shape)>0);return c.length===1?Xi({inputs:{x:c[0]},backend:t}):D0(c,a,t)}const Ome={kernelName:Sb,backendName:"webgl",kernelFunc:M4};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z4{constructor(e,t=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,u=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,m=e.dilationHeight,g=e.dilationWidth,y=e.filterHeight,x=e.filterWidth,S=Math.floor(e.inChannels/4)*4,k=e.inChannels%4,C=e.dataFormat==="channelsLast",N=C?1:2,$=C?2:3,A=C?3:1;let D="",L="";r&&(s?D=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?D=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:D=`
          float activation(float x) {
            ${r}
          }
        `,L="result = activation(result);");const P=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${D}

      const ivec2 strides = ivec2(${c}, ${d});
      const ivec2 pads = ivec2(${o}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${A}];

        ivec2 xRCCorner =
            ivec2(coords[${N}], coords[${$}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${y}; wR++) {
          int xR = xRCorner + wR * ${m};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${x}; wC++) {
            int xC = xCCorner + wC * ${g};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${S}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${C}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${k===1}) {

              if (${C}) {
                dotProd +=
                    getX(batch, xR, xC, ${S}) *
                    getW(wR, wC, ${S}, d2);
              } else {
                dotProd +=
                    getX(batch, ${S}, xR, xC) *
                    getW(wR, wC, ${S}, d2);
              }

            } else if (${k===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${S}, d2),
                getW(wR, wC, ${S} + 1, d2)
              );

              if (${C}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${S}),
                  getX(batch, xR, xC, ${S} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${S}, xR, xC),
                  getX(batch, ${S} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${k===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${S}, d2),
                getW(wR, wC, ${S} + 1, d2),
                getW(wR, wC, ${S} + 2, d2)
              );

              if (${C}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${S}),
                  getX(batch, xR, xC, ${S} + 1),
                  getX(batch, xR, xC, ${S} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${S}, xR, xC),
                  getX(batch, ${S} + 1, xR, xC),
                  getX(batch, ${S} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${P}
        ${L}
        setOutput(result);
      }
    `}}class Fme{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,m=e.dilationWidth,g=e.filterDepth,y=e.filterHeight,x=e.filterWidth,S=Math.floor(e.inChannels/4)*4,k=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${o}, ${u});
      const ivec3 pads = ivec3(${t}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${g}; wF++) {
          int xF = xFCorner + wF * ${c};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y}; wR++) {
            int xR = xRCorner + wR * ${d};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${x}; wC++) {
              int xC = xCCorner + wC * ${m};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${S}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${k===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${S}) *
                  getW(wF, wR, wC, ${S}, d2);
              } else if (${k===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${S}),
                  getX(batch, xF, xR, xC, ${S} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${S}, d2),
                  getW(wF, wR, wC, ${S} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${k===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${S}),
                  getX(batch, xF, xR, xC, ${S} + 1),
                  getX(batch, xF, xR, xC, ${S} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${S}, d2),
                  getW(wF, wR, wC, ${S} + 1, d2),
                  getW(wF, wR, wC, ${S} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class P4{constructor(e,t=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wa(this.outputShape.length);const o=e.padInfo.left,u=e.strideWidth,c=e.dilationWidth,d=e.filterHeight,m=e.filterWidth,g=m;let y=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let C=0;C<m;C++)y+=`
           vec4 xTexelC${C*2};
           int xTexelC${C*2}Ready;
           vec4 xTexelC${C*2+1};
           int xTexelC${C*2+1}Ready;
           vec4 xC${C};`;y+=`
     for (int r = 0; r < ${d}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let C=0;C<m;C++)y+=`
           xTexelC${C*2} = vec4(0.0);
           xTexelC${C*2}Ready = 0;
           xTexelC${C*2+1} = vec4(0.0);
           xTexelC${C*2+1}Ready = 0;
           xC${C} = vec4(0.0);`;y+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let C=0;C<(g+1)/2;C++){const N=C*2;if(y+=`
           xC = xCCorner + ${N*c};
           `,u===1){if(N<m&&(o%2===1?(y+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N}Ready == 0) {
                   xTexelC${N} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${N}.zw = vec2(0.0);
                   }
                   xTexelC${N}Ready = 1;
                 }
               `,c===1&&N>0?y+=`
                 xC${N} = vec4(xTexelC${N-2}.zw, xTexelC${N}.xy);
                 `:y+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${N} = vec4(previous.zw, xTexelC${N}.xy);
                   } else {
                     xC${N} = vec4(0.0, 0.0, xTexelC${N}.xy);
                   }
                   `):y+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${N}Ready == 0) {
                   xTexelC${N} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${N}.zw = vec2(0.0);
                   }
                   xTexelC${N}Ready = 1;
                 }

                 xC${N} = xTexelC${N};
                 `,N+1<m)){const $=o%2===0?j1(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(y+=`
                   xCOffset = xC + imod(pads[1], 2) + ${$};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                     xTexelC${N+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${N+1}.zw = vec2(0.0);
                     }
                     xTexelC${N+1}Ready = 1;
                   }
                   `,c>1?y+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${N+1} = vec4(previous.zw, xTexelC${N+1}.xy);
                     } else {
                      xC${N+1} = vec4(0.0, 0.0, xTexelC${N+1}.xy);
                     }
                     `:y+=`
                     xC${N+1} = vec4(xTexelC${N}.zw, xTexelC${N+1}.xy);
                     `):$===1?y+=`
                     xC${N+1} = xTexelC${N};
                     `:y+=`
                     xCOffset = xC + ${$};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                       xTexelC${N+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${N+1}.zw = vec2(0.0);
                       }
                       xTexelC${N+1}Ready = 1;
                     }

                     xC${N+1} = xTexelC${N+1};
                     `}}else N<m&&(o%2===1?(y+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N}Ready == 0) {
                   xTexelC${N} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${N}.zw = vec2(0.0);
                   }
                   xTexelC${N}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${N+1}Ready == 0) {
                   xTexelC${N+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${N+1}.zw = vec2(0.0);
                   }
                   xTexelC${N+1}Ready = 1;
                 }

                 xC${N} = vec4(xTexelC${N}.zw, xTexelC${N+1}.zw);
               `,N+1<m&&(y+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${N+1} = vec4(xTexelC${N+1}.xy, final.xy);
                 `)):(y+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${N}Ready == 0) {
                   xTexelC${N} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${N}.zw = vec2(0.0);
                   }
                   xTexelC${N}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                   xTexelC${N+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${N+1}.zw = vec2(0.);
                   }
                   xTexelC${N+1}Ready = 1;
                 }

                 xC${N} = vec4(
                   xTexelC${N}.xy, xTexelC${N+1}.xy);
               `,N+1<m&&(y+=`
                   xC${N+1} = vec4(xTexelC${N}.zw, xTexelC${N+1}.zw);
                 `)));N<m&&(y+=`
             wTexel = getW(r, ${N}, d1, d2);
             dotProd += xC${N}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${N}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,N+1<m&&(y+=`
               wTexel = getW(r, ${N+1}, d1, d2);
               dotProd += xC${N+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${N+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}y+=`
     }
   `,y+=`
     }
   `,y+=`
     }
   `;let x="",S="";r&&(s?x=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?x=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:x=`vec4 activation(vec4 x) {
           ${r}
         }`,S="result = activation(result);");const k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${x}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${y}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${k}
         ${S}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lme{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=wa(this.outputShape.length);const{dataFormat:r}=t,s=qa(),a=r==="channelsLast",o=a?1:2,u=a?2:3,c=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let d="";for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)d+=`
          blockIndex = rc.z + ${g};
          pos = rc.y + ${m};

          ${c}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${u}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${m*2+g}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${m*2+g}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${d}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hk(n,e){const t=n.length;return t>=3?e?[...n.slice(0,-3),n[t-3]*n[t-2],n[t-1]]:[...n.slice(0,-3),n[t-3],n[t-2]*n[t-1]]:!e&&t===1&&n[0]>1?[n[0],1]:null}function B4({x:n,filter:e,convInfo:t,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:u=null}){const c=n.shape,d=r.texData.get(n.dataId),m=t.inChannels,g=c[0]*c[1]*c[2],y=t.outChannels,x=t.dataFormat==="channelsLast",S=!1,k=!1;let C;const N=[];if(a!=null){const D=hk(a.shape,x);D!=null&&(a=rt({inputs:{x:a},backend:r,attrs:{shape:D}}),N.push(a))}if(s!=null){const D=hk(s.shape,x);D!=null&&(s=rt({inputs:{x:s},backend:r,attrs:{shape:D}}),N.push(s))}if(!((g===1||y===1)&&m>$4)&&d.isPacked&&x&&d.texture!=null&&c[2]%2!==0&&Nn(d.shape.slice(-3),c.slice(-3))){const D=c[0]*c[1]*(c[2]+1),L={dataId:n.dataId,shape:[1,D,t.inChannels],dtype:n.dtype},P=d.shape;d.shape=d.shape.slice(),d.shape[d.shape.length-2]++,U(k0(d.shape,L.shape),()=>`packed reshape ${d.shape} to ${L.shape} isn't free`);const W=rt({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}});N.push(W);const B=uk({a:L,b:W,backend:r,transposeA:S,transposeB:k,bias:s,activation:u,preluActivationWeights:a,leakyreluAlpha:o}),G=r.texData.get(B.dataId);U(G.isPacked,()=>"batchMatMul result is expected to be packed"),d.shape=P,G.shape=t.outShape,C=Xi({inputs:{x:B},backend:r}),C.shape=t.outShape,N.push(B)}else{const D=t.outHeight*t.outWidth,L=rt({inputs:{x:n},backend:r,attrs:{shape:x?[t.batchSize,D,t.inChannels]:[t.batchSize,t.inChannels,D]}}),P=rt({inputs:{x:e},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}}),W=uk({a:x?L:P,b:x?P:L,transposeA:!x,transposeB:k,backend:r,bias:s,activation:u,preluActivationWeights:a,leakyreluAlpha:o});C=rt({inputs:{x:W},backend:r,attrs:{shape:t.outShape}}),N.push(L),N.push(P),N.push(W)}for(const D of N)r.disposeIntermediateTensorInfo(D);return C}function V4({x:n,filter:e,convInfo:t,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:u=null}){const{filterWidth:c,filterHeight:d,inChannels:m,outWidth:g,outHeight:y,dataFormat:x}=t,S=x==="channelsLast",k=c*d*m,C=y*g,N=[t.batchSize,k,C],$=!0,A=!1,D=[];if(a!=null){const te=hk(a.shape,S);te!=null&&(a=rt({inputs:{x:a},backend:r,attrs:{shape:te}}),D.push(a))}if(s!=null){const te=hk(s.shape,S);te!=null&&(s=rt({inputs:{x:s},backend:r,attrs:{shape:te}}),D.push(s))}const L=rt({inputs:{x:e},backend:r,attrs:{shape:[1,k,Re(e.shape)/k]}});D.push(L);const P=new Lme(N,t),W=[n.shape,[t.padInfo.top,t.padInfo.left],[t.strideHeight,t.strideWidth],[t.dilationHeight,t.dilationWidth],[t.inChannels],[t.filterWidth*t.inChannels],[t.outWidth]],B=r.runWebGLProgram(P,[n],"float32",W),G=rt({inputs:{x:B},backend:r,attrs:{shape:N}});D.push(B),D.push(G);const X=s!=null,re=a!=null,ue=u==="leakyrelu",ne=u?$0(u,!0):null,me=new C4(S?G.shape:L.shape,S?L.shape:G.shape,S?[t.batchSize,C,t.outChannels]:[t.batchSize,t.outChannels,C],$,A,X,ne,re,ue),ge=S?[G,L]:[L,G];if(s&&ge.push(s),re&&ge.push(a),ue){const te=r.makeTensorInfo([],"float32",Rc(o,"float32"));ge.push(te),D.push(te)}const be=r.runWebGLProgram(me,ge,"float32"),pe=rt({inputs:{x:be},backend:r,attrs:{shape:t.outShape}});D.push(be);for(const te of D)r.disposeIntermediateTensorInfo(te);return pe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mme(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:o,pad:u,dataFormat:c,dilations:d,dimRoundingMode:m}=r,g=Lc(c),y=zs(s.shape,a.shape,o,d,u,m,!1,g);let x;if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))x=B4({x:s,filter:a,convInfo:y,backend:t});else if(y.strideWidth<=2&&g==="channelsLast"&&xe().getBool("WEBGL_EXP_CONV")){const k=new P4(y),C=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]];x=t.runWebGLProgram(k,[s,a],"float32",C)}else if(xe().getBool("WEBGL_CONV_IM2COL"))x=V4({x:s,filter:a,convInfo:y,backend:t});else{const k=new z4(y);x=t.runWebGLProgram(k,[s,a],"float32")}const S=rt({inputs:{x},backend:t,attrs:{shape:y.outShape}});return t.disposeIntermediateTensorInfo(x),S}const zme={kernelName:Cb,backendName:"webgl",kernelFunc:Mme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pme{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,a=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Bme{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,o=e.dataFormat==="channelsLast",u=t-1-e.padInfo.top,c=r-1-e.padInfo.left,d=o?1:2,m=o?2:3,g=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${u}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${g}];

        ivec2 dyCorner = ivec2(coords[${d}], coords[${m}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Vme{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,r=e.strideHeight,s=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,u=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${u};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Ume{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,r=e.filterHeight,s=e.filterWidth,a=e.strideDepth,o=e.strideHeight,u=e.strideWidth,c=t-1-e.padInfo.front,d=r-1-e.padInfo.top,m=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${d}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${u}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wme(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:o,pad:u,dataFormat:c,dimRoundingMode:d,filterShape:m}=r,g=Lc(c),y=zs(s.shape,m,o,1,u,d,!1,g),x=new Pme(y);return t.runWebGLProgram(x,[s,a],"float32")}const Hme={kernelName:rS,backendName:"webgl",kernelFunc:Wme};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jme{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=wa(this.outputShape.length);const t=e.filterHeight,r=e.filterWidth,s=t-1-e.padInfo.top,a=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gme(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{inputShape:o,strides:u,pad:c,dataFormat:d,dimRoundingMode:m}=r,g=Lc(d),y=zs(o,a.shape,u,1,c,m,!1,g);if(xe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&g==="channelsLast"){const x=[[y.strideHeight,y.strideWidth]],S=new jme(y);return t.runWebGLProgram(S,[s,a],"float32",x)}else{const x=new Bme(y);return t.runWebGLProgram(x,[s,a],"float32")}}const qme={kernelName:Tb,backendName:"webgl",kernelFunc:Gme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kme(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:o,pad:u,dilations:c}=r,d=Xf(s.shape,a.shape,o,c,u),m=new Fme(d);return t.runWebGLProgram(m,[s,a],"float32")}const Xme={kernelName:kb,backendName:"webgl",kernelFunc:Kme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yme(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:o,pad:u,filterShape:c}=r,d=Xf(s.shape,c,o,1,u),m=new Vme(d);return t.runWebGLProgram(m,[s,a],"float32")}const Qme={kernelName:sS,backendName:"webgl",kernelFunc:Yme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zme(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{pad:o,strides:u,inputShape:c}=r,d=Xf(c,a.shape,u,1,o),m=new Ume(d);return t.runWebGLProgram(m,[s,a],"float32")}const Jme={kernelName:aS,backendName:"webgl",kernelFunc:Zme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ege=yy+`
  return cos(x);
`,tge=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${hp}
  return result;
`,nge=Bn({opSnippet:ege,packedOpSnippet:tge}),rge={kernelName:Wm,backendName:"webgl",kernelFunc:nge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sge=Bn({opSnippet:`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`}),age={kernelName:Hm,backendName:"webgl",kernelFunc:sge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ige{constructor(e,t,r,s,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,u,c,d]=e,[m]=t,[g,y]=r;this.outputShape=[m,g,y,d];const x=s==="bilinear"?1:0,[S,k]=[`${u-1}.0`,`${c-1}.0`],[C,N,$]=g>1?[`${(u-1)/(g-1)}`,"(y2-y1) * height_ratio",`y1*${S} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${S}`],[A,D,L]=y>1?[`${(c-1)/(y-1)}`,"(x2-x1) * width_ratio",`x1*${k} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${k}`];this.userCode=`
      const float height_ratio = float(${C});
      const float width_ratio = float(${A});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${N};
        float width_scale = ${D};

        float in_y = ${$};
        if( in_y < 0.0 || in_y > ${S} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${L};
        if( in_x < 0.0 || in_x > ${k} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${x} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oge={kernelName:oS,backendName:"webgl",kernelFunc:n=>{const{inputs:e,backend:t,attrs:r}=n,{image:s,boxes:a,boxInd:o}=e,{cropSize:u,method:c,extrapolationValue:d}=r,m=new ige(s.shape,a.shape,u,c,d);return t.runWebGLProgram(m,[s,a,o],"float32")}};var _0;(function(n){n.Prod="*",n.Sum="+"})(_0||(_0={}));class U4{constructor(e,t,r,s){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,o=this.op===_0.Prod?"1.0":"0.0",u=r?o:`getX(${W4(a,"coords",this.op)})`,c=this.outputShape[this.outputShape.length-1];let d="",m="";r?(d=s?`end != ${c-1}`:"end != 0",m=s?"end + 1":"end - 1"):(d=s?`end + pow2 < ${c}`:"end >= pow2",m=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${pr(a)} coords = getOutputCoords();
        int end = ${H4(a,"coords",this.op)};
        float val = ${u};
        int pow2 = int(pow(2.0, index));
        if (${d}) {
          int idx = ${m};
          ${H4(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${W4(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function W4(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.x, ${e}.y`;if(n===3)return`${e}.x, ${e}.y, ${e}.z`;if(n===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}function H4(n,e,t){if(n===1)return`${e}`;if(n===2)return`${e}.y`;if(n===3)return`${e}.z`;if(n===4)return`${e}.w`;throw new Error(`Cumulative ${t} for rank ${n} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4(n,e,t,r,s,a){const o=e.shape.length,u=Ur([r],o);let c=e;u!=null&&(c=Xa({inputs:{x:e},backend:t,attrs:{perm:u}}));const d=ns(1,o)[0];if(d!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const m=c.shape[d];let g=Xi({inputs:{x:c},backend:t});for(let y=0;y<=Math.ceil(Math.log2(m))-1;y++){const x=new U4(n,c.shape,!1,a),S=[[y]],k=g;g=t.runWebGLProgram(x,[g],g.dtype,S),t.disposeIntermediateTensorInfo(k)}if(s){const y=new U4(n,c.shape,s,a),x=g;g=t.runWebGLProgram(y,[g],g.dtype),t.disposeIntermediateTensorInfo(x)}if(u!=null){const y=Zf(u),x=Xa({inputs:{x:g},backend:t,attrs:{perm:y}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(c),x}return g}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lge(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,exclusive:o,reverse:u}=r;return j4(_0.Prod,s,t,a,o,u)}const uge={kernelName:iS,backendName:"webgl",kernelFunc:lge};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cge(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,exclusive:o,reverse:u}=r;return j4(_0.Sum,s,t,a,o,u)}const fge={kernelName:Eb,backendName:"webgl",kernelFunc:cge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dge(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,weights:a}=e,{size:o,binaryOutput:u}=r;if(s.shape.length===1){const c=t.readSync(s.dataId),d=t.readSync(a.dataId),m=l4(c,d,a.dtype,a.shape,o);return t.makeTensorInfo([o],a.dtype,m)}else if(s.shape.length===2){const c=t.bufferSync(s),d=t.bufferSync(a),m=xde(c,d,o,u);return t.makeTensorInfo(m.shape,a.dtype,m.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const hge={kernelName:lS,backendName:"webgl",kernelFunc:dge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pge{constructor(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mge(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockSize:a,dataFormat:o}=r,u=s.shape[0],c=o==="NHWC"?s.shape[1]:s.shape[2],d=o==="NHWC"?s.shape[2]:s.shape[3],m=o==="NHWC"?s.shape[3]:s.shape[1],g=c*a,y=d*a,x=m/(a*a),S=o==="NHWC"?[u,g,y,x]:[u,x,g,y],k=new pge(S,a,o);return t.runWebGLProgram(k,[s],s.dtype)}const gge={kernelName:uS,backendName:"webgl",kernelFunc:mge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G4{constructor(e,t=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wa(this.outputShape.length);const o=e.filterHeight,u=e.filterWidth,c=e.outChannels/e.inChannels;let d="",m="";r&&(s?d=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?d=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:d=`
          float activation(float x) {
            ${r}
          }
        `,m="result = activation(result);");const g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${d}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${c};
        int q = d2 - d1 * ${c};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${u}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q4{constructor(e,t=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wa(this.outputShape.length);const o=e.outChannels/e.inChannels,u=e.padInfo.left,c=e.strideWidth,d=e.dilationWidth,m=e.filterHeight,g=e.filterWidth,y=g;let x=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let N=0;N<g;N++)x+=`
          vec4 xTexelC${N*2};
          int xTexelC${N*2}Ready;
          vec4 xTexelC${N*2+1};
          int xTexelC${N*2+1}Ready;
          vec4 xC${N};`;x+=`
    for (int r = 0; r < ${m}; r++) {
      `;for(let N=0;N<g;N++)x+=`
          xTexelC${N*2} = vec4(0.0);
          xTexelC${N*2}Ready = 0;
          xTexelC${N*2+1} = vec4(0.0);
          xTexelC${N*2+1}Ready = 0;
          xC${N} = vec4(0.0);`;x+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let N=0;N<(y+1)/2;N++){const $=N*2;if(x+=`
          xC = xCCorner + ${$*d};
          `,c===1){if($<g&&(u%2===1?(x+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$}Ready == 0) {
                  xTexelC${$} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${$}.zw = vec2(0.0);
                  }
                  xTexelC${$}Ready = 1;
                }
              `,d===1&&$>0?x+=`
                xC${$} = vec4(xTexelC${$-2}.zw, xTexelC${$}.xy);
                `:x+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${$} = vec4(previous.zw, xTexelC${$}.xy);
                  } else {
                    xC${$} = vec4(0.0, 0.0, xTexelC${$}.xy);
                  }
                  `):x+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${$}Ready == 0) {
                  xTexelC${$} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${$}.zw = vec2(0.0);
                  }
                  xTexelC${$}Ready = 1;
                }

                xC${$} = xTexelC${$};
                `,$+1<g)){const A=u%2===0?j1(d):d;d%2===0&&u%2===1||d%2!==0&&u%2!==1?(x+=`
                  xCOffset = xC + imod(pads[1], 2) + ${A};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$+1}Ready == 0) {
                    xTexelC${$+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${$+1}.zw = vec2(0.0);
                    }
                    xTexelC${$+1}Ready = 1;
                  }
                  `,d>1?x+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${$+1} = vec4(previous.zw, xTexelC${$+1}.xy);
                    } else {
                     xC${$+1} = vec4(0.0, 0.0, xTexelC${$+1}.xy);
                    }
                    `:x+=`
                    xC${$+1} = vec4(xTexelC${$}.zw, xTexelC${$+1}.xy);
                    `):A===1?x+=`
                    xC${$+1} = xTexelC${$};
                    `:x+=`
                    xCOffset = xC + ${A};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$+1}Ready == 0) {
                      xTexelC${$+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${$+1}.zw = vec2(0.0);
                      }
                      xTexelC${$+1}Ready = 1;
                    }

                    xC${$+1} = xTexelC${$+1};
                    `}}else $<g&&(u%2===1?(x+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$}Ready == 0) {
                  xTexelC${$} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${$}.zw = vec2(0.0);
                  }
                  xTexelC${$}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${$+1}Ready == 0) {
                  xTexelC${$+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${$+1}.zw = vec2(0.0);
                  }
                  xTexelC${$+1}Ready = 1;
                }

                xC${$} = vec4(xTexelC${$}.zw, xTexelC${$+1}.zw);
              `,$+1<g&&(x+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${$+1} = vec4(xTexelC${$+1}.xy, final.xy);
                `)):(x+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${$}Ready == 0) {
                  xTexelC${$} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${$}.zw = vec2(0.0);
                  }
                  xTexelC${$}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${$+1}Ready == 0) {
                  xTexelC${$+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${$+1}.zw = vec2(0.);
                  }
                  xTexelC${$+1}Ready = 1;
                }

                xC${$} = vec4(
                  xTexelC${$}.xy, xTexelC${$+1}.xy);
              `,$+1<g&&(x+=`
                  xC${$+1} = vec4(xTexelC${$}.zw, xTexelC${$+1}.zw);
                `)));$<g&&(x+=`
            wTexel = getW(r, ${$}, d1, q);
            dotProd += xC${$} * vec4(wTexel.xz, wTexel.xz);
          `,$+1<g&&(x+=`
              wTexel = getW(r, ${$+1}, d1, q);
              dotProd += xC${$+1} * vec4(wTexel.xz, wTexel.xz);
            `))}x+=`
    }
  `,x+=`
      }
    `;let S="",k="";r&&(s?S=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?S=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:S=`vec4 activation(vec4 x) {
          ${r}
        }`,k="result = activation(result);");const C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${S}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${x}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${C}
        ${k}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yge(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:o,pad:u,dilations:c,dimRoundingMode:d}=r;let m=c;m==null&&(m=[1,1]),U(la(o,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${m}'`);const g=zs(s.shape,a.shape,o,m,u,d,!0);let y;xe().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1?y=new q4(g):y=new G4(g);const x=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]];return t.runWebGLProgram(y,[s,a],"float32",x)}const vge={kernelName:Nb,backendName:"webgl",kernelFunc:yge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bge{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class xge{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,u=r-1-e.padInfo.left,c=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${u});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${c}; dm++) {
              int d2 = d1 * ${c} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wge(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,dy:a}=e,{strides:o,dilations:u,pad:c,dimRoundingMode:d,filterShape:m}=r,g=zs(s.shape,m,o,u,c,d,!0),y=new bge(g);return t.runWebGLProgram(y,[s,a],"float32")}const Sge={kernelName:cS,backendName:"webgl",kernelFunc:wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cge(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,filter:a}=e,{strides:o,dilations:u,pad:c,dimRoundingMode:d,inputShape:m}=r,g=zs(m,a.shape,o,u,c,d,!0),y=new xge(g);return t.runWebGLProgram(y,[s,a],"float32")}const Tge={kernelName:fS,backendName:"webgl",kernelFunc:Cge};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kge{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ege(n){const{inputs:e,backend:t}=n,{x:r}=e,s=[...r.shape,...r.shape],a=Re(r.shape),o=rt({inputs:{x:r},backend:t,attrs:{shape:[a]}}),u=new kge(a),c=t.runWebGLProgram(u,[o],o.dtype),d=rt({inputs:{x:c},backend:t,attrs:{shape:s}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(c),d}const Nge={kernelName:dS,backendName:"webgl",kernelFunc:Ege};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $ge{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:r,padInfo:s,strideHeight:a,strideWidth:o,filterHeight:u,filterWidth:c,dilationHeight:d,dilationWidth:m}=e,{top:g,left:y}=s;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${o});
      const ivec2 pads = ivec2(${g}, ${y});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${u}; h++) {
          int hIn = hBeg + h * ${d};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${c}; w++) {
              int wIn = wBeg + w * ${m};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ige(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a}=e,{strides:o,pad:u,dilations:c}=r,d=$x(s.shape,a.shape,o,u,"NHWC",c);let m;const g=new $ge(d);m=t.runWebGLProgram(g,[s,a],"float32");const y=rt({inputs:{x:m},backend:t,attrs:{shape:d.outShape}});return t.disposeIntermediateTensorInfo(m),y}const Rge={kernelName:$b,backendName:"webgl",kernelFunc:Ige};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dge(n){const{inputs:e,backend:t,attrs:r}=n,{equation:s}=r,a=e,{allDims:o,summedDims:u,idDims:c}=H2(s,a.length);G2(o.length,c,a);const{path:d,steps:m}=q2(u,c),g=m.length;let y=null,x=o.length;const S=[];for(let k=0;k<g;++k){for(const C of m[k]){const{permutationIndices:N,expandDims:$}=j2(x,c[C]);let A;K2(N)?A=a[C]:(A=Xa({inputs:{x:a[C]},backend:t,attrs:{perm:N}}),S.push(A));const D=A.shape.slice();for(let L=0;L<$.length;++L)D.splice($[L],0,1);Nn(A.shape,D)||(A=rt({inputs:{x:A},backend:t,attrs:{shape:D}}),S.push(A)),y===null?y=A:(y=O_({inputs:{a:A,b:y},backend:t}),S.push(y))}k<g-1&&(d[k]>=0&&(y=lk({inputs:{x:y},backend:t,attrs:{axis:d[k]-(o.length-x),keepDims:!1}}),S.push(y)),x--)}for(const k of S)k!==y&&t.disposeIntermediateTensorInfo(k);return y}const _ge={kernelName:gS,backendName:"webgl",kernelFunc:Dge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Age=Bn({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`}),Oge={kernelName:Gm,backendName:"webgl",kernelFunc:Age};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fge="return (b >= 0.0) ? a : a * (b + 1.0);",Lge=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Mge={kernelName:yS,backendName:"webgl",kernelFunc:n=>{const{inputs:e,backend:t}=n,{dy:r,y:s}=e,a=xe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gy(Lge,r.shape,s.shape):new dp(Fge,r.shape,s.shape);return t.runWebGLProgram(a,[r,s],r.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zge=ma({opSnippet:"return float(a == b);",packedOpSnippet:`
  return vec4(equal(a, b));
`,dtype:"bool",cpuKernelImpl:kde}),Pge={kernelName:Ib,backendName:"webgl",kernelFunc:zge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bge=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${L2};
  float a1 = ${M2};
  float a2 = ${z2};
  float a3 = ${P2};
  float a4 = ${B2};
  float a5 = ${V2};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Vge=Bn({opSnippet:Bge}),Uge={kernelName:qm,backendName:"webgl",kernelFunc:Vge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wge=yy+`
  return exp(x);
`,K4=Bn({opSnippet:Wge,packedOpSnippet:`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cpuKernelImpl:Ede,dtype:"float32"}),Hge={kernelName:Km,backendName:"webgl",kernelFunc:K4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z_(n){const{inputs:e,attrs:t,backend:r}=n,{dim:s}=t,{input:a}=e,o=a.shape.length,u=a.shape.slice();let c=s;return s<0&&(U(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),c=o+s+1),u.splice(c,0,1),rt({inputs:{x:a},backend:r,attrs:{shape:u}})}const jge={kernelName:Rb,backendName:"webgl",kernelFunc:z_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4="return exp(x) - 1.0;",Gge=Bn({opSnippet:X4,packedOpSnippet:X4,cpuKernelImpl:Nde}),qge={kernelName:Xm,backendName:"webgl",kernelFunc:Gge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y4{constructor(e,t,r){this.variableNames=["real","imag"];const s=t[1];this.outputShape=t;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let u;if(e==="real")u="return real * expR - imag * expI;";else if(e==="imag")u="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${u}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4(n,e,t){const r=t.texData.get(n.dataId),s=Re(n.shape),a=n.shape[n.shape.length-1],o=s/a,u=rt({inputs:{x:n},backend:t,attrs:{shape:[o,a]}}),c=u.shape,d=new Y4("real",c,e),m=new Y4("imag",c,e),g=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:c},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:c}],y=t.runWebGLProgram(d,g,"float32"),x=t.runWebGLProgram(m,g,"float32"),S=vd({inputs:{real:y,imag:x},backend:t});t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(x);const k=rt({inputs:{x:S},backend:t,attrs:{shape:n.shape}});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(S),k}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kge(n){const{inputs:e,backend:t}=n,{input:r}=e;return Q4(r,!1,t)}const Xge={kernelName:vS,backendName:"webgl",kernelFunc:Kge};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yge{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A0(n){const{backend:e,attrs:t}=n,{shape:r,value:s}=t;let{dtype:a}=t;if(a=a||wh(s),a==="string"){const o=Gr(a,Re(r));return o.fill(s),e.makeTensorInfo(r,a,o)}else{const o=new Yge(r,s),u=[[s]];return e.runWebGLProgram(o,[],a,u)}}const Qge={kernelName:bS,backendName:"webgl",kernelFunc:A0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zge{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jge={kernelName:xS,backendName:"webgl",kernelFunc:({inputs:n,backend:e})=>{const{image:t}=n,r=e,s=new Zge(t.shape);return r.runWebGLProgram(s,[t],t.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4="return floor(x);",eye=Bn({opSnippet:Z4,packedOpSnippet:Z4,cpuKernelImpl:$de}),tye={kernelName:Ym,backendName:"webgl",kernelFunc:eye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nye=ma({opSnippet:`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,packedOpSnippet:`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,dtype:"int32"}),rye={kernelName:Qm,backendName:"webgl",kernelFunc:nye};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sye{constructor(e){this.variableNames=["A"];const t=qa(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aye{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=qa(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iye={kernelName:nC,backendName:"webgl",kernelFunc:oye};let by,P_=xe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function oye(n){const{inputs:e,backend:t,attrs:r}=n;let{pixels:s}=e;const{numChannels:a}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[c,d]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],m=[d,c],g=[d,c,a];if(u||o){const k=xe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(by==null||k!==P_)&&(P_=k,by=document.createElement("canvas").getContext("2d",{willReadFrequently:P_})),by.canvas.width=c,by.canvas.height=d,by.drawImage(s,0,0,c,d),s=by.canvas}const y=t.makeTensorInfo(m,"int32");t.texData.get(y.dataId).usage=To.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(y.dataId),s);const x=xe().getBool("WEBGL_PACK")?new aye(g):new sye(g),S=t.runWebGLProgram(x,[y],"int32");return t.disposeData(y.dataId),S}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lye(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a,bias:o,preluActivationWeights:u}=e,{strides:c,pad:d,dataFormat:m,dilations:g,dimRoundingMode:y,activation:x,leakyreluAlpha:S}=r,k=Lc(m),C=zs(s.shape,a.shape,c,g,d,y,!1,k);let N;const $=[],A=o!=null,D=u!=null,L=x==="leakyrelu",P=()=>{const B=[s,a],G=(X,re)=>{if(re==="NCHW"&&X.shape.length===1&&X.shape[0]!==1){const ue=rt({inputs:{x:X},backend:t,attrs:{shape:[X.shape[0],1,1]}});return $.push(ue),ue}return X};if(A&&B.push(G(o,m)),D&&B.push(G(u,m)),L){const X=t.makeTensorInfo([],"float32",Rc(S,"float32"));B.push(X),$.push(X)}return B};if(C.filterHeight===1&&C.filterWidth===1&&C.dilationHeight===1&&C.dilationWidth===1&&C.strideHeight===1&&C.strideWidth===1&&(C.padInfo.type==="SAME"||C.padInfo.type==="VALID"))N=B4({x:s,filter:a,convInfo:C,backend:t,bias:o,activation:x,preluActivationWeights:u,leakyreluAlpha:S});else if(C.strideWidth<=2&&k==="channelsLast"&&xe().getBool("WEBGL_EXP_CONV")){const B=x?$0(x,!0):null,G=new P4(C,A,B,D,L),X=[[C.padInfo.top,C.padInfo.left],[C.strideHeight,C.strideWidth],[C.dilationHeight,C.dilationWidth],[C.inHeight,C.inWidth]],re=P();N=t.runWebGLProgram(G,re,"float32",X)}else if(xe().getBool("WEBGL_CONV_IM2COL"))N=V4({x:s,filter:a,convInfo:C,backend:t,bias:o,activation:x,preluActivationWeights:u,leakyreluAlpha:S});else{const B=x?$0(x,!1):null,G=new z4(C,A,B,D,L),X=P();N=t.runWebGLProgram(G,X,"float32")}const W=rt({inputs:{x:N},backend:t,attrs:{shape:C.outShape}});return $.push(N),$.forEach(B=>t.disposeIntermediateTensorInfo(B)),W}const uye={kernelName:gx,backendName:"webgl",kernelFunc:lye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,filter:a,bias:o,preluActivationWeights:u}=e,{strides:c,pad:d,dilations:m,dimRoundingMode:g,activation:y,leakyreluAlpha:x}=r,S=[];let k=m;k==null&&(k=[1,1]),U(la(c,k),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${c} and dilations '${k}'`);const C=zs(s.shape,a.shape,c,k,d,g,!0),N=xe().getBool("WEBGL_PACK_DEPTHWISECONV")&&C.strideWidth<=2&&C.outChannels/C.inChannels===1,$=y?$0(y,N):null,A=[s,a],D=o!=null,L=u!=null,P=y==="leakyrelu";if(D&&A.push(o),L&&A.push(u),P){const X=t.makeTensorInfo([],"float32",Rc(x,"float32"));A.push(X),S.push(X)}let W;N?W=new q4(C,D,$,L,P):W=new G4(C,D,$,L,P);const B=[[C.padInfo.top,C.padInfo.left],[C.strideHeight,C.strideWidth],[C.dilationHeight,C.dilationWidth],[C.inHeight,C.inWidth]],G=t.runWebGLProgram(W,A,"float32",B);return S.forEach(X=>t.disposeIntermediateTensorInfo(X)),G}const fye={kernelName:yx,backendName:"webgl",kernelFunc:cye};class dye{constructor(e,t,r,s){this.sliceDim=e,this.strides=t,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const a=pr(r.length);let o=`
    int index;`;for(let u=0;u<this.sliceDim;u++)o+=`
          index = round(getIndices(coords[0], ${u}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[u]};
          flattenIndex += index * ${this.strides[u]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hye(n){const{inputs:e,backend:t}=n,{params:r,indices:s}=e,a=s.shape,o=a[a.length-1],u=Re(r.shape),[c,d,m,g]=ZC(r,s),y=rt({inputs:{x:s},backend:t,attrs:{shape:[d,o]}}),x=rt({inputs:{x:r},backend:t,attrs:{shape:[Re(r.shape)/m,m]}});if(t.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const N=t.readSync(s.dataId),$=t.bufferSync(r),A=Ide(N,$,r.dtype,d,o,m,g,r.shape,u);return t.makeTensorInfo(c,r.dtype,A.values)}const S=new dye(o,g,[d,m],r.shape),k=t.runWebGLProgram(S,[x,y],x.dtype),C=rt({inputs:{x:k},backend:t,attrs:{shape:c}});return t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(k),C}const pye={kernelName:wS,backendName:"webgl",kernelFunc:hye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mye{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const r=pr(this.rank),s=gye(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function gye(n,e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<n.length;s++)s===2?r.push("index"):r.push(`${t[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,indices:a}=e,{axis:o,batchDims:u}=r,c=wn(o,s.shape)[0];if(xe().get("DEBUG")){const $=t.readSync(a.dataId),A=s.shape[c];for(let D=0;D<$.length;++D){const L=$[D];U(L<=A-1&&L>=0,()=>`GatherV2: the index value ${L} is not in [0, ${A-1}]`)}}const d=Q2(s,a,c,u),m=Re(a.shape),g=[],y=rt({inputs:{x:s},backend:t,attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]}}),x=rt({inputs:{x:a},backend:t,attrs:{shape:[d.batchSize,m/d.batchSize]}});g.push(y),g.push(x);const S=[d.batchSize,d.outerSize,m/d.batchSize,d.sliceSize];if(t.shouldExecuteOnCPU([s,a])||s.dtype==="string"){const $=t.bufferSync(x),A=t.bufferSync(y),D=Rde(A,$,S);return g.forEach(L=>t.disposeIntermediateTensorInfo(L)),t.makeTensorInfo(d.outputShape,D.dtype,D.values)}const k=new mye(y.shape,S),C=t.runWebGLProgram(k,[y,x],y.dtype);g.push(C);const N=rt({inputs:{x:C},backend:t,attrs:{shape:d.outputShape}});return g.forEach($=>t.disposeIntermediateTensorInfo($)),N}const yye={kernelName:_b,backendName:"webgl",kernelFunc:J4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vye=ma({opSnippet:"return float(a > b);",packedOpSnippet:`
  return vec4(greaterThan(a, b));
`,cpuKernelImpl:Dde,dtype:"bool"}),bye={kernelName:Ab,backendName:"webgl",kernelFunc:vye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xye=ma({opSnippet:"return float(a >= b);",packedOpSnippet:`
  return vec4(greaterThanEqual(a, b));
`,dtype:"bool",cpuKernelImpl:_de}),wye={kernelName:Zm,backendName:"webgl",kernelFunc:xye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(n){const{inputs:e,backend:t}=n,{input:r}=e;return Q4(r,!0,t)}const Cye={kernelName:SS,backendName:"webgl",kernelFunc:Sye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tye=Bn({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),kye={kernelName:eg,backendName:"webgl",kernelFunc:Tye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eye=Bn({opSnippet:"return float(isinf(x));",dtype:"bool"}),Nye={kernelName:tg,backendName:"webgl",kernelFunc:Eye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ye=Bn({opSnippet:"return float(isnan(x));",dtype:"bool"}),Iye={kernelName:ng,backendName:"webgl",kernelFunc:$ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rye=ma({opSnippet:"return float(a < b);",packedOpSnippet:`
  return vec4(lessThan(a, b));
`,cpuKernelImpl:Ade,dtype:"bool"}),Dye={kernelName:Fb,backendName:"webgl",kernelFunc:Rye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ye=ma({opSnippet:"return float(a <= b);",packedOpSnippet:`
  return vec4(lessThanEqual(a, b));
`,cpuKernelImpl:Ode,dtype:"bool"}),Aye={kernelName:Lb,backendName:"webgl",kernelFunc:_ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oye(n){const{backend:e,attrs:t}=n,{start:r,stop:s,num:a}=t,o=Fde(r,s,a);return e.makeTensorInfo([o.length],"float32",o)}const Fye={kernelName:TS,backendName:"webgl",kernelFunc:Oye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lye=yy+`
  return x < 0.0 ? 0./0. : log(x);
`,Mye=Bn({opSnippet:Lye,packedOpSnippet:`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,cpuKernelImpl:Lde}),zye={kernelName:rg,backendName:"webgl",kernelFunc:Mye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pye=yy+`
  return log(1.0 + x);
`,Bye=Bn({opSnippet:Pye}),Vye={kernelName:sg,backendName:"webgl",kernelFunc:Bye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uye=ma({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,dtype:"bool"}),Wye={kernelName:Mb,backendName:"webgl",kernelFunc:Uye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hye=Bn({opSnippet:"return float(!(x >= 1.0));"}),jye={kernelName:zb,backendName:"webgl",kernelFunc:Hye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gye=ma({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,dtype:"bool"}),qye={kernelName:Pb,backendName:"webgl",kernelFunc:Gye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kye{constructor(e,t,r,s,a){this.variableNames=["x"],this.outputShape=[];const o=t,u=e[3]-1;this.outputShape=e;let c;const d=`float(${r}) + float(${s}) * sum`;a===.5?c=`inversesqrt(${d})`:a===1?c=`1.0/(${d})`:c=`exp(log(${d}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${u}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${c};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xye{constructor(e,t,r,s,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,u=e[3]-1;this.outputShape=e;let c;const d=`float(${r}) + float(${s}) * sum`;a===.5?c=`inversesqrt(${d})`:a===1?c=`1.0/(${d})`:c=`exp(log(${d}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${u}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${c};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yye={kernelName:Bb,backendName:"webgl",kernelFunc:n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{depthRadius:a,bias:o,alpha:u,beta:c}=r,d=xe().getBool("WEBGL_PACK_NORMALIZATION")?new Xye(s.shape,a,o,u,c):new Kye(s.shape,a,o,u,c);return t.runWebGLProgram(d,[s],s.dtype)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qye{constructor(e,t,r,s,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=s,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zye={kernelName:kS,backendName:"webgl",kernelFunc:n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s,y:a,dy:o}=e,{depthRadius:u,bias:c,alpha:d,beta:m}=r,g=new Qye(s.shape,u,c,d,m);return t.runWebGLProgram(g,[s,a,o],s.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jye(n,e,t,r){const s=Re(e),o=Re(n.shape)/s,u=rt({inputs:{x:n},attrs:{shape:[o,s]},backend:r}),c=pp(u,n.dtype,"max",r),d=rt({inputs:{x:c},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(c),d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eW(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reductionIndices:a,keepDims:o}=r,u=s.shape.length,c=wn(a,s.shape);let d=c;const m=Ur(d,u),g=m!=null,y=t.shouldExecuteOnCPU([s]);let x=s;if(g){if(y){const A=t.texData.get(x.dataId).values,D=new Array(u);for(let W=0;W<D.length;W++)D[W]=s.shape[m[W]];const L=__(A,s.shape,s.dtype,m,D);x=t.makeTensorInfo(D,s.dtype);const P=t.texData.get(x.dataId);P.values=L}else x=ok(s,m,t);d=ns(d.length,u)}ua("max",d,u);const[S,k]=Bs(x.shape,d);let C=S;o&&(C=ts(S,c));let N;if(y){const A=t.texData.get(x.dataId).values,D=Mde(A,Re(k),C,s.dtype);N=t.makeTensorInfo(C,s.dtype);const L=t.texData.get(N.dataId);L.values=D}else N=Jye(x,k,C,t);return g&&t.disposeIntermediateTensorInfo(x),N}const eve={kernelName:Vb,backendName:"webgl",kernelFunc:eW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tve=A_+`
  return max(a, b);
`,nve=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+hp+`
  return result;
`,rve=ma({opSnippet:tve,packedOpSnippet:nve,cpuKernelImpl:zde}),sve={kernelName:ag,backendName:"webgl",kernelFunc:rve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ave(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;fy(s,"maxPool");const{filterSize:a,strides:o,pad:u,dimRoundingMode:c}=r,d=1;U(la(o,d),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${d}'`);const m=Go(s.shape,a,o,d,u,c);if(m.filterWidth===1&&m.filterHeight===1&&Nn(m.inShape,m.outShape))return Xi({inputs:{x:s},backend:t});const g=new I0(m,"max",!1);return t.runWebGLProgram(g,[s],s.dtype)}const ive={kernelName:Ub,backendName:"webgl",kernelFunc:ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ove(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{filterSize:a,strides:o,pad:u,dataFormat:c,dimRoundingMode:d}=r,m=[1,1,1],g=Fc(s.shape,a,o,m,u,d,c),y=new F_(g,"max",!1);return t.runWebGLProgram(y,[s],s.dtype)}const lve={kernelName:Wb,backendName:"webgl",kernelFunc:ove};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uve{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,u=a-1-e.padInfo.top,c=o-1-e.padInfo.left,d=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(${u}, ${c});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${d} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class cve{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,r=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=c-1-e.padInfo.front,y=d-1-e.padInfo.top,x=m-1-e.padInfo.left,S=c*d*m-1;this.userCode=`
      const ivec3 pads = ivec3(${g}, ${y}, ${x});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${d};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${S} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${d} * ${m} +
                  wR * ${m} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fve(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a}=e,o=a,{filterSize:u,strides:c,pad:d,dimRoundingMode:m}=r,g=[1,1,1],y=Fc(o.shape,u,c,g,d,m),x=new F_(y,"max",!0),S=t.runWebGLProgram(x,[o],o.dtype),k=new cve(y),C=t.runWebGLProgram(k,[s,S],o.dtype);return t.disposeIntermediateTensorInfo(S),C}const dve={kernelName:NS,backendName:"webgl",kernelFunc:fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hve(n){const{inputs:e,backend:t,attrs:r}=n,{dy:s,input:a,output:o}=e,u=a;fy([a,o],"maxPoolGrad");const{filterSize:c,strides:d,pad:m,dimRoundingMode:g}=r,y=Go(u.shape,c,d,1,m,g),x=!0,S=new I0(y,"max",x),k=t.runWebGLProgram(S,[u],u.dtype),C=new uve(y),N=t.runWebGLProgram(C,[s,k],u.dtype);return t.disposeIntermediateTensorInfo(k),N}const pve={kernelName:ES,backendName:"webgl",kernelFunc:hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mve(n,e,t,r){let s=new I0(t,"max",!1);const a=r.runWebGLProgram(s,[n],"float32");s=new I0(t,"max",!0,!0,e);const o=r.runWebGLProgram(s,[n],"float32");return[a,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gve={kernelName:$S,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{filterSize:s,strides:a,pad:o,includeBatchInIndex:u}=e,c=t;U(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const d=[1,1];U(la(a,d),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`);const m=Go(r.shape,s,a,d,o),[g,y]=mve(r,u,m,c);return[g,y]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yve(n,e,t,r){const s=Re(e),o=Re(n.shape)/s,u=rt({inputs:{x:n},attrs:{shape:[o,s]},backend:r}),c=pp(u,"float32","mean",r),d=rt({inputs:{x:c},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(c),d}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vve={kernelName:Hb,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{x:r}=n,{keepDims:s,axis:a}=e,o=t,u=r.shape.length,c=wn(a,r.shape);let d=c;const m=Ur(d,u),g=m!=null,y=o.shouldExecuteOnCPU([r]),x=[];let S=r;if(g){if(y){const D=o.texData.get(S.dataId).values,L=new Array(u);for(let B=0;B<L.length;B++)L[B]=r.shape[m[B]];const P=__(D,r.shape,r.dtype,m,L);S=o.makeTensorInfo(L,r.dtype);const W=o.texData.get(S.dataId);W.values=P}else S=ok(r,m,o);x.push(S),d=ns(d.length,u)}ua("sum",d,u);const[k,C]=Bs(S.shape,d);let N=k;s&&(N=ts(k,c));const $=yve(S,C,N,o);for(const A of x)o.disposeIntermediateTensorInfo(A);return $}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bve(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r,u=s.shape.length,c=wn(a,s.shape);let d=c;const m=Ur(d,u);let g=s;m!=null&&(g=Xa({inputs:{x:s},backend:t,attrs:{perm:m}}),d=ns(d.length,s.shape.length)),ua("min",d,u);const[y,x]=Bs(g.shape,d),S=Re(x),k=rt({inputs:{x:g},backend:t,attrs:{shape:[-1,S]}}),C=pp(k,k.dtype,"min",t);let N;if(o){const $=ts(y,c);N=rt({inputs:{x:C},backend:t,attrs:{shape:$}})}else N=rt({inputs:{x:C},backend:t,attrs:{shape:y}});return t.disposeIntermediateTensorInfo(k),t.disposeIntermediateTensorInfo(C),m!=null&&t.disposeIntermediateTensorInfo(g),N}const xve={kernelName:jb,backendName:"webgl",kernelFunc:bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wve=A_+`
  return min(a, b);
`,Sve=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+hp+`
  return result;
`,Cve=ma({opSnippet:wve,packedOpSnippet:Sve,cpuKernelImpl:Pde}),Tve={kernelName:ig,backendName:"webgl",kernelFunc:Cve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kve{constructor(e,t,r){this.variableNames=["x"],this.outputShape=t.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,a=pr(s),o=t.map(m=>m[0]).join(","),u=t.map((m,g)=>m[0]+e[g]).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),d=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${u};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${d};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${d};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${u});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${d};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${d};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${c}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eve{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((S,k)=>S[0]+e[k]+S[1]);const s=e.length,a=pr(s),o=t.map(S=>S[0]).join(","),u=t.map((S,k)=>S[0]+e[k]).join(","),c=Ka("rc",s),d=Ka("source",s),m=`${c[s-1]} < ${this.outputShape[s-1]}`,g=s===1?"source":`vec2(${d.slice(-2).join()})`,y=r==="reflect"?0:1;let x="";if(s===1){const S=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${y};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${y};
        }
        source -= start;
      `;x=`
        ${a} rc = outputLoc;
        ${S}
        result[0] = getChannel(getX(${d.join()}), ${g});
        ${c[s-1]} += 1;
        if(${m}) {
          ${S}
          result[1] = getChannel(getX(${d.join()}), ${g});
        }
      `}else{const S=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${y}) +
                gte * ((end - 1) * 2 - source + ${y});
        source -= start;
      `;x=`
        ${a} rc = outputLoc;
        ${S}
        result[0] = getChannel(getX(${d.join()}), ${g});
        ${c[s-1]} += 1;
        if(${m}) {
          ${S}
          result[1] = getChannel(getX(${d.join()}), ${g});
        }
        rc = outputLoc;
        ${c[s-2]} += 1;
        if(${c[s-2]} < ${this.outputShape[s-2]}) {
          ${S}
          result[2] = getChannel(getX(${d.join()}), ${g});
          ${c[s-1]} += 1;
          if(${m}) {
            ${S}
            result[3] = getChannel(getX(${d.join()}), ${g});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${u});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nve={kernelName:Gb,backendName:"webgl",kernelFunc:({inputs:n,backend:e,attrs:t})=>{const{x:r}=n,{paddings:s,mode:a}=t,o=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Eve(r.shape,s,a):new kve(r.shape,s,a);return e.runWebGLProgram(o,[r],r.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ve=`if (b == 0.0) return NAN;
  return mod(a, b);`,Ive=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+hp+`
  return result;
`,Rve=ma({opSnippet:$ve,packedOpSnippet:Ive}),Dve={kernelName:og,backendName:"webgl",kernelFunc:Rve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ve{constructor(e,t,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tW=ma({opSnippet:`
if (a == b) {
  return 1.0;
};
return a / b;`,packedOpSnippet:`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,checkOutOfBounds:!0}),Ave={kernelName:jm,backendName:"webgl",kernelFunc:tW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nW="return a - b;",rW=ma({opSnippet:nW,packedOpSnippet:nW,supportsComplex:!0,cpuKernelImpl:ihe}),Ove={kernelName:Cg,backendName:"webgl",kernelFunc:rW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sW(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{dim:a}=r,o=wn([a],s.shape),u=eW({inputs:{x:s},backend:t,attrs:{reductionIndices:o,keepDims:!1}}),c=ts(u.shape,o),d=rt({inputs:{x:u},backend:t,attrs:{shape:c}}),m=rW({inputs:{a:s,b:d},backend:t}),g=K4({inputs:{x:m},backend:t}),y=lk({inputs:{x:g},backend:t,attrs:{axis:o,keepDims:!1}}),x=rt({inputs:{x:y},backend:t,attrs:{shape:c}}),S=tW({inputs:{a:g,b:x},backend:t});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(x),S}const Fve={kernelName:cx,backendName:"webgl",kernelFunc:sW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lve(n){const{inputs:e,backend:t,attrs:r}=n,{logits:s}=e,{numSamples:a,seed:o,normalized:u}=r,c=u?s:sW({inputs:{logits:s},backend:t,attrs:{dim:s.shape.length-1}}),d=c.shape[0],m=c.shape[1],g=new _ve(d,m,a),y=[[o]],x=t.runWebGLProgram(g,[c],"int32",y);return u||t.disposeIntermediateTensorInfo(c),x}const Mve={kernelName:IS,backendName:"webgl",kernelFunc:Lve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zve=el+`
  return -x;
`,Pve=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Bve(n){const{inputs:e,backend:t}=n,{x:r}=e;if(t.shouldExecuteOnCPU([r])){const a=t.texData.get(r.dataId),[o,u]=Vde(a.values,r.shape,r.dtype);return t.makeTensorInfo(u,r.dtype,o)}let s;return xe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new yd(r.shape,Pve):s=new Bu(r.shape,zve),t.runWebGLProgram(s,[r],r.dtype)}const Vve={kernelName:qb,backendName:"webgl",kernelFunc:Bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uve=qC;function Wve(n){go("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:o,iouThreshold:u,scoreThreshold:c}=r,d=t.readSync(s.dataId),m=t.readSync(a.dataId),{selectedIndices:g}=Uve(d,m,o,u,c);return t.makeTensorInfo([g.length],"int32",new Int32Array(g))}const Hve={kernelName:RS,backendName:"webgl",kernelFunc:Wve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jve=KC;function Gve(n){go("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:o,iouThreshold:u,scoreThreshold:c,padToMaxOutputSize:d}=r,m=t.readSync(s.dataId),g=t.readSync(a.dataId),{selectedIndices:y,validOutputs:x}=jve(m,g,o,u,c,d);return[t.makeTensorInfo([y.length],"int32",new Int32Array(y)),t.makeTensorInfo([],"int32",new Int32Array([x]))]}const qve={kernelName:DS,backendName:"webgl",kernelFunc:Gve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kve=XC;function Xve(n){go("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:t,attrs:r}=n,{boxes:s,scores:a}=e,{maxOutputSize:o,iouThreshold:u,scoreThreshold:c,softNmsSigma:d}=r,m=t.readSync(s.dataId),g=t.readSync(a.dataId),y=o,x=u,S=c,k=d,{selectedIndices:C,selectedScores:N}=Kve(m,g,y,x,S,k);return[t.makeTensorInfo([C.length],"int32",new Int32Array(C)),t.makeTensorInfo([N.length],"float32",new Float32Array(N))]}const Yve={kernelName:_S,backendName:"webgl",kernelFunc:Xve};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qve{constructor(e,t,r,s){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zve={kernelName:Yb,backendName:"webgl",kernelFunc:n=>{const{inputs:e,backend:t,attrs:r}=n,{indices:s}=e,{dtype:a,depth:o,onValue:u,offValue:c}=r,d=Re(s.shape),m=new Qve(d,o,u,c),g=rt({inputs:{x:s},backend:t,attrs:{shape:[d]}}),y=t.runWebGLProgram(m,[g],a);t.disposeIntermediateTensorInfo(g);const x=[...s.shape,o],S=rt({inputs:{x:y},backend:t,attrs:{shape:x}});return t.disposeIntermediateTensorInfo(y),S}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pk(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="complex64"){const s=R0({inputs:{input:r},backend:t}),a=pk({inputs:{x:s},backend:t}),o=dk({inputs:{input:r},backend:t}),u=pk({inputs:{x:o},backend:t}),c=vd({inputs:{real:a,imag:u},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(u),c}else return A0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:t})}const Jve={kernelName:px,backendName:"webgl",kernelFunc:pk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aW(n){const{inputs:e,backend:t}=n,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=R0({inputs:{input:r},backend:t}),a=aW({inputs:{x:s},backend:t}),o=dk({inputs:{input:r},backend:t}),u=pk({inputs:{x:o},backend:t}),c=vd({inputs:{real:a,imag:u},backend:t});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(u),c}else return A0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:t})}const ebe={kernelName:Xb,backendName:"webgl",kernelFunc:aW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(n){const{inputs:e,backend:t,attrs:r}=n,{axis:s}=r;if(e.length===1)return z_({inputs:{input:e[0]},backend:t,attrs:{dim:s}});const a=e[0].shape,o=e[0].dtype;e.forEach(m=>{aa(a,m.shape,"All tensors passed to stack must have matching shapes"),U(o===m.dtype,()=>"All tensors passed to stack must have matching dtypes")});const u=[],c=e.map(m=>{const g=z_({inputs:{input:m},backend:t,attrs:{dim:s}});return u.push(g),g}),d=M4({inputs:c,backend:t,attrs:{axis:s}});return u.forEach(m=>t.disposeIntermediateTensorInfo(m)),d}const nbe={kernelName:Qb,backendName:"webgl",kernelFunc:tbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rbe{constructor(e,t,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((d,m)=>d[0]+e[m]+d[1]);const s=e.length,a=pr(s),o=t.map(d=>d[0]).join(","),u=t.map((d,m)=>d[0]+e[m]).join(","),c=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${u};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${u});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${c}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sbe{constructor(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((k,C)=>k[0]+e[C]+k[1]);const s=e.length,a=pr(s),o=t.map(k=>k[0]).join(","),u=t.map((k,C)=>k[0]+e[C]).join(","),c=Ka("rc",s),d=Ka("source",s),m=`${c[s-1]} < ${this.outputShape[s-1]}`,g=s===1?"source":`vec2(${d.slice(-2).join()})`,y=[`${a} rc = outputLoc;`,`${c[s-1]} += 1;
       if(${m}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${c[s-2]} += 1;
       if(${c[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${c[s-1]} += 1;
         if(${m}) {`],x=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let S="";for(let k=0,C=s===1?2:4;k<C;k++)S+=`
        ${y[k]}
        if (${x}) {
          result[${k}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${k}] = getChannel(getX(${d.join()}), ${g});
        }
      `;S+=s===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${u});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${S}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iW=n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{paddings:a,constantValue:o}=r;if(Re(s.shape)===0){const d=a.map((m,g)=>m[0]+s.shape[g]+m[1]);return A0({backend:t,attrs:{shape:d,value:o,dtype:s.dtype}})}const u=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sbe(s.shape,a,o):new rbe(s.shape,a,o),c=[[o]];return t.runWebGLProgram(u,[s],s.dtype,c)},abe={kernelName:Zb,backendName:"webgl",kernelFunc:iW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ibe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,obe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+hp+`
  return result;
`,lbe=ma({opSnippet:ibe,packedOpSnippet:obe}),ube={kernelName:ug,backendName:"webgl",kernelFunc:lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{axis:a,keepDims:o}=r,u=s.shape.length,c=[],d=wn(a,s.shape);let m=d;const g=Ur(m,u);let y=s;g!=null&&(y=Xa({inputs:{x:s},backend:t,attrs:{perm:g}}),m=ns(m.length,u),c.push(y)),ua("prod",m,u);let x;if(t.shouldExecuteOnCPU([y])){const S=t.texData.get(y.dataId).values,{outVals:k,outShape:C,outDtype:N}=Wde(y.shape,y.dtype,S,m);x=t.makeTensorInfo(C,N,k)}else{const[S,k]=Bs(y.shape,m),C=Re(k),N=rt({inputs:{x:y},backend:t,attrs:{shape:[-1,C]}}),$=uC(s.dtype),A=pp(N,$,"prod",t);x=rt({inputs:{x:A},backend:t,attrs:{shape:S}}),c.push(N),c.push(A)}if(o){c.push(x);const S=ts(x.shape,d);x=rt({inputs:{x},backend:t,attrs:{shape:S}})}return c.forEach(S=>t.disposeIntermediateTensorInfo(S)),x}const fbe={kernelName:ex,backendName:"webgl",kernelFunc:cbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(n){const{inputs:e,backend:t,attrs:r}=n,{paramsNestedSplits:s,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:u}=r,c=s.map(N=>t.readSync(N.dataId)),d=s.map(N=>N.shape),m=t.readSync(a.dataId),g=t.readSync(o.dataId),[y,x,S]=Hde(c,d,m,a.shape,a.dtype,g,o.shape,u),k=y.map(N=>t.makeTensorInfo([N.length],"int32",N)),C=t.makeTensorInfo(S,a.dtype,x);return k.concat([C])}const hbe={kernelName:AS,backendName:"webgl",kernelFunc:dbe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pbe(n){const{inputs:e,backend:t}=n,{starts:r,limits:s,deltas:a}=e,o=t.readSync(r.dataId),u=t.readSync(s.dataId),c=t.readSync(a.dataId),[d,m]=jde(o,r.shape,r.dtype,u,s.shape,c,a.shape),g=t.makeTensorInfo([d.length],"int32",d),y=t.makeTensorInfo([m.length],r.dtype,m);return[g,y]}const mbe={kernelName:OS,backendName:"webgl",kernelFunc:pbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gbe(n){const{inputs:e,backend:t,attrs:r}=n,{shape:s,values:a,defaultValue:o,rowPartitionTensors:u}=e,{rowPartitionTypes:c}=r,d=t.readSync(s.dataId),m=t.readSync(a.dataId),g=t.readSync(o.dataId),y=u.map(C=>t.readSync(C.dataId)),x=u.map(C=>C.shape),[S,k]=Gde(d,s.shape,m,a.shape,a.dtype,g,o.shape,y,x,c);return t.makeTensorInfo(S,a.dtype,k)}const ybe={kernelName:FS,backendName:"webgl",kernelFunc:gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oW=n=>{const{backend:e,attrs:t}=n,{start:r,stop:s,step:a,dtype:o}=t,u=qde(r,s,a,o);return e.makeTensorInfo([u.length],o,u)},vbe={kernelName:LS,backendName:"webgl",kernelFunc:oW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bbe=Bn({opSnippet:"return 1.0 / x;"}),xbe={kernelName:cg,backendName:"webgl",kernelFunc:bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wbe=el+`
  return (x < 0.0) ? 0.0 : x;
`,Sbe=Bn({opSnippet:wbe,packedOpSnippet:`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`}),Cbe={kernelName:fg,backendName:"webgl",kernelFunc:Sbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tbe=el+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,kbe=Bn({opSnippet:Tbe,packedOpSnippet:`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`}),Ebe={kernelName:dg,backendName:"webgl",kernelFunc:kbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nbe{constructor(e,t,r,s,a){this.variableNames=["A"],this.outputShape=[];const[o,u,c,d]=e;this.outputShape=[o,t,r,d];const m=[s&&t>1?u-1:u,s&&r>1?c-1:c],g=[s&&t>1?t-1:t,s&&r>1?r-1:r];let y;a?y="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":y="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${m[0]/g[0]},
          ${m[1]/g[1]});
      const vec2 inputShapeRC = vec2(${u}.0, ${c}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${y};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $be{constructor(e,t,r,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,u,c,d]=e;this.outputShape=[o,t,r,d];const m=[s&&t>1?u-1:u,s&&r>1?c-1:c],g=[s&&t>1?t-1:t,s&&r>1?r-1:r];let y;a?y="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":y="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${m[0]/g[0]},
          ${m[1]/g[1]},
          ${m[1]/g[1]});
      const vec3 inputShapeRC = vec3(${u}.0, ${c}.0,
                                     ${c}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${y};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${d-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ibe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:a,halfPixelCenters:o,size:u}=r,[c,d]=u,m=xe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new $be(s.shape,c,d,a,o):new Nbe(s.shape,c,d,a,o);return t.runWebGLProgram(m,[s],"float32")}const Rbe={kernelName:rx,backendName:"webgl",kernelFunc:Ibe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dbe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,s,a]=t,[,o,u]=e,c=[r&&o>1?s-1:s,r&&u>1?a-1:a],d=[r&&o>1?o-1:o,r&&u>1?u-1:u],m=c[0]/d[0],g=c[1]/d[1],y=1/m,x=1/g,S=Math.ceil(y)*2+2,k=Math.ceil(x)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${m});
        const float widthScale = float(${g});

        const float invHeightScale = float(${y});
        const float invWidthScale = float(${x});

        const int winHeight = int(${S});
        const int winWidth = int(${k});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${u}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:a}=e,{alignCorners:o}=r,u=new Dbe(a.shape,s.shape,o);return t.runWebGLProgram(u,[a],a.dtype)}const Abe={kernelName:PS,backendName:"webgl",kernelFunc:_be};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Obe{constructor(e,t,r,s,a){this.variableNames=["A"],this.outputShape=[];const[o,u,c,d]=e;this.outputShape=[o,t,r,d];const m=[s&&t>1?u-1:u,s&&r>1?c-1:c],g=[s&&t>1?t-1:t,s&&r>1?r-1:r],y=s?"0.5":"0.0";let x;a?x="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":x="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${m[0]/g[0]},
          ${m[1]/g[1]});
      const vec2 inputShapeRC = vec2(${u}.0, ${c}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${x};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${y})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fbe{constructor(e,t,r,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,u,c,d]=e;this.outputShape=[o,t,r,d];const m=[s&&t>1?u-1:u,s&&r>1?c-1:c],g=[s&&t>1?t-1:t,s&&r>1?r-1:r],y=s?"0.5":"0.0";let x;a?x="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":x="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${m[0]/g[0]},
          ${m[1]/g[1]},
          ${m[1]/g[1]});
      const vec3 inputShapeRC = vec3(${u}.0, ${c}.0,
                                     ${c}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${x};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${y})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${d-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s}=e,{alignCorners:a,halfPixelCenters:o,size:u}=r,[c,d]=u,m=xe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Fbe(s.shape,c,d,a,o):new Obe(s.shape,c,d,a,o);return t.runWebGLProgram(m,[s],s.dtype)}const Mbe={kernelName:nx,backendName:"webgl",kernelFunc:Lbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zbe{constructor(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,s,a]=t,[,o,u]=e,c=[r&&o>1?s-1:s,r&&u>1?a-1:a],d=[r&&o>1?o-1:o,r&&u>1?u-1:u],m=c[0]/d[0],g=c[1]/d[1],y=1/m,x=1/g,S=Math.ceil(y)*2+2,k=Math.ceil(x)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${m});
        const float widthScale = float(${g});

        const float invHeightScale = float(${y});
        const float invWidthScale = float(${x});

        const int winHeight = int(${S});
        const int winWidth = int(${k});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${u}) {
              continue;
            }

            float sourceFracRow =
              float(${c[0]}) *
                (float(dyR) / float(${d[0]}));

            float sourceFracCol =
                float(${c[1]}) *
                  (float(dyC) / float(${d[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbe(n){const{inputs:e,backend:t,attrs:r}=n,{images:s,dy:a}=e,{alignCorners:o}=r,u=new zbe(a.shape,s.shape,o);return t.runWebGLProgram(u,[a],a.dtype)}const Bbe={kernelName:zS,backendName:"webgl",kernelFunc:Pbe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vbe{constructor(e,t){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=u=>t.indexOf(u)!==-1&&e[u]!==1?`${e[u]} - coords[${u}] - 1`:`coords[${u}]`,a=e.map((u,c)=>s(c)).join(","),o=pr(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ube{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Ka("rc",r),a=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,u=pr(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${u} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${c(s.slice())};
          if(${a}){
            result.g = ${d(s.slice())};
          }
          if(${o}) {
            result.b = ${m(s.slice())};
            if(${a}) {
              result.a = ${g(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function c(S){return y(S)}function d(S){return S[r-1]="("+S[r-1]+" + 1)",y(S)}function m(S){return S[r-2]="("+S[r-2]+" + 1)",y(S)}function g(S){return S[r-1]="("+S[r-1]+" + 1)",S[r-2]="("+S[r-2]+" + 1)",y(S)}function y(S){const k=e.map(($,A)=>x(A,S)),C=k.join(","),N=k.slice(-2).join(",");return`getChannel(getX(${C}), vec2(${N}))`}function x(S,k){return t.indexOf(S)!==-1&&e[S]!==1?`${e[S]} - ${k[S]} - 1`:`${k[S]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{dims:a}=r,o=s.shape.length,u=wn(a,s.shape);if(o===0)return Xi({inputs:{x:s},backend:t});const c=xe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ube(s.shape,u):new Vbe(s.shape,u);return t.runWebGLProgram(c,[s],s.dtype)}const Hbe={kernelName:sx,backendName:"webgl",kernelFunc:Wbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jbe{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let a="";typeof t=="number"?a=`float outputValue = ${t.toFixed(2)};`:a=`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gbe={kernelName:rC,backendName:"webgl",kernelFunc:({inputs:n,attrs:e,backend:t})=>{const{image:r}=n,{radians:s,fillValue:a,center:o}=e,u=t,c=new jbe(r.shape,a),[d,m]=A2(o,r.shape[1],r.shape[2]),g=[[d,m,Math.sin(s),Math.cos(s)]];return u.runWebGLProgram(c,[r],r.dtype,g)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qbe=Bn({opSnippet:`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`}),Kbe={kernelName:hg,backendName:"webgl",kernelFunc:qbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xbe=Bn({opSnippet:"return inversesqrt(x);",cpuKernelImpl:Kde}),Ybe={kernelName:pg,backendName:"webgl",kernelFunc:Xbe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B_{constructor(e,t,r,s,a,o,u=!0,c=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const d=pr(a.length),m=pr(o.length);let g="";r===1?g="i":r===2&&(g="i, j");const y=`getIndices(${g})`;let x="";s===1?x="i":s===2&&(x="i, coords[1]");const S=`getUpdates(${x})`;let k="";c&&(k="coords[0], coords[1]");const C=`getDefaultValue(${k})`,N=t>1?"strides[j]":"strides";this.userCode=`
        ${d} strides = ${d}(${a});

        void main() {
          ${m} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${y});
              flattenedIndex += index * ${N};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${S};
              found = true;
            }
          }
          setOutput(mix(${C}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qbe{constructor(e,t,r,s,a,o,u=!0,c=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const d=pr(a.length),m=pr(o.length);let g="";r===1?g="i":r===2&&(g="i, j");const y=`getIndices(${g})`;let x="";s===1?x="i":s===2&&(x="i, coords[1]");const S=`getUpdates(${x})`;let k="";c&&(k="coords[0], coords[1]");const C=`getDefaultValue(${k})`,N=t>1?"strides[j]":"strides",$=t>1?"strides[j + 1]":"strides";this.userCode=`
        ${d} strides = ${d}(${a});

        void main() {
          ${m} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${t}; j+=2) {
              ivec4 index = round(${y});
              flattenedIndex += index.xz * ${N};
              if (j + 1 < ${t}) {
                flattenedIndex += index.yw * ${$};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${S};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${C}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbe(n){const{inputs:e,backend:t,attrs:r}=n,{indices:s,updates:a}=e,{shape:o}=r,{sliceRank:u,numUpdates:c,sliceSize:d,strides:m,outputSize:g}=sd(a,s,o),y=[g/d,d];if(g===0)return t.makeTensorInfo(o,s.dtype);const x=rt({inputs:{x:s},backend:t,attrs:{shape:[c,u]}}),S=rt({inputs:{x:a},backend:t,attrs:{shape:[c,d]}}),k=t.makeTensorInfo([],"float32",new Float32Array([0]));let C;xe().getBool("WEBGL_PACK")?C=new Qbe(c,u,x.shape.length,S.shape.length,m,y):C=new B_(c,u,x.shape.length,S.shape.length,m,y);const N=t.runWebGLProgram(C,[S,x,k],S.dtype),$=rt({inputs:{x:N},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(S),t.disposeIntermediateTensorInfo(N),t.disposeIntermediateTensorInfo(k),$}const Jbe={kernelName:BS,backendName:"webgl",kernelFunc:Zbe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class exe{constructor(e,t,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,u=xe().getNumber("WEBGL_VERSION")===2?a:o,c=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${u}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${c} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(n){const{inputs:e,backend:t,attrs:r}=n,{sortedSequence:s,values:a}=e,{side:o}=r,u=new exe(s.shape[0],s.shape[1],a.shape[1],o),c=[[s.shape[1]]];return t.runWebGLProgram(u,[s,a],"int32",c)}const nxe={kernelName:US,backendName:"webgl",kernelFunc:txe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rxe{constructor(e,t,r){this.variableNames=["c","a","b"],this.outputShape=t;let s,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",s="resRC";else{const u=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=[];for(let m=0;m<t.length;m++)d.push(`${u[m]}`),m<e&&c.push(`${u[m]}`);s=c.join(),a=d.join()}const o=pr(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sxe(n){const{inputs:e,backend:t}=n,{condition:r,t:s,e:a}=e,o=new rxe(r.shape.length,s.shape,s.shape.length);return t.runWebGLProgram(o,[r,s,a],pi(s.dtype,a.dtype))}const axe={kernelName:ax,backendName:"webgl",kernelFunc:sxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ixe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${tT};
  float scale = ${nT};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,oxe=Bn({opSnippet:ixe}),lxe={kernelName:mg,backendName:"webgl",kernelFunc:oxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uxe=yy+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,cxe=Bn({opSnippet:uxe,packedOpSnippet:`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cpuKernelImpl:Yde}),fxe={kernelName:bg,backendName:"webgl",kernelFunc:cxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dxe=Bn({opSnippet:`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`}),hxe={kernelName:vg,backendName:"webgl",kernelFunc:dxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pxe=yy+`
  return sin(x);
`,mxe=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${hp}
  return result;
`,gxe=Bn({opSnippet:pxe,packedOpSnippet:mxe}),yxe={kernelName:gg,backendName:"webgl",kernelFunc:gxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vxe=Bn({opSnippet:`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`}),bxe={kernelName:yg,backendName:"webgl",kernelFunc:vxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xxe=Bn({opSnippet:`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`}),wxe={kernelName:xg,backendName:"webgl",kernelFunc:xxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sxe={kernelName:lx,backendName:"webgl",kernelFunc:n=>{const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{blockShape:a,paddings:o}=r;U(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const u=a.reduce((N,$)=>N*$),c=[[0,0]];c.push(...o);for(let N=1+a.length;N<s.shape.length;++N)c.push([0,0]);const d=[],m=iW({inputs:{x:s},backend:t,attrs:{paddings:c,constantValue:0}}),g=Xx(m.shape,a,u,!1),y=Yx(g.length,a.length,!1),x=Qx(m.shape,a,u,!1),S=rt({inputs:{x:m},backend:t,attrs:{shape:g}}),k=Xa({inputs:{x:S},backend:t,attrs:{perm:y}}),C=rt({inputs:{x:k},backend:t,attrs:{shape:x}});return d.push(m),d.push(S),d.push(k),d.forEach(N=>t.disposeIntermediateTensorInfo(N)),C}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(n){const{inputs:e,backend:t}=n,{indices:r,values:s,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const u=t.readSync(r.dataId),c=t.readSync(s.dataId),d=t.readSync(a.dataId),m=t.readSync(o.dataId)[0],[g,y,x,S,k]=Zde(u,r.shape,r.dtype,c,s.dtype,d,m);return[t.makeTensorInfo(y,r.dtype,g),t.makeTensorInfo([y[0]],s.dtype,x),t.makeTensorInfo([S.length],"bool",new Uint8Array(S.map(C=>Number(C)))),t.makeTensorInfo([k.length],r.dtype,new Int32Array(k))]}const Txe={kernelName:WS,backendName:"webgl",kernelFunc:Cxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(n){const{inputs:e,backend:t}=n,{inputIndices:r,inputShape:s,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(t.readSync(s.dataId)),u=t.readSync(r.dataId),c=Array.from(t.readSync(a.dataId)),[d,m,g]=Jde(u,r.shape,r.dtype,o,c);return[t.makeTensorInfo(m,r.dtype,d),t.makeTensorInfo([g.length],a.dtype,new Int32Array(g))]}const Exe={kernelName:HS,backendName:"webgl",kernelFunc:kxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxe(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const o=t.readSync(r.dataId),u=t.readSync(s.dataId),c=t.readSync(a.dataId),[d,m]=c4(o,r.shape,r.dtype,u,c,!0);return t.makeTensorInfo(m,r.dtype,d)}const $xe={kernelName:jS,backendName:"webgl",kernelFunc:Nxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(n){const{inputs:e,backend:t}=n,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const o=t.readSync(r.dataId),u=t.readSync(s.dataId),c=t.readSync(a.dataId),[d,m]=c4(o,r.shape,r.dtype,u,c);return t.makeTensorInfo(m,r.dtype,d)}const Rxe={kernelName:GS,backendName:"webgl",kernelFunc:Ixe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(n){const{inputs:e,backend:t,attrs:r}=n,{sparseIndices:s,sparseValues:a,defaultValue:o}=e,{outputShape:u}=r,{sliceRank:c,numUpdates:d,sliceSize:m,strides:g,outputSize:y}=sd(a,s,u),x=!1;if(a.dtype==="string"){const N=t.bufferSync(s),$=t.bufferSync(a),A=Dc(t.readSync(o.dataId)[0]),D=Xde(N,$,u,y,m,d,c,g,A,x);return t.makeTensorInfo(u,D.dtype,D.values)}const S=new B_(d,c,s.shape.length,a.shape.length,g,[y,1],x),k=t.runWebGLProgram(S,[a,s,o],a.dtype),C=rt({inputs:{x:k},backend:t,attrs:{shape:u}});return t.disposeIntermediateTensorInfo(k),C}const _xe={kernelName:qS,backendName:"webgl",kernelFunc:Dxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Axe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{numOrSizeSplits:a,axis:o}=r,u=wn(o,s.shape)[0],c=X2(s,a,u),d=s.shape.length,m=new Array(d).fill(0),g=s.shape.slice();return c.map(y=>{const x=[...g];x[u]=y;const S=vy({inputs:{x:s},backend:t,attrs:{begin:m,size:x}});return m[u]+=y,S})}const Oxe={kernelName:ux,backendName:"webgl",kernelFunc:Axe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lW="return sqrt(x);",Fxe=Bn({opSnippet:lW,packedOpSnippet:lW,cpuKernelImpl:ehe}),Lxe={kernelName:wg,backendName:"webgl",kernelFunc:Fxe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mxe=Bn({opSnippet:"return x * x;"}),zxe={kernelName:KS,backendName:"webgl",kernelFunc:Mxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uW="return (a - b) * (a - b);",Pxe=ma({opSnippet:uW,packedOpSnippet:uW}),Bxe={kernelName:Sg,backendName:"webgl",kernelFunc:Pxe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const a=t.readSync(s.dataId),o=Wc(a),u=the(o,"string",r);return t.makeTensorInfo(s.shape,"string",u)}const Uxe={kernelName:fx,backendName:"webgl",kernelFunc:Vxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe({inputs:n,attrs:e,backend:t}){const{x:r}=n,s=el+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new Bu(r.shape,s);return t.runWebGLProgram(a,[r],r.dtype)}const Hxe={kernelName:Ng,backendName:"webgl",kernelFunc:Wxe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jxe{constructor(e,t,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,a=pr(r.length),o=pr(r.length);let u="";if(s===1)u="coords * strides + begin";else{let c=0;u=r.map((d,m)=>(c++,r.length===1?`coords * strides[${m}] + begin[${m}]`:`coords[${c-1}] * strides[${m}] + begin[${m}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${t});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${u}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{begin:a,end:o,strides:u,beginMask:c,endMask:d,ellipsisMask:m,newAxisMask:g,shrinkAxisMask:y}=r,{finalShapeSparse:x,finalShape:S,isIdentity:k,sliceDim0:C,isSimpleSlice:N,begin:$,end:A,strides:D}=I2(s.shape,a,o,u,c,d,m,g,y);let L;if(k)L=rt({inputs:{x:s},backend:t,attrs:{shape:S}});else if(C||N){U(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const W=E2($,A,D),B=vy({inputs:{x:s},backend:t,attrs:{begin:$,size:W}});L=rt({inputs:{x:B},backend:t,attrs:{shape:S}}),t.disposeIntermediateTensorInfo(B)}else if(t.shouldExecuteOnCPU([s])){const B=t.readSync(s.dataId),G=gn(s.shape,s.dtype,B),X=nhe(x,G,D,$);L=t.makeTensorInfo(S,s.dtype,X.values)}else{const B=new jxe($,D,x);L=t.runWebGLProgram(B,[s],s.dtype)}const P=rt({inputs:{x:L},backend:t,attrs:{shape:S}});return t.disposeIntermediateTensorInfo(L),P}const qxe={kernelName:XS,backendName:"webgl",kernelFunc:Gxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kxe(n){const{inputs:e,backend:t,attrs:r}=n,{separator:s,nGramWidths:a,leftPad:o,rightPad:u,padWidth:c,preserveShortSequences:d}=r,{data:m,dataSplits:g}=e,y=t.readSync(m.dataId),x=t.readSync(g.dataId),[S,k]=rhe(y,x,s,a,o,u,c,d);return[t.makeTensorInfo([S.length],"string",S),t.makeTensorInfo(g.shape,"int32",k)]}const Xxe={kernelName:YS,backendName:"webgl",kernelFunc:Kxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(n){const{inputs:e,backend:t,attrs:r}=n,{skipEmpty:s}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const u=t.readSync(a.dataId),c=t.readSync(o.dataId)[0],[d,m,g]=she(u,c,s),y=m.length;return[t.makeTensorInfo([y,2],"int32",d),t.makeTensorInfo([y],"string",m),t.makeTensorInfo([2],"int32",new Int32Array(g))]}const Qxe={kernelName:QS,backendName:"webgl",kernelFunc:Yxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zxe(n){const{inputs:e,backend:t,attrs:r}=n,{numBuckets:s}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=t.readSync(a.dataId),u=ahe(o,s);return t.makeTensorInfo(a.shape,"int32",u)}const Jxe={kernelName:ZS,backendName:"webgl",kernelFunc:Zxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e0e=Bn({opSnippet:"return tan(x);"}),t0e={kernelName:Tg,backendName:"webgl",kernelFunc:e0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n0e=Bn({opSnippet:`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`}),r0e={kernelName:kg,backendName:"webgl",kernelFunc:n0e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0e(n){const{inputs:e,backend:t,attrs:r}=n,{tensor:s,indices:a,updates:o}=e,{sliceRank:u,numUpdates:c,sliceSize:d,strides:m,outputSize:g}=sd(o,a,s.shape),y=[g/d,d];if(g===0)return t.makeTensorInfo(s.shape,a.dtype);const x=rt({inputs:{x:a},backend:t,attrs:{shape:[c,u]}}),S=rt({inputs:{x:o},backend:t,attrs:{shape:[c,d]}}),k=rt({inputs:{x:s},backend:t,attrs:{shape:y}}),C=new B_(c,u,x.shape.length,S.shape.length,m,y,!1,!0),N=t.runWebGLProgram(C,[S,x,k],k.dtype),$=rt({inputs:{x:N},backend:t,attrs:{shape:s.shape}});return t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(S),t.disposeIntermediateTensorInfo(k),t.disposeIntermediateTensorInfo(N),$}const a0e={kernelName:VS,backendName:"webgl",kernelFunc:s0e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i0e{constructor(e,t){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*t[o];this.outputShape=r,this.rank=r.length;const s=pr(this.rank),a=o0e(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function o0e(n){const e=n.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${n[0]})`;const t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<n.length;s++)r.push(`imod(${t[s]}, ${n[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cW(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{reps:a}=r;if(s.dtype==="string"||s.shape.length>5){const c=t.readSync(s.dataId),d=s.dtype==="string"?c.map(y=>Dc(y)):c,m=gn(s.shape,s.dtype,d),g=ohe(m,a);return t.makeTensorInfo(g.shape,g.dtype,g.values)}const o=new i0e(s.shape,a);return t.runWebGLProgram(o,[s],s.dtype)}const l0e={kernelName:Eg,backendName:"webgl",kernelFunc:cW};class u0e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class c0e{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mp(n,e){e!==null&&n.disposeIntermediateTensorInfo(e)}function fW(n){let e=1;for(;e<n;)e*=2;return e}function f0e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s}=e,{k:a,sorted:o}=r,u=xe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=xe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),d=s.shape,m=d[d.length-1];if(t.shouldExecuteOnCPU([s])||m<u||a>c){const X=t.readSync(s.dataId),[re,ue]=lhe(X,d,s.dtype,a,o);return[t.makeTensorInfo(re.shape,re.dtype,re.values),t.makeTensorInfo(ue.shape,ue.dtype,ue.values)]}if(a===0)return d[d.length-1]=0,[t.makeTensorInfo(d,s.dtype,[]),t.makeTensorInfo(d,"int32",[])];if(m===1)return[s,A0({attrs:{shape:d,dtype:"int32",value:0},backend:t})];const g=t.texData.get(s.dataId),y=g!==null&&g.isPacked,x=y?t.unpackTensor(s):s,k=Re(d)/m,C=rt({inputs:{x},attrs:{shape:[k,m]},backend:t});y&&mp(t,x);const N=fW(a),$=fW(m);let A=null;const D=()=>A===null?[C,C]:[C,A],L=(X,re,ue)=>{const ne=D(),me=new u0e(ue),be=[[m],[A===null?1:0],[Number.NEGATIVE_INFINITY],[X],[re]],pe=A;A=t.runWebGLProgram(me,ne,"int32",be),mp(t,pe)};for(let X=1;X<N;X*=2){const re=X*2;for(let ue=X;ue>=1;ue/=2)L(re,ue,[k,$])}for(let X=$;X>N;X/=2){const re=D(),ue=new c0e([k,X/2]),me=[[m],[A===null?1:0],[N]],ge=A;A=t.runWebGLProgram(ue,re,"int32",me),mp(t,ge);const be=N/2,pe=be*2;for(let te=be;te>=1;te/=2)L(pe,te,A.shape)}let P=A;A=vy({inputs:{x:A},backend:t,attrs:{begin:0,size:[k,a]}}),mp(t,P);let W=J4({inputs:{x:C,indices:A},backend:t,attrs:{axis:1,batchDims:1}});mp(t,C);const B=d.slice(0,-1);B.push(a),P=A,A=rt({inputs:{x:A},attrs:{shape:B},backend:t}),mp(t,P);const G=W;return W=rt({inputs:{x:W},attrs:{shape:B},backend:t}),mp(t,G),[W,A]}const d0e={kernelName:JS,backendName:"webgl",kernelFunc:f0e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h0e{constructor(e,t,r,s,a,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const u=r==="nearest"?1:2;let c;switch(s){case"constant":c=1;break;case"reflect":c=2;break;case"wrap":c=3;break;case"nearest":c=4;break;default:c=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${c} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${c} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${c} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${u} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p0e(n){const{inputs:e,backend:t,attrs:r}=n,{image:s,transforms:a}=e,{interpolation:o,fillMode:u,fillValue:c,outputShape:d}=r,[m,g,y,x]=s.shape,[S,k]=d??[g,y],C=[m,S,k,x],N=new h0e(g,y,o,u,c,C);return t.runWebGLProgram(N,[s,a],"float32")}const m0e={kernelName:eC,backendName:"webgl",kernelFunc:p0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0e(n){const{inputs:e,attrs:t,backend:r}=n,{axis:s}=t,{x:a}=e;fy(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(a.dataId),{outputValues:u,outputShape:c,indices:d}=uhe(o,s,a.shape,a.dtype);return[r.makeTensorInfo(c,a.dtype,u),r.makeTensorInfo([d.length],"int32",d)]}const y0e={kernelName:tC,backendName:"webgl",kernelFunc:g0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0e(n){const{inputs:e,backend:t,attrs:r}=n,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const o=s,u=o.shape.length,c=s.shape[a],d=new Array(u-1);let m=0;for(let k=0;k<u;k++)k!==a&&(d[m++]=o.shape[k]);const g=[],y=new Array(u).fill(0),x=o.shape.slice();x[a]=1;const S=new Array(c);for(let k=0;k<S.length;k++){y[a]=k;const C=vy({inputs:{x:o},backend:t,attrs:{begin:y,size:x}}),N=rt({inputs:{x:C},backend:t,attrs:{shape:d}});S[k]=N,g.push(C)}return g.forEach(k=>t.disposeIntermediateTensorInfo(k)),S}const b0e={kernelName:dx,backendName:"webgl",kernelFunc:v0e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x0e{constructor(e,t){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,a=e.inSize,o=e.numSegments,u=o*Math.ceil(a/r);this.outputShape=[s,u];const c="0.0",d="sumValue",m=Math.floor(r/4)*4,g=r%4,y=`
        sumValue += dot(values, segFilter);
    `;let x="";a%r>0&&(x=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let S="";a%r>0&&(S=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${c};

      float getValue(int batch, int inIdx) {
        ${x}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${S}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${m}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${y}
        }

        int inIdx = inOffset + ${m};
        if (${g===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${y}
        } else if (${g===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${y}
        } else if (${g===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${y}
        }
        setOutput(${d});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0e(n){const{inputs:e,backend:t,attrs:r}=n,{x:s,segmentIds:a}=e,{numSegments:o}=r,u=s.shape.length,c=[];let d=0;const m=Ur([d],u);let g=s;m!=null&&(g=Xa({inputs:{x:s},backend:t,attrs:{perm:m}}),c.push(g),d=ns(1,u)[0]);const y=k3(g.shape,d,o),x=Re([g.shape[d]]),S=rt({inputs:{x:g},backend:t,attrs:{shape:[-1,x]}});c.push(S);const k=uC(s.dtype),C=(D,L,P,W,B)=>{const G=D.shape[0],X=D.shape[1],re=T3(X,B),ue={windowSize:re,inSize:X,batchSize:G,numSegments:B},ne=new x0e(ue,L),me=t.compileAndRun(ne,[D,P],W);if(c.push(me),me.shape[1]===B)return me;const ge=oW({backend:t,attrs:{start:0,stop:B,step:1,dtype:"float32"}}),be=cW({inputs:{x:ge},backend:t,attrs:{reps:[X/re]}});return c.push(ge),c.push(be),C(me,L,be,W,B)},N=C(S,"unsortedSegmentSum",a,k,o),$=rt({inputs:{x:N},backend:t,attrs:{shape:y}});let A=$;if(m!=null){c.push($);const D=Zf(m);A=Xa({inputs:{x:A},backend:t,attrs:{perm:D}})}return c.forEach(D=>t.disposeIntermediateTensorInfo(D)),A}const S0e={kernelName:hx,backendName:"webgl",kernelFunc:w0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0e=[tpe,rpe,ipe,upe,fpe,ppe,gpe,vpe,Spe,Tpe,Npe,Rpe,Ape,Mpe,Bpe,Upe,Hpe,Kpe,Ype,Zpe,tme,ome,ume,hme,mme,xme,Sme,Eme,zhe,Ime,Ome,zme,Hme,qme,Xme,Qme,Jme,rge,age,oge,uge,fge,hge,gge,vge,Sge,Tge,Nge,Rge,_ge,Oge,Mge,Pge,Uge,Hge,jge,qge,Xge,Qge,Jge,tye,rye,iye,uye,fye,pye,yye,bye,wye,Mhe,Cye,_me,kye,Nye,Iye,Bhe,Dye,Aye,Fye,zye,Vye,Wye,jye,qye,Yye,Zye,eve,sve,ive,lve,dve,pve,gve,vve,xve,Tve,Nve,Dve,Mve,Whe,Vve,Hve,qve,Yve,gme,Zve,ebe,nbe,abe,ube,Uhe,fbe,hbe,mbe,ybe,vbe,yme,Ave,xbe,Cbe,Ebe,jhe,Rbe,Abe,Mbe,Bbe,Hbe,Gbe,Kbe,Ybe,Jbe,nxe,axe,lxe,fxe,hxe,yxe,bxe,ime,Fve,wxe,Sxe,Txe,Exe,$xe,Rxe,_xe,Oxe,Lxe,zxe,Bxe,Uxe,Hxe,qxe,Xxe,Qxe,Jxe,Ove,Zhe,t0e,r0e,a0e,l0e,d0e,m0e,Jhe,y0e,b0e,S0e,Jve];for(const n of C0e)aC(n);/** @license See the LICENSE file. */const T0e="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k0e=Object.freeze(Object.defineProperty({__proto__:null,Abs:db,Acos:Am,Acosh:Om,AdadeltaOptimizer:h2,AdagradOptimizer:p2,AdamOptimizer:m2,AdamaxOptimizer:g2,Add:Ch,AddN:hb,All:Y1,Any:Q1,ArgMax:pb,ArgMin:mb,Asin:Fm,Asinh:Lm,Atan:Mm,Atan2:Pm,Atanh:zm,AvgPool:gb,AvgPool3D:yb,AvgPool3DGrad:J1,AvgPoolGrad:Z1,BatchMatMul:vb,BatchToSpaceND:bb,Bincount:eS,BitwiseAnd:xb,BroadcastArgs:tS,BroadcastTo:RL,Callback:mB,CallbackList:iP,Cast:Bm,Ceil:Vm,ClipByValue:Um,Complex:nS,ComplexAbs:wb,Concat:Sb,Conv2D:Cb,Conv2DBackpropFilter:rS,Conv2DBackpropInput:Tb,Conv3D:kb,Conv3DBackpropFilterV2:sS,Conv3DBackpropInputV2:aS,Cos:Wm,Cosh:Hm,CropAndResize:oS,Cumprod:iS,Cumsum:Eb,CustomCallback:lP,DataStorage:m$,DenseBincount:lS,DepthToSpace:uS,DepthwiseConv2dNative:Nb,DepthwiseConv2dNativeBackpropFilter:cS,DepthwiseConv2dNativeBackpropInput:fS,Diag:dS,Dilation2D:$b,Dilation2DBackpropFilter:pS,Dilation2DBackpropInput:hS,Draw:mS,get ENV(){return w$},EarlyStopping:yB,Einsum:gS,Elu:Gm,EluGrad:yS,Environment:$L,Equal:Ib,Erf:qm,Exp:Km,ExpandDims:Rb,Expm1:Xm,FFT:vS,Fill:bS,FlipLeftRight:xS,Floor:Ym,FloorDiv:Qm,FromPixels:nC,FusedBatchNorm:Db,FusedConv2D:gx,FusedDepthwiseConv2D:yx,GPGPUContext:ak,GatherNd:wS,GatherV2:_b,GraphModel:t_,Greater:Ab,GreaterEqual:Zm,History:oP,IFFT:SS,Identity:Jm,Imag:CS,InputSpec:bs,IsFinite:eg,IsInf:tg,IsNan:ng,KernelBackend:H1,LRN:Bb,LRNGrad:kS,LayerVariable:Z3,LayersModel:jc,LeakyRelu:Ob,Less:Fb,LessEqual:Lb,LinSpace:TS,Log:rg,Log1p:sg,LogSoftmax:DL,LogicalAnd:Mb,LogicalNot:zb,LogicalOr:Pb,LogicalXor:O6,LowerBound:F6,MathBackendCPU:g0,MathBackendWebGL:N0,MatrixBandPart:L6,Max:Vb,MaxPool:Ub,MaxPool3D:Wb,MaxPool3DGrad:NS,MaxPoolGrad:ES,MaxPoolWithArgmax:$S,Maximum:ag,Mean:Hb,Min:jb,Minimum:ig,MirrorPad:Gb,Mod:og,MomentumOptimizer:y2,Multinomial:IS,Multiply:lg,Neg:qb,NonMaxSuppressionV3:RS,NonMaxSuppressionV4:DS,NonMaxSuppressionV5:_S,NotEqual:Kb,OP_SCOPE_SUFFIX:P$,OneHot:Yb,OnesLike:Xb,Optimizer:Vc,OptimizerConstructors:e3,Pack:Qb,PadV2:Zb,Pool:M6,Pow:ug,Prelu:Jb,Prod:ex,RMSPropOptimizer:v2,RNN:ql,RaggedGather:AS,RaggedRange:OS,RaggedTensorToTensor:FS,Range:LS,get Rank(){return R$},Real:MS,RealDiv:jm,Reciprocal:cg,get Reduction(){return Ga},Relu:fg,Relu6:dg,Reshape:tx,ResizeBilinear:rx,ResizeBilinearGrad:PS,ResizeNearestNeighbor:nx,ResizeNearestNeighborGrad:zS,Reverse:sx,RotateWithOffset:rC,Round:hg,Rsqrt:pg,SGDOptimizer:YC,ScatterNd:BS,SearchSorted:US,Select:ax,Selu:mg,Sequential:ep,Sigmoid:bg,Sign:vg,Sin:gg,Sinh:yg,Slice:ix,Softmax:cx,Softplus:xg,SpaceToBatchND:lx,SparseFillEmptyRows:WS,SparseReshape:HS,SparseSegmentMean:jS,SparseSegmentSum:GS,SparseToDense:qS,SplitV:ux,Sqrt:wg,Square:KS,SquaredDifference:Sg,StaticRegexReplace:fx,Step:Ng,StridedSlice:XS,StringNGrams:YS,StringSplit:QS,StringToHashBucketFast:ZS,Sub:Cg,Sum:ox,SymbolicTensor:Ul,Tan:Tg,Tanh:kg,Tensor:Pn,TensorBuffer:ms,TensorScatterUpdate:VS,Tile:Eg,TopK:JS,Transform:eC,Transpose:Th,Unique:tC,Unpack:dx,UnsortedSegmentSum:hx,UpperBound:z6,Variable:Tx,ZerosLike:px,_FusedMatMul:mx,abs:gs,acos:J$,acosh:eI,add:Be,addN:CM,all:pC,any:Nx,argMax:Ah,argMin:tI,asin:nI,asinh:rI,atan:sI,atan2:aI,atanh:iI,avgPool:Dx,avgPool3d:uI,backend:U$,backend_util:N3,basicLSTMCell:TM,batchNorm:Lg,batchNorm2d:cI,batchNorm3d:fI,batchNorm4d:dI,batchToSpaceND:_x,bincount:hI,bitwiseAnd:kM,booleanMaskAsync:cz,broadcastArgs:EM,broadcastTo:Fh,broadcast_util:p8,browser:$9,buffer:gn,callbacks:Hne,cast:nt,ceil:pI,clipByValue:gi,clone:$u,complex:Ac,concat:es,concat1d:mI,concat2d:gI,concat3d:yI,concat4d:vI,constraints:IJ,conv1d:mC,conv2d:Mc,conv2dTranspose:gC,conv3d:xI,conv3dTranspose:wI,copyRegisteredKernels:U6,cos:Ax,cosh:yC,cosineWindow:UC,cumprod:Ox,cumsum:vC,customGrad:Ru,data:Mse,denseBincount:bC,deprecationWarn:b5,depthToSpace:SI,depthwiseConv2d:Mg,deregisterOp:Gne,device_util:h5,diag:$M,dilation2d:CI,disableDeprecationWarnings:v5,dispose:un,disposeVariables:x5,div:It,divNoNan:TI,dot:kI,dropout:i2,einsum:zh,elu:zg,enableDebugMode:y5,enableProdMode:g5,enclosingPowerOfTwo:o2,engine:Fl,ensureShape:IM,env:xe,equal:Ui,erf:xC,euclideanNorm:NI,exp:yi,expandDims:ca,expm1:$I,eye:wC,fft:qx,fill:Lh,findBackend:E5,findBackendFactory:N5,floor:Vg,floorDiv:hC,forceHalfFloat:v4,fused:bz,gather:Ug,gatherND:pz,gather_util:I9,getBackend:iM,getGradient:T$,getKernel:bx,getKernelsForBackend:sC,gpgpu_util:yde,grad:Q8,grads:Z8,greater:Ha,greaterEqual:zc,ifft:Kg,imag:Fx,image:Ko,inTopKAsync:mz,initializers:jJ,input:IP,io:C2,irfft:LC,isFinite:II,isInf:RI,isNaN:DI,keep:Es,kernel_impls:z9,layers:xne,leakyRelu:Lx,less:Wg,lessEqual:Jf,linalg:f2,linspace:_M,loadGraphModel:Zre,loadGraphModelSync:Jre,loadLayersModel:Fee,localResponseNormalization:_I,log:Wi,log1p:Mx,logSigmoid:AI,logSoftmax:CC,logSumExp:zx,logicalAnd:qo,logicalNot:Px,logicalOr:TC,logicalXor:OI,losses:$z,lowerBound:OM,matMul:Sn,math:b9,max:yo,maxPool:Bx,maxPool3d:FI,maxPoolWithArgmax:FM,maximum:Du,mean:Wr,memory:B$,meshgrid:LM,metrics:Mne,min:Pg,minimum:ed,mirrorPad:LI,mod:MI,model:zee,models:zne,moments:Vx,movingAverage:fz,mul:ae,multiRNNCell:MM,multinomial:zM,neg:Sr,nextFrame:R2,norm:Bg,notEqual:Bh,oneHot:Hg,ones:vi,onesLike:Hi,op:J,outerProduct:PM,pad:Pc,pad1d:BM,pad2d:VM,pad3d:UM,pad4d:WM,pool:zI,pow:Iu,prelu:Wx,print:Z$,prod:PI,profile:w5,raggedGather:HM,raggedRange:jM,raggedTensorToTensor:GM,rand:qM,randomGamma:QM,randomNormal:NC,randomStandardNormal:ZM,randomUniform:td,randomUniformInt:JM,range:Uh,ready:T5,real:Gg,reciprocal:YI,registerBackend:V$,registerCallbackConstructor:Bee,registerGradient:_L,registerKernel:aC,registerOp:jne,regularizers:Une,relu:Ml,relu6:$C,removeBackend:k5,reshape:oe,reverse:bo,reverse1d:ez,reverse2d:tz,reverse3d:nz,reverse4d:rz,rfft:Kx,round:IC,rsqrt:RC,scalar:Ft,scatterND:dz,scatter_util:ZX,searchSorted:EC,selu:DC,separableConv2d:_C,sequential:Pee,serialization:J7,setBackend:C5,setPlatform:$5,setWebGLContext:pU,setdiff1dAsync:sz,shared:KV,sigmoid:Ll,sign:QI,signal:Nz,sin:AC,sinh:OC,slice:Dn,slice1d:Hx,slice2d:FC,slice3d:jx,slice4d:qg,slice_util:Zz,softmax:Gx,softplus:Ph,spaceToBatchND:Ux,sparse:Iz,sparseToDense:hz,spectral:Ez,split:bi,sqrt:Vs,square:hr,squaredDifference:MC,squeeze:nd,stack:ja,step:Wh,stridedSlice:ZI,string:Rz,sub:bt,sum:Ct,sumOutType:uC,tan:JI,tanh:Qf,tensor:Vi,tensor1d:fa,tensor2d:rd,tensor3d:e2,tensor4d:az,tensor5d:iz,tensor6d:oz,tensorScatterUpdate:lz,tensor_util:l5,test_util:fX,tidy:ve,tile:vo,time:S5,topk:n2,train:qh,transpose:Rn,truncatedNormal:PC,unique:r2,unregisterGradient:V6,unregisterKernel:B6,unsortedSegmentSum:BC,unstack:xo,upcastType:pi,upperBound:uz,util:Y6,valueAndGrad:J8,valueAndGrads:eK,variable:s2,variableGrads:AM,version:{"tfjs-core":Jz,"tfjs-backend-cpu":XV,"tfjs-backend-webgl":y4,"tfjs-data":XB,"tfjs-layers":$T,"tfjs-converter":RB,tfjs:T0e},version_converter:RB,version_core:Jz,version_cpu:XV,version_layers:$T,version_webgl:y4,webgl:Lhe,webgl_util:Cfe,where:Ps,whereAsync:a2,zeros:vs,zerosLike:_n},Symbol.toStringTag,{value:"Module"}));Ec.HumanVerify=W1,Ec.HumanVerifySDK=h$,Ec.default=h$,Ec.defineWebComponent=p$,Object.defineProperties(Ec,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=human-verify.umd.js.map
